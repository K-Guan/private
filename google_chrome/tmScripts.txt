{"created_by":"Tampermonkey","version":"1","scripts":[{"name":"Stack Exchange CV Request Generator","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":["/^https?:\\/\\/\\w*.?(stackexchange.com|stackoverflow.com|serverfault.com|superuser.com|askubuntu.com|stackapps.com|mathoverflow.net)\\/q(uestions)?\\/\\d+/","/^https?:\\/\\/\\w*.?stackoverflow.com/tools/new-answers-old-questions.*/"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_connects":["stackoverflow.com","rawgit.com","raw.githubusercontent.com"],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null,"user_agent":""},"storage":{"data":{},"ts":1456451831270},"enabled":true,"position":1,"file_url":"https://rawgit.com/SO-Close-Vote-Reviewers/UserScripts/master/SECloseVoteRequestGenerator.user.js","uuid":"92eb7581-a2c9-462d-af44-7eb8c903f8cb","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgIFN0YWNrIEV4Y2hhbmdlIENWIFJlcXVlc3QgR2VuZXJhdG9yCi8vIEBuYW1lc3BhY2UgICAgICBodHRwczovL2dpdGh1Yi5jb20vU08tQ2xvc2UtVm90ZS1SZXZpZXdlcnMvCi8vIEB2ZXJzaW9uICAgICAgICAxLjUuNwovLyBAZGVzY3JpcHRpb24gICAgVGhpcyBzY3JpcHQgZ2VuZXJhdGVzIGZvcm1hdHRlZCBjbG9zZSB2b3RlIHJlcXVlc3RzIGFuZCBzZW5kcyB0aGVtIHRvIGEgc3BlY2lmaWVkIGNoYXQgcm9vbQovLyBAYXV0aG9yICAgICAgICAgQFRpbnlHaWFudAovLyBAaW5jbHVkZSAgICAgICAgL15odHRwcz86XC9cL1x3Ki4/KHN0YWNrZXhjaGFuZ2UuY29tfHN0YWNrb3ZlcmZsb3cuY29tfHNlcnZlcmZhdWx0LmNvbXxzdXBlcnVzZXIuY29tfGFza3VidW50dS5jb218c3RhY2thcHBzLmNvbXxtYXRob3ZlcmZsb3cubmV0KVwvcSh1ZXN0aW9ucyk/XC9cZCsvCi8vIEBpbmNsdWRlICAgICAgICAvXmh0dHBzPzpcL1wvXHcqLj9zdGFja292ZXJmbG93LmNvbS90b29scy9uZXctYW5zd2Vycy1vbGQtcXVlc3Rpb25zLiovCi8vIEByZXF1aXJlICAgICAgICBodHRwczovL2NvZGUuanF1ZXJ5LmNvbS9qcXVlcnktMi4xLjQubWluLmpzCi8vIEBncmFudCAgICAgICAgICBHTV94bWxodHRwUmVxdWVzdAovLyA9PS9Vc2VyU2NyaXB0PT0KCmlmKHR5cGVvZiBTdGFja0V4Y2hhbmdlID09PSAidW5kZWZpbmVkIikKICAgIHZhciBTdGFja0V4Y2hhbmdlID0gdW5zYWZlV2luZG93LlN0YWNrRXhjaGFuZ2U7CgooZnVuY3Rpb24oKXsKICAgIHZhciByZWFzb25zID0gewogICAgICAgICd0JzogJ3RvbyBicm9hZCcsIAogICAgICAgICd1JzogJ3VuY2xlYXInLAogICAgICAgICdwJzogJ3BvYicsIAogICAgICAgICdkJzogJ2R1cGxpY2F0ZScsCiAgICAgICAgJ20nOiAnbm8gbWN2ZScsCiAgICAgICAgJ3InOiAnbm8gcmVwcm8nLAogICAgICAgICdzJzogJ3N1cGVydXNlcicsCiAgICAgICAgJ2YnOiAnc2VydmVyZmF1bHQnLAogICAgICAgICdsJzogJ2xpYnJhcnkvdG9vbC9yZXNvdXJjZScsCiAgICAgICAgJ2cnOiAnZ2ltbWUtdGVoLWNvZGV6JywKICAgICAgICBnZXQ6IGZ1bmN0aW9uKHIpIHsgIAogICAgICAgICAgICB2YXIgYSA9IHIuc3BsaXQoJyAnKTsKICAgICAgICAgICAgYS5mb3JFYWNoKGZ1bmN0aW9uKHYsaSl7IAogICAgICAgICAgICAgICAgYVtpXSA9IHJlYXNvbnNbdl0gJiYgdiAhPT0gJ2dldCcgPyByZWFzb25zW3ZdIDogdjsgCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICByZXR1cm4gYS5qb2luKCcgJyk7IAogICAgICAgIH0KICAgIH07CgogICAgdmFyIFVSTCA9ICJodHRwczovL3Jhd2dpdC5jb20vU08tQ2xvc2UtVm90ZS1SZXZpZXdlcnMvVXNlclNjcmlwdHMvbWFzdGVyL1NFQ2xvc2VWb3RlUmVxdWVzdEdlbmVyYXRvci51c2VyLmpzIjsKICAgIHZhciBub3RpZnlpbnQgPSAwOwogICAgZnVuY3Rpb24gbm90aWZ5KG0sdCkgewogICAgICAgIHZhciB0aW1lb3V0OwogICAgICAgIChmdW5jdGlvbihpKXsKICAgICAgICAgICAgdmFyIGRpdiA9ICQoJyNub3RpZnktJyArIChpIC0gMSkpOwogICAgICAgICAgICBpZihkaXYubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7CiAgICAgICAgICAgICAgICBpZihpID4gMSlTdGFja0V4Y2hhbmdlLm5vdGlmeS5jbG9zZShpLTEpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIFN0YWNrRXhjaGFuZ2Uubm90aWZ5LnNob3cobSxpKTsKICAgICAgICAgICAgaWYodCkgdGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIFN0YWNrRXhjaGFuZ2Uubm90aWZ5LmNsb3NlKGkpOwogICAgICAgICAgICB9LHQpOwogICAgICAgIH0pKCsrbm90aWZ5aW50KTsKICAgIH0KCiAgICBmdW5jdGlvbiBpc1ZlcnNpb25OZXdlcihwcm9wb3NlZCwgY3VycmVudCkgewogICAgICAgIHByb3Bvc2VkID0gcHJvcG9zZWQuc3BsaXQoIi4iKTsKICAgICAgICBjdXJyZW50ID0gY3VycmVudC5zcGxpdCgiLiIpOwoKICAgICAgICB3aGlsZSAocHJvcG9zZWQubGVuZ3RoIDwgY3VycmVudC5sZW5ndGgpIHByb3Bvc2VkLnB1c2goIjAiKTsKICAgICAgICB3aGlsZSAoY3VycmVudC5sZW5ndGggPCBwcm9wb3NlZC5sZW5ndGgpIGN1cnJlbnQucHVzaCgiMCIpOwoKICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHByb3Bvc2VkLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgIGlmIChwYXJzZUludChwcm9wb3NlZFtpXSkgPiBwYXJzZUludChjdXJyZW50W2ldKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHBhcnNlSW50KHByb3Bvc2VkW2ldKSA8IHBhcnNlSW50KGN1cnJlbnRbaV0pKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoZWNrVXBkYXRlcyhmb3JjZSkgeyAKICAgICAgICBHTV94bWxodHRwUmVxdWVzdCh7CiAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsCiAgICAgICAgICAgIHVybDogJ2h0dHBzOi8vcmF3Z2l0LmNvbS9TTy1DbG9zZS1Wb3RlLVJldmlld2Vycy9Vc2VyU2NyaXB0cy9tYXN0ZXIvU0VDbG9zZVZvdGVSZXF1ZXN0R2VuZXJhdG9yLnZlcnNpb24nLAogICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICB2YXIgVkVSU0lPTiA9IHJlc3BvbnNlLnJlc3BvbnNlVGV4dC50cmltKCk7CiAgICAgICAgICAgICAgICBpZihpc1ZlcnNpb25OZXdlcihWRVJTSU9OLEdNX2luZm8uc2NyaXB0LnZlcnNpb24pKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGxhc3RBY2tub3dsZWRnZWRWZXJzaW9uID0gZ2V0U3RvcmFnZSgnTGFzdEFja25vd2xlZGdlZFZlcnNpb24nKTsKICAgICAgICAgICAgICAgICAgICBpZihsYXN0QWNrbm93bGVkZ2VkVmVyc2lvbiAhPSBWRVJTSU9OIHx8IGZvcmNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNvbmZpcm0oJ0EgbmV3IHZlcnNpb24gb2YgVGhlIENsb3NlIFZvdGUgUmVxdWVzdCBHZW5lcmF0b3IgaXMgYXZhaWxhYmxlLCB3b3VsZCB5b3UgbGlrZSB0byBpbnN0YWxsIGl0IG5vdz8nKSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gVVJMOwogICAgICAgICAgICAgICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRTdG9yYWdlKCdMYXN0QWNrbm93bGVkZ2VkVmVyc2lvbicsVkVSU0lPTik7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSBlbHNlIGlmKGZvcmNlKSBub3RpZnkoJ05vIG5ldyB2ZXJzaW9uIGF2YWlsYWJsZScpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9CgogICAgZnVuY3Rpb24gaGlkZU1lbnUoKSB7CiAgICAgICAgY2xvc2VUYXJnZXQoKTsKICAgICAgICAkKCdkaXYnLCBDVlJHVUkuaXRlbXMuc2VuZCkuaGlkZSgpOwogICAgICAgIENWUkdVSS5saXN0LmhpZGUoKTsKICAgIH0KCiAgICBmdW5jdGlvbiBzZW5kUmVxdWVzdChyZXN1bHQpIHsKICAgICAgICBSb29tTGlzdC5nZXRSb29tKGZ1bmN0aW9uKHJvb20pewogICAgICAgICAgICBHTV94bWxodHRwUmVxdWVzdCh7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgICAgICAgICAgdXJsOiByb29tLnVybCwKICAgICAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24ocmVzcG9uc2UpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZmtleSA9IHJlc3BvbnNlLnJlc3BvbnNlVGV4dC5tYXRjaCgvaGlkZGVuIiB2YWx1ZT0iKFtcZGFiY2RlZl17MzJ9KS8pWzFdOwogICAgICAgICAgICAgICAgICAgIGlmKCFma2V5KSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5vdGlmeSgnRmFpbGVkIHJldHJpZXZpbmcga2V5LCBpcyB0aGUgcm9vbSBVUkwgdmFsaWQ/Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgR01feG1saHR0cFJlcXVlc3QoewogICAgICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgICAgICAgICAgICAgdXJsOiByb29tLmhvc3QgKyAnL2NoYXRzLycgKyByb29tLmlkICsgJy9tZXNzYWdlcy9uZXcnLAogICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7J0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQnfSwKICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogJ3RleHQ9JyArIGVuY29kZVVSSUNvbXBvbmVudChyZXN1bHQpICsgJyZma2V5PScgKyBma2V5LAogICAgICAgICAgICAgICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90aWZ5KCdDbG9zZSB2b3RlIHJlcXVlc3Qgc2VudC4nLDEwMDApOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZU1lbnUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICAgICAgb25lcnJvcjogZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZnkoJ0ZhaWxlZCBzZW5kaW5nIGNsb3NlIHZvdGUgcmVxdWVzdC4nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVNZW51KCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICBvbmVycm9yOiBmdW5jdGlvbigpIHsKICAgICAgICAgICAgICAgICAgICBub3RpZnkoJ0ZhaWxlZCByZXRyaWV2aW5nIGZrZXkgZnJvbSBjaGF0LicpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgIH0KCiAgICBmdW5jdGlvbiBhcHBlbmRJbmZvKCkgewogICAgICAgIGlmKGdldFN0b3JhZ2UoJ2FwcGVuZEluZm8nKSA9PT0gIjEiKSByZXR1cm4gdHJ1ZTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICB9CgogICAgdmFyIFJvb21MaXN0ID0ge307CiAgICBSb29tTGlzdC5yb29tcyA9IHt9OwogICAgUm9vbUxpc3Quc2F2ZSA9IGZ1bmN0aW9uKCkgewogICAgICAgIHNldFN0b3JhZ2UoJ3Jvb21zJyxKU09OLnN0cmluZ2lmeSh0aGlzLnJvb21zKSk7CiAgICAgICAgY29uc29sZS5sb2coZ2V0U3RvcmFnZSgncm9vbXMnKSk7CiAgICB9OwogICAgUm9vbUxpc3QuZWFjaCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7CiAgICAgICAgZm9yKHZhciBpIGluIHRoaXMucm9vbXMpCiAgICAgICAgICAgIGNhbGxiYWNrKHRoaXMucm9vbXNbaV0saSk7CiAgICAgICAgcmV0dXJuIHRoaXM7CiAgICB9OwogICAgUm9vbUxpc3Quc2VhcmNoID0gZnVuY3Rpb24oa2V5LHZhbHVlKSB7CiAgICAgICAgdmFyIHN1Y2Nlc3M7CiAgICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uKHJvb20pewogICAgICAgICAgICBpZihyb29tW2tleV0gPT09IHZhbHVlKQogICAgICAgICAgICAgICAgc3VjY2VzcyA9IHJvb207CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHN1Y2Nlc3M7CiAgICB9OwogICAgUm9vbUxpc3QuY291bnQgPSBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gT2JqZWN0LmtleXModGhpcy5yb29tcykubGVuZ3RoOwogICAgfTsKICAgIFJvb21MaXN0Lm5hbWUgPSBmdW5jdGlvbihuYW1lKSAgeyByZXR1cm4gdGhpcy5zZWFyY2goJ25hbWUnLG5hbWUpOyAgfTsKICAgIFJvb21MaXN0LmluZGV4ID0gZnVuY3Rpb24obmFtZSkgeyByZXR1cm4gdGhpcy5zZWFyY2goJ2luZGV4JyxuYW1lKTsgfTsKICAgIFJvb21MaXN0LmlkID0gZnVuY3Rpb24obmFtZSkgICAgeyByZXR1cm4gdGhpcy5zZWFyY2goJ2lkJyxuYW1lKTsgICAgfTsKICAgIFJvb21MaXN0LnVybCA9IGZ1bmN0aW9uKG5hbWUpICAgeyByZXR1cm4gdGhpcy5zZWFyY2goJ3VybCcsbmFtZSk7ICAgfTsKICAgIFJvb21MaXN0Lmluc2VydCA9IGZ1bmN0aW9uKHJvb20pIHsKICAgICAgICBpZighUm9vbUxpc3QudXJsKHJvb20udXJsKSkgewogICAgICAgICAgICB0aGlzLnJvb21zW3Jvb20udXJsXSA9IHJvb207CiAgICAgICAgICAgIHRoaXMuc2F2ZSgpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdGhpcy5yb29tc1tyb29tLnVybF07CiAgICB9OwogICAgUm9vbUxpc3QuZ2V0Um9vbSA9IGZ1bmN0aW9uKGNhbGxiYWNrLHVybCkgewogICAgICAgIHZhciByb29tcyA9IHRoaXMucm9vbXM7CiAgICAgICAgaWYoIXVybCkgCiAgICAgICAgICAgIHVybCA9IGdldFN0b3JhZ2UoYmFzZSArICdyb29tJyk7CiAgICAgICAgdmFyIG0gPSAvKGh0dHBzPzpcL1wvY2hhdFwuKG1ldGFcLik/c3RhY2sob3ZlcmZsb3d8ZXhjaGFuZ2UpXC5jb20pXC9yb29tc1wvKC4qKVwvLiovLmV4ZWModXJsKTsKICAgICAgICBpZihtKSB7CiAgICAgICAgICAgIHZhciByb29tID0gUm9vbUxpc3QudXJsKHVybCk7CiAgICAgICAgICAgIGlmKHJvb20pIHsKICAgICAgICAgICAgICAgIGlmKGNhbGxiYWNrKSBjYWxsYmFjayhyb29tKTsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBHTV94bWxodHRwUmVxdWVzdCh7CiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICAgICAgICAgICAgdXJsOiB1cmwsCiAgICAgICAgICAgICAgICBvbmxvYWQ6IGZ1bmN0aW9uKHJlc3BvbnNlKXsKICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IC8uKjx0aXRsZT4oLiopXCBcfC4qLy5leGVjKHJlc3BvbnNlLnJlc3BvbnNlKTsKICAgICAgICAgICAgICAgICAgICBpZighbmFtZSkgewogICAgICAgICAgICAgICAgICAgICAgICBub3RpZnkoJ0ZhaWxlZCBmaW5kaW5nIHJvb20gbmFtZS4gSXMgaXQgYSB2YWxpZCByb29tPycpOwogICAgICAgICAgICAgICAgICAgICAgICBpZihjYWxsYmFjaykgY2FsbGJhY2soZmFsc2UpOwogICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNhbGxiYWNrKSBjYWxsYmFjayhSb29tTGlzdC5pbnNlcnQoeyAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhvc3Q6IG1bMV0sCiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1cmw6IHVybCwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBtWzRdLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogbmFtZVsxXQogICAgICAgICAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIG9uZXJyb3I6IGZ1bmN0aW9uKCl7CiAgICAgICAgICAgICAgICAgICAgbm90aWZ5KCdGYWlsZWQgcmV0cmlldmluZyByb29tIG5hbWUuIElzIGl0IGEgdmFsaWQgcm9vbT8nKTsKICAgICAgICAgICAgICAgICAgICBpZihjYWxsYmFjaykgY2FsbGJhY2soZmFsc2UpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLmxvZyh1cmwpOwogICAgICAgICAgICBub3RpZnkoJ1RoZSBjaGF0IHJvb20gVVJMIHlvdSBzdXBwbGllZCBpcyBpbnZhbGlkLicpOwogICAgICAgICAgICBpZihjYWxsYmFjaykgY2FsbGJhY2soZmFsc2UpOwogICAgICAgIH0KICAgIH07CiAgICBSb29tTGlzdC5zZXRSb29tID0gZnVuY3Rpb24odXJsKSB7CiAgICAgICAgdmFyIGV4aXN0czsKICAgICAgICBpZih0aGlzLnVybCh1cmwpKQogICAgICAgICAgICBleGlzdHMgPSB0cnVlOwogICAgICAgIFJvb21MaXN0LmdldFJvb20oZnVuY3Rpb24ocm9vbSkgewogICAgICAgICAgICBpZihyb29tICYmIGdldFN0b3JhZ2UoYmFzZSArICdyb29tJykgIT09IHJvb20udXJsKSB7CiAgICAgICAgICAgICAgICBzZXRTdG9yYWdlKGJhc2UgKyAncm9vbScscm9vbS51cmwpOwogICAgICAgICAgICAgICAgQ1ZSR1VJLnJvb21MaXN0LmZpbmQoJ1t0eXBlPSJjaGVja2JveCJdJykucHJvcCgnY2hlY2tlZCcsZmFsc2UpOwogICAgICAgICAgICAgICAgaWYoIWV4aXN0cykKICAgICAgICAgICAgICAgICAgICBDVlJHVUkucm9vbUxpc3QuYXBwZW5kKCQoJzxkZD48bGFiZWw+PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJ0YXJnZXQtcm9vbSIgdmFsdWU9IicgKyByb29tLnVybCArICciIGNoZWNrZWQ+JyArIHJvb20ubmFtZSArICc8L2xhYmVsPjxmb3JtPjxidXR0b24+LTwvYnV0dG9uPjwvZm9ybT48L2RkPicpKTsKICAgICAgICAgICAgICAgIGVsc2UKICAgICAgICAgICAgICAgICAgICBDVlJHVUkucm9vbUxpc3QuZmluZCgnW3ZhbHVlPSInICsgcm9vbS51cmwgKyAnIl0nKS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7CiAgICAgICAgICAgICAgICBjbG9zZVRhcmdldCgpOwogICAgICAgICAgICB9CiAgICAgICAgfSx1cmwpOwogICAgfTsKICAgIFJvb21MaXN0LmluaXQgPSBmdW5jdGlvbigpIHsKICAgICAgICBpZighZ2V0U3RvcmFnZSgncm9vbXMnKSkKICAgICAgICAgICAgUm9vbUxpc3QuZ2V0Um9vbSgpOwogICAgICAgIGVsc2UKICAgICAgICAgICAgUm9vbUxpc3Qucm9vbXMgPSBKU09OLnBhcnNlKGdldFN0b3JhZ2UoJ3Jvb21zJykpOwogICAgfTsKCiAgICAvL1dyYXAgbG9jYWwgc3RvcmFnZSBhY2Nlc3Mgc28gdGhhdCB3ZSBhdm9pZCBjb2xsaXNpb25zIHdpdGggb3RoZXIgc2NyaXB0cwogICAgdmFyIHByZWZpeCA9ICJTRUNsb3NlVm90ZVJlcXVlc3RHZW5lcmF0b3JfIjsgLy9wcmVmaXggdG8gYXZvaWQgY2xhc2hlcyBpbiBsb2NhbHN0b3JhZ2UKICAgIGZ1bmN0aW9uIGdldFN0b3JhZ2Uoa2V5KSB7IHJldHVybiBsb2NhbFN0b3JhZ2VbcHJlZml4ICsga2V5XTsgfQogICAgZnVuY3Rpb24gc2V0U3RvcmFnZShrZXksIHZhbCkgeyByZXR1cm4gKGxvY2FsU3RvcmFnZVtwcmVmaXggKyBrZXldID0gdmFsKTsgfQoKICAgIHZhciBiYXNlID0gJ2h0dHA6Ly8nICsgd2luZG93LmxvY2F0aW9uLmhvc3RuYW1lOwoKICAgIGlmKCFnZXRTdG9yYWdlKGJhc2UgKyAncm9vbScpKQogICAgICAgIHNldFN0b3JhZ2UoYmFzZSArICdyb29tJywgJ2h0dHA6Ly9jaGF0LnN0YWNrb3ZlcmZsb3cuY29tL3Jvb21zLzQxNTcwL3NvLWNsb3NlLXZvdGUtcmV2aWV3ZXJzJyk7CiAgICAKICAgIAogICAgUm9vbUxpc3QuaW5pdCgpOwoKICAgIHZhciBDVlJHVUkgPSB7fTsKICAgIENWUkdVSS53cnAgICAgPSAkKCc8c3BhbiBjbGFzcz0iY3ZyZ3VpIiAvPicpOwogICAgQ1ZSR1VJLmJ1dHRvbiA9ICQoJzxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSIgY2xhc3M9ImN2LWJ1dHRvbiI+Y3YtcGxzPC9hPicpOwogICAgQ1ZSR1VJLmxpc3QgICA9ICQoJzxkbCBjbGFzcz0iY3YtbGlzdCIgLz4nKTsKICAgIENWUkdVSS5jc3MgICAgPSAkKCc8c3R5bGU+LnBvc3QtbWVudSA+IHNwYW4gPiBhe3BhZGRpbmc6MCAzcHggMnB4IDNweDtjb2xvcjojODg4fS5wb3N0LW1lbnUgPiBzcGFuID4gYTpob3Zlcntjb2xvcjojNDQ0O3RleHQtZGVjb3JhdGlvbjpub25lfSAuY3ZyZ3VpIHsgcG9zaXRpb246cmVsYXRpdmU7ZGlzcGxheTppbmxpbmUtYmxvY2sgfSAuY3ZyZ3VpICogeyBib3gtc2l6aW5nOiBib3JkZXItYm94IH0gLmN2LWxpc3QgeyBkaXNwbGF5OiBub25lOyBtYXJnaW46MDsgei1pbmRleDoxOyBwb3NpdGlvbjphYnNvbHV0ZTsgd2hpdGUtc3BhY2U6bm93cmFwOyBib3JkZXI6MXB4IHNvbGlkICNjY2M7Ym9yZGVyLXJhZGl1czozcHg7YmFja2dyb3VuZDojRkZGO2JveC1zaGFkb3c6MHB4IDVweCAxMHB4IC01cHggcmdiKDAsMCwwLDAuNSkgfSAuY3YtbGlzdCBkZCwgLmN2LWxpc3QgZGwgeyBtYXJnaW46IDA7IHBhZGRpbmc6IDA7IH0gLmN2LWxpc3QgZGwgZGQgeyBwYWRkaW5nOiAwcHg7IG1hcmdpbjogMDsgd2lkdGg6IDEwMCU7IGRpc3BsYXk6IHRhYmxlIH0gLmN2LWxpc3QgZGwgbGFiZWwsIC5jdi1saXN0IGRsIGZvcm0geyBkaXNwbGF5OiB0YWJsZS1jZWxsIH0gLmN2LWxpc3QgZGwgYnV0dG9uIHsgbWFyZ2luOiAyLjVweCAwOyB9IC5jdi1saXN0IGRsIGxhYmVsIHsgd2lkdGg6IDEwMCU7IHBhZGRpbmc6IDBweDsgfSAgLmN2LWxpc3QgKiB7IHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7IH0gLmN2LWxpc3QgZGQgPiBkaXYgeyBwYWRkaW5nOiAwcHggMTVweDsgcGFkZGluZy1ib3R0b206IDE1cHg7IH0gLmN2LWxpc3QgZGQgPiBkaXYgPiBmb3JtIHsgd2hpdGUtc3BhY2U6IG5vd3JhcCB9IC5jdi1saXN0IGRkID4gZGl2ID4gZm9ybSA+IGlucHV0IHsgZGlzcGxheTogaW5saW5lLWJsb2NrOyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlIH0gLmN2LWxpc3QgZGQgPiBkaXYgPiBmb3JtID4gaW5wdXRbdHlwZT0idGV4dCJdIHsgd2lkdGg6IDMwMHB4OyBtYXJnaW4tcmlnaHQ6IDVweDsgfSAuY3YtbGlzdCBociB7IG1hcmdpbjowIDE1cHg7IGJvcmRlcjogMHB4OyBib3JkZXItYm90dG9tOiAxcHggc29saWQgI2NjYzsgfSAuY3YtbGlzdCBhIHsgZGlzcGxheTogYmxvY2s7IHBhZGRpbmc6IDEwcHggMTVweDt9ICAuY3YtbGlzdCBsYWJlbCB7IGRpc3BsYXk6IGlubGluZS1ibG9jazsgcGFkZGluZzogMTBweCAxNXB4O30gLmN2LWxpc3QgbGFiZWw6bGFzdC1jaGlsZCB7IHBhZGRpbmctbGVmdDogMDsgfTwvc3R5bGU+Jyk7CiAgICBDVlJHVUkudGFyZ2V0ID0gKGZ1bmN0aW9uKCl7CiAgICAgICAgdmFyIGxpbmsgPSAkKCc8YSBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCkiPjwvYT4nKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIHZhciBkaXYgPSAkKCdkaXYnLCAkKHRoaXMpLnBhcmVudCgpKTsKICAgICAgICAgICAgJCgnZGl2JywgQ1ZSR1VJLmxpc3QpLm5vdChkaXYpLmhpZGUoKTsKICAgICAgICAgICAgaWYoZGl2LmlzKCc6aGlkZGVuJykpIHsKICAgICAgICAgICAgICAgIGRpdi5zaG93KCkuZmluZCgnW3R5cGU9InRleHQiXScpLmZvY3VzKCk7CiAgICAgICAgICAgICAgICAkKHRoaXMpLmh0bWwoJ1NldCB0YXJnZXQgcm9vbTonKTsKICAgICAgICAgICAgfSBlbHNlIGNsb3NlVGFyZ2V0KCk7CiAgICAgICAgfSkKICAgICAgICBSb29tTGlzdC5nZXRSb29tKGZ1bmN0aW9uKHJvb20pewogICAgICAgICAgICBsaW5rLmh0bWwocm9vbS5uYW1lKTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gbGluazsKICAgIH0pKCk7CiAgICBmdW5jdGlvbiBjbG9zZVRhcmdldCgpIHsKICAgICAgICBSb29tTGlzdC5nZXRSb29tKGZ1bmN0aW9uKHJvb20peyAkKENWUkdVSS50YXJnZXQpLmh0bWwocm9vbS5uYW1lKTsgfSk7CiAgICAgICAgJCgnZGl2JywgQ1ZSR1VJLml0ZW1zLnJvb20pLmhpZGUoKTsKICAgICAgICAkKCdkaXYnLCBDVlJHVUkuaXRlbXMuc2VuZCkuc2hvdygpOwogICAgICAgICQoJ2lucHV0W3R5cGU9InRleHQiXScsIENWUkdVSS5pdGVtcy5zZW5kKS5mb2N1cygpOwogICAgfQogICAgQ1ZSR1VJLml0ZW1zICA9IHsKICAgICAgICBzZW5kOiAgICAkKCc8ZGQ+PGEgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApIj5TZW5kIHJlcXVlc3Q8L2E+PGRpdiBzdHlsZT0iZGlzcGxheTpub25lIj48Zm9ybT48aW5wdXQgdHlwZT0idGV4dCIvPjxpbnB1dCB0eXBlPSJzdWJtaXQiIHZhbHVlPSJTZW5kIj48L2Zvcm0+PC9kaXY+PGhyPjwvZGQ+JyksCiAgICAgICAgcm9vbTogICAgKGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIHZhciBpdGVtID0gJCgnPGRkPjwvZGQ+Jyk7CiAgICAgICAgICAgIHZhciBsaXN0ID0gJCgnPGRsPicpOwogICAgICAgICAgICB2YXIgZGl2ID0gJCgnPGRpdiBzdHlsZT0iZGlzcGxheTpub25lIi8+Jyk7CiAgICAgICAgICAgIFJvb21MaXN0LmdldFJvb20oZnVuY3Rpb24ocil7CiAgICAgICAgICAgICAgICBSb29tTGlzdC5lYWNoKGZ1bmN0aW9uKHJvb20pewogICAgICAgICAgICAgICAgICAgIGxpc3QuYXBwZW5kKCQoJzxkZD48bGFiZWw+PGlucHV0IHR5cGU9InJhZGlvIiBuYW1lPSJ0YXJnZXQtcm9vbSIgdmFsdWU9IicgKyByb29tLnVybCArICciJyArIChyLnVybCA9PT0gcm9vbS51cmwgPyAnIGNoZWNrZWQnIDogJycgKSArICc+JyArIHJvb20ubmFtZSArICc8L2xhYmVsPjxmb3JtPjxidXR0b24+LTwvYnV0dG9uPjwvZm9ybT48L2Zvcm0+PC9kZD4nKSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGxpc3Qub24oJ2NoYW5nZScsZnVuY3Rpb24oZSl7CiAgICAgICAgICAgICAgICAgICAgUm9vbUxpc3Quc2V0Um9vbShlLnRhcmdldC52YWx1ZSk7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGxpc3Qub24oJ3N1Ym1pdCcsIGZ1bmN0aW9uKGUpewogICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgICAgICAgICB2YXIgcm9vbSA9IFJvb21MaXN0LnVybCgkKCdbbmFtZT0idGFyZ2V0LXJvb20iXScsICQoZS50YXJnZXQpLnBhcmVudCgpKS52YWwoKSk7CiAgICAgICAgICAgICAgICAgICAgaWYocm9vbSkgewogICAgICAgICAgICAgICAgICAgICAgICBpZihSb29tTGlzdC5jb3VudCgpID09PSAxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3RpZnkoJ0Nhbm5vdCByZW1vdmUgbGFzdCByb29tJyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgaWYoJCgnW2NoZWNrZWRdJywgJChlLnRhcmdldCkucGFyZW50KCkpLmxlbmd0aCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgUm9vbUxpc3Quc2V0Um9vbSgkKCdpbnB1dFtuYW1lPSJ0YXJnZXQtcm9vbSJdOm5vdChbdmFsdWU9IicgKyByb29tLnVybCArICciXSknLCBsaXN0KS52YWwoKSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIFJvb21MaXN0LnJvb21zW3Jvb20udXJsXTsKICAgICAgICAgICAgICAgICAgICAgICAgUm9vbUxpc3Quc2F2ZSgpOwogICAgICAgICAgICAgICAgICAgICAgICAkKGUudGFyZ2V0KS5wYXJlbnQoKS5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIGRpdi5hcHBlbmQobGlzdCk7CiAgICAgICAgICAgICAgICBkaXYuYXBwZW5kKCQoJzxmb3JtPjxpbnB1dCB0eXBlPSJ0ZXh0Ii8+PGlucHV0IHR5cGU9InN1Ym1pdCIgdmFsdWU9IlNldCI+PC9mb3JtPicpLm9uKCdzdWJtaXQnLGZ1bmN0aW9uKGUpIHsKICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gJCgnaW5wdXRbdHlwZT0idGV4dCJdJywgdGhpcykudmFsKCk7CiAgICAgICAgICAgICAgICAgICAgaWYoIXJlc3BvbnNlKSByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgICAgICAgICAgUm9vbUxpc3Quc2V0Um9vbShyZXNwb25zZSk7CiAgICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgICAgICBpdGVtLmFwcGVuZChDVlJHVUkudGFyZ2V0KTsKICAgICAgICAgICAgICAgIGl0ZW0uYXBwZW5kKGRpdik7CiAgICAgICAgICAgICAgICBpdGVtLmFwcGVuZCgkKCc8aHI+JykpOwogICAgICAgICAgICAgICAgQ1ZSR1VJLnJvb21MaXN0ID0gbGlzdDsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBpdGVtOwogICAgICAgIH0pKCksCiAgICAgICAgdXBkYXRlOiAgJCgnPGRkPjxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKSI+Q2hlY2sgZm9yIHVwZGF0ZXM8L2E+ICAgPC9kZD4nKQogICAgfTsKICAgIGZvcih2YXIgaXRlbSBpbiBDVlJHVUkuaXRlbXMpIHsKICAgICAgICBDVlJHVUkubGlzdC5hcHBlbmQoQ1ZSR1VJLml0ZW1zW2l0ZW1dKTsKICAgIH0KICAgIENWUkdVSS53cnAuYXBwZW5kKENWUkdVSS5idXR0b24pOwogICAgQ1ZSR1VJLndycC5hcHBlbmQoQ1ZSR1VJLmxpc3QpOwogICAgQ1ZSR1VJLndycC5hcHBlbmQoQ1ZSR1VJLmNzcyk7CgogICAgJCgnI3F1ZXN0aW9uIC5wb3N0LW1lbnUnKS5hcHBlbmQoQ1ZSR1VJLndycCk7CiAgICAKICAgICQoJy5xdWVzdGlvbicpLm9uKCdjbGljaycsICdbdHlwZT0ic3VibWl0Il0sIC5uZXctcG9zdC1hY3Rpdml0eSBhJywgZnVuY3Rpb24oZSl7CiAgICAgICAgdmFyIHNlbGYgPSB0aGlzOwogICAgICAgIHZhciBtZW51Q2hlY2sgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpewogICAgICAgICAgICBpZigkKCcjcXVlc3Rpb24gLnBvc3QtbWVudScpLmxlbmd0aCA9PT0gMSkgewogICAgICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChtZW51Q2hlY2spOwogICAgICAgICAgICAgICAgJCgnI3F1ZXN0aW9uIC5wb3N0LW1lbnUnKS5hcHBlbmQoQ1ZSR1VJLndycCk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0pOwoKICAgICQoZG9jdW1lbnQpLm9uKCdjbGljaycsZnVuY3Rpb24oKXsKICAgICAgICBpZihDVlJHVUkubGlzdC5pcygnOnZpc2libGUnKSkKICAgICAgICAgICAgaGlkZU1lbnUoKTsKICAgIH0pOwoKICAgICQoJ2E6bm90KC5jdnJndWkgYSknKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7CiAgICAgICAgaWYoQ1ZSR1VJLmxpc3QuaXMoJzp2aXNpYmxlJykpIAogICAgICAgICAgICBoaWRlTWVudSgpOwogICAgfSk7CiAgICAkKCcuY3YtbGlzdCAqOm5vdChhKScpLm9uKCdjbGljaycsZnVuY3Rpb24oZSl7CiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgIH0pOwoKICAgIENWUkdVSS5idXR0b24ub24oJ2NsaWNrJywgZnVuY3Rpb24oZSl7IAogICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgJCgnZGl2JywgQ1ZSR1VJLmxpc3QpLmhpZGUoKTsKICAgICAgICBDVlJHVUkubGlzdC50b2dnbGUoKTsgCiAgICB9KTsKCiAgICBDVlJHVUkuaXRlbXMuc2VuZC5vbignY2xpY2snLGZ1bmN0aW9uKGUpewogICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgaWYoJCgnZGl2JywgQ1ZSR1VJLml0ZW1zLnNlbmQpLmlzKCc6aGlkZGVuJykpCiAgICAgICAgICAgIGNsb3NlVGFyZ2V0KCk7CiAgICAgICAgZWxzZSAkKCdkaXYnLCBDVlJHVUkuaXRlbXMuc2VuZCkuaGlkZSgpOwogICAgfSk7CgogICAgJCgnZm9ybScsIENWUkdVSS5pdGVtcy5zZW5kKS5vbignc3VibWl0JyxmdW5jdGlvbihlKXsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgdmFyIHJlYXNvbiA9ICQoJ2lucHV0W3R5cGU9InRleHQiXScsIENWUkdVSS5pdGVtcy5zZW5kKS52YWwoKTsKICAgICAgICBpZighcmVhc29uKSByZXR1cm4gZmFsc2U7CiAgICAgICAgcmVhc29uID0gcmVhc29ucy5nZXQocmVhc29uKTsKICAgICAgICB2YXIgdGl0ID0gJ1snICsgJCgnI3F1ZXN0aW9uLWhlYWRlciBoMSBhJykudGV4dCgpLnJlcGxhY2UoL1xbKC4qKVxdL2csICcoJDEpJykgKyAnXSgnICsgYmFzZSArICQoJyNxdWVzdGlvbiAuc2hvcnQtbGluaycpLmF0dHIoJ2hyZWYnKSArICcpJzsgCiAgICAgICAgdmFyIHVzciA9ICQoJy5wb3N0LXNpZ25hdHVyZTpub3QoW2FsaWduPSJyaWdodCJdKSAudXNlci1kZXRhaWxzJykudGV4dCgpLnRyaW0oKS5tYXRjaCgvW15cbl0rLylbMF0udHJpbSgpLCB0aW07CiAgICAgICAgaWYoJCgnI3F1ZXN0aW9uIC5vd25lciBhJykubGVuZ3RoKSB1c3IgPSAnWycgKyB1c3IgKyAnXSgnICsgYmFzZSArICQoJyNxdWVzdGlvbiAub3duZXIgYScpLmF0dHIoJ2hyZWYnKSArICcpJzsKICAgICAgICBpZigkKCcjcXVlc3Rpb24gLm93bmVyIC5yZWxhdGl2ZXRpbWUnKS5sZW5ndGgpIHRpbSA9ICQoJyNxdWVzdGlvbiAub3duZXIgLnJlbGF0aXZldGltZScpLmF0dHIoJ3RpdGxlJyk7CiAgICAgICAgdmFyIHJlc3VsdCA9ICdbdGFnOmN2LXBsc10gJyArIHJlYXNvbiArICcgJyArIHRpdCArICcgLSAnICsgdXNyICsgKHRpbSA/ICcgLSAnICsgdGltIDogJycpOwogICAgICAgIHNlbmRSZXF1ZXN0KHJlc3VsdCk7CiAgICB9KTsKCiAgICBDVlJHVUkuaXRlbXMudXBkYXRlLm9uKCdjbGljaycsZnVuY3Rpb24oZSl7CiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICBoaWRlTWVudSgpOwogICAgICAgIGNoZWNrVXBkYXRlcyh0cnVlKTsKICAgIH0pOwoKICAgIHZhciBjb21ibzsKICAgICQoZG9jdW1lbnQpLmtleWRvd24oZnVuY3Rpb24oZSkgewogICAgICAgIGlmKGUuY3RybEtleSAmJiBlLnNoaWZ0S2V5ICYmIGUud2hpY2ggPT09IDY1KSB7CiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgICAgY29tYm8gPSB0cnVlOwogICAgICAgIH0KICAgIH0pOwogICAgJChkb2N1bWVudCkua2V5dXAoZnVuY3Rpb24oZSkgewogICAgICAgIGlmKGNvbWJvKSB7CiAgICAgICAgICAgIGNvbWJvID0gZmFsc2U7CiAgICAgICAgICAgIGlmKCQoJ2RpdicsIENWUkdVSS5pdGVtcy5zZW5kKS5pcygnOmhpZGRlbicpKSB7CiAgICAgICAgICAgICAgICBDVlJHVUkubGlzdC5zaG93KCk7CiAgICAgICAgICAgICAgICAkKCdkaXYnLCBDVlJHVUkuaXRlbXMuc2VuZCkuc2hvdygpLmZpbmQoJ2lucHV0W3R5cGU9InRleHQiXScpLmZvY3VzKCk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBoaWRlTWVudSgpOwogICAgICAgICAgICB9CiAgICAgICAgfSAKICAgIH0pOwogICAgc2V0VGltZW91dChjaGVja1VwZGF0ZXMpOwogICAgdmFyIGNsb3NlcmVhc29ucyA9IHsKICAgICAgICA0OiAiR2VuZXJhbCBDb21wdXRpbmciLAogICAgICAgIDc6ICJTZXJ2ZXJmYXVsdC5jb20iLAogICAgICAgIDE2OiAiUmVxdWVzdCBmb3IgT2ZmLVNpdGUgUmVzb3VyY2UiLAogICAgICAgIDEzOiAiTm8gTUNWRSIsCiAgICAgICAgMTE6ICJUeXBvIG9yIENhbm5vdCBSZXByb2R1Y2UiLAogICAgICAgIDM6ICJjdXN0b20iLAogICAgICAgIDI6ICJCZWxvbmdzIG9uIGFub3RoZXIgc2l0ZSIKICAgIH07CiAgICAkKCcuY2xvc2UtcXVlc3Rpb24tbGluaycpLmNsaWNrKGZ1bmN0aW9uKCl7CiAgICAgICAgdmFyIGNwY2hlY2sgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpewogICAgICAgICAgICB2YXIgcG9wdXAgPSAkKCcjcG9wdXAtY2xvc2UtcXVlc3Rpb24nKSwgc2VsZWN0ZWQ7CiAgICAgICAgICAgIGlmKCFwb3B1cC5sZW5ndGgpIHJldHVybjsKICAgICAgICAgICAgY2xlYXJJbnRlcnZhbChjcGNoZWNrKTsKICAgICAgICAgICAgdmFyIHJlbWFpbmluZ3ZvdGVzID0gJCgnLnJlbWFpbmluZy12b3RlcycsIHBvcHVwKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIGlmKCQoJ2lucHV0JywgcmVtYWluaW5ndm90ZXMpLmxlbmd0aCkgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAKICAgICAgICAgICAgdmFyIGNoZWNrYm94ID0gJCgnPGxhYmVsPjxpbnB1dCB0eXBlPSJjaGVja2JveCIgc3R5bGU9InZlcnRpY2FsLWFsaWduOm1pZGRsZTttYXJnaW4tbGVmdDogNXB4OyI+U2VuZCBjdi1wbHMgcmVxdWVzdDwvbGFiZWw+Jyk7CiAgICAgICAgICAgIAogICAgICAgICAgICAkKCcucmVtYWluaW5nLXZvdGVzJywgcG9wdXApLmFwcGVuZChjaGVja2JveCk7CiAgICAgICAgICAgICQoJ1tuYW1lPSJjbG9zZS1yZWFzb24iXScpLmNoYW5nZShmdW5jdGlvbigpewogICAgICAgICAgICAgICAgdGhpcy5jaGVja2VkICYmIChzZWxlY3RlZCA9ICQodGhpcykpICYmICQoJ2lucHV0W3R5cGU9InRleHQiXScsIENWUkdVSS5pdGVtcy5zZW5kKS52YWwodGhpcy52YWx1ZS5yZXBsYWNlKC8oPyFeKShbQS1aXSkvZywgJyAkMScpKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICQoJ1tuYW1lPSJjbG9zZS1hcy1vZmYtdG9waWMtcmVhc29uIl0nKS5jaGFuZ2UoZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgIHRoaXMuY2hlY2tlZCAmJiAoc2VsZWN0ZWQgPSAkKHRoaXMpKSAmJiAkKCdpbnB1dFt0eXBlPSJ0ZXh0Il0nLCBDVlJHVUkuaXRlbXMuc2VuZCkudmFsKGNsb3NlcmVhc29uc1t0aGlzLnZhbHVlXSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAkKCcucG9wdXAtc3VibWl0JykuY2xpY2soZnVuY3Rpb24oKSB7CiAgICAgICAgICAgICAgICBpZihzZWxlY3RlZC52YWwoKSA9PT0gJzMnKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIHBhcmVudCA9IHNlbGVjdGVkLnBhcmVudCgpLnBhcmVudCgpOwogICAgICAgICAgICAgICAgICAgICQoJ2lucHV0W3R5cGU9InRleHQiXScsIENWUkdVSS5pdGVtcy5zZW5kKS52YWwoJCgndGV4dGFyZWEnLHBhcmVudCkudmFsKCkucmVwbGFjZSgkKCdbdHlwZT0iaGlkZGVuIl0nLHBhcmVudCkudmFsKCksJycpKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGNoZWNrYm94LmZpbmQoJ2lucHV0JykuaXMoJzpjaGVja2VkJykgJiYgJCgnZm9ybScsIENWUkdVSS5pdGVtcy5zZW5kKS5zdWJtaXQoKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSwgMTAwKTsKICAgIH0pOwp9KSgpOwo="},{"name":"stackoverflow-comment-reply","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":[],"orig_matches":["*://stackoverflow.com/*","*://serverfault.com/*","*://superuser.com/*","*://meta.stackoverflow.com/*","*://meta.serverfault.com/*","*://meta.superuser.com/*","*://stackapps.com/*","*://*.stackexchange.com/*","*://askubuntu.com/*","*://meta.askubuntu.com/*","*://answers.onstartups.com/*","*://meta.answers.onstartups.com/*","*://mathoverflow.net/*","*://area51.stackexchange.com/proposals/*"],"orig_noframes":null,"orig_run_at":"document-idle","use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1456451831289},"enabled":true,"position":2,"file_url":"https://bitbucket.org/balpha/user-scripts/raw/tip/comment-reply-links/comment-reply-links.user.js","uuid":"b30320e8-9e48-4191-9a0a-15f6c81e1d21","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgIHN0YWNrb3ZlcmZsb3ctY29tbWVudC1yZXBseQovLyBAbmFtZXNwYWNlICAgICAgc3RhY2tvdmVyZmxvdwovLyBAZGVzY3JpcHRpb24gICAgQWRkICJyZXBseSIgbGlua3MgdG8gY29tbWVudHMKLy8gQHZlcnNpb24gICAgICAgIDEuMgovLyBAbWF0Y2ggICAgICAgICAgKjovL3N0YWNrb3ZlcmZsb3cuY29tLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly9zZXJ2ZXJmYXVsdC5jb20vKgovLyBAbWF0Y2ggICAgICAgICAgKjovL3N1cGVydXNlci5jb20vKgovLyBAbWF0Y2ggICAgICAgICAgKjovL21ldGEuc3RhY2tvdmVyZmxvdy5jb20vKgovLyBAbWF0Y2ggICAgICAgICAgKjovL21ldGEuc2VydmVyZmF1bHQuY29tLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly9tZXRhLnN1cGVydXNlci5jb20vKgovLyBAbWF0Y2ggICAgICAgICAgKjovL3N0YWNrYXBwcy5jb20vKgovLyBAbWF0Y2ggICAgICAgICAgKjovLyouc3RhY2tleGNoYW5nZS5jb20vKgovLyBAbWF0Y2ggICAgICAgICAgKjovL2Fza3VidW50dS5jb20vKgovLyBAbWF0Y2ggICAgICAgICAgKjovL21ldGEuYXNrdWJ1bnR1LmNvbS8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vYW5zd2Vycy5vbnN0YXJ0dXBzLmNvbS8qCi8vIEBtYXRjaCAgICAgICAgICAqOi8vbWV0YS5hbnN3ZXJzLm9uc3RhcnR1cHMuY29tLyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly9tYXRob3ZlcmZsb3cubmV0LyoKLy8gQG1hdGNoICAgICAgICAgICo6Ly9hcmVhNTEuc3RhY2tleGNoYW5nZS5jb20vcHJvcG9zYWxzLyoKLy8gQGF1dGhvciAgICAgICAgIEJlbmphbWluIER1bWtlLXZvbiBkZXIgRWhlCi8vID09L1VzZXJTY3JpcHQ9PQoKLy8gVGhhbmtzIHRvIFNob2c5IGZvciB0aGlzIGlkZWEgZm9yIG1ha2luZyB0aGUgc2NyaXB0IHdvcmsgaW4gYm90aAovLyBDaHJvbWUgYW5kIEZpcmVmb3g6Ci8vIGh0dHA6Ly9tZXRhLnN0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy80NjU2MgpmdW5jdGlvbiB3aXRoX2pxdWVyeShmKSB7CiAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7CiAgICBzY3JpcHQudHlwZSA9ICJ0ZXh0L2phdmFzY3JpcHQiOwogICAgc2NyaXB0LnRleHRDb250ZW50ID0gIigiICsgZi50b1N0cmluZygpICsgIikoalF1ZXJ5KSI7CiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7Cn0KCndpdGhfanF1ZXJ5KGZ1bmN0aW9uKCQpIHsKCiAgICAkKGRvY3VtZW50KS5hamF4Q29tcGxldGUoZnVuY3Rpb24oKXsKICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgJCgiLmNvbW1lbnRzIikuZWFjaChwdXRfcmVwbHlfbGlua3MpOwogICAgICAgIH0sIDEwMCk7CiAgICB9KTsKIC8qICAgICAgRXhhbXBsZSBvZiAiYWRkIGEgY29tbWVudCIgZGl2IGFzIDMwLzAxLzIwMTYKICAgICAgPGRpdiBpZD0iY29tbWVudHMtbGluay0yNTQ1Ij4KICAgICAgICAgICAgPGEgdGl0bGU9IlVzZSBjb21tZW50cyB0byBhc2sgZm9yIG1vcmUgaW5mb3JtYXRpb24gb3Igc3VnZ2VzdCBpbXByb3ZlbWVudHMuIEF2b2lkIGNvbW1lbnRzIGxpa2Ug4oCcKzHigJ0gb3Ig4oCcdGhhbmtz4oCdLiIgY2xhc3M9ImpzLWFkZC1saW5rIGNvbW1lbnRzLWxpbmsgIiBocmVmPSIjIj5hZGQgYSBjb21tZW50PC9hPjxzcGFuIGNsYXNzPSJqcy1saW5rLXNlcGFyYXRvciBkbm8iPiZuYnNwO3wmbmJzcDs8L3NwYW4+CiAgICAgICAgICAgIDxhIHRpdGxlPSJleHBhbmQgdG8gc2hvdyBhbGwgY29tbWVudHMgb24gdGhpcyBwb3N0IiBjbGFzcz0ianMtc2hvdy1saW5rIGNvbW1lbnRzLWxpbmsgZG5vIiBvbmNsaWNrPSIiIGhyZWY9IiMiPjwvYT4KICAgICAgICA8L2Rpdj4KKi8KICAgIC8vIGV2ZW50IGhhbmRsZXIgZm9yIGEgY2xpY2sgb24gdGhlIHJlcGx5IGxpbmtzCiAgICBmdW5jdGlvbiByZXBseSgpIHsKICAgICAgICB2YXIgZGl2QWRkQ29tbWVudCA9ICQodGhpcykuY2xvc2VzdCgiLmNvbW1lbnRzIikubmV4dCgpOwogICAgICAgIHZhciBhZGRBQ29tbWVudCA9IGRpdkFkZENvbW1lbnQuY2hpbGRyZW4oIkEiKS5jbGljaygpOy8vICgiLmpzLWFkZC1saW5rIC5jb21tZW50cy1saW5rIikuY2xpY2soKTsKICAgICAgICB2YXIgY29tbWVudGxpbmtJZCA9IGRpdkFkZENvbW1lbnQuYXR0cigiaWQiKTsKICAgICAgICB2YXIgdXNlcm5hbWUgPSBnb29kaWZ5KCQodGhpcykucHJldigpLnRleHQoKS5yZXBsYWNlKC/DouKEosKmLywgIiIpKTsKICAgICAgICB2YXIgZm9ybWlkID0gY29tbWVudGxpbmtJZC5yZXBsYWNlKC9eLiotKFxkKykkLywgImFkZC1jb21tZW50LSQxIik7CiAgICAgICAgdmFyIHRhID0gJCgiIyIgKyBmb3JtaWQgKyAiIHRleHRhcmVhIilbMF07CiAgICAgICAgdmFyIHN0YXJ0ID0gdGEuc2VsZWN0aW9uU3RhcnQ7CiAgICAgICAgdmFyIGVuZCA9IHRhLnNlbGVjdGlvbkVuZDsKICAgICAgICB2YXIgc2hpZnQgPSB1c2VybmFtZS5sZW5ndGggKyAzOwogICAgICAgIHRhLnZhbHVlID0gIkAiICsgdXNlcm5hbWUgKyAiOiAiICsgdGEudmFsdWU7CiAgICAgICAgdGEuZm9jdXMoKTsKICAgICAgICB0YS5zZWxlY3Rpb25TdGFydCA9IHN0YXJ0ICsgc2hpZnQ7CiAgICAgICAgdGEuc2VsZWN0aW9uRW5kID0gZW5kICsgc2hpZnQ7CiAgICB9CgogICAgZnVuY3Rpb24gcHV0X3JlcGx5X2xpbmtzKCkgewogICAgICAgICQodGhpcykuZmluZCgiLmNvbW1lbnQ6bm90KDpoYXMoLnJlcGx5LWxpbmspKSAuY29tbWVudC11c2VyIikuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICQoIjxzcGFuIGNsYXNzPSdyZXBseS1saW5rJyBzdHlsZT0nY3Vyc29yOnBvaW50ZXI7JyB0aXRsZT0ncmVwbHknPiAmY3JhcnI7PC9zcGFuPiIpLmNsaWNrKHJlcGx5KS5pbnNlcnRBZnRlcih0aGlzKTsKICAgICAgICB9KTsKICAgIH0KCiAgICAkKCIuY29tbWVudHMiKS5lYWNoKHB1dF9yZXBseV9saW5rcyk7CgogICAgZnVuY3Rpb24gZ29vZGlmeShzKSB7CiAgICAgICAgcmV0dXJuIHMucmVwbGFjZSgvICsvZywgIiIpOwogICAgfQp9KTs="},{"name":"Stack Exchange like I like it (without tab feature)","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":["/^https?:\\/\\/(chat|blog|careers)\\..*/"],"orig_includes":[],"orig_matches":["*://stackexchange.com/*","*://*.stackexchange.com/*/*","*://stackoverflow.com/*/*","*://*.stackoverflow.com/*/*","*://stackapps.com/*/*","*://serverfault.com/*/*","*://superuser.com/*/*","*://askubuntu.com/*/*","*://mathoverflow.net/*/*"],"orig_noframes":null,"orig_run_at":"document-idle","use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null,"user_agent":""},"storage":{"data":{},"ts":1456451831303},"enabled":true,"position":3,"file_url":"https://github.com/calraith/gm_scripts/raw/master/se_like_I_like_it.user.js","uuid":"a490bb56-67fc-4b13-ba27-3ac98ef75e75","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIFN0YWNrIEV4Y2hhbmdlIGxpa2UgSSBsaWtlIGl0ICh3aXRob3V0IHRhYiBmZWF0dXJlKQovLyBAbmFtZXNwYWNlICAgaHR0cDovL3N0YWNrYXBwcy5vcmcvCi8vIEBkZXNjcmlwdGlvbiBEb3VibGUtY2xpY2sgYSBjb2RlIGJsb2NrIHRvIHNlbGVjdCBhbGwgKyBlZGl0IGJveCBhdXRvIGluZGVudCAvIHRhYiBrZXkgYmVoYXZpb3IgZW5oYW5jZW1lbnRzCi8vIEBtYXRjaAkJKjovL3N0YWNrZXhjaGFuZ2UuY29tLyoKLy8gQG1hdGNoCQkqOi8vKi5zdGFja2V4Y2hhbmdlLmNvbS8qLyoKLy8gQG1hdGNoCQkqOi8vc3RhY2tvdmVyZmxvdy5jb20vKi8qCi8vIEBtYXRjaAkJKjovLyouc3RhY2tvdmVyZmxvdy5jb20vKi8qCi8vIEBtYXRjaAkJKjovL3N0YWNrYXBwcy5jb20vKi8qCi8vIEBtYXRjaAkJKjovL3NlcnZlcmZhdWx0LmNvbS8qLyoKLy8gQG1hdGNoCQkqOi8vc3VwZXJ1c2VyLmNvbS8qLyoKLy8gQG1hdGNoCQkqOi8vYXNrdWJ1bnR1LmNvbS8qLyoKLy8gQG1hdGNoCQkqOi8vbWF0aG92ZXJmbG93Lm5ldC8qLyoKLy8gQGV4Y2x1ZGUgICAgIC9eaHR0cHM/OlwvXC8oY2hhdHxibG9nfGNhcmVlcnMpXC4uKi8KLy8gQHZlcnNpb24gICAgIDEuNgovLyBAZG93bmxvYWRVUkwJaHR0cHM6Ly9naXRodWIuY29tL2NhbHJhaXRoL2dtX3NjcmlwdHMvcmF3L21hc3Rlci9zZV9saWtlX0lfbGlrZV9pdC51c2VyLmpzCi8vIEBncmFudCAgICAgICBHTV9pbmZvCi8vID09L1VzZXJTY3JpcHQ9PQoKCmZ1bmN0aW9uIHNlbGVjdEFsbCgpIHsKCXZhciByYW5nZSA9IGRvY3VtZW50LmNyZWF0ZVJhbmdlKCk7CgkvLyBzZWxlY3QgcGFyZW50IGlmIHBhcmVudCA9PT0gPHByZT47IGVsc2Ugc2VsZWN0IHNlbGYKCXJhbmdlLnNlbGVjdE5vZGVDb250ZW50cyh0aGlzLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdwcmUnID8gdGhpcy5jaGlsZE5vZGVzWzBdIDogdGhpcyk7Cgl2YXIgc2VsZWN0aW9uID0gd2luZG93LmdldFNlbGVjdGlvbigpOwoJc2VsZWN0aW9uLnJlbW92ZUFsbFJhbmdlcygpOwoJc2VsZWN0aW9uLmFkZFJhbmdlKHJhbmdlKTsKfQoKZnVuY3Rpb24gYWRkRGJsQ2xpY2soKSB7Cgl2YXIgY29kZSA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdjb2RlJyk7Cglmb3IgKHZhciBpPTA7IGk8Y29kZS5sZW5ndGg7IGkrKykgewoJCS8qID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09CgkJSWYgcGFyZW50IG5vZGUgaXMgPHByZT4sIGFkZCBsaXN0ZW5lciB0byBwYXJlbnQuICBUaGlzIGFsbG93cyBkb3VibGUtCgkJY2xpY2tpbmcgYW55d2hlcmUgd2l0aGluIGEgY29kZSBibG9jayB0byBzZWxlY3QgYWxsLCBhcyB3ZWxsIGFzIGRvdWJsZS0KCQljbGlja2luZyBpbmxpbmUgY29kZSBzbmlwcGV0cyB0aGUgcG9zdGVyIGVuY2xvc2VkIGluIGJhY2t0aWNrcy4KCQk9PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PSAqLwoJCXZhciBub2RlID0gKGNvZGVbaV0ucGFyZW50Tm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSAncHJlJyA/IGNvZGVbaV0ucGFyZW50Tm9kZSA6IGNvZGVbaV0pOwoJCW5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLCBzZWxlY3RBbGwsIHRydWUpOwoJCW5vZGUuYWRkRXZlbnRMaXN0ZW5lcignZGJsY2xpY2snLCBzZWxlY3RBbGwsIHRydWUpOwoJCW5vZGUudGl0bGUgPSAnZG91YmxlLWNsaWNrIHRvIHNlbGVjdCBhbGwnOwoJfQp9CmFkZERibENsaWNrKCk7CgovLyBsaXN0ZW4gZm9yIHN0dWZmIGxpa2UgInNob3cgMSBtb3JlIGNvbW1lbnQiCnZhciBjcmVlcCA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGFkZERibENsaWNrKTsKY3JlZXAub2JzZXJ2ZShkb2N1bWVudCwge3N1YnRyZWU6IHRydWUsIGNoaWxkTGlzdDogdHJ1ZX0pOwoKLyogZW5kIGRvdWJsZS1jbGljayBtb2RzICovCgovLyBJZiBvbiBodHRwOi8vc3RhY2tleGNoYW5nZS5jb20vLCBjaGVjayBmb3Igc2l0ZXMgbm90IGluY2x1ZGVkIGluIG1ldGFkYXRhIEBtYXRjaCBkaXJlY3RpdmVzCmlmICgvaHR0cHM/OlwvXC9zdGFja2V4Y2hhbmdlXC5jb20vaS50ZXN0KGxvY2F0aW9uLmhyZWYpICYmIEdNX2luZm8pIHsKCXZhciBYSFIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKCXdpdGggKFhIUikgewoJCW9wZW4oIkdFVCIsICJodHRwOi8vc3RhY2tleGNoYW5nZS5jb20vc2l0ZXM/dmlldz1saXN0IiwgdHJ1ZSk7CgkJb25lcnJvciA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gZmFsc2U7IH07CgkJb25sb2FkID0gZnVuY3Rpb24oKSB7IHJldHVybiB0cnVlOyB9OwoJCW9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkgewoJCQlpZiAoWEhSLnJlYWR5U3RhdGUgPT0gNCkgewoJCQkJdmFyIGRvbSA9IGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgpOwoJCQkJZG9tLmRvY3VtZW50RWxlbWVudC5pbm5lckhUTUwgPSBYSFIucmVzcG9uc2VUZXh0OwoJCQkJdmFyIGxpc3QgPSBkb20uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgnbGlzdC12aWV3LWNvbnRhaW5lcicpWzBdLmdldEVsZW1lbnRzQnlUYWdOYW1lKCdhJyk7CgkJCQl2YXIgbWF0Y2hlcyA9IEdNX2luZm8uc2NyaXB0Lm1hdGNoZXM7CgkJCQlmb3IgKHZhciBpPWZvdW5kPTA7IGk8bGlzdC5sZW5ndGg7IGkrKykgewoJCQkJCWlmICgvKHR3aXR0ZXJ8YmxvZykvaS50ZXN0KGxpc3RbaV0uaHJlZikpIGNvbnRpbnVlOwoJCQkJCWZvciAodmFyIGo9MDsgajxtYXRjaGVzLmxlbmd0aDsgaisrKSB7CgkJCQkJCXZhciByeHAgPSBuZXcgUmVnRXhwKCdeJyArIG1hdGNoZXNbal0ucmVwbGFjZSgvXC9cKiQvLCcnKS5yZXBsYWNlKC9bXC5cL1wqXS9nLCBmdW5jdGlvbihtKSB7CgkJCQkJCQlyZXR1cm4gKG0gPT0gJyonKSA/ICcuKicgOiAnXFwnICsgbTsKCQkJCQkJfSkgKyAnJCcsICdpJyk7CgkJCQkJCWlmIChyeHAudGVzdChsaXN0W2ldLmhyZWYpKSB7IGZvdW5kPTE7IGJyZWFrOyB9CgkJCQkJfQoJCQkJCWlmICghZm91bmQpIGNvbnNvbGUubG9nKCdOZXcgc3RhY2tleGNoYW5nZSBkb21haW46ICcgKyBsaXN0W2ldLmhyZWYpOwoJCQkJCWVsc2UgZm91bmQ9MDsKCQkJCX0KCQkJfQoJCX07CgkJc2VuZCgnJyk7Cgl9Cn0K"},{"name":"StackExchange obvious followed link color","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":["/https?\\:\\/\\/([a-z\\.]*\\.)?stackexchange\\.com\\/.*/","/https?\\:\\/\\/([a-z\\.]*\\.)?askubuntu\\.com\\/.*/","/https?\\:\\/\\/([a-z\\.]*\\.)?superuser\\.com\\/.*/","/https?\\:\\/\\/([a-z\\.]*\\.)?serverfault\\.com\\/.*/","/https?\\:\\/\\/([a-z\\.]*\\.)?stackoverflow\\.com\\/.*/","/https?\\:\\/\\/([a-z\\.]*\\.)?answers.onstartups\\.com\\/.*/"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null,"user_agent":""},"storage":{"data":{},"ts":1456451831318},"enabled":true,"position":4,"file_url":"https://greasyfork.org/scripts/3362-stackexchange-obvious-followed-link-color/code/StackExchange%20obvious%20followed%20link%20color.user.js","uuid":"6ea166e0-79ab-4e14-9f4e-fe17128833fc","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgU3RhY2tFeGNoYW5nZSBvYnZpb3VzIGZvbGxvd2VkIGxpbmsgY29sb3IKLy8gQG5hbWVzcGFjZSBodHRwOi8vb3N0ZXJtaWxsZXIub3JnLwovLyBAdmVyc2lvbiAxLjAwCi8vIEBkZXNjcmlwdGlvbiBDaGFuZ2UgdGhlIGNvbG9yIG9mIGZvbGxvd2VkIGxpbmtzIG9uIGFsbCBTdGFja0V4Y2hhbmdlIHNpdGVzIHNvIHRoZXkgdGhleSBhcmUgZWFzaWx5IGRpc3Rpbmd1aXNoYWJsZS4KLy8gQGluY2x1ZGUgL2h0dHBzP1w6XC9cLyhbYS16XC5dKlwuKT9zdGFja2V4Y2hhbmdlXC5jb21cLy4qLwovLyBAaW5jbHVkZSAvaHR0cHM/XDpcL1wvKFthLXpcLl0qXC4pP2Fza3VidW50dVwuY29tXC8uKi8KLy8gQGluY2x1ZGUgL2h0dHBzP1w6XC9cLyhbYS16XC5dKlwuKT9zdXBlcnVzZXJcLmNvbVwvLiovCi8vIEBpbmNsdWRlIC9odHRwcz9cOlwvXC8oW2EtelwuXSpcLik/c2VydmVyZmF1bHRcLmNvbVwvLiovCi8vIEBpbmNsdWRlIC9odHRwcz9cOlwvXC8oW2EtelwuXSpcLik/c3RhY2tvdmVyZmxvd1wuY29tXC8uKi8KLy8gQGluY2x1ZGUgL2h0dHBzP1w6XC9cLyhbYS16XC5dKlwuKT9hbnN3ZXJzLm9uc3RhcnR1cHNcLmNvbVwvLiovCi8vIEBncmFudCBub25lCi8vID09L1VzZXJTY3JpcHQ9PQoKZnVuY3Rpb24gYWRkQ3NzKGNzc1N0cmluZykgewogICAgdmFyIG5ld0NzcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgICBuZXdDc3MudHlwZSA9ICJ0ZXh0L2NzcyI7CiAgICBuZXdDc3MuaW5uZXJIVE1MID0gY3NzU3RyaW5nOwogICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXS5hcHBlbmRDaGlsZChuZXdDc3MpOwogICAgY29uc29sZS5sb2coImFwcGVuZGVkIGNzcyIpOwp9CgphZGRDc3MgKAogICAgJy5xdWVzdGlvbi1oeXBlcmxpbms6dmlzaXRlZCwgLnJlc3VsdC1saW5rIGE6dmlzaXRlZCB7Y29sb3I6ICMwMDAwOEIgISBpbXBvcnRhbnQ7fScKKTsg"},{"name":"Unclosed Request Review Script","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":[],"orig_matches":["*://chat.stackoverflow.com/rooms/41570/*","*://chat.stackoverflow.com/search?q=tagged%2Fcv-pls&Room=41570&page=*&pagesize=50&sort=newest"],"orig_noframes":null,"orig_run_at":"document-idle","use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null,"user_agent":""},"storage":{"data":{},"ts":1456451831340},"enabled":true,"position":5,"file_url":"https://raw.githubusercontent.com/SO-Close-Vote-Reviewers/UserScripts/master/UnclosedRequestReview.user.js","uuid":"ea33379b-d41e-4b0a-8231-2ab1c5a6b70f","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBVbmNsb3NlZCBSZXF1ZXN0IFJldmlldyBTY3JpcHQKLy8gQG5hbWVzcGFjZSAgICBodHRwOi8vZ2l0aHViLmNvbS9UaW55LUdpYW50Ci8vIEB2ZXJzaW9uICAgICAgMS4wLjEuMQovLyBAZGVzY3JpcHRpb24gIEFkZHMgYSBidXR0b24gdG8gdGhlIGNoYXQgYnV0dG9ucyBjb250cm9sczsgY2xpY2tpbmcgb24gdGhlIGJ1dHRvbiB0YWtlcyB5b3UgdG8gdGhlIHJlY2VudCB1bmNsb3NlZCBjbG9zZSB2b3RlIHJlcXVlc3QgcXVlcnksIHRoZW4gaXQgc2NhbnMgdGhlIHJlc3VsdHMgIGZvciBjbG9zZWQgb3IgZGVsZXRlZCByZXF1ZXN0cywgb3IgZmFsc2UgcG9zaXRpdmVzIGFuZCBoaWRlcyB0aGVtLgovLyBAYXV0aG9yICAgICAgIEBUaW55R2lhbnQKLy8gQG1hdGNoICAgICAgICAqOi8vY2hhdC5zdGFja292ZXJmbG93LmNvbS9yb29tcy80MTU3MC8qCi8vIEBtYXRjaCAgICAgICAgKjovL2NoYXQuc3RhY2tvdmVyZmxvdy5jb20vc2VhcmNoP3E9dGFnZ2VkJTJGY3YtcGxzJlJvb209NDE1NzAmcGFnZT0qJnBhZ2VzaXplPTUwJnNvcnQ9bmV3ZXN0Ci8vIEBncmFudCAgICAgICAgR01feG1saHR0cFJlcXVlc3QKLy8gPT0vVXNlclNjcmlwdD09Ci8qIGpzaGludCAtVzA5NyAqLwoKaWYgKHdpbmRvdy5sb2NhdGlvbi5wYXRobmFtZSA9PT0gJy9zZWFyY2gnKSB7CiAgICB2YXIgcmVnZXhlcyA9IFsKICAgICAgICAvKD86dGFnZ2VkXC9jdi1wbCg/OmVhc2V8c3x6KXxcW2N2LXBsKD86ZWFzZXxzfHopXF0pLiooPzpxW15cL10qfHBvc3RzKVwvKFxkKykvLAogICAgICAgIC8oPzpxW15cL10qfHBvc3RzKVwvKFxkKykuKig/OnRhZ2dlZFwvY3YtcGwoPzplYXNlfHN8eil8XFtjdi1wbCg/OmVhc2V8c3x6KVxdKS8sCiAgICBdLCBwb3N0LCBtZXNzYWdlLCBpZCwgcmxlbjsKICAgIHZhciByZXF1ZXN0cyA9IFtdOwogICAgdmFyIGNsb3NlZCA9IFtdOwogICAgdmFyIG9wZW4gPSBbXTsKICAgICAgICAKICAgIGZ1bmN0aW9uIGFwcGVuZEluZm8oc2NvcGUsIGluZm8pIHsKICAgICAgICB2YXIgdGV4dCA9IGluZm8uc2NvcmUgKyAnICgrJyArIGluZm8udXBfdm90ZV9jb3VudCArICcvLScgKyBpbmZvLmRvd25fdm90ZV9jb3VudCArICcpIGM6KCcgKyBpbmZvLmNsb3NlX3ZvdGVfY291bnQgKyAnKSB2OignICsgaW5mby52aWV3X2NvdW50ICsgJyknOwogICAgICAgIHZhciBleGlzdGluZyA9IHNjb3BlLnF1ZXJ5U2VsZWN0b3IoJy5yZXF1ZXN0LWluZm8nKTsKICAgICAgICBpZihleGlzdGluZykgewogICAgICAgICAgICBleGlzdGluZy5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdicicpKTsKICAgICAgICAgICAgZXhpc3RpbmcuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGV4dCkpOwogICAgICAgICAgICBzY29wZS5wYXJlbnROb2RlLnBhcmVudE5vZGUuc3R5bGUubWluSGVpZ2h0ID0gZXhpc3RpbmcuY2xpZW50SGVpZ2h0ICsgJ3B4JzsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB2YXIgbm9kZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTsKICAgICAgICBub2RlLmNsYXNzTmFtZSA9ICdyZXF1ZXN0LWluZm8gbWVzc2FnZXMnOwogICAgICAgIG5vZGUuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUodGV4dCkpOwogICAgICAgIG5vZGUudGV4dENvbnRlbnQgPSB0ZXh0OwogICAgICAgIHNjb3BlLmFwcGVuZENoaWxkKG5vZGUpOwogICAgfQoKICAgIGZ1bmN0aW9uIGNoZWNrRG9uZSgpIHsKICAgICAgICBmb3IodmFyIGkgaW4gb3BlbikgewogICAgICAgICAgICB2YXIgcGFyZW50ID0gb3BlbltpXS5tc2cucGFyZW50Tm9kZS5wYXJlbnROb2RlOwogICAgICAgICAgICBpZigoL1xkKy8uZXhlYyhwYXJlbnQucXVlcnlTZWxlY3RvcignLnVzZXJuYW1lIGFbaHJlZl49Ii91c2VyIl0nKS5ocmVmKXx8W2ZhbHNlXSlbMF0gPT09IG1lKSB7CiAgICAgICAgICAgICAgICBwYXJlbnQucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICBjb250aW51ZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBhcHBlbmRJbmZvKG9wZW5baV0ubXNnLCBvcGVuW2ldLmluZm8pOwogICAgICAgIH0KICAgICAgICBmb3IodmFyIGogaW4gY2xvc2VkKSB7CiAgICAgICAgICAgIHZhciBtZXNzYWdlID0gY2xvc2VkW2pdLm1zZzsKICAgICAgICAgICAgdmFyIHBhcmVudCA9IG1lc3NhZ2UucGFyZW50Tm9kZS5wYXJlbnROb2RlOwogICAgICAgICAgICBtZXNzYWdlLnJlbW92ZSgpOwogICAgICAgICAgICBpZighcGFyZW50LnF1ZXJ5U2VsZWN0b3IoJy5tZXNzYWdlJykpIHBhcmVudC5yZW1vdmUoKTsKICAgICAgICB9CiAgICAgICAgdmFyIGxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmNvbnRlbnQgYScpOwogICAgICAgIGZvcih2YXIgaSBpbiBPYmplY3Qua2V5cyhsaW5rcykpIGxpbmtzW2ldLnRhcmdldCA9ICJfYmxhbmsiOwogICAgfQoKICAgIGZ1bmN0aW9uIGZvcm1hdFBvc3RzKGFycikgewogICAgICAgIHZhciB0bXAgPSBbXTsKICAgICAgICBmb3IodmFyIGkgaW4gYXJyKSB0bXAucHVzaChhcnJbaV0ucG9zdCk7CiAgICAgICAgcmV0dXJuIHRtcC5qb2luKCc7Jyk7CiAgICB9CgogICAgZnVuY3Rpb24gY2h1bmtBcnJheShhcnIsIGxlbikgewogICAgICAgIHZhciB0bXAgPSBbXTsKICAgICAgICB2YXIgbnVtID0gTWF0aC5jZWlsKGFyci5sZW5ndGggLyBsZW4pOwogICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBudW07ICsraSkgewogICAgICAgICAgICB0bXAucHVzaChbXSk7CiAgICAgICAgfQogICAgICAgIHZhciBpbmQgPSAwOwogICAgICAgIGZvcih2YXIgaiBpbiBhcnIpIHsKICAgICAgICAgICAgaWYoaiA+IDAgJiYgIShqICUgbGVuKSkgKytpbmQ7CiAgICAgICAgICAgIHRtcFtpbmRdLnB1c2goYXJyW2pdKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHRtcDsKICAgIH0KICAgIAogICAgZnVuY3Rpb24gY2hlY2tSZXF1ZXN0cygpIHsKICAgICAgICB2YXIgY3VycmVudHJlcSA9IHJlcXVlc3RzLnBvcCgpOwoKICAgICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CgogICAgICAgIHhoci5hZGRFdmVudExpc3RlbmVyKCJsb2FkIiwgZnVuY3Rpb24oKXsKICAgICAgICAgICAgaWYodGhpcy5zdGF0dXMgIT09IDIwMCkgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcyk7CiAgICAgICAgICAgICAgICBjaGVja0RvbmUoKTsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgdmFyIHJlc3BvbnNlID0gSlNPTi5wYXJzZSh0aGlzLnJlc3BvbnNlKTsKICAgICAgICAgICAgdmFyIGl0ZW1zID0gcmVzcG9uc2UuaXRlbXM7CgogICAgICAgICAgICBmb3IodmFyIGkgaW4gaXRlbXMpIHsKICAgICAgICAgICAgICAgIGlmKCFpdGVtc1tpXS5jbG9zZWRfZGF0ZSkgewogICAgICAgICAgICAgICAgICAgIGZvcih2YXIgaiBpbiBjdXJyZW50cmVxKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGN1cnJlbnRyZXFbal0ucG9zdCA9PSBpdGVtc1tpXS5xdWVzdGlvbl9pZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgb3Blbi5wdXNoKHsgbXNnOiBjdXJyZW50cmVxW2pdLm1zZywgaW5mbzogaXRlbXNbaV0gfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWxldGUgY3VycmVudHJlcVtqXTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBmb3IodmFyIGkgaW4gY3VycmVudHJlcSkgY2xvc2VkLnB1c2goY3VycmVudHJlcVtpXSk7CgogICAgICAgICAgICBpZighcmVxdWVzdHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBjaGVja0RvbmUoKTsKICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgc2V0VGltZW91dChjaGVja1JlcXVlc3RzLCByZXNwb25zZS5iYWNrb2ZmICogMTAwMCk7CiAgICAgICAgfSk7CgogICAgICAgIHZhciB1cmwgPSB3aW5kb3cubG9jYXRpb24ucHJvdG9jb2wgKyAnLy9hcGkuc3RhY2tleGNoYW5nZS5jb20vMi4yL3F1ZXN0aW9ucy8nICsgZm9ybWF0UG9zdHMoY3VycmVudHJlcSkgKyAnPycgKyBbCiAgICAgICAgICAgICdwYWdlc2l6ZT0xMDAnLAogICAgICAgICAgICAnc2l0ZT1zdGFja292ZXJmbG93JywKICAgICAgICAgICAgJ2tleT1ZdnZrZkJjM0xPU0sqbXdhVFBrVVZRKCgnLAogICAgICAgICAgICAnZmlsdGVyPSEqMVNnUUdETUE4cUxFdHY4aXFRQ0F2aDF0WDJXREVyZTVnMGZFcmRRbicKICAgICAgICBdLmpvaW4oJyYnKTsKCiAgICAgICAgeGhyLm9wZW4oIkdFVCIsIHVybCk7CgogICAgICAgIHhoci5zZW5kKCk7CiAgICB9CiAgICAKICAgIHZhciBzY29wZSA9IGRvY3VtZW50LmJvZHk7CiAgICAKICAgIHZhciBzdHlsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3N0eWxlJyk7CiAgICBzdHlsZS50eXBlID0gJ3RleHQvY3NzJzsKICAgIHN0eWxlLnRleHRDb250ZW50ID0gWwogICAgICAgICcucmVxdWVzdC1pbmZvIHsnLAogICAgICAgICcgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOycsCiAgICAgICAgJyAgICBwb3NpdGlvbjogYWJzb2x1dGU7JywKICAgICAgICAnICAgIHRvcDogLTZweDsnLAogICAgICAgICcgICAgbGVmdDogMTAwJTsnLAogICAgICAgICcgICAgd2hpdGUtc3BhY2U6IG5vd3JhcDsnLAogICAgICAgICcgICAgcGFkZGluZzogNnB4IDEwcHg7JywKICAgICAgICAnICAgIHdpZHRoOiBhdXRvOycsCiAgICAgICAgJyAgICBib3JkZXItbGVmdDogNXB4IHNvbGlkICNmZjdiMTg7JywKICAgICAgICAnfScsCiAgICAgICAgJy5jb250ZW50IGE6dmlzaXRlZCB7JywKICAgICAgICAnICAgIGNvbG9yOiAjMDQ4MERFOycsCiAgICAgICAgJ30nCiAgICBdLmpvaW4oJ1xuJyk7CiAgICBzY29wZS5hcHBlbmRDaGlsZChzdHlsZSk7CgogICAgdmFyIG1lID0gKC9cZCsvLmV4ZWMoZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRvcGJhci1tZW51LWxpbmtzIGFbaHJlZl49Ii91c2VycyJdJykuaHJlZil8fFtmYWxzZV0pWzBdOwoKICAgIHZhciBtZXNzYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZXNzYWdlJyk7CgogICAgZm9yKHZhciBpIGluIE9iamVjdC5rZXlzKG1lc3NhZ2VzKSkgewogICAgICAgIG1lc3NhZ2UgPSAobWVzc2FnZXNbaV0ucXVlcnlTZWxlY3RvcignLmNvbnRlbnQnKS5pbm5lckhUTUx8fCcnKS50cmltKCk7CiAgICAgICAgaWYgKCFtZXNzYWdlKSBjb250aW51ZTsKICAgICAgICB2YXIgaXNyZXEgPSBmYWxzZTsKICAgICAgICBmb3IodmFyIGogaW4gcmVnZXhlcykgewogICAgICAgICAgICBpZihyZWdleGVzW2pdLnRlc3QobWVzc2FnZSkpIHsKICAgICAgICAgICAgICAgIGlzcmVxID0gdHJ1ZTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGlmICghaXNyZXEpIHsKICAgICAgICAgICAgdmFyIHBhcmVudCA9IG1lc3NhZ2VzW2ldLnBhcmVudE5vZGUucGFyZW50Tm9kZTsKICAgICAgICAgICAgbWVzc2FnZXNbaV0ucmVtb3ZlKCk7CiAgICAgICAgICAgIGlmKCFwYXJlbnQucXVlcnlTZWxlY3RvcignLm1lc3NhZ2UnKSkgcGFyZW50LnJlbW92ZSgpOwogICAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9CiAgICAgICAgdmFyIG1hdGNoZXMgPSBtZXNzYWdlLm1hdGNoKC9odHRwLio/KD86cVteXC9dKnxwb3N0cylcLyhcZCspL2cpOwogICAgICAgIHZhciBwb3N0cyA9IFtdOwogICAgICAgIGZvcih2YXIgayBpbiBPYmplY3Qua2V5cyhtYXRjaGVzKSkgewogICAgICAgICAgICBwb3N0cy5wdXNoKC8oPzpxW15cL10qfHBvc3RzKVwvKFxkKykvLmV4ZWMobWF0Y2hlc1trXSlbMV0pOwogICAgICAgIH0KICAgICAgICBmb3IodmFyIGwgaW4gcG9zdHMpIHJlcXVlc3RzLnB1c2goeyBtc2c6IG1lc3NhZ2VzW2ldLCBwb3N0OiBwb3N0c1tsXX0pOwogICAgfQogICAgcmxlbiA9IHJlcXVlc3RzLmxlbmd0aDsKICAgIHJlcXVlc3RzID0gY2h1bmtBcnJheShyZXF1ZXN0cywgMTAwKTsKCiAgICBjaGVja1JlcXVlc3RzKCk7Cn0gZWxzZSB7CiAgICB2YXIgbm9kZXMgPSB7fTsKCiAgICBub2Rlcy5zY29wZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjaGF0LWJ1dHRvbnMnKTsKCiAgICBub2Rlcy5zY29wZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnICcpKTsKCiAgICBub2Rlcy5idXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICAgIG5vZGVzLmJ1dHRvbi5jbGFzc05hbWUgPSAnYnV0dG9uIHJlcXVlc3RzLWJ1dHRvbic7CiAgICBub2Rlcy5idXR0b24udGV4dENvbnRlbnQgPSAncmVxdWVzdHMnOwogICAgbm9kZXMuc2NvcGUuYXBwZW5kQ2hpbGQobm9kZXMuYnV0dG9uKTsKCiAgICBub2Rlcy5zY29wZS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnICcpKTsKCiAgICBub2Rlcy5idXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpewogICAgICAgIHdpbmRvdy5vcGVuKHdpbmRvdy5sb2NhdGlvbi5vcmlnaW4gKyAnL3NlYXJjaD9xPXRhZ2dlZCUyRmN2LXBscyZSb29tPTQxNTcwJnBhZ2U9MSZwYWdlc2l6ZT01MCZzb3J0PW5ld2VzdCcpOwogICAgfSwgZmFsc2UpOwp9Cgo="},{"name":"Stack Exchange: Add Timeline and Revisions links to posts","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":[],"orig_matches":["*://*.askubuntu.com/questions/*","*://*.mathoverflow.net/questions/*","*://*.serverfault.com/questions/*","*://*.stackapps.com/questions/*","*://*.stackexchange.com/questions/*","*://*.stackoverflow.com/questions/*","*://*.superuser.com/questions/*"],"orig_noframes":null,"orig_run_at":"document-idle","use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1456451831358},"enabled":true,"position":6,"file_url":"https://gist.github.com/BrockA/5761948/raw/Add_Timeline_Button_to_Stack_Exchange_questions.user.js","uuid":"88d06f2f-ef9a-464b-85ee-432a3c718aa2","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIFN0YWNrIEV4Y2hhbmdlOiBBZGQgVGltZWxpbmUgYW5kIFJldmlzaW9ucyBsaW5rcyB0byBwb3N0cwovLyBAZGVzY3JpcHRpb24gQWRkcyBsaW5rcyB0byBwb3N0cyB0byBhbHdheXMgc2hvdyBoaXN0b3J5IGFuZCBsaW5rcyB0byBxdWVzdGlvbnMgdG8gc2hvdyB0aGUgVGltZWxpbmUiLgovLyBAbmFtZXNwYWNlICAgU3RhY2tFeGNoYW5nZQovLyBAbWF0Y2ggICAgICAgKjovLyouYXNrdWJ1bnR1LmNvbS9xdWVzdGlvbnMvKgovLyBAbWF0Y2ggICAgICAgKjovLyoubWF0aG92ZXJmbG93Lm5ldC9xdWVzdGlvbnMvKgovLyBAbWF0Y2ggICAgICAgKjovLyouc2VydmVyZmF1bHQuY29tL3F1ZXN0aW9ucy8qCi8vIEBtYXRjaCAgICAgICAqOi8vKi5zdGFja2FwcHMuY29tL3F1ZXN0aW9ucy8qCi8vIEBtYXRjaCAgICAgICAqOi8vKi5zdGFja2V4Y2hhbmdlLmNvbS9xdWVzdGlvbnMvKgovLyBAbWF0Y2ggICAgICAgKjovLyouc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLyoKLy8gQG1hdGNoICAgICAgICo6Ly8qLnN1cGVydXNlci5jb20vcXVlc3Rpb25zLyoKLy8gQHZlcnNpb24gICAgIDEuMwovLyBAaGlzdG9yeSAgICAgMS4zIFJlbW92ZWQgInF1ZXN0aW9uIG9ubHkiIGZlYXR1cmUKLy8gQGhpc3RvcnkgICAgIDEuMiBVcGRhdGVkIG1hdGNoIGxpc3QKLy8gQGhpc3RvcnkgICAgIDEuMSBBZGRlZCByZXZpc2lvbnMgbGluawovLyA9PS9Vc2VyU2NyaXB0PT0KCmZ1bmN0aW9uIGFkZFV0aWxpdHlMaW5rcyAoJCkgewoKICAgICQoIi5wb3N0LW1lbnUiKS5lYWNoICggZnVuY3Rpb24gKEopIHsKICAgICAgICB2YXIgalRoaXMgICA9ICQodGhpcyk7CiAgICAgICAgdmFyIGhyZWYgICAgPSBqVGhpcy5maW5kICgnYVtjbGFzcz0ic2hvcnQtbGluayJdJykuYXR0ciAoImhyZWYiKTsKICAgICAgICB2YXIgaWRNdGNoICA9IGhyZWYuc3BsaXQgKC9bcWFdXC8oXGQrKS8pOwogICAgICAgIGlmIChpZE10Y2gubGVuZ3RoID4gMikgewogICAgICAgICAgICB2YXIgaWQgID0gaWRNdGNoWzFdOwoKICAgICAgICAgICAgalRoaXMuYXBwZW5kICgKICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz0ibHNlcCI+fDwvc3Bhbj48YSBocmVmPSIvcG9zdHMvJyArIGlkICsgJy9yZXZpc2lvbnMiPnJldmlzaW9uczwvYT4nCiAgICAgICAgICAgICk7CgogICAgICAgICAgICBqVGhpcy5hcHBlbmQgKAogICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPSJsc2VwIj58PC9zcGFuPjxhIGhyZWY9Ii9wb3N0cy8nICsgaWQgKyAnL3RpbWVsaW5lIj50aW1lbGluZTwvYT4nCiAgICAgICAgICAgICk7CiAgICAgICAgfQogICAgfSApOwogICAgJCgiLnJldmNlbGwzLnZtPmRpdiIpLmVhY2ggKGZ1bmN0aW9uICgpIHsKICAgICAgICAvLy0tIExvb2tzIGxpa2UgYSB0aW1lYm9tYi4uLgogICAgICAgIGd1aWQgPSAkKHRoaXMpLmZpbmQgKCJhIikuYXR0ciAoImhyZWYiKS5tYXRjaCAoL1x3ezh9ICg/Oi1cd3s0fSApezN9LVx3ezEyfS8pWzBdOwogICAgICAgICQodGhpcykucHJlcGVuZCAoJzxhIGhyZWY9IiNyZXYnICsgZ3VpZCArICciPmxpbms8L2E+PHNwYW4gY2xhc3M9ImxzZXAiPnw8L3NwYW4+Jyk7CiAgICB9ICk7Cn0KCndpdGhQYWdlc19qUXVlcnkgKGFkZFV0aWxpdHlMaW5rcyk7CgpmdW5jdGlvbiB3aXRoUGFnZXNfalF1ZXJ5IChOQU1FRF9GdW5jdGlvblRvUnVuKSB7CiAgICAvLy0tLSBVc2UgbmFtZWQgZnVuY3Rpb25zIGZvciBjbGFyaXR5IGFuZCBkZWJ1Z2dpbmcuLi4KICAgIHZhciBmdW5jVGV4dCAgICAgICAgPSBOQU1FRF9GdW5jdGlvblRvUnVuLnRvU3RyaW5nICgpOwogICAgdmFyIGZ1bmNOYW1lICAgICAgICA9IGZ1bmNUZXh0LnJlcGxhY2UgKC9eZnVuY3Rpb25ccysoXHcrKVxzKlwoKC58XG58XHIpKyQvLCAiJDEiKTsKICAgIHZhciBzY3JpcHQgICAgICAgICAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50ICgic2NyaXB0Iik7CiAgICBzY3JpcHQudGV4dENvbnRlbnQgID0gZnVuY1RleHQgKyAiXG5cbiI7CiAgICBzY3JpcHQudGV4dENvbnRlbnQgKz0gJ2pRdWVyeShkb2N1bWVudCkucmVhZHkoIGZ1bmN0aW9uICgpIHsnICsgZnVuY05hbWUgKyAnKGpRdWVyeSk7fSApOyc7CiAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkIChzY3JpcHQpOwp9"},{"name":"Chat Reply Helper for Stack Exchange sites","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":["/^https?:\\/\\/chat\\.stackexchange\\.com/.*$/","/^https?:\\/\\/chat\\.stackoverflow\\.com/.*$/","/^https?:\\/\\/chat\\.meta\\.stackexchange\\.com/.*$/"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null,"user_agent":""},"storage":{"data":{},"ts":1456451831374},"enabled":true,"position":7,"file_url":"https://raw.githubusercontent.com/oliversalzburg/se-chat-reply-highlight/master/dist/se-chat-replyhelper.user.js","uuid":"4d7672e8-fd1e-4a91-a55f-fbe9bc041877","source":"LyoqIEBwcmVzZXJ2ZQovLyA9PVVzZXJTY3JpcHQ9PQovLyBAbmFtZSAgICAgICAgICAgQ2hhdCBSZXBseSBIZWxwZXIgZm9yIFN0YWNrIEV4Y2hhbmdlIHNpdGVzCi8vIEBuYW1lc3BhY2UgICAgICBodHRwOi8vb2xpdmVyc2FsemJ1cmcuZ2l0aHViLmNvbS8KLy8gQHZlcnNpb24gICAgICAgIDIuNS4xCi8vIEBkZXNjcmlwdGlvbiAgICBIYW5kbGUgc3RydWN0dXJlZCBjb252ZXJzYXRpb25zIG1vcmUgY29udmVuaWVudGx5Ci8vIEBob21lcGFnZSAgICAgICBodHRwczovL2dpdGh1Yi5jb20vb2xpdmVyc2FsemJ1cmcvc2UtY2hhdC1yZXBseS1oaWdobGlnaHQKLy8gQGdyYW50ICAgICAgICAgIG5vbmUKLy8gQGluY2x1ZGUgL15odHRwcz86XC9cL2NoYXRcLnN0YWNrZXhjaGFuZ2VcLmNvbS8uKiQvCi8vIEBpbmNsdWRlIC9eaHR0cHM/OlwvXC9jaGF0XC5zdGFja292ZXJmbG93XC5jb20vLiokLwovLyBAaW5jbHVkZSAvXmh0dHBzPzpcL1wvY2hhdFwubWV0YVwuc3RhY2tleGNoYW5nZVwuY29tLy4qJC8KCi8vID09L1VzZXJTY3JpcHQ9PQoqLwoKLy8galF1ZXJ5IENhcmV0IFBsdWdpbgovKgogKgogKiBDb3B5cmlnaHQgKGMpIDIwMTAgQy4gRi4sIFdvbmcgKDxhIGhyZWY9Imh0dHA6Ly9jbG91ZGdlbi53MG5nLmhrIj5DbG91ZGdlbiBFeGFtcGxldCBTdG9yZTwvYT4pCiAqIExpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgTGljZW5zZToKICogaHR0cDovL3d3dy5vcGVuc291cmNlLm9yZy9saWNlbnNlcy9taXQtbGljZW5zZS5waHAKICoKICovCi8vIEBmb3JtYXR0ZXI6b2ZmCihmdW5jdGlvbihlLHQsbixyKXtlLmZuLmNhcmV0PWZ1bmN0aW9uKGkscyl7dmFyIG8sdSxhPXRoaXNbMF0sZj1lLmJyb3dzZXIubXNpZTtpZih0eXBlb2YgaT09PSJvYmplY3QiJiZ0eXBlb2YgaS5zdGFydD09PSJudW1iZXIiJiZ0eXBlb2YgaS5lbmQ9PT0ibnVtYmVyIil7bz1pLnN0YXJ0O3U9aS5lbmR9ZWxzZSBpZih0eXBlb2YgaT09PSJudW1iZXIiJiZ0eXBlb2Ygcz09PSJudW1iZXIiKXtvPWk7dT1zfWVsc2UgaWYodHlwZW9mIGk9PT0ic3RyaW5nIil7aWYoKG89YS52YWx1ZS5pbmRleE9mKGkpKT4tMSl1PW8raVt0XTtlbHNlIG89bnVsbH1lbHNlIGlmKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChpKT09PSJbb2JqZWN0IFJlZ0V4cF0iKXt2YXIgbD1pLmV4ZWMoYS52YWx1ZSk7aWYobCE9bnVsbCl7bz1sLmluZGV4O3U9bytsWzBdW3RdfX1pZih0eXBlb2YgbyE9InVuZGVmaW5lZCIpe2lmKGYpe3ZhciBjPXRoaXNbMF0uY3JlYXRlVGV4dFJhbmdlKCk7Yy5jb2xsYXBzZSh0cnVlKTtjLm1vdmVTdGFydCgiY2hhcmFjdGVyIixvKTtjLm1vdmVFbmQoImNoYXJhY3RlciIsdS1vKTtjLnNlbGVjdCgpfWVsc2V7dGhpc1swXS5zZWxlY3Rpb25TdGFydD1vO3RoaXNbMF0uc2VsZWN0aW9uRW5kPXV9dGhpc1swXS5mb2N1cygpO3JldHVybiB0aGlzfWVsc2V7aWYoZil7dmFyIGg9ZG9jdW1lbnQuc2VsZWN0aW9uO2lmKHRoaXNbMF0udGFnTmFtZS50b0xvd2VyQ2FzZSgpIT0idGV4dGFyZWEiKXt2YXIgcD10aGlzLnZhbCgpLGQ9aFtuXSgpW3JdKCk7ZC5tb3ZlRW5kKCJjaGFyYWN0ZXIiLHBbdF0pO3ZhciB2PWQudGV4dD09IiI/cFt0XTpwLmxhc3RJbmRleE9mKGQudGV4dCk7ZD1oW25dKClbcl0oKTtkLm1vdmVTdGFydCgiY2hhcmFjdGVyIiwtcFt0XSk7dmFyIG09ZC50ZXh0W3RdfWVsc2V7dmFyIGQ9aFtuXSgpLGc9ZFtyXSgpO2cubW92ZVRvRWxlbWVudFRleHQodGhpc1swXSk7Zy5zZXRFbmRQb2ludCgiRW5kVG9FbmQiLGQpO3ZhciB2PWcudGV4dFt0XS1kLnRleHRbdF0sbT12K2QudGV4dFt0XX19ZWxzZXt2YXIgdj1hLnNlbGVjdGlvblN0YXJ0LG09YS5zZWxlY3Rpb25FbmR9dmFyIHk9YS52YWx1ZS5zdWJzdHJpbmcodixtKTtyZXR1cm57c3RhcnQ6dixlbmQ6bSx0ZXh0OnkscmVwbGFjZTpmdW5jdGlvbihlKXtyZXR1cm4gYS52YWx1ZS5zdWJzdHJpbmcoMCx2KStlK2EudmFsdWUuc3Vic3RyaW5nKG0sYS52YWx1ZVt0XSl9fX19fSkoJCwibGVuZ3RoIiwiY3JlYXRlUmFuZ2UiLCJkdXBsaWNhdGUiKQovLyBAZm9ybWF0dGVyOm9uCgokLmZuLnJldmVyc2UgPSBbXS5yZXZlcnNlOwoKLyoqCiAqIENvbnN0cnVjdHMgYSBuZXcgUmVwbHlIZWxwZXIgaW5zdGFuY2UKICogQGNvbnN0cnVjdG9yCiAqLwpmdW5jdGlvbiBSZXBseUhlbHBlcigpIHsKICB0aGlzLnJlZ2lzdGVySGFuZGxlcigpOwogIHRoaXMuZW5hYmxlUXVvdGVCdWJibGUoKTsKfQoKUmVwbHlIZWxwZXIucHJvdG90eXBlID0gewoKICBxdW90ZWRNZXNzYWdlIDogbnVsbCwKCiAgLyoqCiAgICogUmVwbHkgdG8gYSBtZXNzYWdlIHdpdGggYSBnaXZlbiBJRAogICAqIEBwYXJhbSBpZCBUaGUgSUQgb2YgdGhlIG1lc3NhZ2UgdG8gcmVwbHkgdG8KICAgKiBAcGFyYW0gdHJpZ2dlciBUaGUgc3RyaW5nIHRoYXQgdHJpZ2dlcmVkIG91ciBzY3JpcHQgdG8gcnVuLgogICAqLwogIHJlcGx5VG8gOiBmdW5jdGlvbiggaWQsIHRyaWdnZXIgKSB7CiAgICB0cmlnZ2VyID0gdHJpZ2dlciB8fCAiOiI7CiAgICAvLyBJZiA6IHdhc24ndCBvdXIgdHJpZ2dlciwgd2UgYXNzdW1lIHRoYXQgd2UnbGwgbmVlZCBhZGRpdGlvbmFsIHBhZGRpbmcgYWZ0ZXIgdGhlIHRyaWdnZXIuCiAgICB2YXIgX3BhZGRpbmcgPSAiIjsKICAgIGlmKCAiOiIgIT0gdHJpZ2dlciAmJiAhdHJpZ2dlci5tYXRjaCggLyAkLyApICkgewogICAgICBfcGFkZGluZyA9ICIgIjsKICAgIH0KCiAgICB2YXIgX2lucHV0RWxlbWVudCA9ICQoICIjaW5wdXQiICk7CiAgICB2YXIgX2NhcmV0UG9zaXRpb24gPSBfaW5wdXRFbGVtZW50LmNhcmV0KCkuc3RhcnQ7CiAgICB2YXIgX2N1cnJlbnRUZXh0ID0gX2lucHV0RWxlbWVudC52YWwoKTsKICAgIHZhciBfbmV3VGV4dCA9IF9jdXJyZW50VGV4dC5yZXBsYWNlKCBuZXcgUmVnRXhwKCAiXiIgKyB0cmlnZ2VyICsgIlxcZCogPyIgKSwgdHJpZ2dlciArIF9wYWRkaW5nICsgaWQgKyAiICIgKTsKICAgIF9pbnB1dEVsZW1lbnQudmFsKCBfbmV3VGV4dCApOwogICAgX2lucHV0RWxlbWVudC5jYXJldCggX2NhcmV0UG9zaXRpb24sIF9jYXJldFBvc2l0aW9uICk7CiAgfSwKCiAgLyoqCiAgICogU2Nyb2xsIGEgZ2l2ZW4gbWVzc2FnZSBpbnRvIHZpZXcKICAgKiBAcGFyYW0gbWVzc2FnZSBUaGUgbWVzc2FnZSB0byBzY3JvbGwgaW50byB2aWV3IChqUXVlcnkgb2JqZWN0KQogICAqLwogIHNjcm9sbFRvIDogZnVuY3Rpb24oIG1lc3NhZ2UgKSB7CiAgICBpZiggIW1lc3NhZ2Uub2Zmc2V0KCkgKSByZXR1cm47CgogICAgdmFyIF90YXJnZXQgPSBtZXNzYWdlLm9mZnNldCgpLnRvcCAtIDEwOwogICAgaWYoIF90YXJnZXQgPCAwICkgX3RhcmdldCA9IDA7CiAgICAkKCAiaHRtbCwgYm9keSIgKS5hbmltYXRlKCB7IHNjcm9sbFRvcCA6IF90YXJnZXQgfSwgNTAgKTsKICB9LAoKICAvKioKICAgKiBEb2VzIGFsbCB0aGUgdGhpbmdzIG5lZWRlZCB0byBtYXJrIGEgbmV3IG1lc3NhZ2UgYXMgdGhlIG1lc3NhZ2UgdGhhdCBpcyBiZWluZyByZXBsaWVkIHRvLgogICAqIEBwYXJhbSBfdGFyZ2V0CiAgICovCiAgdXBkYXRlUmVwbHkgOiBmdW5jdGlvbiggX3RhcmdldCwgX3RyaWdnZXIgKSB7CiAgICAvLyBQdXQgb3VyIG1hcmtlciBhbmQgaGlnaGxpZ2h0IGNsYXNzZXMgb24gaXQuLi4KICAgIF90YXJnZXQuYWRkQ2xhc3MoICJyZXBseS1jaGlsZCBzZS1oaWdobGlnaHQtaGVscGVyIiApOwogICAgLy8gLi4uYW5kIG1ha2Ugc3VyZSBpdCdzIHNjcm9sbGVkIGludG8gdmlldy4KICAgIHRoaXMuc2Nyb2xsVG8oIF90YXJnZXQgKTsKCiAgICAvLyBOb3cgZ3JhYiB0aGUgSUQgb2YgdGhlIG5ldyBtZXNzYWdlLi4uCiAgICB2YXIgX2lkID0gX3RhcmdldC5hdHRyKCAiaWQiICk7CiAgICAvLyAuLi5hbmQgdXBkYXRlIG91ciBpbnB1dCBib3guCiAgICBpZiggX2lkICkgdGhpcy5yZXBseVRvKCBfaWQuc3Vic3RyaW5nKCAibWVzc2FnZS0iLmxlbmd0aCApLCBfdHJpZ2dlciApOwogIH0sCgogIHJlZ2lzdGVySGFuZGxlciA6IGZ1bmN0aW9uKCkgewogICAgdmFyIHJlcGx5SGVscGVyID0gdGhpczsKICAgICQoICIjaW5wdXQiICkua2V5ZG93bigKICAgICAgZnVuY3Rpb24oIGUgKSB7CiAgICAgICAgLy8gU3RvcmUgcmVmZXJlbmNlIHRvIGlucHV0IGVsZW1lbnQKICAgICAgICB2YXIgX2lucHV0RWxlbWVudCA9ICQoICIjaW5wdXQiICk7CiAgICAgICAgLy8gRG9uJ3QgdXNlIHJlcGx5LXRvIGhlbHBlciB3aGVuIGEgcHJldmlvdXMgbWVzc2FnZSBpcyBiZWluZyBlZGl0ZWQKICAgICAgICBpZiggX2lucHV0RWxlbWVudC5oYXNDbGFzcyggImVkaXRpbmciICkgKSByZXR1cm47CgogICAgICAgIC8vIFN0b3JlIGEgcmVmZXJlbmNlIHRvIHRoZSB0ZXh0IGluIHRoZSBpbnB1dCBlbGVtZW50CiAgICAgICAgdmFyIF90ZXh0ID0gX2lucHV0RWxlbWVudC52YWwoKTsKICAgICAgICAvLyBSdW4gYSBtYWdpYyByZWd1bGFyIGV4cHJlc3Npb24gb24gdGhlIGlucHV0IHRleHQKICAgICAgICAvLyAtIExpbmUgaGFzIHRvIHN0YXJ0IHdpdGggOgogICAgICAgIC8vIC0gRm9sbG93ZWQgYnkgZWl0aGVyCiAgICAgICAgLy8gICAgIC0gRW5kIG9mIExpbmUKICAgICAgICAvLyAgICAgLSBPbmUgb3IgbW9yZSBkaWdpdHMKICAgICAgICAvLyAgICAgLSBBIHNwYWNlCiAgICAgICAgdmFyIF9pZE1hdGNoID0gX3RleHQubWF0Y2goIC9eKDp8ISF0ZWxsID8pKCR8XGQrfCApLyApOwoKICAgICAgICAvLyBJZiB0aGUgZXhwcmVzc2lvbiBtYXRjaGVkIGFueXRoaW5nLi4uCiAgICAgICAgaWYoIF9pZE1hdGNoICkgewogICAgICAgICAgLy8gMzggPSBVcCBBcnJvdywgNDAgPT0gRG93biBBcnJvdwogICAgICAgICAgaWYoIDM4ID09IGUua2V5Q29kZSB8fCA0MCA9PSBlLmtleUNvZGUgKSB7CgogICAgICAgICAgICAvLyBEZXRlcm1pbmUgd2hpY2ggY2hhcmFjdGVyIHNlcXVlbmNlIGNhdXNlZCBvdXIgcmVwbHkgaGVscGVyIHRvIGJlIGludm9rZWQuCiAgICAgICAgICAgIHZhciBfdHJpZ2dlciA9IF9pZE1hdGNoWyAxIF07CgogICAgICAgICAgICAvLyBGaW5kIHRoZSBwb3NpdGlvbiBvZiB0aGUgY2FyZXQKICAgICAgICAgICAgdmFyIF9jYXJldFBvc2l0aW9uID0gX2lucHV0RWxlbWVudC5jYXJldCgpLnN0YXJ0OwogICAgICAgICAgICAvLyBJZiBpdCBpcyBiZWhpbmQgdGhlIElELCBkb24ndCBkbyBhbnl0aGluZyAoY291bGQgY29uZmxpY3Qgd2l0aCBtdWx0aS1saW5lIGVkaXRpbmcpLgogICAgICAgICAgICBpZiggX2NhcmV0UG9zaXRpb24gPiBfaWRNYXRjaFsgMCBdLmxlbmd0aCArIDEgKSByZXR1cm47CgogICAgICAgICAgICAvLyBEZXRlcm1pbmUgaWYgdGhlIHVzZXIgaXMgbW92aW5nIHVwd2FyZHMgb3IgZG93bndhcmRzCiAgICAgICAgICAgIHZhciBfZGlyZWN0aW9uID0gKCAzOCA9PSBlLmtleUNvZGUgKSA/IC0xIDogMTsKCiAgICAgICAgICAgIC8vIEZpbmQgdGhlIG1lc3NhZ2UgdGhhdCB3YXMgcHJldmlvdXNseSBzZWxlY3RlZCBieSB0aGUgdXNlciwKICAgICAgICAgICAgLy8gYmVjYXVzZSB3ZSBub3cgd2FudCB0byBzZWxlY3QgYW5vdGhlciBtZXNzYWdlIHJlbGF0aXZlIHRvIGl0LgogICAgICAgICAgICB2YXIgX3ByZXZpb3VzTWFya2VyID0gJCggIi5yZXBseS1jaGlsZC5zZS1oaWdobGlnaHQtaGVscGVyIiApOwogICAgICAgICAgICAvLyBEaWQgd2UgZmluZCBhIHByZXZpb3VzIG1hcmtlcj8KICAgICAgICAgICAgaWYoIDAgPCBfcHJldmlvdXNNYXJrZXIubGVuZ3RoICkgewogICAgICAgICAgICAgIC8vIFdlIG9ubHkgY2FyZSBhYm91dCB0aGUgZmlyc3QgbWF0Y2gKICAgICAgICAgICAgICBfcHJldmlvdXNNYXJrZXIgPSBfcHJldmlvdXNNYXJrZXIuZmlyc3QoKTsKICAgICAgICAgICAgICAvLyBSZW1vdmUgdGhlIHByZXZpb3VzIENTUyBtYXJrZXIgY2xhc3NlcyBmcm9tIGl0LgogICAgICAgICAgICAgIF9wcmV2aW91c01hcmtlci5yZW1vdmVDbGFzcyggInJlcGx5LWNoaWxkIHNlLWhpZ2hsaWdodC1oZWxwZXIiICk7CgogICAgICAgICAgICAgIC8vIEdyYWIgYSBjb2xsZWN0aW9uIG9mIGFsbCBtZXNzYWdlcy4KICAgICAgICAgICAgICB2YXIgX21lc3NhZ2VzID0gJCggIi5tZXNzYWdlcyAubWVzc2FnZSIgKTsKICAgICAgICAgICAgICAvLyBSZXZlcnNlIHRoZSBzZWxlY3Rpb24sIGRlcGVuZGluZyBvbiB3aGljaCBkaXJlY3Rpb24gd2UncmUgbW92aW5nLgogICAgICAgICAgICAgIGlmKCAtMSA9PSBfZGlyZWN0aW9uICkgX21lc3NhZ2VzID0gX21lc3NhZ2VzLnJldmVyc2UoKTsKCiAgICAgICAgICAgICAgLy8gSXRlcmF0ZSBvdmVyIGFsbCBtZXNzYWdlcy4KICAgICAgICAgICAgICBfbWVzc2FnZXMuZWFjaCggZnVuY3Rpb24oIGluZGV4LCBpdGVtICkgewogICAgICAgICAgICAgICAgLy8gSWYgdGhlIG1lc3NhZ2Ugd2UncmUgY3VycmVudGx5IGxvb2tpbmcgYXQsIGlzIHRoZSBvbmUgd2UgcHJldmlvdXNseSBtYXJrZWQuLi4KICAgICAgICAgICAgICAgIGlmKCAkKCBpdGVtICkuYXR0ciggImlkIiApID09IF9wcmV2aW91c01hcmtlci5hdHRyKCAiaWQiICkgKSB7CiAgICAgICAgICAgICAgICAgIC8vIC4uLnNlbGVjdCB0aGUgbWVzc2FnZSBhZnRlciBpdCBhcyB0aGUgbmV3IHRhcmdldC4KICAgICAgICAgICAgICAgICAgdmFyIF90YXJnZXQgPSAkKCBfbWVzc2FnZXNbIGluZGV4ICsgMSBdICkuZmlyc3QoKTsKICAgICAgICAgICAgICAgICAgaWYoICFfdGFyZ2V0ICkgcmV0dXJuOwoKICAgICAgICAgICAgICAgICAgcmVwbHlIZWxwZXIudXBkYXRlUmVwbHkoIF90YXJnZXQsIF90cmlnZ2VyICk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSApOwoKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyBJZiBubyBtZXNzYWdlIHdhcyBwcmV2aW91c2x5IHNlbGVjdGVkLCBqdXN0IHRhcmdldCB0aGUgbGFzdCBtZXNzYWdlIGluIHRoZSBsb2cuCiAgICAgICAgICAgICAgdmFyIF9tZXNzYWdlcyA9ICQoICIubWVzc2FnZXMgLm1lc3NhZ2UiICk7CiAgICAgICAgICAgICAgdmFyIF90YXJnZXQgPSBfbWVzc2FnZXMubGFzdCgpOwogICAgICAgICAgICAgIGlmKCAhX3RhcmdldCApIHJldHVybjsKCiAgICAgICAgICAgICAgcmVwbHlIZWxwZXIudXBkYXRlUmVwbHkoIF90YXJnZXQsIF90cmlnZ2VyICk7CgogICAgICAgICAgICAgIC8vIElmIHdlIHdlcmUganVzdCBiZWdpbm5pbmcgYSBuZXcgcmVwbHksIHB1dCB0aGUgY2FyZXQgYWZ0ZXIgdGhlIElECiAgICAgICAgICAgICAgaWYoIF90ZXh0ID09IF90cmlnZ2VyICkgewogICAgICAgICAgICAgICAgdmFyIF9uZXdDYXJldFBvc2l0aW9uID0gX2lucHV0RWxlbWVudC52YWwoKS5sZW5ndGg7CiAgICAgICAgICAgICAgICBfaW5wdXRFbGVtZW50LmNhcmV0KCBfbmV3Q2FyZXRQb3NpdGlvbiwgX25ld0NhcmV0UG9zaXRpb24gKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIH0KCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIElmIHRoZSB1c2VyIGlzbid0IHJlcGx5aW5nIHRvIGFueXRoaW5nLAogICAgICAgICAgLy8gbWFrZSBzdXJlIHRoZSBtYXJrZXJzIGFyZSBjbGVhcmVkLgogICAgICAgICAgJCggIi5yZXBseS1jaGlsZC5zZS1oaWdobGlnaHQtaGVscGVyIiApLnJlbW92ZUNsYXNzKCAicmVwbHktY2hpbGQgc2UtaGlnaGxpZ2h0LWhlbHBlciIgKTsKICAgICAgICB9CiAgICAgIH0gKTsKCiAgICAkKCBkb2N1bWVudCApLm9uKCAiY2xpY2siLCAiLm5ld3JlcGx5IiwgZnVuY3Rpb24oIGV2ZW50ICkgewogICAgICByZXBseUhlbHBlci51cGRhdGVSZXBseSggJCggdGhpcyApLnBhcmVudHMoICIubWVzc2FnZXMgLm1lc3NhZ2UiICkgKTsKICAgIH0gKTsKICB9LAoKICAvKioKICAgKiBFbmFibGVzIGEgYnViYmxlIHRoYXQgc2hvd3MgdGhlIGNvbnRlbnQgb2YgdGhlIG1lc3NhZ2UgcmVwbGllZCB0by4KICAgKiBUaGlzIGJ1YmJsZSBpcyBzaG93biB3aGVuIGhvdmVyaW5nIG92ZXIgdGhlIGljb24gdGhhdCBpbmRpY2F0ZXMgdGhhdCBhIG1lc3NhZ2UgaXMgYSByZXBseS4KICAgKi8KICBlbmFibGVRdW90ZUJ1YmJsZSA6IGZ1bmN0aW9uKCkgewogICAgJCggZG9jdW1lbnQgKS5vbiggIm1vdXNlbW92ZSIsIGZ1bmN0aW9uKCBldmVudCApIHsKICAgICAgaWYoIG51bGwgPT0gcmVwbHlIZWxwZXIucXVvdGVkTWVzc2FnZSApIHJldHVybjsKCiAgICAgIC8vIERldGVybWluZSB0aGUgaGVpZ2h0IG9mIHRoZSByZXBseSBidWJibGUuCiAgICAgIC8vIFdlIG5lZWQgdG8gZG8gdGhpcyBoZXJlIGJlY2F1c2Ugd2hlbiB3ZSBhdHRhY2ggdGhlIGJ1YmJsZSB0byB0aGUgRE9NLAogICAgICAvLyB0aGUgaGVpZ2h0IGlzIG5vdCB5ZXQgYXZhaWxhYmxlLgogICAgICB2YXIgbWVzc2FnZUhlaWdodCA9IHJlcGx5SGVscGVyLnF1b3RlZE1lc3NhZ2UuaGVpZ2h0KCk7CiAgICAgIGlmKCAwID09IG1lc3NhZ2VIZWlnaHQgKSByZXR1cm47CgogICAgICAvLyBDYWxjdWxhdGUgdGhlIGNvcnJlY3QgcG9zaXRpb24gZm9yIHRoZSBidWJibGUuCiAgICAgIHZhciBsZWZ0ID0gZXZlbnQucGFnZVg7CiAgICAgIHZhciB0b3AgPSBldmVudC5wYWdlWSAtICggbWVzc2FnZUhlaWdodCArIDMwICk7CiAgICAgIHJlcGx5SGVscGVyLnF1b3RlZE1lc3NhZ2UuYXR0ciggInN0eWxlIiwgInBvc2l0aW9uIDogYWJzb2x1dGU7IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgImxlZnQ6IiArIGxlZnQgKyAicHg7IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInRvcDoiICsgdG9wICsgInB4OyIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ6LWluZGV4IDogMzsiICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAibWluLXdpZHRoIDogMHB4OyIKICAgICAgKTsKICAgIH0gKTsKCiAgICAkKCBkb2N1bWVudCApLm9uKCAibW91c2VlbnRlciIsICIucmVwbHktaW5mbyIsIGZ1bmN0aW9uKCBldmVudCApIHsKICAgICAgdmFyIHF1b3RlZE1lc3NhZ2UgPSBudWxsOwoKICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBJRCBvZiB0aGUgbWVzc2FnZSB0aGF0IHdhcyByZXBsaWVkIHRvLgogICAgICB2YXIgaHJlZiA9ICQoIHRoaXMgKS5hdHRyKCAiaHJlZiIgKTsKICAgICAgdmFyIGhhc2hQb3NpdGlvbiA9IGhyZWYubGFzdEluZGV4T2YoICIjIiApOwogICAgICB2YXIgb3JpZ2luYWxJZCA9IGhyZWYuc3Vic3RyKCBoYXNoUG9zaXRpb24gKyAxICk7CgogICAgICAvLyBGaW5kIHRoZSBvcmlnaW5hbCBtZXNzYWdlIChpZiBpdCBpcyBzdGlsbCBpbiB0aGUgbG9nKS4KICAgICAgdmFyIG9yaWdpbmFsTWVzc2FnZSA9ICQoICIjbWVzc2FnZS0iICsgb3JpZ2luYWxJZCApOwogICAgICBpZiggMCA8IG9yaWdpbmFsTWVzc2FnZS5sZW5ndGggKSB7CiAgICAgICAgLy8gR2V0IHRoZSBhY3R1YWwgbWVzc2FnZQogICAgICAgIHZhciBtZXNzYWdlQ29udGVudCA9ICQoICIuY29udGVudCIsIG9yaWdpbmFsTWVzc2FnZSApLmh0bWwoKTsKCiAgICAgICAgLy8gV2FzIHRoZSBtZXNzYWdlIGZyb20gdXM/CiAgICAgICAgdmFyIHdhc01pbmUgPSBvcmlnaW5hbE1lc3NhZ2UucGFyZW50cyggIi51c2VyLWNvbnRhaW5lciIgKS5oYXNDbGFzcyggIm1pbmUiICk7CgogICAgICAgIC8vIFRyeSB0byBmaW5kIGEgdGltZXN0YW1wCiAgICAgICAgLy8gV2Ugc2VhcmNoIGEgYml0IGhlcmUgYW5kIHRoZXJlLCBhcyBvdGhlciBleHRlbnNpb25zIGNhbiBhZGQgdGltZXN0YW1wcyBhdCBvdGhlciBwbGFjZXMuCiAgICAgICAgdmFyIHRpbWVzdGFtcCA9IG51bGw7CiAgICAgICAgdmFyIG1lc3NhZ2VDaGlsZCA9ICQoICIudGltZXN0YW1wIiwgb3JpZ2luYWxNZXNzYWdlICk7CiAgICAgICAgdmFyIG1lc3NhZ2VTaWJsaW5nID0gJCggb3JpZ2luYWxNZXNzYWdlICkuc2libGluZ3MoICIudGltZXN0YW1wIiApOwogICAgICAgIGlmKCAwIDwgbWVzc2FnZUNoaWxkLmxlbmd0aCApIHsKICAgICAgICAgIHRpbWVzdGFtcCA9IG1lc3NhZ2VDaGlsZDsKICAgICAgICB9IGVsc2UgaWYoIDAgPCBtZXNzYWdlU2libGluZy5sZW5ndGggKSB7CiAgICAgICAgICB0aW1lc3RhbXAgPSBtZXNzYWdlU2libGluZzsKICAgICAgICB9CgogICAgICAgIC8vIEZpbmQgdGhlIGF1dGhvcgogICAgICAgIHZhciBhdXRob3IgPSBudWxsOwogICAgICAgIHZhciBzaWduYXR1cmUgPSBvcmlnaW5hbE1lc3NhZ2UucGFyZW50cyggIi5tZXNzYWdlcyIgKS5zaWJsaW5ncyggIi5zaWduYXR1cmUiICk7CiAgICAgICAgaWYoIDAgPCBzaWduYXR1cmUubGVuZ3RoICkgewogICAgICAgICAgYXV0aG9yID0gc2lnbmF0dXJlLmNsb25lKCk7CiAgICAgICAgICAvLyBSZW1vdmUgYWxsIGJ1dCB0aGUgdGlueSBzaWduYXR1cmUKICAgICAgICAgIHZhciB0aW55U2lnbmF0dXJlID0gJCggIi50aW55LXNpZ25hdHVyZSIsIGF1dGhvciApLmRldGFjaCgpOwogICAgICAgICAgJCggYXV0aG9yICkuZW1wdHkoKS5hcHBlbmQoIHRpbnlTaWduYXR1cmUgKTsKICAgICAgICAgICQoIHRpbnlTaWduYXR1cmUgKS5zaG93KCk7CgogICAgICAgICAgLy8gQ29uc3RydWN0IG91ciBuZXcgYXV0aG9yIG92ZXJsYXkKICAgICAgICAgIHZhciBiYWNrZ3JvdW5kQ29sb3IgPSBvcmlnaW5hbE1lc3NhZ2UucGFyZW50cyggIi5tZXNzYWdlcyIgKS5jc3MoICJiYWNrZ3JvdW5kLWNvbG9yIiApOwogICAgICAgICAgYXV0aG9yLmF0dHIoICJzdHlsZSIsICJiYWNrZ3JvdW5kLWNvbG9yIDogIiArIGJhY2tncm91bmRDb2xvciArICI7IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIndpZHRoIDogaW5oZXJpdDsiICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYm9yZGVyLXRvcCA6IDFweCBzb2xpZCBibGFjazsiICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYm9yZGVyLXJpZ2h0IDogMXB4IHNvbGlkIGJsYWNrOyIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJib3JkZXItbGVmdCA6IDFweCBzb2xpZCBibGFjazsiICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYm9yZGVyLXRvcC1sZWZ0LXJhZGl1cyA6IDZweDsiICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAiYm9yZGVyLXRvcC1yaWdodC1yYWRpdXMgOiA2cHg7IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInBhZGRpbmcgOiAycHggNXB4IDJweCA1cHg7IiArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInotaW5kZXggOiAyOyIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJwb3NpdGlvbiA6IHJlbGF0aXZlOyIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ0b3AgOiAxcHg7IgogICAgICAgICAgKTsKICAgICAgICB9CgogICAgICAgIC8vIENvbnN0cnVjdCB0aGUgZmluYWwgbWVzc2FnZSBlbGVtZW50LgogICAgICAgIHF1b3RlZE1lc3NhZ2UgPSAkKAogICAgICAgICAgIjxkaXYgY2xhc3M9J3VzZXItY29udGFpbmVyIG1vbm9sb2d1ZSc+IgogICAgICAgICAgICArICI8ZGl2IGNsYXNzPSdtZXNzYWdlcyc+IgogICAgICAgICAgICArICI8ZGl2IGNsYXNzPSdtZXNzYWdlJz4iCiAgICAgICAgICAgICsgIjxkaXYgY2xhc3M9J2NvbnRlbnQnPiIKICAgICAgICAgICAgKyBtZXNzYWdlQ29udGVudAogICAgICAgICAgICArICI8L2Rpdj4iCiAgICAgICAgICAgICsgIjwvZGl2PiIKICAgICAgICAgICAgKyAiPC9kaXY+IgogICAgICAgICAgICArICI8L2Rpdj4iCiAgICAgICAgKTsKICAgICAgICBxdW90ZWRNZXNzYWdlLmF0dHIoICJzdHlsZSIsICJwb3NpdGlvbiA6IGFic29sdXRlOyIgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgInRvcCA6IC05OTk5OyIKICAgICAgICApOwogICAgICAgICQoICIubWVzc2FnZXMiLCBxdW90ZWRNZXNzYWdlICkuYXR0ciggInN0eWxlIiwgImJvcmRlciA6IDFweCBzb2xpZCBibGFjazsiICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJib3JkZXItdG9wLWxlZnQtcmFkaXVzIDogMDsiICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJtYXgtd2lkdGggOiA2NjBweDsiICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICJ3aWR0aCA6IGluaGVyaXQ7IgoKICAgICAgICApOwoKICAgICAgICAvLyBBZGQgbWFya2VyIGlmIHRoZSBtZXNzYWdlIHdhcyBmcm9tIHVzLgogICAgICAgIGlmKCB3YXNNaW5lICkgewogICAgICAgICAgcXVvdGVkTWVzc2FnZS5hZGRDbGFzcyggIm1pbmUiICk7CiAgICAgICAgfQoKICAgICAgICAvLyBBZGQgdGhlIHRpbWVzdGFtcAogICAgICAgIGlmKCB0aW1lc3RhbXAgKSB7CiAgICAgICAgICB2YXIgdGltZXN0YW1wTm9kZSA9ICQoICI8ZGl2IGNsYXNzPSd0aW1lc3RhbXAnPiIgKyB0aW1lc3RhbXAudGV4dCgpICsgIjwvZGl2PiIgKTsKICAgICAgICAgICQoICIubWVzc2FnZSIsIHF1b3RlZE1lc3NhZ2UgKS5iZWZvcmUoIHRpbWVzdGFtcE5vZGUgKTsKICAgICAgICB9CiAgICAgICAgLy8gQWRkIHRoZSBhdXRob3IKICAgICAgICBpZiggYXV0aG9yICkgewogICAgICAgICAgJCggIi5tZXNzYWdlcyIsIHF1b3RlZE1lc3NhZ2UgKS5iZWZvcmUoIGF1dGhvciApOwogICAgICAgIH0KCiAgICAgICAgLy8gQWRkIHRoZSBidWJibGUgdG8gdGhlIERPTS4KICAgICAgICAkKCB0aGlzICkucGFyZW50cyggIi5tb25vbG9ndWUiICkuYmVmb3JlKCBxdW90ZWRNZXNzYWdlICk7CgogICAgICAgIC8vIFJlbWVtYmVyIHRoZSBlbGVtZW50IGZvciBsYXRlciByZW1vdmFsLgogICAgICAgIHJlcGx5SGVscGVyLnF1b3RlZE1lc3NhZ2UgPSBxdW90ZWRNZXNzYWdlOwogICAgICB9CiAgICB9ICk7CgogICAgJCggZG9jdW1lbnQgKS5vbiggIm1vdXNlbGVhdmUiLCAiLnJlcGx5LWluZm8iLCBmdW5jdGlvbiggZXZlbnQgKSB7CiAgICAgIGlmKCBudWxsICE9IHJlcGx5SGVscGVyLnF1b3RlZE1lc3NhZ2UgKSB7CiAgICAgICAgLy8gUmVtb3ZlIHRoZSBxdW90ZSBidWJibGUKICAgICAgICByZXBseUhlbHBlci5xdW90ZWRNZXNzYWdlLnJlbW92ZSgpOwogICAgICAgIHJlcGx5SGVscGVyLnF1b3RlZE1lc3NhZ2UgPSBudWxsOwogICAgICB9CiAgICB9ICk7CiAgfQp9OwoKLy8gQ29uc3RydWN0IGV4dGVuc2lvbiBpbnN0YW5jZQp2YXIgcmVwbHlIZWxwZXIgPSBuZXcgUmVwbHlIZWxwZXIoKTs="},{"name":"Helpful Flag Percentage","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":[],"orig_matches":["*://*.stackexchange.com/users/flag-summary/*","*://*.stackoverflow.com/users/flag-summary/*","*://*.stackapps.com/users/flag-summary/*"],"orig_noframes":null,"orig_run_at":"document-idle","use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null,"user_agent":""},"storage":{"data":{},"ts":1456451831385},"enabled":true,"position":8,"uuid":"a0dec57b-c225-47bc-8e4a-4677037b017f","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBIZWxwZnVsIEZsYWcgUGVyY2VudGFnZQovLyBAbmFtZXNwYWNlICAgIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vdXNlcnMvMTQ1NDUzOC8KLy8gQGF1dGhvciAgICAgICBlbmtpCi8vIEBtYXRjaCAgICAgICAgKjovLyouc3RhY2tleGNoYW5nZS5jb20vdXNlcnMvZmxhZy1zdW1tYXJ5LyoKLy8gQG1hdGNoICAgICAgICAqOi8vKi5zdGFja292ZXJmbG93LmNvbS91c2Vycy9mbGFnLXN1bW1hcnkvKgovLyBAbWF0Y2ggICAgICAgICo6Ly8qLnN0YWNrYXBwcy5jb20vdXNlcnMvZmxhZy1zdW1tYXJ5LyoKLy8gPT0vVXNlclNjcmlwdD09Ci8qanNsaW50IGJyb3dzZXI6IHRydWUsIHdoaXRlOiB0cnVlKi8KLypqc2xpbnQgdGhpcyAqLwovKmdsb2JhbCAkLCBqUXVlcnkqLwokKGZ1bmN0aW9uICgpIHsKJ3VzZSBzdHJpY3QnOwoKICAgIHZhciBoZWxwZnVsRmxhZ3MgPSAwOwogICAgJCgidGQgPiBhOmNvbnRhaW5zKCdoZWxwZnVsJykiKS5wYXJlbnQoKS5wcmV2KCkuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgaGVscGZ1bEZsYWdzICs9IHBhcnNlSW50KCQodGhpcykudGV4dCgpLnJlcGxhY2UoIiwiLCIiKSk7CiAgICB9KTsKCiAgICB2YXIgZGVjbGluZWRGbGFncyA9IDA7CiAgICAkKCJ0ZCA+IGE6Y29udGFpbnMoJ2RlY2xpbmVkJykiKS5wYXJlbnQoKS5wcmV2KCkuZWFjaChmdW5jdGlvbiAoKSB7CiAgICAgICAgZGVjbGluZWRGbGFncyArPSBwYXJzZUludCgkKHRoaXMpLnRleHQoKS5yZXBsYWNlKCIsIiwiIikpOwogICAgfSk7CgogICAgaWYgKGhlbHBmdWxGbGFncyA+IDApIHsKCiAgICAgICAgdmFyIHBlcmNlbnRIZWxwZnVsID0gTnVtYmVyKE1hdGgucm91bmQoKGhlbHBmdWxGbGFncyAvIChoZWxwZnVsRmxhZ3MgKyBkZWNsaW5lZEZsYWdzKSkgKiAxMDAgKyAnZTInKSArICdlLTInKTsKCiAgICAgICAgaWYgKHBlcmNlbnRIZWxwZnVsID4gMTAwICkgewogICAgICAgICAgICBwZXJjZW50SGVscGZ1bCA9IDEwMDsKICAgICAgICB9CgogICAgICAgIHZhciBwZXJjZW50Q29sb3I7CiAgICAgICAgaWYgKHBlcmNlbnRIZWxwZnVsID49IDkwKSB7CiAgICAgICAgICAgIHBlcmNlbnRDb2xvciA9ICJsaW1lZ3JlZW4iOwogICAgICAgIH0gZWxzZSBpZiAocGVyY2VudEhlbHBmdWwgPj0gODApIHsKICAgICAgICAgICAgcGVyY2VudENvbG9yID0gImRhcmtvcmFuZ2UiOwogICAgICAgIH0gZWxzZSBpZiAocGVyY2VudEhlbHBmdWwgPCA4MCkgewogICAgICAgICAgICBwZXJjZW50Q29sb3IgPSAicmVkIjsKICAgICAgICB9IAoKICAgICAgICB2YXIgY3NzID0gIjxzdHlsZT5cCiAgICAgICAgICAgICAgICAgICAgI3Byb2dyZXNzIHtcCiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICNjY2M7XAogICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwcHg7XAogICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMjIwcHg7XAogICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDZweCAxMHB4IDEwcHggMDtcCiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDBweDtcCiAgICAgICAgICAgICAgICAgICB9XAogICAgICAgICAgICAgICAgICAgICNwcm9ncmVzczphZnRlciB7XAogICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnJztcCiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1wKICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogIiArIHBlcmNlbnRDb2xvciArICI7XAogICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogIiArIHBlcmNlbnRIZWxwZnVsICsgIiU7XAogICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XAogICAgICAgICAgICAgICAgICAgIH1cCiAgICAgICAgICAgICAgICAgICAgI3BlcmNlbnRIZWxwZnVsIHtcCiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDVweDtcCiAgICAgICAgICAgICAgICAgICAgfVwKICAgICAgICAgICAgICAgICAgICA8L3N0eWxlPiI7CgogICAgICAgICQoJ2hlYWQnKS5hcHBlbmQoY3NzKTsKCiAgICAgICAgJCgiI2ZsYWctc3RhdC1pbmZvLXRhYmxlIikuYmVmb3JlKCI8aDMgaWQ9J3BlcmNlbnRIZWxwZnVsJyB0aXRsZT0ncGVuZGluZywgYWdlZCBhd2F5IGFuZCBkaXNwdXRlZCBmbGFncyBhcmUgbm90IGNvdW50ZWQnPjxzcGFuIGlkPSdwZXJjZW50Jz4iICsgcGVyY2VudEhlbHBmdWwgKyAiJTwvc3Bhbj4gaGVscGZ1bDwvaDM+Iik7CiAgICAgICAgJCgic3BhbiNwZXJjZW50IikuY3NzKCJjb2xvciIsIHBlcmNlbnRDb2xvcik7CgogICAgICAgICQoIiNwZXJjZW50SGVscGZ1bCIpLmFmdGVyKCI8ZGl2IGlkPSdwcm9ncmVzcyc+PC9kaXY+Iik7CiAgICB9Cn0pOw=="},{"name":"Interesting Questions alternate highlighting","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":[],"orig_matches":["*://*.stackexchange.com/*","*://*.stackoverflow.com/*","*://*.superuser.com/*","*://*.serverfault.com/*","*://*.askubuntu.com/*","*://*.stackapps.com/*","*://*.mathoverflow.net/*"],"orig_noframes":null,"orig_run_at":"document-idle","use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null,"user_agent":""},"storage":{"data":{},"ts":1456451831417},"enabled":true,"position":9,"file_url":"https://gist.github.com/shu8/415cd905568ad9667f46/raw/ffbc35151fbecce5436aa819bf282336c42b59fb/favoriteQuestions.user.js","uuid":"2a77d2d9-e7cf-4487-9acd-ecbcb7d8e4e3","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBJbnRlcmVzdGluZyBRdWVzdGlvbnMgYWx0ZXJuYXRlIGhpZ2hsaWdodGluZwovLyBAbmFtZXNwYWNlICAgIGh0dHA6Ly9zdGFja2V4Y2hhbmdlLmNvbS91c2Vycy80MzM3ODEwLyVFMSVCOSVBNyVEMCVCRCVDQSU4QSVDMyU5RgovLyBAdmVyc2lvbiAgICAgIDAuMgovLyBAZGVzY3JpcHRpb24gIENoYW5nZXMgU3RhY2sgRXhjaGFuZ2Ugd2Vic2l0ZXMgJ2Zhdm9yaXRlIHRhZ3MnIGhpZ2hsaWdodGluZyB0byBqdXN0IHRoZSB0YWcuCi8vIEBhdXRob3IgICAgICAg4bmn0L3KisOfCi8vIEBtYXRjaAkJICo6Ly8qLnN0YWNrZXhjaGFuZ2UuY29tLyoKLy8gQG1hdGNoIAkJICo6Ly8qLnN0YWNrb3ZlcmZsb3cuY29tLyoKLy8gQG1hdGNoIAkJICo6Ly8qLnN1cGVydXNlci5jb20vKgovLyBAbWF0Y2ggCQkgKjovLyouc2VydmVyZmF1bHQuY29tLyoKLy8gQG1hdGNoIAkJICo6Ly8qLmFza3VidW50dS5jb20vKgovLyBAbWF0Y2gJCSAqOi8vKi5zdGFja2FwcHMuY29tLyoKLy8gQG1hdGNoCQkgKjovLyoubWF0aG92ZXJmbG93Lm5ldC8qCi8vIEBncmFudCAgICAgICAgbm9uZQovLyA9PS9Vc2VyU2NyaXB0PT0KdmFyIHVzZXJzY3JpcHQgPSBmdW5jdGlvbigkKSB7CiAgICAkKHdpbmRvdykuYmluZCgibG9hZCIsIGZ1bmN0aW9uKCkgewogICAgICAgIAogICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCdzdXBlcnVzZXInKSA+IC0xKSB7IC8vc3VwZXJ1c2VyCiAgICAgICAgICAgIHZhciBiZXR0ZXJDU1MgPSB7CiAgICAgICAgICAgIAliYWNrZ3JvdW5kQ29sb3I6ICcjYTFlYWZmJywKICAgICAgICAgICAgICAgIGNvbG9yOiAnYmxhY2snICAgICAgICAgICAgICAgIAogICAgICAgIAl9OwogICAgICAgIH0KICAgICAgICBlbHNlIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZi5pbmRleE9mKCdzdGFja292ZXJmbG93JykgPiAtMSkgeyAvL3N0YWNrb3ZlcmZsb3cKICAgICAgICAJdmFyIGJldHRlckNTUyA9IHsKICAgICAgICAgICAgCWJhY2tncm91bmRDb2xvcjogJyNmZmVmYzYnLAogICAgICAgICAgICAJYm9yZGVyV2lkdGg6ICcwJyAgICAgICAgICAgICAgICAKICAgICAgICAJfTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZignLnN0YWNrZXhjaGFuZ2UuY29tJykgPiAtMSkgewogICAgICAgICAgICBpZiAod2luZG93LmxvY2F0aW9uLmhyZWYuaW5kZXhPZignbWV0YScpID09PSAtMSkgeyAvL2JldGEgc2l0ZXMKICAgICAgICAgICAgICAgIHZhciBiZXR0ZXJDU1MgPSB7CiAgICAgICAgICAgIAliYWNrZ3JvdW5kQ29sb3I6ICcjYzNkYWZhJywKICAgICAgICAgICAgCWJvcmRlcldpZHRoOiAnMCcgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICB9OyAKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdmFyIHggPSAkKCIjaW50ZXJlc3RpbmdUYWdzIikudGV4dCgpOwogICAgICAgIHZhciBpbnRlcmVzdGluZyA9IHguc3BsaXQoJyAnKTsKICAgICAgICBpbnRlcmVzdGluZy5wb3AoKTsgLy9CZWNhdXNlIHRoZXJlJ3Mgb25lIGV4dHJhIHZhbHVlIGF0IHRoZSBlbmQKCiAgICAgICAgCgogICAgICAgICQoIi50YWdnZWQtaW50ZXJlc3RpbmcgPiAuc3VtbWFyeSA+IC50YWdzID4gLnBvc3QtdGFnIikuZmlsdGVyKGZ1bmN0aW9uKGluZGV4KSB7CiAgICAgICAgICAgIHJldHVybiBpbnRlcmVzdGluZy5pbmRleE9mKCQodGhpcykudGV4dCgpKSA+IC0xOwogICAgICAgIH0pLmNzcyhiZXR0ZXJDU1MpOwoKICAgICAgICAvLyAkKCIudGFnZ2VkLWludGVyZXN0aW5nIikucmVtb3ZlQ2xhc3MoInRhZ2dlZC1pbnRlcmVzdGluZyIpOwogICAgfSk7Cn07Cgp2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsKZWwudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnOwplbC50ZXh0ID0gJygnICsgdXNlcnNjcmlwdCArICcpKGpRdWVyeSk7JzsKZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChlbCk7"},{"name":"character limits restriction","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":[],"orig_matches":["*://*.askubuntu.com/*","*://*.serverfault.com/*","*://*.stackapps.com/*","*://*.stackexchange.com/*","*://*.stackoverflow.com/*","*://*.superuser.com/*"],"orig_noframes":null,"orig_run_at":"document-idle","use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null,"user_agent":""},"storage":{"data":{},"ts":1456451831454},"enabled":true,"position":10,"uuid":"0945c427-cc2b-481c-9195-8dfb244f8b4c","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgICBjaGFyYWN0ZXIgbGltaXRzIHJlc3RyaWN0aW9uCi8vIEBuYW1lc3BhY2UgICAgICAgU3RhY2tFeGNoYW5nZQovLyBAZGVzY3JpcHRpb24gICAgIEJ5cGFzcyBjaGFyYWN0ZXIgbGltaXRzIHJlc3RyaWN0aW9uIGZvciBjb21tZW50cwovLyBAdmVyc2lvbiAgICAgICAgIDEuMAovLyBAbWF0Y2ggICAgICAgICAgICo6Ly8qLmFza3VidW50dS5jb20vKgovLyBAbWF0Y2ggICAgICAgICAgICo6Ly8qLnNlcnZlcmZhdWx0LmNvbS8qCi8vIEBtYXRjaCAgICAgICAgICAgKjovLyouc3RhY2thcHBzLmNvbS8qCi8vIEBtYXRjaCAgICAgICAgICAgKjovLyouc3RhY2tleGNoYW5nZS5jb20vKgovLyBAbWF0Y2ggICAgICAgICAgICo6Ly8qLnN0YWNrb3ZlcmZsb3cuY29tLyoKLy8gQG1hdGNoICAgICAgICAgICAqOi8vKi5zdXBlcnVzZXIuY29tLyoKLy8gPT0vVXNlclNjcmlwdD09Cgp2YXIgc2NyaXB0ID0gZnVuY3Rpb24oJCkgewogICAgJChkb2N1bWVudCkuZGVsZWdhdGUoJ3RleHRhcmVhW25hbWU9Y29tbWVudF0nICwgImZvY3VzIiwgZnVuY3Rpb24oKXsKICAgICAgICAgbSA9ICQodGhpcykudmFsKCkubGVuZ3RoCiAgICAgICAgIGZvcih2YXIgaT0wOyBpPCAoMTUgLSBtKTsgaSsrKXsKICAgICAgICAgJCh0aGlzKS52YWwoJCh0aGlzKS52YWwoKSArICJcdTIwMGIiKQogICAgICAgIH0KICAgIH0pCn07Cgp2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsKZWwudHlwZSA9ICd0ZXh0L2phdmFzY3JpcHQnOwplbC50ZXh0ID0gJygnICsgc2NyaXB0ICsgJykoalF1ZXJ5KTsnOwpkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGVsKTs="},{"name":"Magic™Editor","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":["/^https?:\\/\\/\\w*.?(stackoverflow|stackexchange|serverfault|superuser|askubuntu|stackapps)\\.com\\/(questions|posts|review|tools)\\/(?!tagged\\/|new\\/).*/"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1456451831467},"enabled":true,"position":11,"file_url":"https://raw.githubusercontent.com/SO-Close-Vote-Reviewers/UserScripts/master/Magic%E2%84%A2Editor.user.js","uuid":"c8fdd2ca-2370-4737-bb6b-437ca517e31b","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgIE1hZ2lj4oSiRWRpdG9yCi8vIEBhdXRob3IgICAgICAgICBDYW1lcm9uIEJlcm5oYXJkdCAoQXN0cm9DQikKLy8gQGRldmVsb3BlciAgICAgIEpvbmF0aGFuIFRvZGQgKGp0MGRkKQovLyBAZGV2ZWxvcGVyICAgICAgc2F0aHlhYmhhdAovLyBAY29udHJpYnV0b3IgICAgVW5paGVkcm9uCi8vIEBjb250cmlidXRvciAgICBUaW55IEdpYW50Ci8vIEBjb250cmlidXRvciAgICBNb2dzZGFkCi8vIEBncmFudCAgICAgICAgICBub25lCi8vIEBsaWNlbnNlICAgICAgICBNSVQKLy8gQG5hbWVzcGFjZSAgICAgIGh0dHA6Ly9naXRodWIuY29tL1NPLUNsb3NlLVZvdGUtUmV2aWV3ZXJzL1VzZXJTY3JpcHRzL01hZ2lj4oSiRWRpdG9yCi8vIEB2ZXJzaW9uICAgICAgICAxLjUuMi42OQovLyBAZGVzY3JpcHRpb24gICAgRml4IGNvbW1vbiBncmFtbWFyL3VzYWdlIGFubm95YW5jZXMgb24gU3RhY2sgRXhjaGFuZ2UgcG9zdHMgd2l0aCBhIGNsaWNrCi8vICAgICAgICAgICAgICAgICBGb3JrZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vQXN0cm9DQi9TdGFjay1FeGNoYW5nZS1FZGl0b3ItVG9vbGtpdAovLyBAaW5jbHVkZSAgICAgICAgL15odHRwcz86XC9cL1x3Ki4/KHN0YWNrb3ZlcmZsb3d8c3RhY2tleGNoYW5nZXxzZXJ2ZXJmYXVsdHxzdXBlcnVzZXJ8YXNrdWJ1bnR1fHN0YWNrYXBwcylcLmNvbVwvKHF1ZXN0aW9uc3xwb3N0c3xyZXZpZXd8dG9vbHMpXC8oPyF0YWdnZWRcL3xuZXdcLykuKi8KLy8gPT0vVXNlclNjcmlwdD09CgooZnVuY3Rpb24oKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICBmdW5jdGlvbiBleHRlbmRFZGl0b3Iocm9vdCkgewogICAgICAgIHZhciBBcHAgPSB7fTsKCiAgICAgICAgLy8gUGxhY2UgZWRpdCBpdGVtcyBoZXJlCiAgICAgICAgQXBwLml0ZW1zID0ge307CiAgICAgICAgQXBwLm9yaWdpbmFscyA9IHt9OwoKICAgICAgICAvLyBQbGFjZSBzZWxlY3RlZCBqUXVlcnkgaXRlbXMgaGVyZQogICAgICAgIEFwcC5zZWxlY3Rpb25zID0ge307CgogICAgICAgIC8vIFBsYWNlICJnbG9iYWwiIGFwcCBkYXRhIGhlcmUKICAgICAgICBBcHAuZ2xvYmFscyA9IHt9OwoKICAgICAgICAvLyBQbGFjZSAiY29uc3QiIGFwcCBkYXRhIGhlcmUKICAgICAgICBBcHAuY29uc3RzID0ge307CgogICAgICAgIC8vIFBsYWNlICJoZWxwZXIiIGZ1bmN0aW9ucyBoZXJlCiAgICAgICAgQXBwLmZ1bmNzID0ge307CgogICAgICAgIC8vIFRydWUgdG8gZGlzcGxheSBjb3VudHMgYW5kIC8gb3IgcnVsZSBuYW1lcyBpbiBFZGl0IFN1bW1hcnkKICAgICAgICBBcHAuZ2xvYmFscy5zaG93Q291bnRzID0gZmFsc2U7CiAgICAgICAgQXBwLmdsb2JhbHMuc2hvd1J1bGVzID0gZmFsc2U7CgogICAgICAgIEFwcC5nbG9iYWxzLnJvb3QgPSByb290OwoKICAgICAgICBBcHAuZ2xvYmFscy5yZWFzb25zID0ge307CgogICAgICAgIEFwcC5nbG9iYWxzLnJlcGxhY2VkU3RyaW5ncyA9IHsKICAgICAgICAgICAgImF1dG8iOiAgIFtdLAogICAgICAgICAgICAicXVvdGUiOiAgW10sCiAgICAgICAgICAgICJpbmxpbmUiOiBbXSwKICAgICAgICAgICAgImJsb2NrIjogIFtdLAogICAgICAgICAgICAibHNlYyI6ICAgW10sCiAgICAgICAgICAgICJsaW5rcyI6ICBbXSwKICAgICAgICAgICAgInRhZ3MiOiAgIFtdCiAgICAgICAgfTsKICAgICAgICBBcHAuZ2xvYmFscy5wbGFjZUhvbGRlcnMgPSB7CiAgICAgICAgICAgICJhdXRvIjogICAiX3hBdXRveEluc2VydHhUZXh0eFBsYWNleEhvbGRlcl8iLAogICAgICAgICAgICAicXVvdGUiOiAgIl94QmxvY2t4UXVvdGV4UGxhY2V4SG9sZGVyeF8iLAogICAgICAgICAgICAiaW5saW5lIjogIl94Q29kZXhJbmxpbmV4UGxhY2V4SG9sZGVyeF8iLAogICAgICAgICAgICAiYmxvY2siOiAgIl94Q29kZXhCbG9ja3hQbGFjZXhIb2xkZXJ4XyIsCiAgICAgICAgICAgICJsc2VjIjogICAiX3hMaW5reFNlY3Rpb254UGxhY2V4SG9sZGVyeF8iLAogICAgICAgICAgICAibGlua3MiOiAgIl94TGlua3hQbGFjZXhIb2xkZXJ4XyIsCiAgICAgICAgICAgICJ0YWdzIjogICAiX3hUYWd4UGxhY2V4SG9sZGVyeF8iCiAgICAgICAgfTsKICAgICAgICBBcHAuZ2xvYmFscy5wbGFjZUhvbGRlckNoZWNrcyA9IHsKICAgICAgICAgICAgImF1dG8iOiAgIC9feEF1dG94SW5zZXJ0eFRleHR4UGxhY2V4SG9sZGVyXy9naSwKICAgICAgICAgICAgInF1b3RlIjogIC9feEJsb2NreFF1b3RleFBsYWNleEhvbGRlcnhfL2dpLAogICAgICAgICAgICAiaW5saW5lIjogL194Q29kZXhJbmxpbmV4UGxhY2V4SG9sZGVyeF8vZ2ksCiAgICAgICAgICAgICJibG9jayI6ICAvX3hDb2RleEJsb2NreFBsYWNleEhvbGRlcnhfL2dpLAogICAgICAgICAgICAibHNlYyI6ICAgL194TGlua3hTZWN0aW9ueFBsYWNleEhvbGRlcnhfL2dpLAogICAgICAgICAgICAibGlua3MiOiAgL194TGlua3hQbGFjZXhIb2xkZXJ4Xy9naSwKICAgICAgICAgICAgInRhZ3MiOiAgIC9feFRhZ3hQbGFjZXhIb2xkZXJ4Xy9naQogICAgICAgIH07CiAgICAgICAgQXBwLmdsb2JhbHMuY2hlY2tzID0gewogICAgICAgICAgICAvLyAgICAgICAgaHR0cHM6Ly9yZWdleDEwMS5jb20vci9jSTZvSzIvMSBhdXRvbWF0aWNhbGx5IGluc2VydGVkIHRleHQKICAgICAgICAgICAgImF1dG8iOiAgIC9bXl0qXDxcIVwtXC0gRW5kIG9mIGF1dG9tYXRpY2FsbHkgaW5zZXJ0ZWQgdGV4dCBcLVwtXD4vZywKICAgICAgICAgICAgLy8gICAgICAgIGh0dHBzOi8vcmVnZXgxMDEuY29tL3IvZlU1bEU2LzEgYmxvY2txdW90ZXMKICAgICAgICAgICAgInF1b3RlIjogIC9eXD4oPzooPyFcblxuKVteXSkrL2dtLAogICAgICAgICAgICAvLyAgICAgICAgaHR0cHM6Ly9yZWdleDEwMS5jb20vci9sTDZmSDMvMSBzaW5nbGUtbGluZSBpbmxpbmUgY29kZQogICAgICAgICAgICAiaW5saW5lIjogL2BbXmBcbl0rYC9nLAogICAgICAgICAgICAvLyAgICAgICAgaHR0cHM6Ly9yZWdleDEwMS5jb20vci9lQzdtRjcvMiBjb2RlIGJsb2NrcyBhbmQgbXVsdGlsaW5lIGlubGluZSBjb2RlLgogICAgICAgICAgICAiYmxvY2siOiAgL2BbXmBdK2B8Xig/Oig/OlsgXXs0fXxbIF17MCwzfVx0KS4rKD86W1xyXG5dPyg/IVxuXFMpKD86WyBdK1xuKSopKykrL2dtLAogICAgICAgICAgICAvLyAgICAgICAgaHR0cHM6Ly9yZWdleDEwMS5jb20vci90WjRlWTMvNyBsaW5rLXNlY3Rpb25zIAogICAgICAgICAgICAibHNlYyI6ICAgLyg/OiAgKD86XFtcZFxdKTogXHcqOitcL1wvLipcbiopKy9nLAogICAgICAgICAgICAvLyAgICAgICAgaHR0cHM6Ly9yZWdleDEwMS5jb20vci90WjRlWTMvMjAgbGlua3MgYW5kIHBhdGhuYW1lcwogICAgICAgICAgICAibGlua3MiOiAgL1xbW15cXVxuXStcXSg/OlwoW15cKVxuXStcKXxcW1teXF1cbl0rXF0pfCg/OlwvXHcrXC98LjpcXHxcdyo6XC9cL3xcLitcL1suL1x3XGRdK3woPzpcdytcLlx3Kyl7Mix9KVsuL1x3XGQ6Lz8jXFtcXUAhJCYnKCkqKyw7PVwtfiVdKi9nLAogICAgICAgICAgICAvLyAgICAgICAgaHR0cHM6Ly9yZWdleDEwMS5jb20vci9iRjBpUTAvMiAgIHRhZ3MgYW5kIGh0bWwgY29tbWVudHMgCiAgICAgICAgICAgICJ0YWdzIjogICAvXDxbXC9hLXpdK1w+fFw8XCFcLVwtW14+XStcLVwtXD58XFt0YWc6W1x3Li1dK1xdL2dpCiAgICAgICAgfTsKICAgICAgICBBcHAuZ2xvYmFscy5jaGVja3NyID0gKGZ1bmN0aW9uKG8xKXsKICAgICAgICAgICAgdmFyIG8yID0ge307CiAgICAgICAgICAgIHZhciBrPSBPYmplY3Qua2V5cyhvMSk7CiAgICAgICAgICAgIGZvcih2YXIgaSA9IGsubGVuZ3RoLTE7IGkgPj0gMDsgLS1pKSBvMltrW2ldXSA9IG8xW2tbaV1dOwogICAgICAgICAgICByZXR1cm4gbzI7CiAgICAgICAgfSkoQXBwLmdsb2JhbHMuY2hlY2tzKTsKCiAgICAgICAgLy8gQXNzaWduIG1vZHVsZXMgaGVyZQogICAgICAgIEFwcC5waXBlTW9kcyA9IHt9OwoKICAgICAgICAvLyBEZWZpbmUgb3JkZXIgaW4gd2hpY2ggbW9kcyBhZmZlY3QgIGhlcmUKICAgICAgICBBcHAuZ2xvYmFscy5vcmRlciA9IFsib21pdCIsICJjb2RlZml4IiwgImVkaXQiLCAiZGlmZiIsICJyZXBsYWNlIiwgIm91dHB1dCJdOwogICAgICAgIAogICAgICAgIC8vIERlZmluZSByZWFzb24gY29uc3RhbnQgc3RyaW5ncwogICAgICAgIEFwcC5jb25zdHMucmVhc29ucyA9IHsKICAgICAgICAgICAgbGVnYWxTTzogICAgICAgIidTdGFjayBPdmVyZmxvdycgaXMgdGhlIGxlZ2FsIG5hbWUiLAogICAgICAgICAgICBsZWdhbFNFOiAgICAgICAiJ1N0YWNrIEV4Y2hhbmdlJyBpcyB0aGUgbGVnYWwgbmFtZSIsCiAgICAgICAgICAgIHRhZ1RpdGxlOiAgICAgICJyZW1vdmVkIHRhZ3MgZnJvbSB0aXRsZSIsCiAgICAgICAgICAgIHRyYWRlbWFyazogICAgICJ0cmFkZW1hcmsgY2FwaXRhbGl6YXRpb24iLAogICAgICAgICAgICBhY3JvbnltOiAgICAgICAiYWNyb255bSBjYXBpdGFsaXphdGlvbiIsCiAgICAgICAgICAgIHNwZWxsaW5nOiAgICAgICJzcGVsbGluZyIsCiAgICAgICAgICAgIGdyYW1tYXI6ICAgICAgICJncmFtbWFyIiwKICAgICAgICAgICAgbm9pc2U6ICAgICAgICAgIm5vaXNlIHJlZHVjdGlvbiIsCiAgICAgICAgICAgIHB1bmN0dWF0aW9uOiAgICJwdW5jdHVhdGlvbiIsCiAgICAgICAgICAgIGxheW91dDogICAgICAgICJsYXlvdXQiLAogICAgICAgICAgICBzaWxlbnQ6ICAgICAgICAiIiwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVbnJlcG9ydGVkIC8gdW5jb3VudGVkCiAgICAgICAgICAgIHRpdGxlU2F5c0FsbDogICJyZXBsaWNhdGVkIHRpdGxlIGluIGJvZHkiCiAgICAgICAgfTsKCiAgICAgICAgCiAgICAgICAgLy8gR2V0IHRoZSBvcmlnaW5hbCBwb3N0IHRhZ3MKICAgICAgICBBcHAuZ2xvYmFscy50YWdsaXN0ID0gW107CiAgICAgICAgJCgnYS5wb3N0LXRhZycpLmVhY2goIGZ1bmN0aW9uKCl7CiAgICAgICAgICAgIHZhciBuZXd0YWcgPSAkKHRoaXMpLnRleHQoKTsKICAgICAgICAgICAgaWYgKEFwcC5nbG9iYWxzLnRhZ2xpc3QuaW5kZXhPZihuZXd0YWcpID09PSAtMSkgewogICAgICAgICAgICAgICAgQXBwLmdsb2JhbHMudGFnbGlzdC5wdXNoKG5ld3RhZyk7ICAgICAgICAgICAgICAgIAogICAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIC8vIERlZmluZSBlZGl0IHJ1bGVzCiAgICAgICAgQXBwLmVkaXRzID0gewogICAgICAgICAgICAvLyBIYW5kbGUgYWxsLWNhcHMgcG9zdHMgZmlyc3QKICAgICAgICAgICAgbm9uZWVkdG95ZWxsOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXigoPz0uKltBLVpdKVteYS16XSopJC9nLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uKGlucHV0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGlucHV0LnRyaW0oKS5zdWJzdHIoMCwgMSkudG9VcHBlckNhc2UoKSArIGlucHV0LnRyaW0oKS5zdWJzdHIoMSkudG9Mb3dlckNhc2UoKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5ncmFtbWFyCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8vIFJlbW92ZSB0YWdzIGZyb20gdGl0bGUKICAgICAgICAgICAgdGFnbGlzdDogeyAgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci93SDRvQTMvMjIKICAgICAgICAgICAgICAgIC8vIFdBUk5JTkc6IHRoZSBleHByZXNzaW9uIGZyb20gcmVnZXgxMDEgbXVzdCBoYXZlIGJhY2tzbGFzaGVzIGVzY2FwZWQgaGVyZSAtIHdibiB0byBhdXRvbWF0ZSB0aGlzLi4uCiAgICAgICAgICAgICAgICBleHByOiBuZXcgUmVnRXhwKCAgIig/Ol4oPzpbKF0/KD86X3hUYWdzeF8pKD8hXFwuXFx3KSg/OmFuZHxbICwuJisvLV0pKikrWzouIFxcKS1dKnxcXGIoPzpbOi4gXFwoLV18aW58d2l0aHx1c2luZ3xieXxmb3IpKig/Oig/Ol94VGFnc3hfKSg/OmFuZHxbICwmKy8pLV0pKikrKFs/LiEgXSopJCkiCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9feFRhZ3N4Xy9nLEFwcC5nbG9iYWxzLnRhZ2xpc3QubWFwKGVzY2FwZVRhZykuam9pbigifCIpKSwKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8ucmVwbGFjZSgvXFwoPz1bYnNTZER3V10pL2csIlxcIiksIC8vIGh0dHBzOi8vcmVnZXgxMDEuY29tL3IvcFkxaEkyLzEgLSBXQk4gdG8gZmlndXJlIHRoaXMgb3V0LgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZ2knKSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDEiLAogICAgICAgICAgICAgICAgZGVidWc6IGZhbHNlLAogICAgICAgICAgICAgICAgdGl0bGVPbmx5OiB0cnVlLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudGFnVGl0bGUKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc286IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYnN0YWNrXHMqb3ZlcmZsb3dcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiU3RhY2sgT3ZlcmZsb3ciLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMubGVnYWxTTwogICAgICAgICAgICB9LAogICAgICAgICAgICBzZTogewogICAgICAgICAgICAgICAgZXhwcjogL1xic3RhY2tccypleGNoYW5nZVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICJTdGFjayBFeGNoYW5nZSIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5sZWdhbFNFCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGV4cGFuc2lvblNPOiB7CiAgICAgICAgICAgICAgICBleHByOiAvKFteXGJcdy5dfF4pU09cYi9nLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMVN0YWNrIE92ZXJmbG93IiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLmxlZ2FsU08KICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXhwYW5zaW9uU0U6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC8oW15cYlx3Ll18XilTRVxiL2csCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxU3RhY2sgRXhjaGFuZ2UiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMubGVnYWxTRQogICAgICAgICAgICB9LAogICAgICAgICAgICAvKgogICAgICAgICAgICAqKiBUcmFkZW1hcmsgbmFtZXMKICAgICAgICAgICAgKiovCiAgICAgICAgICAgIGpzZmlkZGxlOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJqcyA/ZmlkZGxlXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIkpTRmlkZGxlIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnRyYWRlbWFyawogICAgICAgICAgICB9LAogICAgICAgICAgICBtZXRlb3I6IHsgIC8vIG11c3QgYXBwZWFyIGJlZm9yZSAiamF2YXNjcmlwdCIKICAgICAgICAgICAgICAgIGV4cHI6IC8oW15cYlx3Ll18XiltZXRlb3IoPzogKihqcykpP1xiKD8hWy4tXVx3KS9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAoc3RyLHByZSx1cHBlcmNhc2UpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZml4ZWQgPSBwcmUgKyAiTWV0ZW9yIiArICh1cHBlcmNhc2UgPyB1cHBlcmNhc2UudG9VcHBlckNhc2UoKSA6ICcnKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZml4ZWQ7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudHJhZGVtYXJrCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGtub2Nrb3V0X2pzOiB7ICAvLyBtdXN0IGFwcGVhciBiZWZvcmUgImphdmFzY3JpcHQiCiAgICAgICAgICAgICAgICBleHByOiAvXGJrbm9ja291dFsuIF0/anNcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiS25vY2tvdXQuanMiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudHJhZGVtYXJrCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNjcmlwdDogeyAgLy8gU3BlbGxpbmcgcnVsZSBvdXQtb2Ytb3JkZXIsIG11c3QgcnVuIGJlZm9yZSBqYXZhc2NyaXB0ICYgZ29vZ2xlX2FwcHNfc2NyaXB0CiAgICAgICAgICAgICAgICBleHByOiAvKHMpY1tyaV0rcHQ/KGluZ3xzKT9cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFjcmlwdCQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGphdmFzY3JpcHQ6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC8oW15cYlx3Ll18XikoamF2YT9zY3I/aXB0P3xqc3xqYXZhIHNjcmlwdD8pXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxSmF2YVNjcmlwdCIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAganF1ZXJ5OiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJqcXVlP3JyP3lcYig/IVsuLV1cdykvZ2ksICAvLyBqcXVyeSwganF1ZXJyeSwganF1cnJ5Li4uIH42MDAgc3BlbGxpbmcgbWlzdGFrZXMKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAialF1ZXJ5IiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnRyYWRlbWFyawogICAgICAgICAgICB9LAogICAgICAgICAgICBhbmd1bGFyOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJhbmd1bGFyKD86anMpP1xiKD8hWy4tXVx3KS9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiQW5ndWxhckpTIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnRyYWRlbWFyawogICAgICAgICAgICB9LAogICAgICAgICAgICBwaHA6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC8oPzpbXlxiXHcuXXxeKXBocFtcZF0/XGIoPyFbLi1dXHcpL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChtYXRjaCkgeyByZXR1cm4gbWF0Y2gudG9VcHBlckNhc2UoKTsgfSwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnRyYWRlbWFyawogICAgICAgICAgICB9LAogICAgICAgICAgICBjOiB7CiAgICAgICAgICAgICAgICBleHByOiAvKD86W15cYlx3Ll18XiljXGIoPzojfFwrXCspPy9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAobWF0Y2gpIHsgcmV0dXJuIG1hdGNoLnRvVXBwZXJDYXNlKCk7IH0sCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgamF2YTogewogICAgICAgICAgICAgICAgZXhwcjogLyhbXlxiXHcuXXxeKWphdmFcYig/IVsuLV1cdykvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxSmF2YSIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc3FsaXRlOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJzcWxpdGUoXHMqWzAtOV0qKVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICJTUUxpdGUkMSIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYW5kcm9pZDogewogICAgICAgICAgICAgICAgZXhwcjogL1xiYW5kcm9pZFxiKD8hWy4tXVx3KS9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiQW5kcm9pZCIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb3JhY2xlOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJvcmFjbGVcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiT3JhY2xlIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnRyYWRlbWFyawogICAgICAgICAgICB9LAogICAgICAgICAgICB3aW5kb3dzOiB7CiAgICAgICAgICAgICAgICAvLyBodHRwczovL3JlZ2V4MTAxLmNvbS9yL2pGOXpLMS84CiAgICAgICAgICAgICAgICBleHByOiAvXGIoPzp3aW4oPz0oPzpccysoPzoya3xbMC05Ll0rfGNlfG1lfG50fHhwfHZpc3RhfHNlcnZlcikpKXx3aW5kb3dzKSg/OlxzKygya3xbMC05Ll0rfGNlfG1lfG50fHhwfHZpc3RhfHNlcnZlcikpP1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uKG1hdGNoLCB2ZXIpIHsKICAgICAgICAgICAgICAgICAgICB2ZXIgPSAhdmVyID8gJycgOiAnICcrdmVyCiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL2NlL2ksICdDRScpCiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL21lL2ksICdNRScpCiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL250L2ksICdOVCcpCiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL3hwL2ksICdYUCcpCiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLzJrL2ksICcyMDAwJykKICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvdmlzdGEvaSwgJ1Zpc3RhJykKICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvc2VydmVyL2ksICdTZXJ2ZXInKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ1dpbmRvd3MnICsgdmVyOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnRyYWRlbWFyawogICAgICAgICAgICB9LAogICAgICAgICAgICB1bml4OiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJ1bml4XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIlVuaXgiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudHJhZGVtYXJrCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGxpbnV4OiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJsaW51eFxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICJMaW51eCIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgd29yZHByZXNzOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJ3b3JkID9wcmVzc1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICJXb3JkUHJlc3MiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudHJhZGVtYXJrCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG15c3FsOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJteXNxbFxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICJNeVNRTCIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbm9kZWpzOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJub2RlXC4/anNcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiTm9kZS5qcyIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYXBhY2hlOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJhcGFjaGUoW1xkXSk/XGIoPyFbLi1dXHcpL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICJBcGFjaGUkMSIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2l0OiB7CiAgICAgICAgICAgICAgICBleHByOiAvKFteXGJcdy5dfF4pZ2l0XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxR2l0IiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnRyYWRlbWFyawogICAgICAgICAgICB9LAogICAgICAgICAgICBnaXRodWI6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYmdpdGh1YlxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICJHaXRIdWIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudHJhZGVtYXJrCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZhY2Vib29rOiB7ICAvLyBodHRwczovL3JlZ2V4MTAxLmNvbS9yL3JPMXRINC8yCiAgICAgICAgICAgICAgICBleHByOiAvXGJmKD86YVtjc11lPyk/YmU/bytrPyhzKT8vZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogZnVuY3Rpb24oc3RyLHMpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gIkZhY2Vib29rIiArIChzID8gIidzIiA6ICIiKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcHl0aG9uOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJweXRob25cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiUHl0aG9uIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnRyYWRlbWFyawogICAgICAgICAgICB9LAogICAgICAgICAgICBpb3M6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYmlvc1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICJpT1MiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudHJhZGVtYXJrCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGlvc251bTogewogICAgICAgICAgICAgICAgZXhwcjogL1xiaW9zKFswLTldKVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICJpT1MgJDEiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudHJhZGVtYXJrCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHVidW50dTogeyAgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci9zVDh3VjUvMgogICAgICAgICAgICAgICAgZXhwcjogL1xiW3VvYV0rbj9iW3VvYV0qW3RuXVtvdWFdKlt0bnVdW291YV0qXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIlVidW50dSIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdmJuZXQ6IHsgIC8vIGh0dHBzOi8vcmVnZXgxMDEuY29tL3IvYkI5cFAzLzgKICAgICAgICAgICAgICAgIGV4cHI6IC8oPzp2YlwubmV0fFxidmJ8KD86W15cYlx3Ll18XilcLm5ldClcYig/OlxzKlswLTldKyk/XHMqKD86ZnJhbWV3b3JrfGNvcmUpPy9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiBmdW5jdGlvbihzdHIpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyLnJlcGxhY2UoLyhbXi5dKXZiL2ksICckMVZCJykKICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvKFteLl0pYXNwL2ksICckMUFTUCcpCiAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL25ldC9pLCAnTkVUJykKICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvZnJhbWV3b3JrL2ksICdGcmFtZXdvcmsnKQogICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC9jb3JlL2ksICdDb3JlJyk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudHJhZGVtYXJrCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHZiYV9yZWxhdGVkOiB7CiAgICAgICAgICAgICAgICBleHByOiAvKD86W15cYlx3Ll18XikoPzp2YmF8dmJzfHZiY3xldmJ8dmJvfHZicHx2YmlkZSlcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAobWF0Y2gpIHsgcmV0dXJuIG1hdGNoLnRvVXBwZXJDYXNlKCk7IH0sCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdmJzY3JpcHQ6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYnZic2NyaXB0L2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICJWQlNjcmlwdCIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXhjZWw6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYmV4Y2VsXGIoPyFcLXxcLlx3KS9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiRXhjZWwiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudHJhZGVtYXJrCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJlZ2V4OiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJyZWdnP1tlYV0/eChwKT9cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiUmVnRXgkMSIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcG9zdGdyZXNxbDogewogICAgICAgICAgICAgICAgZXhwcjogL1xicG9zdD9ncmVzKihxP2x8cyk/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIlBvc3RncmVTUUwiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudHJhZGVtYXJrCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHBheXBhbDogewogICAgICAgICAgICAgICAgZXhwcjogL1xicGF5cGFsXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIlBheVBhbCIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdG9tY2F0OiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJ0b21jYXQoWzAtOS5dKikvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIlRvbWNhdCQxIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnRyYWRlbWFyawogICAgICAgICAgICB9LAogICAgICAgICAgICBuZXRiZWFuczogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKD86bmV0YmVhbj98bmV0LWJlYW58bmV0IGJlYW58bmV0YmVlbilzP1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICJOZXRCZWFucyIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbmdpbng6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYm5naW54XGIvZywKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAobWF0Y2gpIHsgcmV0dXJuIG1hdGNoLnRvVXBwZXJDYXNlKCk7IH0sCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZmlyZWZveDogewogICAgICAgICAgICAgICAgZXhwcjogL1xiZmlyZT9mb3hcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiRmlyZWZveCIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2FmYXJpOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJzYWZhcmlcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiU2FmYXJpIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnRyYWRlbWFyawogICAgICAgICAgICB9LAogICAgICAgICAgICBjaHJvbWU6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYmNocm9tZVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICJDaHJvbWUiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudHJhZGVtYXJrCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGdudTogewogICAgICAgICAgICAgICAgZXhwcjogL1xiZ251XGIvZywKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAobWF0Y2gpIHsgcmV0dXJuIG1hdGNoLnRvVXBwZXJDYXNlKCk7IH0sCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2NjOiB7CiAgICAgICAgICAgICAgICBleHByOiAvKD86W15cYlx3Ll18XilnY2NcYi9nLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChtYXRjaCkgeyByZXR1cm4gbWF0Y2gudG9VcHBlckNhc2UoKTsgfSwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnRyYWRlbWFyawogICAgICAgICAgICB9LAogICAgICAgICAgICBtYXZlbjogewogICAgICAgICAgICAgICAgZXhwcjogL1xibWF2ZW5cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiTWF2ZW4iLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudHJhZGVtYXJrCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHlvdXR1YmU6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYnlvdXR1YmVcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiWW91VHViZSIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYW1hem9uOiB7CiAgICAgICAgICAgICAgICAvLyBodHRwczovL3JlZ2V4MTAxLmNvbS9yL2RSMHBKNy8xCiAgICAgICAgICAgICAgICBleHByOiAvXGIoYW1hem9uKD86ICk/KD86cmVkc2hpZnR8d2ViIHNlcnZpY2VzfGNsb3VkZnJvbnR8Y29uc29sZSk/KSgoPzogKT8oPzplYzJ8YXdzfHMzfHJkc3xzcXN8aWFtfGVsYnxlbXJ8dnBjKSk/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogZnVuY3Rpb24oc3RyLHRpdGxlY2FzZSx1cHBlcmNhc2UpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZml4ZWQgPSB0aXRsZWNhc2UudG9UaXRsZUNhc2UoKSArICh1cHBlcmNhc2UgPyB1cHBlcmNhc2UudG9VcHBlckNhc2UoKSA6ICcnKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZml4ZWQ7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudHJhZGVtYXJrCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHplbmQ6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYnplbmQoKD86ICk/KD86ZnJhbWV3b3JrfHN0dWRpb3xndWFyZCkpP1xiL2dpLAogICAgICAgICAgICAgICAgLy9yZXBsYWNlbWVudDogU3RyaW5nLnRvVGl0bGVDYXNlLCAgLy8gRG9lc24ndCB3b3JrIGxpa2UgYnVpbHQtaW4gdG9VcHBlckNhc2UsIHJldHVybnMgJ3VuZGVmaW5lZCcuIExvYWQgb3JkZXI/CiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogZnVuY3Rpb24oc3RyLHByb2QpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RyLnRvVGl0bGVDYXNlKCk7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdHdpdHRlcjogewogICAgICAgICAgICAgICAgZXhwcjogL1xidHdpdHRlclxiKD8hWy4tXVx3KS9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiVHdpdHRlciIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYm9vdHN0cmFwOiB7ICAgICAvLyAiYm9vdHN0cmFwIiBpcyBhbHNvIGEgZ2VuZXJhbCBjb21wdXRpbmcgdGVybSwgc28gZXhwZWN0IHNvbWUgZmFsc2UgcG9zaXRpdmVzCiAgICAgICAgICAgICAgICBleHByOiAvXGJib290c3Q/cj9hcFxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICJCb290c3RyYXAiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudHJhZGVtYXJrCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFwcGxlOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJhcHBsZVxiL2csCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIkFwcGxlIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnRyYWRlbWFyawogICAgICAgICAgICB9LAogICAgICAgICAgICBpcGhvbmU6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYmlwaD9vbmU/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogImlQaG9uZSIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ29vZ2xlOiB7ICAvLyBodHRwczovL3JlZ2V4MTAxLmNvbS9yL3FXOGZJOC80CiAgICAgICAgICAgICAgICBleHByOiAvXGJnbysoPzpnK2xlP3xsZ2U/fGdsP2VsKShlW2Ryc10qfGluZylcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiR29vZ2wkMSIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ29vZ2xlX3ZlcmJlZDogewogICAgICAgICAgICAgICAgZXhwcjogL1xiZ29vZ2woPzplZHxpbmd8ZXIpXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogZnVuY3Rpb24oc3RyKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0ci50b1RpdGxlQ2FzZSgpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnRyYWRlbWFyawogICAgICAgICAgICB9LAogICAgICAgICAgICBzcHJlYWRzaGVldDogeyAgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci9vSzR1VzMvMSAtIG11c3QgYXBwZWFyIGJlZm9yZSBnb29nbGVfdGhpbmdzCiAgICAgICAgICAgICAgICBleHByOiAvXGIocylbcHJdK1tlYV0rZHNoP2UrdCg/OmluZyk/KHMpP1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMXByZWFkc2hlZXQkMiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBnb29nbGVfdGhpbmdzOiB7IC8vIGh0dHBzOi8vcmVnZXgxMDEuY29tL3IvaVM1Zk8xLzEKICAgICAgICAgICAgICAgIGV4cHI6IC9cYmdvb2dsZVxiWyBcdF0qKD86bWFwcz98c2hlZXRzP3xkb2NzP3xkcml2ZXxzaXRlcz98Zm9ybXM/fGRvY3VtZW50cz98c3ByZWFkc2hlZXRzP3xpbWFnZXM/fHByZXNlbnRhdGlvbnM/fHBsYXkpP1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uKHN0cikgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBzdHIudG9UaXRsZUNhc2UoKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ29vZ2xlX2FwcHNfc2NyaXB0OiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJnb29nbGVbLSBdPyg/OmFwcHM/KT9bLSBdP3NjcmlwdCg/OmluZ3xzKT9cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiR29vZ2xlIEFwcHMgU2NyaXB0IiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnRyYWRlbWFyawogICAgICAgICAgICB9LAogICAgICAgICAgICBibHVldG9vdGg6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYmJsKD86dWV8b28pdG9vP3RoP1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICJCbHVldG9vdGgiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudHJhZGVtYXJrCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGxlbm92bzogewogICAgICAgICAgICAgICAgZXhwcjogL1xibGVubz92b1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICJMZW5vdm8iLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudHJhZGVtYXJrCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG1hdGxhYjogewogICAgICAgICAgICAgICAgZXhwcjogLyhbXlxiXHcuXXxeKW1hdGg/bGFiXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxTUFUTEFCIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnRyYWRlbWFyawogICAgICAgICAgICB9LAogICAgICAgICAgICBpbnRlcm5ldDogewogICAgICAgICAgICAgICAgZXhwcjogL1xiaW50ZXJuZXRcYi9nLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICJJbnRlcm5ldCIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb2F1dGg6IHsgIC8vIGh0dHBzOi8vcmVnZXgxMDEuY29tL3Ivc0EyY1E1LzEKICAgICAgICAgICAgICAgIGV4cHI6IC9cYm9hdXRoKD86KD86ICkqKFxkKSg/IVwuXGQpfCg/OiApKihbXGQuXSspKT9cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiT0F1dGgkMSAkMiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgd2ViX3NlcnZpY2VzOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJ3ZWIgc2VydmljZXNcYi9nLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICJXZWIgc2VydmljZXMiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudHJhZGVtYXJrCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9wZW5jdjogewogICAgICAgICAgICAgICAgZXhwcjogL1xib3BlbmN2XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIk9wZW5DViIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcnVieTogewogICAgICAgICAgICAgICAgZXhwcjogL1xicnVieVxiL2csCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIlJ1YnkiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudHJhZGVtYXJrCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJhaWxzOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJyYWlsc1xiL2csCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIlJhaWxzIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnRyYWRlbWFyawogICAgICAgICAgICB9LAogICAgICAgICAgICBncmFpbHM6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYmdyYWlsc1xiL2csCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIkdyYWlscyIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc3VidmVyc2lvbjogewogICAgICAgICAgICAgICAgZXhwcjogL1xic3VidmVyc1tpb10qblxiL2csCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIlN1YnZlcnNpb24iLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudHJhZGVtYXJrCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGphdmFmeDogewogICAgICAgICAgICAgICAgZXhwcjogL1xiamF2YWZ4XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIkphdmFGWCIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGVscGhpOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJkZWxwaGlcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiRGVscGhpIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnRyYWRlbWFyawogICAgICAgICAgICB9LAogICAgICAgICAgICBkb3RuZXRudWtlOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJkb3RuZXRudWtlXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIkRvdE5ldE51a2UiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudHJhZGVtYXJrCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNpbHZlcmxpZ2h0OiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJzaWx2P2VybCg/OmlnaHR8aXRlKVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICJTaWx2ZXJsaWdodCIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2NpcHk6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC8oW15cYlx3Ll18XilzY2lweVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMVNjaVB5IiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnRyYWRlbWFyawogICAgICAgICAgICB9LAogICAgICAgICAgICBudW1weTogewogICAgICAgICAgICAgICAgZXhwcjogLyhbXlxiXHcuXXxeKW51bXB5XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxTnVtUHkiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudHJhZGVtYXJrCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG9wZW5zc2w6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC8oW15cYlx3Ll18XilvcGVuc3NsXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxT3BlblNTTCIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZHJ1cGFsOiB7CiAgICAgICAgICAgICAgICBleHByOiAvKFteXGJcdy5dfF4pZHJ1cGFsXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxRHJ1cGFsIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnRyYWRlbWFyawogICAgICAgICAgICB9LAogICAgICAgICAgICBzYWFzOiB7CiAgICAgICAgICAgICAgICBleHByOiAvKFteXGJcdy5dfF4pc2Fhc1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMVNhYVMiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudHJhZGVtYXJrCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGd3dDogewogICAgICAgICAgICAgICAgZXhwcjogLyhbXlxiXHcuXXxeKWd3dFstIF0obW9zYWljfGRlc2lnbmVyKT9cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAoc3RyLHByZSx0aXRsZWNhc2UpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZml4ZWQgPSBwcmUgKyAiR1dUIiArICh0aXRsZWNhc2U/ICcgJyt0aXRsZWNhc2UudG9UaXRsZUNhc2UoKSA6ICcgJyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpeGVkOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnRyYWRlbWFyawogICAgICAgICAgICB9LAogICAgICAgICAgICBnbWFpbDogewogICAgICAgICAgICAgICAgZXhwcjogLyhbXlxiXHcuXXxeKWdtYWlsKHMpP1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMUdtYWlsJDIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudHJhZGVtYXJrCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHhhbXBwOiB7CiAgICAgICAgICAgICAgICBleHByOiAvKFteXGJcdy5dfF4peGFtK3ArXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxWEFNUFAiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudHJhZGVtYXJrCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGdhbGF4eTogewogICAgICAgICAgICAgICAgZXhwcjogLyhbXlxiXHcuXXxeKWdhbGF4eVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMUdhbGF4eSIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbW9uZ286IHsKICAgICAgICAgICAgICAgIGV4cHI6IC8oW15cYlx3Ll18Xiltb25nbyg/OlxzPyhkYikpP1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uKHN0cixwcmUsdXBwZXJjYXNlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGZpeGVkID0gcHJlICsgIk1vbmdvIiArICh1cHBlcmNhc2UgPyB1cHBlcmNhc2UudG9VcHBlckNhc2UoKSA6ICcnKTsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZml4ZWQ7CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudHJhZGVtYXJrCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHB5bW9uZ286IHsKICAgICAgICAgICAgICAgIGV4cHI6IC8oW15cYlx3Ll18XilweW1vbmdvXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxUHlNb25nbyIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2NhbGE6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC8oW15cYlx3Ll18XilzY2FsYVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMVNjYWxhIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnRyYWRlbWFyawogICAgICAgICAgICB9LAogICAgICAgICAgICBtaWNyb3NvZnQ6IHsgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci9kSjV0RTMvMQogICAgICAgICAgICAgICAgZXhwcjogL1xiKFttTV1pY3Jvc29mdD98W21NXWlyY29zb2Z0fE1bU3Ndb2Z0KVxiL2csCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIk1pY3Jvc29mdCIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaW50ZWxsaXNlbnNlOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJpbnRlbGw/aXNlbltzY11lP1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICJJbnRlbGxpU2Vuc2UiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudHJhZGVtYXJrCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNhc3M6IHsgIC8vIFN5bnRhY3RpY2FsbHkgQXdlc29tZSBTdHlsZSBTaGVldHMKICAgICAgICAgICAgICAgIGV4cHI6IC9cYnNhc3NcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiU2FzcyIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaGVyb2t1OiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJoZXJva3VcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiSGVyb2t1IiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnRyYWRlbWFyawogICAgICAgICAgICB9LAogICAgICAgICAgICBvc194OiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJvcyA/eFxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICJPUyBYIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnRyYWRlbWFyawogICAgICAgICAgICB9LAogICAgICAgICAgICBlbF9jYXBpdGFuOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJlbCA/Y2FwaT90YW5cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiRWwgQ2FwaXRhbiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaGFkb29wOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJoYWQrbytwK1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICJIYWRvb3AiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudHJhZGVtYXJrCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRqYW5nbzogewogICAgICAgICAgICAgICAgZXhwcjogL1xiZGphbmdvXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIkRqYW5nbyIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdGNsOiB7CiAgICAgICAgICAgICAgICBleHByOiAvKFteXGJcdy5dfF4pdGNsXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxVGNsIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnRyYWRlbWFyawogICAgICAgICAgICB9LAogICAgICAgICAgICBmbGlja3I6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYmZsaWNrcig/IVwuXHcpL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICJGbGlja3IiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudHJhZGVtYXJrCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHBvaTogewogICAgICAgICAgICAgICAgZXhwcjogLyg/OlteXGJcdy5dfF4pcG9pXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogZnVuY3Rpb24gKG1hdGNoKSB7IHJldHVybiBtYXRjaC50b1VwcGVyQ2FzZSgpOyB9LAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudHJhZGVtYXJrCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHZtd2FyZTogewogICAgICAgICAgICAgICAgZXhwcjogL1xidm13YXJlP1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICJWTXdhcmUiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudHJhZGVtYXJrCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGhvcnRvbndvcmtzOiB7CiAgICAgICAgICAgICAgICBleHByOiAvKFteXGJcdy5dfF4paG9ydG9uID93b3Jrc1stIF0oc2FuZGJveHxkYXRhIHBsYXRmb3JtfHBob2VuaXh8aGl2ZSk/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogZnVuY3Rpb24gKHN0cixwcmUsdGl0bGVjYXNlKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGZpeGVkID0gcHJlICsgIkhvcnRvbndvcmtzIiArICh0aXRsZWNhc2U/ICcgJyt0aXRsZWNhc2UudG9UaXRsZUNhc2UoKSA6ICcgJyk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZpeGVkOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnRyYWRlbWFyawogICAgICAgICAgICB9LAogICAgICAgICAgICBhbWJhcmk6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYmFtYmFyaVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICJBbWJhcmkiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMudHJhZGVtYXJrCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGVjbGlwc2U6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYmVjbGlbcHNdK2VcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiRWNsaXBzZSIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy50cmFkZW1hcmsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLyoKICAgICAgICAgICAgKiogQWNyb255bXMgLSB0byBiZSBjYXBpdGFsaXplZCAoZXhjZXB0IHNvbWV0aW1lcyB3aGVuIHBhcnQgb2YgYSBmaWxlIG5hbWUpCiAgICAgICAgICAgICoqLwogICAgICAgICAgICB4X2h0bWw6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC8oPzpbXlxiXHcuXXxeKSg6P2d8aHR8eGE/fHhodHxzZnxjc2h0KW1sW1xkLl0qXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogZnVuY3Rpb24gKG1hdGNoKSB7IHJldHVybiBtYXRjaC50b1VwcGVyQ2FzZSgpOyB9LAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuYWNyb255bQogICAgICAgICAgICB9LAogICAgICAgICAgICBjc3M6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC8oPzpbXlxiXHcuXXxeKXM/Y3NzXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogZnVuY3Rpb24gKG1hdGNoKSB7IHJldHVybiBtYXRjaC50b1VwcGVyQ2FzZSgpOyB9LAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuYWNyb255bQogICAgICAgICAgICB9LAogICAgICAgICAgICBqc29uOiB7CiAgICAgICAgICAgICAgICBleHByOiAvKD86W15cYlx3Ll18Xilqc29uXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogZnVuY3Rpb24gKG1hdGNoKSB7IHJldHVybiBtYXRjaC50b1VwcGVyQ2FzZSgpOyB9LAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuYWNyb255bQogICAgICAgICAgICB9LAogICAgICAgICAgICBhamF4OiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJhamF4XGIvZywgICAgIC8vIExlYXZlICJBamF4IiBhbG9uZS4gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9Bc3Ryb0NCL1N0YWNrLUV4Y2hhbmdlLUVkaXRvci1Ub29sa2l0L2lzc3Vlcy80NQogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICJBSkFYIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLmFjcm9ueW0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgc3FsOiB7CiAgICAgICAgICAgICAgICBleHByOiAvKD86W15cYlx3Ll18XilzcWxcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAobWF0Y2gpIHsgcmV0dXJuIG1hdGNoLnRvVXBwZXJDYXNlKCk7IH0sCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5hY3JvbnltCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHVybGk6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYih1cltsaV0pKHMpP1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uKG1hdGNoLHVwcGVyLGxvd2VyKSB7IHJldHVybiB1cHBlci50b1VwcGVyQ2FzZSgpICsgKGxvd2VyP2xvd2VyLnRvTG93ZXJDYXNlKCk6JycpOyB9LAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuYWNyb255bQogICAgICAgICAgICB9LAogICAgICAgICAgICBhc3A6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC8oW15cYlx3Ll18Xilhc3BcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAobWF0Y2gpIHsgcmV0dXJuIG1hdGNoLnRvVXBwZXJDYXNlKCk7IH0sCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5hY3JvbnltCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHBkZjogewogICAgICAgICAgICAgICAgZXhwcjogLyhbXlxiXHcuXXxeKXBkZihzKT8vZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxUERGJDIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuYWNyb255bQogICAgICAgICAgICB9LAogICAgICAgICAgICBhcGk6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC8oW15cYlx3Ll18XilhcGkocyk/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxQVBJJDIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuYWNyb255bQogICAgICAgICAgICB9LAogICAgICAgICAgICBzc2w6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC8oPzpbXlxiXHcuXXxeKXNzbFxiL2csCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogZnVuY3Rpb24gKG1hdGNoKSB7IHJldHVybiBtYXRjaC50b1VwcGVyQ2FzZSgpOyB9LAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuYWNyb255bQogICAgICAgICAgICB9LAogICAgICAgICAgICBucG06IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYm5wbShzKT9cYi9nLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICJOUE0kMSIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5hY3JvbnltCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZ0cDogewogICAgICAgICAgICAgICAgZXhwcjogLyg/OlteXGJcdy5dfF4pW3N0XT9mdHBzP1xiL2csCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogZnVuY3Rpb24gKG1hdGNoKSB7IHJldHVybiBtYXRjaC50b1VwcGVyQ2FzZSgpOyB9LAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuYWNyb255bQogICAgICAgICAgICB9LAogICAgICAgICAgICBpcGE6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC8oPzpbXlxiXHcuXXxeKWlwYVxiL2csCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogZnVuY3Rpb24gKG1hdGNoKSB7IHJldHVybiBtYXRjaC50b1VwcGVyQ2FzZSgpOyB9LAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuYWNyb255bQogICAgICAgICAgICB9LAogICAgICAgICAgICBhdmw6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC8oPzpbXlxiXHcuXXxeKWF2bFxiL2csCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogZnVuY3Rpb24gKG1hdGNoKSB7IHJldHVybiBtYXRjaC50b1VwcGVyQ2FzZSgpOyB9LAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuYWNyb255bQogICAgICAgICAgICB9LAogICAgICAgICAgICBjbGlfY2dpOiB7CiAgICAgICAgICAgICAgICBleHByOiAvKD86W15cYlx3Ll18XiljW2xnXWlcYi9nLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChtYXRjaCkgeyByZXR1cm4gbWF0Y2gudG9VcHBlckNhc2UoKTsgfSwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLmFjcm9ueW0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGxsOiB7CiAgICAgICAgICAgICAgICBleHByOiAvKD86W15cYlx3Ll18XilkbGxcYi9nLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChtYXRjaCkgeyByZXR1cm4gbWF0Y2gudG9VcHBlckNhc2UoKTsgfSwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLmFjcm9ueW0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgbXAzX21wNDogewogICAgICAgICAgICAgICAgZXhwcjogLyhbXlxiXHcuXXxeKW1wKDN8NCkocyk/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxTVAkMiQzIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLmFjcm9ueW0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ3VpOiB7CiAgICAgICAgICAgICAgICBleHByOiAvKFteXGJcdy5dfF4pZ3VpKHMpP1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMUdVSSQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLmFjcm9ueW0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgc3RwOiB7CiAgICAgICAgICAgICAgICBleHByOiAvKD86W15cYlx3Ll18XilzdHBcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAobWF0Y2gpIHsgcmV0dXJuIG1hdGNoLnRvVXBwZXJDYXNlKCk7IH0sCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5hY3JvbnltCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRjcDogewogICAgICAgICAgICAgICAgZXhwcjogLyg/OlteXGJcdy5dfF4pdGNwXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogZnVuY3Rpb24gKG1hdGNoKSB7IHJldHVybiBtYXRjaC50b1VwcGVyQ2FzZSgpOyB9LAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuYWNyb255bQogICAgICAgICAgICB9LAogICAgICAgICAgICB3cGY6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC8oPzpbXlxiXHcuXXxeKXdwZlxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChtYXRjaCkgeyByZXR1cm4gbWF0Y2gudG9VcHBlckNhc2UoKTsgfSwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLmFjcm9ueW0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgaHR0cDogewogICAgICAgICAgICAgICAgZXhwcjogLyg/OlteXGJcdy5dfF4paHR0cHM/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogZnVuY3Rpb24gKG1hdGNoKSB7IHJldHVybiBtYXRjaC50b1VwcGVyQ2FzZSgpOyB9LAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuYWNyb255bQogICAgICAgICAgICB9LAogICAgICAgICAgICB3b2ZmOiB7CiAgICAgICAgICAgICAgICBleHByOiAvKD86W15cYlx3Ll18Xil3b2ZmXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogZnVuY3Rpb24gKG1hdGNoKSB7IHJldHVybiBtYXRjaC50b1VwcGVyQ2FzZSgpOyB9LAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuYWNyb255bQogICAgICAgICAgICB9LAogICAgICAgICAgICB0dGY6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC8oPzpbXlxiXHcuXXxeKXR0ZlxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChtYXRjaCkgeyByZXR1cm4gbWF0Y2gudG9VcHBlckNhc2UoKTsgfSwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLmFjcm9ueW0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgaXB2X246IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYmlwKHZbNDZdKT9cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiSVAkMSIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5hY3JvbnltCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZxX2RuX3M6IHsgIC8vIEZRRE4sIEROLCBETlMKICAgICAgICAgICAgICAgIGV4cHI6IC8oPzpbXlxiXHcuXXxeKSg/OmZxKT9kbnM/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogZnVuY3Rpb24gKG1hdGNoKSB7IHJldHVybiBtYXRjaC50b1VwcGVyQ2FzZSgpOyB9LAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuYWNyb255bQogICAgICAgICAgICB9LAogICAgICAgICAgICBpY21wOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJpY21wXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogZnVuY3Rpb24gKG1hdGNoKSB7IHJldHVybiBtYXRjaC50b1VwcGVyQ2FzZSgpOyB9LAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuYWNyb255bQogICAgICAgICAgICB9LAogICAgICAgICAgICByc3ZwOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJyc3ZwXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogZnVuY3Rpb24gKG1hdGNoKSB7IHJldHVybiBtYXRjaC50b1VwcGVyQ2FzZSgpOyB9LAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuYWNyb255bQogICAgICAgICAgICB9LAogICAgICAgICAgICBzbm1wOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJzbm1wXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogZnVuY3Rpb24gKG1hdGNoKSB7IHJldHVybiBtYXRjaC50b1VwcGVyQ2FzZSgpOyB9LAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuYWNyb255bQogICAgICAgICAgICB9LAogICAgICAgICAgICBjcHU6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYmNwdShzKT9cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiQ1BVJDEiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuYWNyb255bQogICAgICAgICAgICB9LAogICAgICAgICAgICByc3M6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC8oPzpbXlxiXHcuXXxeKXJzcz9cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAobWF0Y2gpIHsgcmV0dXJuIG1hdGNoLnRvVXBwZXJDYXNlKCk7IH0sCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5hY3JvbnltCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG12YzogewogICAgICAgICAgICAgICAgZXhwcjogLyg/OlteXGJcdy5dfF4pbXZjXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogZnVuY3Rpb24gKG1hdGNoKSB7IHJldHVybiBtYXRjaC50b1VwcGVyQ2FzZSgpOyB9LAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuYWNyb255bQogICAgICAgICAgICB9LAogICAgICAgICAgICBtdm46IHsKICAgICAgICAgICAgICAgIGV4cHI6IC8oPzpbXlxiXHcuXXxeKW12blxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChtYXRjaCkgeyByZXR1cm4gbWF0Y2gudG9VcHBlckNhc2UoKTsgfSwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLmFjcm9ueW0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgYXNjaWk6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC8oW15cYlx3Ll18Xilhc2NjP2lpP1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMUFTQ0lJIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLmFjcm9ueW0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ3NvYXA6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC8oW15cYlx3Ll18Xilnc29hcFxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWdTT0FQIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLmFjcm9ueW0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgc29hcDogewogICAgICAgICAgICAgICAgZXhwcjogLyhbXlxiXHcuXXxeKXNvYXBcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAobWF0Y2gpIHsgcmV0dXJuIG1hdGNoLnRvVXBwZXJDYXNlKCk7IH0sCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5hY3JvbnltCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNzdjogewogICAgICAgICAgICAgICAgZXhwcjogLyhbXlxiXHcuXXxeKWNzdlxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChtYXRjaCkgeyByZXR1cm4gbWF0Y2gudG9VcHBlckNhc2UoKTsgfSwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLmFjcm9ueW0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgaW1hZ2VfdHlwZXM6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC8oW15cYlx3Ll18XikoZ2lmfGpwZT9nfGJtcHxwbmcpXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogZnVuY3Rpb24gKG1hdGNoKSB7IHJldHVybiBtYXRjaC50b1VwcGVyQ2FzZSgpOyB9LAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuYWNyb255bQogICAgICAgICAgICB9LAogICAgICAgICAgICB5YW1sOiB7CiAgICAgICAgICAgICAgICBleHByOiAvKFteXGJcdy5dfF4peWFtbFxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChtYXRjaCkgeyByZXR1cm4gbWF0Y2gudG9VcHBlckNhc2UoKTsgfSwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLmFjcm9ueW0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgc210cDogewogICAgICAgICAgICAgICAgZXhwcjogL1xic210cFxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChtYXRjaCkgeyByZXR1cm4gbWF0Y2gudG9VcHBlckNhc2UoKTsgfSwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLmFjcm9ueW0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgcGhwbXlhZG1pbjogewogICAgICAgICAgICAgICAgZXhwcjogLyhbXlxiXHcuXXxeKXBocG15YWRtaW5cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFwaHBNeUFkbWluIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLmFjcm9ueW0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgcGhwdW5pdDogewogICAgICAgICAgICAgICAgZXhwcjogLyhbXlxiXHcuXXxeKXBocHVuaXRcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFQSFBVbml0IiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLmFjcm9ueW0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgbWtsOiB7CiAgICAgICAgICAgICAgICBleHByOiAvKFteXGJcdy5dfF4pbWtsXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogZnVuY3Rpb24gKG1hdGNoKSB7IHJldHVybiBtYXRjaC50b1VwcGVyQ2FzZSgpOyB9LAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuYWNyb255bQogICAgICAgICAgICB9LAogICAgICAgICAgICB4c2w6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC8oPzpbXlxiXHcuXXxeKXhzbHQ/KD8hOilcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAobWF0Y2gpIHsgcmV0dXJuIG1hdGNoLnRvVXBwZXJDYXNlKCk7IH0sCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5hY3JvbnltCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGpwYTogewogICAgICAgICAgICAgICAgZXhwcjogLyg/OlteXGJcdy5dfF4panBhXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogZnVuY3Rpb24gKG1hdGNoKSB7IHJldHVybiBtYXRjaC50b1VwcGVyQ2FzZSgpOyB9LAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuYWNyb255bQogICAgICAgICAgICB9LAogICAgICAgICAgICBqdm06IHsKICAgICAgICAgICAgICAgIGV4cHI6IC8oPzpbXlxiXHcuXXxeKWp2bVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChtYXRjaCkgeyByZXR1cm4gbWF0Y2gudG9VcHBlckNhc2UoKTsgfSwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLmFjcm9ueW0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgbGlucTogewogICAgICAgICAgICAgICAgZXhwcjogLyg/OlteXGJcdy5dfF4pbGlucVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChtYXRjaCkgeyByZXR1cm4gbWF0Y2gudG9VcHBlckNhc2UoKTsgfSwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLmFjcm9ueW0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgbWQ1OiB7CiAgICAgICAgICAgICAgICBleHByOiAvKD86W15cYlx3Ll18XiltZDVcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAobWF0Y2gpIHsgcmV0dXJuIG1hdGNoLnRvVXBwZXJDYXNlKCk7IH0sCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5hY3JvbnltCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHhmYV94c2Q6IHsgIC8vIFhNTCBGb3JtcyBBcmNoaXRlY3R1cmUKICAgICAgICAgICAgICAgIGV4cHI6IC8oPzpbXlxiXHcuXXxeKXhmYXx4c2RcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAobWF0Y2gpIHsgcmV0dXJuIG1hdGNoLnRvVXBwZXJDYXNlKCk7IH0sCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5hY3JvbnltCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHdzZGw6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC8oPzpbXlxiXHcuXXxeKXdzZGxcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAobWF0Y2gpIHsgcmV0dXJuIG1hdGNoLnRvVXBwZXJDYXNlKCk7IH0sCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5hY3JvbnltCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGhkcDogeyAgLy8gSGFkb29wIHJlbGF0ZWQgYWNyb255bXMKICAgICAgICAgICAgICAgIGV4cHI6IC8oPzpbXlxiXHcuXXxeKWgoPzpkcHxkZnN8c20pXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogZnVuY3Rpb24gKG1hdGNoKSB7IHJldHVybiBtYXRjaC50b1VwcGVyQ2FzZSgpOyB9LAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuYWNyb255bQogICAgICAgICAgICB9LAogICAgICAgICAgICBpZGU6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC8oPzpbXlxiXHcuXXxeKWlkZVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6IGZ1bmN0aW9uIChtYXRjaCkgeyByZXR1cm4gbWF0Y2gudG9VcHBlckNhc2UoKTsgfSwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLmFjcm9ueW0KICAgICAgICAgICAgfSwKICAgICAgICAgICAgLyoKICAgICAgICAgICAgKiogU3BlbGxpbmcgLSBDb3JyZWN0IGNvbW1vbiBzcGVsbGluZyBlcnJvcnMuIChJbmNsdWRpbmcgYXBvc3Ryb3BoZXMsIHdoaWNoIGFyZSByZWFsbHkgZ3JhbW1hci4pCiAgICAgICAgICAgICoqIEFja25vd2xlZGdlbWVudDogQSBzdWJzZXQgb2YgdGVybXMgd2VyZSBhZGFwdGVkIGZyb20gUGV0ZXIgTW9ydGVuc2VuJ3MgbGlzdAogICAgICAgICAgICAqKiAoaHR0cDovL3B2bS1wcm9mZXNzaW9uYWxlbmdpbmVlcmluZy5ibG9nc3BvdC5kZS8yMDExLzA0L3dvcmQtbGlzdC1mb3ItZWRpdGluZy1zdGFjay1leGNoYW5nZS5odG1sKQogICAgICAgICAgICAqKi8KICAgICAgICAgICAgdm90aW5nOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIoZG93bnx1cClcV3ZvdC9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDF2b3RlIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHN1Y2NlZWQ6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihzKXVjW2NzXT9lZT9kKGVkfHMpP1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMXVjY2VlZCQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNvdXJjZTogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKHMpb3JjZShzfGQpP1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMW91cmNlJDIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc3RhbmRhcmRpemU6IHsgIC8vIGh0dHBzOi8vcmVnZXgxMDEuY29tL3Ivdk43cE0wLzEKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihzKXRhbmRhcmkoW3N6XSg/OmV8ZXN8ZWR8YXRpb24pKVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMXRhbmRhcmRpJDIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGlmZmVyZW50OiB7ICAvLyBodHRwczovL3JlZ2V4MTAxLmNvbS9yL3hPOGpVMi8xCiAgICAgICAgICAgICAgICBleHByOiAvXGIoZClpZmY/ZT9yZT9uKHR8Y2VzPylcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFpZmZlcmVuJDIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcGVyc29uYWxseTogeyAvLyBodHRwczovL3JlZ2V4MTAxLmNvbS9yL29MOWFNMS8yCiAgICAgICAgICAgICAgICBleHByOiAvXGIocCllcnNvKD86bmx8bmx8bmFsKShseSk/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxZXJzb25hbCQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHByb2JsZW06IHsgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci95QThqTTcvNgogICAgICAgICAgICAgICAgZXhwcjogL1xiKHApKD86b3I/fHJvfHLDjsK/fHIwKWIoPzpsZXxlbHxlfHJlfGx8W3xdZSltZT8ocyk/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxcm9ibGVtJDIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgd3JpdHRlbjogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKHcpcml0ZW5cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFyaXR0ZW4iLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbWF5YmU6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihtKSg/OmFieXx5YWJlKVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWF5YmUiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcHNldWRvOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIocClzdWVkb1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMXNldWRvIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFwcGxpY2F0aW9uOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIoYSlwcD9sW2lhXWNhKD86dGl8aXQpb25cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFwcGxpY2F0aW9uIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNhbGVuZGFyOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIoYylhbFtlYV1uZFthZV1yXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxYWxlbmRhciIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBjb21taXQ6IHsgIC8vIGh0dHBzOi8vcmVnZXgxMDEuY29tL3Iva1k2c044LzEKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihjKW9tbT9pdD8oc3x0ZWR8dGVycz98dGluZyk/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxb21taXQkMiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBhdXRvY29tcGxldGU6IHsgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci9yWjlnVzUvMQogICAgICAgICAgICAgICAgZXhwcjogL1xiKGEpdXRvP1sgLV0/Y28/bT9wP2w/ZXRlPyhzKT9cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDF1dG9jb21wbGV0ZSQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHlvdTogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKHkpbyt1P1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMW91IiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRvZXNuX3Q6IHsgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci9zTDB1TzkvNQogICAgICAgICAgICAgICAgZXhwcjogL1xiKGQpKD86b3NlP1teXHddKm4/Lj90fG9lbnMuP3R8b2Vzbj9bXlx3XSp0fG9lc3QpXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxb2Vzbid0IiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNvdWxkbl90X3dvdWxkbl90X3Nob3VsZG5fdDogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKGN8d3xzaClvP3VsP2RuWyAnYMK0XSp0XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxb3VsZG4ndCIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBkaWRuX3Q6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihkKWlkW15cd10qbj90XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxaWRuJ3QiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZG9uX3Q6IHsgIC8vIGh0dHBzOi8vcmVnZXgxMDEuY29tL3IvblQyalY2LzEKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihkKSg/Om9uW15cdyddKnR8b1tuJ10rbz90KVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMW9uJ3QiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaGF2ZW5fdDogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKGgpKD86YXZlbnR8YXZbXlx3XSp0fGF2ZVteXHddP3QpXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxYXZlbid0IiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHdhc25fdDogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKHcpYXNbXlx3XSpuP3RcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFhc24ndCIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICAvL2Fwb3N0cm9waGVfZDogeyAgIC8vIFRvbyBtYW55IGZhbHNlIHBvc2l0aXZlcwogICAgICAgICAgICAvLyAgICBleHByOiAvXGIoaGV8c2hlfHdob3x5b3UpW15cd10qKGQpXGIvZ2ksCiAgICAgICAgICAgIC8vICAgIHJlcGxhY2VtZW50OiAiJDEnJDIiLAogICAgICAgICAgICAvLyAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICAvL30sCiAgICAgICAgICAgIGFwb3N0cm9waGVfbGw6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYih0aGV5fHdoYXR8d2hvfHlvdSlbXlx3XSoobGwpXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxJyQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFwb3N0cm9waGVfcmU6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYih0aGV5fHdoYXR8eW91KVteXHddKihyZSlcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDEnJDIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYXBvc3Ryb3BoZV9zOiB7IC8vIGh0dHBzOi8vcmVnZXgxMDEuY29tL3IvYk41cEEzLzEKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihoZXxzaGV8dGhhdHx0aGVyZXx3aGF0fHdoZXJlfGhlcmUpW15cd10qKHMpXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxJyQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGl0X3M6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihpdClbXlx3XShzKVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMSckMiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBhcG9zdHJvcGhlX3Q6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihhcmVufGNhbnxjb3VsZG58ZGlkbnxkb2Vzbnxkb258aGFzbnxoYXZlbnxpc258bWlnaHRufG11c3RufHNoYW58c2hvdWxkbnx3b258d291bGRuKVteXHddKih0KSg/OlteXHdddCkqXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxJyQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFwb3N0cm9waGVfbnQ6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9bJ2DCtF1udFxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICJuJ3QiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZG9lc25fdF93b3JrOiB7ICAvLyA+NEsgaW5zdGFuY2VzIG9mIHRoaXMgKE9jdCAyMDE1KQogICAgICAgICAgICAgICAgZXhwcjogL1xiKGQpb2VzblteXHdddCAod29ya3xsaWtlfHRoaW5rfHdhbnR8cHV0fHNhdmV8bG9hZHxnZXR8aGVscHxtYWtlKXNcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFvZXNuJ3QgJDIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcHJvYmFibHk6IHsgIC8vIGh0dHBzOi8vcmVnZXgxMDEuY29tL3IvelUzcVowLzEKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihwKXIoPzpvbGw/fG9iYj9sfG8/YmFibD98YWJhYmwpeVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMXJvYmFibHkiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAga2V5Ym9hcmQ6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihrKWV5P2JvYT9yZFxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWV5Ym9hcmQiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdXI6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYnVyXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogInlvdXIiLCAvLyBNYXkgYWxzbyBiZSAieW91IGFyZSIsIGJ1dCBsZXNzIGNvbW1vbiBvbiBTTwogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdTogewogICAgICAgICAgICAgICAgZXhwcjogL1xidVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICJ5b3UiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ3I4OiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJncjhcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiZ3JlYXQiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY3V6OiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJjdXpcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiYmVjYXVzZSIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBvZmM6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihvKWZjXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxZiBjb3Vyc2UiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbnZtOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIobil2bVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWV2ZXIgbWluZCIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBidHc6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihiKXR3LD9cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDF5IHRoZSB3YXksIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNyeTogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKHMpbz9yK3lcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFvcnJ5IiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFueTE6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihhKW55MVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMW55b25lIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFsbHdheXM6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihhKWxsd2F5c1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWx3YXlzIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGV4cGVjdDogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKGUpc3BlY3Qocyk/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxeHBlY3QkMiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBlbXBsb3llZTogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKGUpbXBsb3llXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxbXBsb3llZSIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICByZXRyaWV2ZTogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKHIpZXRyZWl2KGV8ZWR8ZXN8aW5nfGFsfGFibGUpXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxZXRyaWV2JDIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc3VjY2VzczogeyAvLyBodHRwczovL3JlZ2V4MTAxLmNvbS9yL2hLMnZHNC8xCiAgICAgICAgICAgICAgICBleHByOiAvXGIocyl1Y2M/ZXNzPyhmdWx8ZnVsbHkpP2w/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxdWNjZXNzJDIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYW55b25lczogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKGEpbnlvbmVzXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxbnlvbmUncyIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBsZW5ndGg6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihsKWVuKD86Z2g/dHx0aClcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFlbmd0aCIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBoZWlnaHQ6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihoKSg/OmVpfGl8aWUpKD86Z3R8dGh8Z2h0aHxndGgpXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxZWlnaHQiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgd2lkdGg6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYih3KWl0P2RoP3RcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFpZHRoIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNlbnRlcmVkOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIoYyllbnQoPzpyZWR8ZXJkKVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWVudGVyZWQiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY2VudGVyOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIoYyllbnRyZVxiL2dpLCAgICAvLyAiQ2VudHJlIiBpcyBhIHdvcmQsIGhvd2V2ZXIgaW4gbW9zdCBjYXNlcyBvbiBTTyAiY2VudGVyIiBpcyBtZWFudAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWVudGVyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFpbnRfaXNudDogewogICAgICAgICAgICAgICAgZXhwcjogL1xiYWluJz90XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogImlzbid0IiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNvb3JkaW5hdGVzOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIoYylvcmRpbmF0ZShzfGQpP1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMW9vcmRpbmF0ZSQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFyZ3VtZW50OiB7ICAvLyBodHRwczovL3JlZ2V4MTAxLmNvbS9yL2lVMnZLOS8yCiAgICAgICAgICAgICAgICBleHByOiAvXGIoYSlyZz9bdWVdK21bZWFdbnQocyk/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxcmd1bWVudCQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGl0ZXJhdGU6IHsgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci9pTDZiVjMvMQogICAgICAgICAgICAgICAgZXhwcjogL1xiKGkpKD86dHRlcnx0YXIpYXQoZVtkc10/fGluZ3xpb258aW9ucylcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDF0ZXJhdCQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGJlbG93OiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIoYillbGxvd1xiL2dpLCAgICAgICAgICAvLyAiQmVsbG93IiBpcyBhIHdvcmQsIGJ1dCBleHRyZW1lbHkgdW5jb21tb24gb24gU3RhY2tPdmVyZmxvdy5jb20uCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxZWxvdyIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBlbmNyeXB0OiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIoZW58ZGUpY3JpcHQoc3xpbmcpP1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWNyeXB0JDIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZm9ybWF0dGluZzogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKGYpb3JtYXRpbmdcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFvcm1hdHRpbmciLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcHJvY2VzczogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKHApcm9jZXMoZXN8ZWQpP1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMXJvY2VzcyQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHByb2dyYW06IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihwKXJvZ3I/YW1tP2U/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxcm9ncmFtIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHByb2dyYW1taW5nOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIocClyb2dyYW0oaW5nfGVkfGVyKVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMXJvZ3JhbW0kMiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBwcm9ncmFtbWF0aWNhbGx5OiB7ICAvLyA0MEsrICAgaHR0cHM6Ly9yZWdleDEwMS5jb20vci92RjJqUTgvMgogICAgICAgICAgICAgICAgZXhwcjogL1xiKHApcm9ncmFtK2F0K2ljYT9sK3lcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFyb2dyYW1tYXRpY2FsbHkiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYmVhcl93aXRoX21lOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIoYilhcmUgKHdpdGggbVtleV18aXR8aW4gbWluZClcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFlYXIgJDIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgd2VpcmQ6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYih3KWllcmQobmVzc3xseSlcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFlaXJkJDIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYmVsaWV2ZTogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKGIpZWxlaXZlKHJ8c3xkKT9cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFlbGlldmUkMiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBwaWVjZTogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKHApZWljZShzfGQpP1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWllY2UkMiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBzYW1wbGU6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihzKW1hcGxlKHN8ZCk/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxYW1wbGUkMiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICByZWFsbHk6IHsgIC8vIGh0dHBzOi8vcmVnZXgxMDEuY29tL3Ivc080ekQ5LzEKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihyKSg/OmVsbHl8ZWFseSlcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFlYWxseSIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBmaW5hbGx5XzogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKGYpaW5hbGw/eVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWluYWxseSIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBiZWhhdmlvdXI6IHsgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci9yVTFlQjcvMQogICAgICAgICAgICAgICAgZXhwcjogL1xiKGIpZWhhP2k/dmk/byhyfHVyfHJzfHVycylcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFlaGF2aW8kMiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICB1bmZvcnR1bmF0ZWx5OiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIodSluZm9ydHU/bmE/dGx5XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxbmZvcnR1bmF0ZWx5IiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHdoZXRoZXI6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYih3KWg/ZXRoP2VyXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxaGV0aGVyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRocm91Z2g6IHsgIC8vIGh0dHBzOi8vcmVnZXgxMDEuY29tL3IvZ1EwZFoxLzQKICAgICAgICAgICAgICAgIGV4cHI6IC9cYih0KSg/OmhydXxyb3VnaHxocm91ZylcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFocm91Z2giLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdGhyb3VnaG91dDogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKHQpKD86aHJ1b3V0fHJvdWdob3V0KVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWhyb3VnaG91dCIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBicmVha3Rocm91Z2g6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihiKXJlYWtccyt0aHJvdWdoKHMpP1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMXJlYWt0aHJvdWdoJDIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdGhvdWdoOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIodCkoPzpob3xob3V8aG9naClcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFob3VnaCIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBhbHRob3VnaDogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKGEpbCg/OnRob3x0aG91fHRob2dofHRvdWdoKVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWx0aG91Z2giLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdGhvdWdodDogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKHQpcj9vdWdodChzKT9cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFob3VnaCQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRocm93aW5nOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIodClocm91Z2hpbmdcYi9naSwgICAgICAgLy8gUGV0ZXIgc2F5cyB0aGlzIGlzICJ0aG9yb3VnaGx5IiwgYnV0IGEgc3VydmV5IG9mIFNPIHF1ZXN0aW9ucyBpbmRpY2F0ZXMgInRocm93aW5nIgogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWhyb3dpbmciLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYV9sb3Q6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihhKWxvdFxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMSBsb3QiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb25lX3JfdHdvX3I6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihyZWZlfHByZWZlfG9jY3UpcihlZHxpbmcpXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxcnIkMiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBvY2N1cjogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKG8pY2N1cmUocyk/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxY2N1ciQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHByZWZlcmFibHk6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihwKXJlZmVycmFibHlcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFyZWZlcmFibHkiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY29tbWFuZF9saW5lOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIoYykoPzpvbW0/YW5kbGluZXxtZGxpbmU/KVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMW9tbWFuZC1saW5lIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGJlbmVmaXRzOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIoYillbmlmaXRzXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxZW5lZml0cyIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBhdXRob3JpemF0aW9uOiB7ICAvLyBodHRwczovL3JlZ2V4MTAxLmNvbS9yL3BROG1EOS8xCiAgICAgICAgICAgICAgICBleHByOiAvKFteXGJcdy4tXSkoYSl1dGhcYi9naSwgICAgICAgICAgIC8vIFRoaXMgbWF5IGJlIHRvbyBhbWJpZ3VvdXMsIGNvdWxkIGFsc28gbWVhbiAiYXV0aGVudGljYXRpb24iCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxJDJ1dGhvcml6YXRpb24iLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcGVyc2lzdGVudDogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKHApZXJzaXN0YW4odHxjZSlcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFlcnNpc3RlbiQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFjY2VzczogeyAgLy8gbXVzdCBjb21lIGJlZm9yZSBfaWJpbGl0eSB0byBjYXRjaCBhY2Nlc3NpYmlsaXR5IHdpdGggc3BlbGxpbmcgdmFyaWF0aW9ucyAqKiBidXQgZG9lcyBub3QgZml4IGFjZXNzYWJpbGl0eT8KICAgICAgICAgICAgICAgIGV4cHI6IC9cYihhKWMrZStzKyguKilcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFjY2VzcyQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIF9pYmxlOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIoY29tcGF0fGluY29tcGF0fGFjY2VzcylhYmxlXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxaWJsZSIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBfaWJpbGl0eTogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKGNvbXBhdHxpbmNvbXBhdHxhY2Nlc3MpYWJpbGk/dCh5fGllcylcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFpYmlsaXQkMiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBzZXBhcmF0ZTogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKHMpZXBlP3JhdGU/KGR8bHl8cyk/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxZXBhcmF0ZSQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNlcGFyYXRpb246IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihzKWVwZXJhdGlvbihzKT9cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFlcGFyYXRpb24kMiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBkZWZpbml0ZTogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKGQpZWZpbig/OmF0ZT98aXRlP3xhbHx0ZT98ZXQpKGx5KT9cYi9naSwgIC8vIENhdGNoZXMgY29ycmVjdCBzcGVsbGluZywgdG9vLgogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWVmaW5pdGUkMiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBkZWZpbml0aXZlOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIoZCllZmluYT90aXZlKGx5KT9cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFlZmluaXRpdmUkMiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBpbmRlcGVuZGVudDogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKGkpbmRlcGVuZGFudChseSk/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxbmRlcGVuZGVudCQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJlY29tbWVuZDogeyAvLyBodHRwczovL3JlZ2V4MTAxLmNvbS9yL3BQOWxCNy8xCiAgICAgICAgICAgICAgICBleHByOiAvXGIocillY29tbT9bYW9dbmQoYXRpb24pP1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWVjb21tZW5kJDIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY29tcGF0aWJpbGl0eTogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKGMpb21wYXRhYmlsaXR5XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxb21wYXRpYmlsaXR5JDIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcHM6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYnBzXGIvZywKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiUFMiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgb2s6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYm9rXGIvZywKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiT0siLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYmFja19lbmQ6IHsgIC8vIEludGVyZXN0aW5nIGZhY3Q6IGJhY2tlbmQgM3ggbW9yZSBjb21tb24gdGhhbiBiYWNrLWVuZAogICAgICAgICAgICAgICAgZXhwcjogL1xiKGIpYWNrZW5kXGIvZywKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFhY2stZW5kIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZyb250X2VuZDogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKGYpcm9udGVuZFxiL2csCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxcm9udC1lbmQiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGF0YV90eXBlOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIoZClhdGF0eXBlXGIvZywKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFhdGEgdHlwZSIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBhbGxvdHRlZDogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKGEpbCtvdCtlZFxiL2csCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxbGxvdHRlZCIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBldmVyeV90aW1lOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIoZSl2ZT9yeXRpbWVcYi9nLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMXZlcnkgdGltZSIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBzdHJhaWdodDogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKHMpdHJhaWc/aD90XGIvZywKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDF0cmFpZ2h0IiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHN0cmFpZ2h0Zm9yd2FyZDogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKHMpdHJhaWc/aD90WyAtXT9mb3I/d2FyZFxiL2csCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxdHJhaWdodGZvcndhcmQiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcHJlY2VkaW5nOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIocClyZWNlZWRpbmdcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFyZWNlZGluZyIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBub19vbmU6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihuKW8tP29uZVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMW8gb25lIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGRlX2ZhY3RvOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIoZCllLT9mYWN0b1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWUgZmFjdG8iLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYWNjb21tb2RhdGU6IHsgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci9jTDNtRDkvMQogICAgICAgICAgICAgICAgZXhwcjogL1xiKGEpKD86YytvbXxjb20rKW9kYXRlXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxY2NvbW1vZGF0ZSIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBraW5kX29mOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIoaylpbmRhXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxaW5kIG9mIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHdhbnRfdG86IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYih3KWFubj9hXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxYW50IHRvIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNvcnRfb2Y6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihzKW9ydGFcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFvcnQgb2YiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ290X3RvOiB7IC8vIGh0dHBzOi8vcmVnZXgxMDEuY29tL3Ivcks2eFI1LzEKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihoYXZlXHMrKT8oZylvdHRhXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxJDJvdCB0byIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBkb250X2tub3c6IHsgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci9ySzZ4UjUvMQogICAgICAgICAgICAgICAgZXhwcjogL1xiKGQpW3VvXW5uP29cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFvbid0IGtub3ciLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ29pbmdfdG86IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihnKVtvdV1ubj9hXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxb2luZyB0byIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBjcmFzaGVzOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIoYylyYXNoc1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMXJhc2hlcyIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBwYXR0ZXJuOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIocClhdD8oPzp0cm58dHJlbnx0ZXJuKShzKT9cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFhdHRlcm4kMiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBmdW5jdGlvbl86IHsgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci94RjNqVTMvMQogICAgICAgICAgICAgICAgZXhwcjogL1xiKGYpdVtuY3RpXStvbm4/KHN8aW5nfGVkfGFsKT9cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDF1bmN0aW9uJDIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc3ludGF4OiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIocylbeWldbnRbYWVdP3hcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDF5bnRheCIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBjb3JyZWN0OiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIoYylvcnI/ZWNbdHldL2dpLCAgLy8gTm8gXGIgYXQgZW5kLCB0byBpbmNsdWRlIGNvcnJlY3Rpb24sIGNvcnJlY3RpbmcsIGNvcnJlY3RlZAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMW9ycmVjdCIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBjb3JyZWN0bHk6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihjKW9ycj9lYyg/Omx0P3x0P2wpeVxiL2lnLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMW9ycmVjdGx5IiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGludGVnZXI6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihpKW50ZT9yP2dlcihzKT9cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFudGVnZXIkMiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBzZXZlcmFsOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIocyllcj92W2VhXT9yW2FlXT9sXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxZXZlcmFsIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNvbHV0aW9uOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIocylvdT9sdT90aT9vblxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMW9sdXRpb24iLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc29tZWJvZHk6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihzKW9tYm9keVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMW9tZWJvZHkiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXZlcnl0aGluZzogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKGUpdmU/clt5aV0/dGhpbmdcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDF2ZXJ5dGhpbmciLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYnV0dG9uOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIoYilbdW9dK3R0P1tvdV1uXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxdXR0b24iLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYmVmb3JlOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIoYillP2ZvP3JlP1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWVmb3JlIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGV4YW1wbGU6IHsgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci91VTRiSDUvMgogICAgICAgICAgICAgICAgZXhwcjogL1xiKGUpKD86eHNhbXBsZXx4YW1sZXx4P2FtcFtsZV17MSwyfXx4ZW1wbGV8eGFwbGUpKHMpP1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMXhhbXBsZSIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBzb21ld2hlcmU6IHsgIC8vIGh0dHBzOi8vcmVnZXgxMDEuY29tL3IvYVUyblA1LzEKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihzKW9tZT8oPzogP3doZXJlP3x3W2VhXStyZT8pXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxb21ld2hlcmUiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgd2l0aDogeyAvLyBodHRwczovL3JlZ2V4MTAxLmNvbS9yL3hPNWRQMy8yCiAgICAgICAgICAgICAgICBleHByOiAvXGIodykoPzpoaXRofGlodCkoPz0ob3U/dHxpbik/XGIpL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWl0aCIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICB3aXRob3V0OiB7ICAvLyBBZnRlciAnd2l0aCcgcnVsZSwgb25seSBuZWVkIHRvIGNoZWNrICdvdXQnCiAgICAgICAgICAgICAgICBleHByOiAvXGIodylpdGhvdT90XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxaXRob3V0IiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJlcHJvZHVjaWJsZTogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKHIpZXByb2R1Y3Q/W2lhXWJsZVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWVwcm9kdWNpYmxlIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHVubmVjZXNzYXJ5OiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIodSlubj9lY2M/ZXNzP2FyeVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMW5uZWNlc3NhcnkiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcmVxdWlyZTogeyAgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci9uUzZrTTUvMQogICAgICAgICAgICAgICAgZXhwcjogL1xiKHIpZXF1aWU/cmU/KGR8c3xtZT9udHM/KT9cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFlcXVpcmUkMiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBhZGRyZXNzOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIoYSlkZD9yZXNzPyhlc3xlZHxpbmcpP2U/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxZGRyZXNzJDIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcGFzc3dvcmQ6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihwKWFzcz93bz9yZD8ocyk/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxYXNzd29yZCQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG1ldGhvZDogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKG0pZVt0aF0rW29ldV0rZChzKT9cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFldGhvZCQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHByb3BlcnR5OiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIocClyb3BlP3J0W2lleV0/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxcm9wZXJ0eSIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBwcm9wZXJ0aWVzOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIocClyb3BlP3J0W2lleV0rc1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMXJvcGVydGllcyIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICB3aXJlbGVzczogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKHcpaXJlP2xlP3NzP1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWlyZWxlc3MiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcG9zc2libGU6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihwKW9zcz9bYWldP2JsZVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMW9zc2libGUiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZmllbGRzX3lpZWxkczogeyAgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci9jSjhyTTQvMQogICAgICAgICAgICAgICAgZXhwcjogL1xiKGZ8eSkoPzplaT98aWU/KWw/ZChzfGluZ3xlZCk/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxaWVsZCQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGV4ZWN1dGU6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihlKXhbZWldP2N1dGUoc3xkKVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMXhlY3V0ZSQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFsZ29yaXRobTogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKGEpbGdvP3JbaXldP3RoP1tpeWFdP20ocyk/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxbGdvcml0aG0kMiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICB2ZXJzaW9uOiB7IC8vIGh0dHBzOi8vcmVnZXgxMDEuY29tL3Ivd0U4dUQwLzEKICAgICAgICAgICAgICAgIGV4cHI6IC9cYih2KWVyKD86c1tpb10qfGlvKW4oc3xpbmd8ZWQpP1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWVyc2lvbiQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHdoaWNoOiB7ICAvLyAyMiw3NzIgb2YgdGhlc2UgYXMgb2YgMTItTm92LTIwMTUhCiAgICAgICAgICAgICAgICBleHByOiAvXGIodykoPzppY2h8aGljKVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWhpY2giLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZGlzYXBwZWFyOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIoZClpcz9hcGVhP3IoaW5nfGVkfHMpP1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWlzYXBwZWFyJDIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYmVjYXVzZTogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKGIpZWNbYW9ddT9zZT9cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFlY2F1c2UiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2hvdWxkOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIocykoPzpob2xkfGhvdWR8aHVsZHxodWR8b3VsZClcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFob3VsZCIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICB0b3RhbGx5OiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIodClvdGE/bGw/eVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMW90YWxseSIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBsYW1iZGE6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihsKWFtW2JkXSthXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxYW1iZGEiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY29tbWFuZDogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKGMpb20oPzptP2FkfGFuZHxtbmQpKGVkfHN8aW5nfGVycz98byk/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxb21tYW5kJDIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdGhlcmVmb3JlOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIodCloZXJlP2ZvcmU/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxaGVyZWZvcmUiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgcGFyYW1ldGVyOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIocClhcmE/bVtlYV1uP3RlcihzKT9cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFhcmFtZXRlciQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGp1c3Q6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihqKSg/OnVzdGV8dXMpXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxdXN0IiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZ1bGZpbGw6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihmKXVsbD9ccz9maWxsXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxdWxmaWxsIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNvbWluZzogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKGMpb21taW5nXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxb21pbmciLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdHJpZWQ6IHsgIC8vIDgsNTQwIG9mIHRoZXNlIQogICAgICAgICAgICAgICAgZXhwcjogL1xiKHQpcnllKGR8cylcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFyaWUkMiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBiYXNpY2FsbHk6IHsgIC8vIDcsOTI0IG9mIHRoZXNlIQogICAgICAgICAgICAgICAgZXhwcjogL1xiKGIpYXNpY2E/bCt5XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxYXNpY2FsbHkiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY29tcGxldGVseTogeyAgLy8gNCw3OTMgZXhhbXBsZXMhICAgaHR0cHM6Ly9yZWdleDEwMS5jb20vci9vRzduSDYvMgogICAgICAgICAgICAgICAgZXhwcjogL1xiKGMpb21wbD9ldGU/bD9lP3lcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFvbXBsZXRlbHkiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbWlzcmVhZDogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKG0paXMrWyAtXT9yZWE/ZFxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWlzcmVhZCIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBkYXRhYmFzZTogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKGQpYXRhYmFlcz9cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFhdGFiYXNlIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG91dHB1dDogeyAgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci9iUDlrWTIvMQogICAgICAgICAgICAgICAgZXhwcjogL1xiKG8pdXQgP3B1dCsoPzplZCk/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxdXRwdXQiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdXNlZnVsOiB7ICAvLyAxMSw1NDIgICJ1c2VmdWxsIgogICAgICAgICAgICAgICAgZXhwcjogL1xiKHUpc2UoPzpmdWxsfCBmdWwpXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxc2VmdWwiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY2xhc3NlczogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKGMpbGEoc2V8c3Mpc1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWxhc3NlcyIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBlbmdsaXNoOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJlbmdsaXNjP2g/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIkVuZ2xpc2giLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaW5oZXJpdGFuY2U6IHsgIC8vIDE3MDAgeCBpbmhlcml0ZW5jZQogICAgICAgICAgICAgICAgZXhwcjogL1xiKGkpbmhlcml0W2FlXW5bY3NdZT9cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFuaGVyaXRhbmNlIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFkdmljZTogeyAgLy8gOTAwMCB4IGFkdmljZXMKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihhKWR2aWNlc1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWR2aWNlIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHdoZW46IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYih3KWhbZWFdbmU/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxaGVuIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFuZF90aGVuOiB7ICAgLy8gMTZLIGluc3RhbmNlcyBvZiB0aGlzIQogICAgICAgICAgICAgICAgZXhwcjogL1xiKGEpbmQsPyB0aGE/blxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMW5kIHRoZW4iLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdW5faW5pdGlhbGl6ZTogeyAvLyA+NEsgaW5zdGFuY2VzIGh0dHBzOi8vcmVnZXgxMDEuY29tL3IvbFkyaFkxLzEKICAgICAgICAgICAgICAgIGV4cHI6IC9cYigoPzp1bi0/fHJlLT8pP2kpbj9pP3RbaWFdK2xpP1t6c10oZXxlZHxbZW9dcnxlc3xpbmcpXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogZnVuY3Rpb24obWF0Y2gsIHByZWZpeCwgc3VmZml4KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChwcmVmaXgrJ25pdGlhbGl6JytzdWZmaXgpLnJlcGxhY2UoIi0iLCIiKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBjaGFyYWN0ZXI6IHsgLy8gMzUwMCsgaW5zdGFuY2VzLCBodHRwczovL3JlZ2V4MTAxLmNvbS9yL2xHMXFIMC8xCiAgICAgICAgICAgICAgICBleHByOiAvXGIoYykoPzpoYXJ8aD9hcmFjP2g/dGVyKShzfGlzdGljcz98aVt6c11lKT9cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFoYXJhY3RlciQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZvdW5kOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIoZilpbmRlZFxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMW91bmQiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdHVwbGU6IHsgIC8vIGh0dHBzOi8vcmVnZXgxMDEuY29tL3IvelA3ek0yLzEKICAgICAgICAgICAgICAgIGV4cHI6IC9cYih0KW8/dXArZT9sZT8ocyk/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxdXBsZSQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGlfcmVhZDogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKEl8SSd2ZXx3ZXx0aGV5KSByZWRcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDEgcmVhZCIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBjdXN0b21pemU6IHsgIC8vIGh0dHA6Ly9ncmFtbWFyaXN0LmNvbS9zcGVsbGluZy9jdXN0b21pc2UtY3VzdG9taXplLwogICAgICAgICAgICAgICAgZXhwcjogL1xiKGMpdVtzdF0rW291aV1taVt6c10oZSk/L2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMXVzdG9taXokMiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBjdXN0b21pemFibGU6IHsgIC8vIENvbW1vbiBlcnJvcnMgYXJlIHRvIHJldGFpbiAnZScsIGFuZC9vciB0byB1c2UgaWJsZSwgbm90IGFibGUKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihjKXVzdG9taXpbZWFdKyh0aW9ucz98YmxlfGJpbGl0eXxiaWxpdGllcykvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxdXN0b21pemEkMiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBhY3Jvc3M6IHsgIC8vIGh0dHA6Ly93d3cub3hmb3JkZGljdGlvbmFyaWVzLmNvbS93b3Jkcy9jb21tb24tbWlzc3BlbGxpbmdzCiAgICAgICAgICAgICAgICBleHByOiAvXGIoYSljK3JvcytcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFjcm9zcyIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBpbW1lZGlhdGU6IHsgIC8vIGh0dHA6Ly93d3cub3hmb3JkZGljdGlvbmFyaWVzLmNvbS93b3Jkcy9jb21tb24tbWlzc3BlbGxpbmdzCiAgICAgICAgICAgICAgICBleHByOiAvXGIoaSltK2VkW2lhXSt0ZT9sPyhseSk/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxbW1lZGlhdGUkMiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBldmVyeV90aW1lOiB7ICAvLyBodHRwczovL3JlZ2V4MTAxLmNvbS9yL2RCNmpDMi8xCiAgICAgICAgICAgICAgICBleHByOiAvXGIoZSl2W2VyeV0rdGltZT9cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDF2ZXJ5IHRpbWUiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYWNoaWV2ZTogeyAgLy8gaHR0cDovL3d3dy5veGZvcmRkaWN0aW9uYXJpZXMuY29tL3dvcmRzL2NvbW1vbi1taXNzcGVsbGluZ3MgaHR0cHM6Ly9yZWdleDEwMS5jb20vci9iWjJxSjEvMQogICAgICAgICAgICAgICAgZXhwcjogL1xiKGEpY2hbZWldK3ZlPyhzfGR8bWVudCk/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxY2hpZXZlJDIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYXBwYXJlbnQ6IHsgIC8vIGh0dHA6Ly93d3cub3hmb3JkZGljdGlvbmFyaWVzLmNvbS93b3Jkcy9jb21tb24tbWlzc3BlbGxpbmdzIGh0dHBzOi8vcmVnZXgxMDEuY29tL3IvZE8zYUg0LzIKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihhKXArYXJbYWVdbnQ/KGx5KT9cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFwcGFyZW50JDIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYXBwZWFyOiB7ICAvLyBodHRwczovL3JlZ2V4MTAxLmNvbS9yL29MOGxJMS8xCiAgICAgICAgICAgICAgICBleHByOiAvXGIoYSlwK1tlYV0rcmU/KHN8ZWR8aW5nKT9cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFwcGVhciQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFwcGVhcmFuY2U6IHsgIC8vIGh0dHA6Ly93d3cub3hmb3JkZGljdGlvbmFyaWVzLmNvbS93b3Jkcy9jb21tb24tbWlzc3BlbGxpbmdzIGh0dHBzOi8vcmVnZXgxMDEuY29tL3IvZVAyYkY5LzEKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihhKXArW2VhXStyW2VhXStuY2Uocyk/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxcHBlYXJhbmNlJDIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYmVnaW5uaW5nOiB7ICAvLyBodHRwOi8vd3d3Lm94Zm9yZGRpY3Rpb25hcmllcy5jb20vd29yZHMvY29tbW9uLW1pc3NwZWxsaW5ncyBodHRwczovL3JlZ2V4MTAxLmNvbS9yL3NUNGdRMC8yCiAgICAgICAgICAgICAgICBleHByOiAvXGIoYillZ2k/bitpbj9nL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWVnaW5uaW5nIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGJlbGlldmU6IHsgIC8vIGh0dHA6Ly93d3cub3hmb3JkZGljdGlvbmFyaWVzLmNvbS93b3Jkcy9jb21tb24tbWlzc3BlbGxpbmdzIGh0dHBzOi8vcmVnZXgxMDEuY29tL3IvcE0xY0M2LzEKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihiKWU/bFtlaV0rdihlfGluZ3xhYmxlKS9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFlbGlldiQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNvbGxlYWd1ZTogeyAgLy8gaHR0cDovL3d3dy5veGZvcmRkaWN0aW9uYXJpZXMuY29tL3dvcmRzL2NvbW1vbi1taXNzcGVsbGluZ3MgaHR0cHM6Ly9yZWdleDEwMS5jb20vci94TjhxRDkvMQogICAgICAgICAgICAgICAgZXhwcjogL1xiKGMpb2wrW2VhXStndWUocyk/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxb2xsZWFndWUkMiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBpbXBsZW1lbnQ6IHsgIC8vIGh0dHBzOi8vcmVnZXgxMDEuY29tL3IvelcxYVM1LzEKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihpKW1wbD9bZWldP21lbnQvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxbXBsZW1lbnQiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc2ltdWx0YW5lb3VzOiB7ICAvLyBodHRwczovL3JlZ2V4MTAxLmNvbS9yL2lCMG1FNy8xCiAgICAgICAgICAgICAgICBleHByOiAvXGIocylpbXVbbHRdK2FuW2llb3VdK3NlPy9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFpbXVsdGFuZW91cyIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBlbnZpcm9ubWVudDogeyAgLy8gaHR0cDovL3d3dy5veGZvcmRkaWN0aW9uYXJpZXMuY29tL3dvcmRzL2NvbW1vbi1taXNzcGVsbGluZ3MgaHR0cHM6Ly9yZWdleDEwMS5jb20vci9xRDV6VTYvMQogICAgICAgICAgICAgICAgZXhwcjogL1xiKGUpbnZpP3JvP1tubXRdK2VudC9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFudmlyb25tZW50IiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGV4aXN0ZW5jZTogeyAgLy8gaHR0cDovL3d3dy5veGZvcmRkaWN0aW9uYXJpZXMuY29tL3dvcmRzL2NvbW1vbi1taXNzcGVsbGluZ3MgaHR0cHM6Ly9yZWdleDEwMS5jb20vci9tSDdoQTYvMQogICAgICAgICAgICAgICAgZXhwcjogL1xiKGUpeGlzdFthZV1uW2NzXWUvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxeGlzdGVuY2UiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZnVydGhlcjogeyAgLy8gaHR0cDovL3d3dy5veGZvcmRkaWN0aW9uYXJpZXMuY29tL3dvcmRzL2NvbW1vbi1taXNzcGVsbGluZ3MgaHR0cHM6Ly9yZWdleDEwMS5jb20vci9zRTZuWTMvMQogICAgICAgICAgICAgICAgZXhwcjogL1xiKGYpKD86dXxbYXVdcil0aD9lci9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDF1cnRoZXIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgamlzdDogeyAgLy8gaHR0cDovL3d3dy5veGZvcmRkaWN0aW9uYXJpZXMuY29tL3dvcmRzL2NvbW1vbi1taXNzcGVsbGluZ3MKICAgICAgICAgICAgICAgIGV4cHI6IC9cYmppc3Qgb2ZcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiZ2lzdCBvZiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBub3RpY2VhYmxlOiB7ICAvLyBodHRwOi8vd3d3Lm94Zm9yZGRpY3Rpb25hcmllcy5jb20vd29yZHMvY29tbW9uLW1pc3NwZWxsaW5ncwogICAgICAgICAgICAgICAgZXhwcjogL1xiKG4pb3RpY2FibChlfHkpXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxb3RpY2VhYmwkMiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBwdWJsaWNseTogeyAgLy8gaHR0cDovL3d3dy5veGZvcmRkaWN0aW9uYXJpZXMuY29tL3dvcmRzL2NvbW1vbi1taXNzcGVsbGluZ3MKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihwKXVibGljYT9sKnlcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDF1YmxpY2x5IiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJlY2VpdmU6IHsgIC8vIGh0dHA6Ly93d3cub3hmb3JkZGljdGlvbmFyaWVzLmNvbS93b3Jkcy9jb21tb24tbWlzc3BlbGxpbmdzCiAgICAgICAgICAgICAgICBleHByOiAvXGIocillY1tpZV0rdihlW3Jkc10/fGluZykvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxZWNlaXYkMiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICByZWZlcnJlZDogeyAgLy8gaHR0cDovL3d3dy5veGZvcmRkaWN0aW9uYXJpZXMuY29tL3dvcmRzL2NvbW1vbi1taXNzcGVsbGluZ3MgIGh0dHBzOi8vcmVnZXgxMDEuY29tL3Iva0Uwb1o1LzUKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihyKWVmZXIoPyFzfGVuY1x3KnxyXHcqKSg/PVx3KS9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFlZmVyciIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICByZW1lbWJlcjogeyAgLy8gaHR0cDovL3d3dy5veGZvcmRkaWN0aW9uYXJpZXMuY29tL3dvcmRzL2NvbW1vbi1taXNzcGVsbGluZ3MKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihyKWUoPzptYmVyfG1lYmVyfG1lbWVyKS9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFlbWVtYmVyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHNlbnNlOiB7ICAvLyBodHRwOi8vd3d3Lm94Zm9yZGRpY3Rpb25hcmllcy5jb20vd29yZHMvY29tbW9uLW1pc3NwZWxsaW5ncwogICAgICAgICAgICAgICAgZXhwcjogL1xiKHMpZW5jZS9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFlbnNlIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHN1cGVyc2VkZTogeyAgLy8gaHR0cDovL3d3dy5veGZvcmRkaWN0aW9uYXJpZXMuY29tL3dvcmRzL2NvbW1vbi1taXNzcGVsbGluZ3MgIGh0dHBzOi8vcmVnZXgxMDEuY29tL3IvbUE1bkMxLzEKICAgICAgICAgICAgICAgIGV4cHI6IC8ocyl1cGVyY2VkKGVbc2RdP3xpbmcpXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxdXBlcnNlZCQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHN1cnByaXNlOiB7ICAvLyBodHRwOi8vd3d3Lm94Zm9yZGRpY3Rpb25hcmllcy5jb20vd29yZHMvY29tbW9uLW1pc3NwZWxsaW5ncyAgaHR0cHM6Ly9yZWdleDEwMS5jb20vci91UzhvUzQvMQogICAgICAgICAgICAgICAgZXhwcjogL1xiKHMpdXI/cHJpW3Njel0oZVtkc10/fGluZyg/Omx5KT8pXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxdXJwcmlzJDIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY29ubmVjdGlvbjogeyAgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci9yTzJ3SDAvMQogICAgICAgICAgICAgICAgZXhwcjogL1xiKGMpb24rZVtjdHhdK2k/b24ocyk/L2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMW9ubmVjdGlvbiQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFkZGl0aW9uYWw6IHsgIC8vIGh0dHBzOi8vcmVnZXgxMDEuY29tL3IvaU00eFY1LzIKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihhKWQraS4/dGlvP25bYWxdKz8obHkpP1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWRkaXRpb25hbCQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGF1dG9tYXRpYzogeyAgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci9mVTJoRjEvMgogICAgICAgICAgICAgICAgZXhwcjogL1xiKGEpKD86dXRvW21hXStbdGljXSt8dG9tYXRpYykoPyFlfFtpb10rbikvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxdXRvbWF0aWMiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYXV0b21hdGljYWxseTogeyAgLy8gNksrCiAgICAgICAgICAgICAgICBleHByOiAvXGIoYSl1dG9tYXRpY1thbHldK1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMXV0b21hdGljYWxseSIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBydW5uaW5nOiB7ICAvLyAySysKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihyKXVuK2luP2dcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDF1bm5pbmciLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZXZlbl90aG91Z2g6IHsgIC8vIDIuN0srCiAgICAgICAgICAgICAgICBleHByOiAvXGIoZSl2ZW50aD9vdT9bZ2hdK1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMXZlbiB0aG91Z2giLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdG9tb3Jyb3c6IHsgIC8vIGh0dHA6Ly93d3cub3hmb3JkZGljdGlvbmFyaWVzLmNvbS93b3Jkcy9jb21tb24tbWlzc3BlbGxpbmdzCiAgICAgICAgICAgICAgICBleHByOiAvXGIodClvbStvcitvd1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMW9tb3Jyb3ciLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdHJ1bHk6IHsgIC8vIGh0dHA6Ly93d3cub3hmb3JkZGljdGlvbmFyaWVzLmNvbS93b3Jkcy9jb21tb24tbWlzc3BlbGxpbmdzICBodHRwczovL3JlZ2V4MTAxLmNvbS9yL3lWNHJaOS8xCiAgICAgICAgICAgICAgICBleHByOiAvXGIodClydWU/bCtlP3lcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFydWx5IiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHVudGlsOiB7ICAvLyBodHRwOi8vd3d3Lm94Zm9yZGRpY3Rpb25hcmllcy5jb20vd29yZHMvY29tbW9uLW1pc3NwZWxsaW5ncyAgaHR0cHM6Ly9yZWdleDEwMS5jb20vci90SzhyVjUvMgogICAgICAgICAgICAgICAgZXhwcjogL1xiKD86KHUpbnRpP2wrfCh0KWlsKylcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiBmdW5jdGlvbiAobWF0Y2gsZjEsZjIpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgZmNoYXIgPSBmMXx8ZjI7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICgoZmNoYXIudG9VcHBlckNhc2UoKSA9PSBmY2hhcikgPyAiVSIgOiAidSIpICsgIm50aWwiOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHdoZXJlOiB7ICAvLyBNdXN0IHByZWNlZGUgIndoZXJldmVyIgogICAgICAgICAgICAgICAgZXhwcjogL1xiKHcpaGVyXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxaGVyZSIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICB3aGVyZXZlcjogeyAgLy8gaHR0cDovL3d3dy5veGZvcmRkaWN0aW9uYXJpZXMuY29tL3dvcmRzL2NvbW1vbi1taXNzcGVsbGluZ3MgIGh0dHBzOi8vcmVnZXgxMDEuY29tL3IvaUo0YkcxLzEKICAgICAgICAgICAgICAgIGV4cHI6IC9cYih3KWhlcmUgP2V2ZXJcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFoZXJldmVyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJlc2V0OiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIocillc2V0K2VkXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxZXNldCIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBiZWdpbjogeyAgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci94WjlpQzMvMQogICAgICAgICAgICAgICAgZXhwcjogL1xiKGIpZWcraW4/KG5pbmd8bmVyKT9cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFlZ2luJDIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdXBkYXRlOiB7ICAvLyBodHRwczovL3JlZ2V4MTAxLmNvbS9yL3JGNmZaMi8xCiAgICAgICAgICAgICAgICBleHByOiAvXGIodSlbcGRdK2F0KGV8ZWR8ZXJ8ZXN8aW5nKVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMXBkYXQkMiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBxdWVzdGlvbjogeyAgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci90QzV5TjgvMgogICAgICAgICAgICAgICAgZXhwcjogL1xiKHEpW3Vlc10rdFtpb10rbmU/L2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMXVlc3Rpb24iLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdmFyaWFibGU6IHsgIC8vIGhodHRwczovL3JlZ2V4MTAxLmNvbS9yL3NJM2xUNS8xCiAgICAgICAgICAgICAgICAvL3RoYW5rcyBLeWxsIC0gaHR0cDovL2NoYXQuc3RhY2tvdmVyZmxvdy5jb20vdHJhbnNjcmlwdC9tZXNzYWdlLzI5MzUyMTM3IzI5MzUyMTM3CiAgICAgICAgICAgICAgICBleHByOiAvXGIodilbYWldK3JbaWFdK2JbbGVdKyhzKT9cYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFhcmlhYmxlJDIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZnVuY3Rpb25fOiB7ICAvLyBoaHR0cHM6Ly9yZWdleDEwMS5jb20vci9zSTNsVDUvMQogICAgICAgICAgICAgICAgLy90aGFua3MgS3lsbCAtIGh0dHA6Ly9jaGF0LnN0YWNrb3ZlcmZsb3cuY29tL3RyYW5zY3JpcHQvbWVzc2FnZS8yOTM1MjIwMyMyOTM1MjIwMwogICAgICAgICAgICAgICAgZXhwcjogL1xiKGYpW3VuXStjdFtpb10rbj8vZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxdW5jdGlvbiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBiZWluZzogeyAgLy8gNCw2MDArCiAgICAgICAgICAgICAgICBleHByOiAvXGIoYillZWluZ1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWVpbmciLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaGFwcGVuOiB7ICAvLyBodHRwczovL3JlZ2V4MTAxLmNvbS9yL2pIOHJFNS8yCiAgICAgICAgICAgICAgICAvLyB0aGFua3MgUHJhdmVlbiAtIGh0dHA6Ly9jaGF0LnN0YWNrb3ZlcmZsb3cuY29tL3RyYW5zY3JpcHQvbWVzc2FnZS8yOTQyNzcxNyMyOTQyNzcxNwogICAgICAgICAgICAgICAgZXhwcjogL1xiKGgpYXArZT9uKGU/ZHxzfGluZyk/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogZnVuY3Rpb24gKG1hdGNoLGZDaGFyLHN1ZmZpeCkgewogICAgICAgICAgICAgICAgICAgIHN1ZmZpeCA9IHN1ZmZpeCB8fCAnJzsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZkNoYXIrImFwcGVuIitzdWZmaXgucmVwbGFjZSgvXmQvLCdlZCcpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFjdHVhbDogeyAgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci9tVDFjTDcvMQogICAgICAgICAgICAgICAgZXhwcjogL1xiKGEpKD86Y3RbdWFdK3xbY3RddWEpbCoobHkpP1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWN0dWFsJDIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgYXNzaWduOiB7ICAvLyBodHRwczovL3JlZ2V4MTAxLmNvbS9yL2NNN21GMi8xCiAgICAgICAgICAgICAgICBleHByOiAvXGIoYSlzK2lbZ25dKy9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFzc2lnbiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBwcmVmZXJfcmVmZXI6IHsgIC8vIGh0dHBzOi8vcmVnZXgxMDEuY29tL3IvZ0c3YlE5LzEKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihbcHJdKyllZitlP3IrKFtlYV1uY3xhYmxlKS9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiBmdW5jdGlvbihtYXRjaCxmQ2hhcixzdWZmaXgpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gZkNoYXIrImVmZXIiK3N1ZmZpeC5yZXBsYWNlKC9hbmMvLCJlbmMiKTsKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICB1c2VfY2FzZTogeyAgLy8gNCw1NTYgKCs4MTggdXNlY2FzZXMpCiAgICAgICAgICAgICAgICBleHByOiAvXGIodSlzZShjKWFzZS9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFzZSAkMmFzZSIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBtYXRjaGVzOiB7ICAvLyAKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihtKWF0Y1toZV1zL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWF0Y2hlcyIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBzcGVjaWZpYzogeyAgLy8gCiAgICAgICAgICAgICAgICBleHByOiAvXGIocylwZVtjc11pP2ZpYy9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFwZWNpZmljIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNvbXB1dGVyOiB7ICAvLyBodHRwczovL3JlZ2V4MTAxLmNvbS9yL2tKM2lZOC8yCiAgICAgICAgICAgICAgICBleHByOiAvXGIoYylvP20/cFt1ZV0/dD9bZW9hXXIocyk/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxb21wdXRlciIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBzb21ldGhpbmdfbGlrZTogeyAgLy8gU29tZSB0aGluZyBsaWtlIC0tIDYsNDY4IHBvc3RzIAogICAgICAgICAgICAgICAgZXhwcjogL1xiKHMpb21lIHRoaW5nIGxpa2UvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxb21ldGhpbmcgbGlrZSIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBtYXliZV9zb21ldGhpbmc6IHsgIC8vIE1heSBiZSBzb21ldGhpbmcgLS0gNCwyNTkgcG9zdHMgCiAgICAgICAgICAgICAgICBleHByOiAvXGIobSlheSBiZSBzb21lID90aGluZy9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFheWJlIHNvbWV0aGluZyIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICB0YXJnZXRpbmc6IHsgIC8vIDMsMTUxIHBvc3RzIAogICAgICAgICAgICAgICAgZXhwcjogL1xiKHQpYXJnZXR0aW5nL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWFyZ2V0aW5nIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNwZWxsaW5nCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGNvbHVtbjogeyAgLy8gMSwzNjMgcG9zdHMgCiAgICAgICAgICAgICAgICBleHByOiAvXGIoYylvbG91P21uPyhzKT8vZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxb2x1bW4kMiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zcGVsbGluZwogICAgICAgICAgICB9LAogICAgICAgICAgICBhcnJheTogeyAKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihhKSg/OnJyeXxyYXkpKHMpPy9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFycmF5JDIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc3VnZ2VzdDogeyAvLyBodHRwczovL3JlZ2V4MTAxLmNvbS9yL21IMWZZNy8xCiAgICAgICAgICAgICAgICBleHByOiAvXGIocyl1Z2VzdC9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDF1Z2dlc3QiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc3luY2hyb25vdXM6IHsgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci92RzZqUTgvMQogICAgICAgICAgICAgICAgZXhwcjogLyhzKVt5aV1uY2g/cm9uW291XStzL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMXluY2hyb25vdXMiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc3BlbGxpbmcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLyoKICAgICAgICAgICAgKiogR3JhbW1hciAtIENvcnJlY3QgY29tbW9uIGdyYW1tYXRpY2FsIGVycm9ycy4KICAgICAgICAgICAgKiovCiAgICAgICAgICAgIHN0YXJ0X3dpdGhfc286IHsgIC8vIGh0dHBzOi8vcmVnZXgxMDEuY29tL3IvZ1AxeEEyLzIKICAgICAgICAgICAgICAgIGV4cHI6IC9eKD86b2theVxifG9rXGJ8c29cYnxbIFx0LC1dKSsvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5ncmFtbWFyCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGFfdnNfYW46IHsgIC8vIFNlZSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcS8zNDQ0MDMwNy8xNjc3OTEyCiAgICAgICAgICAgICAgICBleHByOiAvXGIoYXxhbikgKFtcKFwiJ+KAnOKAmGA8LV0qXHcqKVxiL2dpbSwgICAvLyBodHRwczovL3JlZ2V4MTAxLmNvbS9yL25FMXlBNC81CiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogZnVuY3Rpb24oIG1hdGNoLCBhcnRpY2xlLCBmb2xsb3dpbmcgKSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIGlucHV0ID0gZm9sbG93aW5nLnJlcGxhY2UoL15bXHNcKFwiJ+KAnOKAmGA8LV0rfFxzKyQvZywgIiIpOy8vc3RyaXAgaW5pdGlhbCBwdW5jdHVhdGlvbiBzeW1ib2xzCiAgICAgICAgICAgICAgICAgICAgdmFyIHJlcyA9IEF2c0FuT3ZlcnJpZGVfKGlucHV0KSB8fCBBdnNBblNpbXBsZS5xdWVyeShpbnB1dCk7CiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0FydGljbGUgPSBhcnRpY2xlWzBdICsgcmVzLnN1YnN0cigxKTsgIC8vIFByZXNlcnZlIGV4aXN0aW5nIGNhcGl0YWxpemF0aW9uCiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG5ld0FydGljbGUrJyAnK2ZvbGxvd2luZzsKICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAvLyBIYWNrIGFsZXJ0OiBEdWUgdG8gdGhlIHRlY2huaWNhbCBuYXR1cmUgb2YgU08gc3ViamVjdHMsIG1hbnkgY29tbW9uIHRlcm1zCiAgICAgICAgICAgICAgICAgICAgLy8gYXJlIG5vdCB3ZWxsLXJlcHJlc2VudGVkIGluIHRoZSBkYXRhIHVzZWQgYnkgQXZzQW5TaW1wbGUsIHNvIHdlIG5lZWQgdG8KICAgICAgICAgICAgICAgICAgICAvLyBwcm92aWRlIGEgd2F5IHRvIG92ZXJyaWRlIGl0LgogICAgICAgICAgICAgICAgICAgIC8vIE5PVEU6IEF2c0FuU2ltcGxlIGlzIHN1c2NlcHRpYmxlIHRvIHVuaWNvZGUgbWVzcy11cDsgaWYgeW91IHN1ZGRlbmx5IHNlZSBtYW55CiAgICAgICAgICAgICAgICAgICAgLy8gd29yZHMgc3RhcnRpbmcgd2l0aCB2b3dlbHMgYmVpbmcgaW5jb3JyZWN0bHkgdHJlYXRlZCwgY2hlY2sgdGhhdCB0aGUgc2NyaXB0CiAgICAgICAgICAgICAgICAgICAgLy8gaGFzIG5vdCBoYWQgYSB1bmljb2RlIHN1YnN0aXR1dGlvbiBlcnJvci4gKEdpdCBkaWQgdGhpcyBkbyBtZSwgb25jZS4pCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gQXZzQW5PdmVycmlkZV8oZndvcmQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4Y2VwdGlvbnNBXyA9IC9eKD86dWlzP3xkYXRhfGphdmF8Zm9ybVx3Knxyb3RhfGNkKS9pOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXhjZXB0aW9uc0FuXyA9IC8oPzpeW2xyXXZhbHVlfGFcYnxzcWx8bnMpL2k7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoZXhjZXB0aW9uc0FfLnRlc3QoZndvcmQpID8gYXJ0aWNsZVswXSA6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXhjZXB0aW9uc0FuXy50ZXN0KGZ3b3JkKSA/IGFydGljbGVbMF0rIm4iIDogZmFsc2UpOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5ncmFtbWFyCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGZpcnN0Y2FwczogewogICAgICAgICAgICAgICAgLy8gICAgaHR0cHM6Ly9yZWdleDEwMS5jb20vci9xUjVmTzkvNDEKICAgICAgICAgICAgICAgIC8vIFJlZ2V4IGZpbmRzIGFsbCBzZW50ZW5jZXM7IHJlcGxhY2VtZW50IG11c3QgZGV0ZXJtaW5lIHdoZXRoZXIgaXQgbmVlZHMgdG8gY2FwaXRhbGl6ZS4KICAgICAgICAgICAgICAgIGV4cHI6IC8oKFtBLVpfYS16XXxcZCg/IVxkKlwuICkpKFxTKikpKCg/Oig/OmV0Y1wufGlcLmVcLnxlXC5nXC58dnNcLnxcLlwuXC58XHcqXC4oPyFbXHMiKV0pfFsqLV0rfFxuKD8hWyBcdF0qXG58ICooPzpbKi1dfFxkK1wuKSl8W14uPyFcbl0/KSkrKD86KFsuPyFdKSg/PVtccyIpXXwkKXxcblxufFxuKD89ICpbKi1dKXxcbig/PSAqXGQrXC4pfCQpKS9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiBmdW5jdGlvbihzZW50ZW5jZSwgZldvcmQsIGZDaGFyLCBmV29yZFBvc3QsIHNlbnRlbmNlUG9zdCwgZW5kcHVuYykgeyAKICAgICAgICAgICAgICAgICAgICB2YXIgY2FwQ2hhciA9IGZDaGFyLnRvVXBwZXJDYXNlKCk7CiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbnRlbmNlID09PSAidW5kZWZpbmVkInx8Y2FwQ2hhciA9PSBmQ2hhcikgcmV0dXJuIHNlbnRlbmNlOyAgLy8gTVVTVCBtYXRjaCBzZW50ZW5jZSwgb3IgZ2V0cyBjb3VudGVkIGFzIGEgY2hhbmdlLgogICAgICAgICAgICAgICAgICAgIGlmICghZldvcmQpIGZXb3JkID0gJyc7CiAgICAgICAgICAgICAgICAgICAgdmFyIGZXb3JkQ2hhcnMgPSBmV29yZC5zcGxpdCgnJyk7CiAgICAgICAgICAgICAgICAgICAgLy8gTGVhdmUgc29tZSB3b3JkcyBhbG9uZTogZmlsZW5hbWVzLCBjYW1lbENhc2UKICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpPTA7IGk8ZldvcmRDaGFycy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgICAgICAgICBpZiAoZldvcmRDaGFyc1tpXS5zZWFyY2goL1suXy9dL2cpICE9PSAtMSB8fAogICAgICAgICAgICAgICAgICAgICAgICAgICAgKGZXb3JkQ2hhcnNbaV0uc2VhcmNoKC9bYS16XS9naSkgIT09LTEgJiYgZldvcmRDaGFyc1tpXSA9PSBmV29yZENoYXJzW2ldLnRvVXBwZXJDYXNlKCkpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHNlbnRlbmNlOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB2YXIgdXBkYXRlID0gY2FwQ2hhciArIGZXb3JkUG9zdCArIHNlbnRlbmNlUG9zdDsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdXBkYXRlOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLmdyYW1tYXIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaTogeyAvLyBodHRwczovL3JlZ2V4MTAxLmNvbS9yL3VPN3FHMC8yCiAgICAgICAgICAgICAgICBleHByOiAvXGJpXGIoPyFcLmUpL2csICAvLyBpIGJ1dCBub3QgaS5lLgogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICJJIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLmdyYW1tYXIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaV9hcG9zdHJvcGhlOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGJpWydgwrTigJldL2dpLCAgLy8gaS1hcG9zdHJvcGhlIG9ubHkKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiSSciLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuZ3JhbW1hcgogICAgICAgICAgICB9LAogICAgICAgICAgICBpX2xsOiB7ICAvLyBNdXN0IE5PVCBjb252ZXJ0IGlsbCB0byBJJ2xsCiAgICAgICAgICAgICAgICBleHByOiAvXGJpIGxsXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIkknbGwiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuZ3JhbW1hcgogICAgICAgICAgICB9LAogICAgICAgICAgICBpbTogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKD86aSAqbSg/OiBhbSk/fGknYW18aWFtKVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICJJJ20iLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuZ3JhbW1hcgogICAgICAgICAgICB9LAogICAgICAgICAgICBpdmU6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC9cYmlbJ2DCtOKAmSBdKnZbJ2DCtOKAmSBdKmU/XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIkkndmUiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuZ3JhbW1hcgogICAgICAgICAgICB9LAogICAgICAgICAgICBpZTogeyAgLy8gaHR0cDovL2VuZ2xpc2guc3RhY2tleGNoYW5nZS5jb20vcXVlc3Rpb25zLzMwMTA2L2Nhbi1pLXN0YXJ0LWEtc2VudGVuY2Utd2l0aC1pLWUKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihpfEkpXC4/ZVsuXHNdKy9nLCAgIC8vIENhcmVmdWwgaGVyZTsgSUUgaXMgSW50ZXJuZXQgRXhwbG9yZXIKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDEuZS4gIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLmdyYW1tYXIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZWc6IHsgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci9xSDJvVDAvOAogICAgICAgICAgICAgICAgZXhwcjogL1xiKGUpXC4/Zyg/OlsuLDsgOl0rfCg/PVxuKSkvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxLmcuICIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5ncmFtbWFyCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGV0YzogeyAgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci9kRTdjVjEvNAogICAgICAgICAgICAgICAgZXhwcjogL1xiZXRjKD86XC4rKT8vZywKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiZXRjLiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5ncmFtbWFyCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHB5c2Fua3k6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC8oW15cIV0pWyFdezV9KD8hXCEpL2csCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxISIsCiAgICAgICAgICAgICAgICByZWFzb246IHdpbmRvdy5hdG9iKCdJa1pwZG1VZ1pYaGpiR0Z0WVhScGIyNGdiV0Z5YTNNc0lIUm9aU0J6ZFhKbElITnBaMjRnYjJZZ1lXNGdhVzV6WVc1bElHMXBibVFpJykKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbXVsdGlwbGVzeW1ib2xzOiB7ICAvLyAgICBodHRwczovL3JlZ2V4MTAxLmNvbS9yL2JFOXpNNi82CiAgICAgICAgICAgICAgICBleHByOiAvKFxiW2NDXVwrXCt8PXsxLDN9KD8hPSkpfChbXlx3XHMqIy5cLV86XFtcXVw8Lz5dKVwyezEsfS9nLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMSQyIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLmdyYW1tYXIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaV93YW50OiB7IC8vaHR0cHM6Ly9yZWdleDEwMS5jb20vci9pRDJ0VTAvMQogICAgICAgICAgICAgICAgZXhwcjogL1xiSVsnYSBdKm0gd2FudGluZ1xiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICJJIHdhbnQiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuZ3JhbW1hcgogICAgICAgICAgICB9LAogICAgICAgICAgICBveGZvcmRfY29tbWE6IHsgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci94TjBtRjYvNgogICAgICAgICAgICAgICAgZXhwcjogLygoPzpbXHcnLV0rLFxzKykrKD86W1x3Jy1dK1xzKXswLDJ9W1x3Jy1dKykoXHMrKGFuZHxvcilccytbXHcnLV0rKS9nLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMSwkMiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5ncmFtbWFyCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGlfaGF2ZV9maW5kOiB7CiAgICAgICAgICAgICAgICBleHByOiAvXGIoSXx5b3UpIGhhdmUgZmluZFxiKD8hWyhdfFwuXHcpL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMSBoYXZlIGZvdW5kIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLmdyYW1tYXIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbGV0X3Nfc2F5OiB7ICAvLyA2MEshCiAgICAgICAgICAgICAgICBleHByOiAvXGIobClldHMgKHNheXxzZWV8bG9va3xqdXN0fHB1dHxoYXZlfGxlYXZlfGdpdmV8d3JpdGUpXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxZXQncyAkMiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5ncmFtbWFyCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHN1Z2dlc3RfbWU6IHsgIC8vIDM2SwogICAgICAgICAgICAgICAgZXhwcjogL1xiKHMpdVtnal0rZXN0KHMpPyBtZS9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDF1Z2dlc3QkMiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5ncmFtbWFyCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHBlcmZlY3RseTogeyAgLy8gMzZLCiAgICAgICAgICAgICAgICBleHByOiAvXGIocClbcmVdK2ZlY3RseS9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFlcmZlY3RseSIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5ncmFtbWFyCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHdvcmtzX3BlcmZlY3RseTogeyAgLy8gMTNLKyBwb3N0cwogICAgICAgICAgICAgICAgZXhwcjogL1xiKHcpb3JrKHMpPyBwW2VyXStmZWN0XGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxb3JrJDIgcGVyZmVjdGx5IiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLmdyYW1tYXIKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZG9lc250X3dvcms6IHsgIC8vIDkwMCsgcG9zdHMKICAgICAgICAgICAgICAgIGV4cHI6IC9cYihkKW9uJ3Qgd29ya3MvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxb2Vzbid0IHdvcmsiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuZ3JhbW1hcgogICAgICAgICAgICB9LAogICAgICAgICAgICAvKgogICAgICAgICAgICAqKiBOb2lzZSByZWR1Y3Rpb24gLSBSZW1vdmUgZmx1ZmYgdGhhdCBhZGRzIG5vdGhpbmcgb2YgdGVjaG5pY2FsIHZhbHVlIHRvIHBvc3RzLgogICAgICAgICAgICAqKi8KICAgICAgICAgICAgaGVscDogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKGgpKD86W2VhXWw/cCkoPyFbLV0pXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxZWxwIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNpbGVudAogICAgICAgICAgICB9LAogICAgICAgICAgICB0aGFuazogeyAgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci9wTjBzWDQvMgogICAgICAgICAgICAgICAgZXhwcjogL1xiKHQpKD86W2hhbmtdezIsNH18aHgpKD89ICooeW91XGIpKVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWhhbmsiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMuc2lsZW50CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHRoYW5rczogeyAgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci9jTzdnRzIvMgogICAgICAgICAgICAgICAgZXhwcjogL1xiKHQpKD86YW5rcyAqKD89Wy4/IV1cbnx0b3xmb3J8aW58ZXZlcil8W2hhbl17M30oW2tzXXsyfXx4KSt8aHh8YW54KVxiL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMWhhbmtzIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnNpbGVudAogICAgICAgICAgICB9LAogICAgICAgICAgICB0aWE6IHsgIC8vIGNvbW1vbiBhY3JvbnltOyBzaG91bGQgb25seSByZW1vdmUgInRoYW5rcyBpbiBhZHZhbmNlIiBhdCBlbmQgb2YgcG9zdAogICAgICAgICAgICAgICAgZXhwcjogL1xidGlhJC9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLm5vaXNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHBsZWFzZTogewogICAgICAgICAgICAgICAgZXhwcjogL1xiKHApKD86bHorfGxzZT98bD9lYXNlPylcYi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDFsZWFzZSIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zaWxlbnQKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZWRpdHVwZGF0ZTogewogICAgICAgICAgICAgICAgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci90VDJwSzYvOQogICAgICAgICAgICAgICAgZXhwcjogLyhbLV8qXStbXHQgXSpcYihlZGl0fHVwZGF0ZSlcYihbXHQgXSojP1swLTldKyk/W1x0IF0qOipbXHQgXSpbLV8qXSs6KnxbXHQgXSpcYihlZGl0fHVwZGF0ZSlcYihbXHQgXSojP1swLTldKyk/XHMqOitbXHQgXSopL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMubm9pc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8gaHR0cDovL21ldGEuc3RhY2tleGNoYW5nZS5jb20vcXVlc3Rpb25zLzI5NTAvc2hvdWxkLWhpLXRoYW5rcy10YWdsaW5lcy1hbmQtc2FsdXRhdGlvbnMtYmUtcmVtb3ZlZC1mcm9tLXBvc3RzLzkzOTg5IzkzOTg5CiAgICAgICAgICAgIHNhbHV0YXRpb246IHsgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci95UzlsTjgvMTAKICAgICAgICAgICAgICAgIGV4cHI6IC9eXHMqKD86ZGVhcnM/XGIuKiR8Z3JlZXRpbmdzP1xiLiokfCg/OmhpKD86eWEpKnxoZWwrbyt8aGV5YT98aGFpfGcnP2RheXxnb29kXHM/KD86ZXZlbmluZ3xtb3JuaW5nfGRheXxhZnRlcm5vb24pfGFob3l8Zm9sa3N8Z3V5cylbLFxzXSooPzpccysoPzphbGx8Z3V5c3xmb2xrc3xmcmllbmRzP3x0aGVyZXxldmVyeW9uZXxwZW9wbGV8bWF0ZXk/cz98YnVkKyh5fGllcykpKikpKD86WywuIT86IF0qfCQpL2dtaSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLm5vaXNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGJhZHBocmFzZXM6IHsgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci9nRTJoSDYvMTcKICAgICAgICAgICAgICAgIGV4cHI6IC9bXlxuLiE/Ol0qKD86dGhhbmtzfHRoYW5rWyAtXXlvdXxwbGVhc2V8aGVscHxzdWdnZXN0KD86aW9ucykpXGIoPzpbIC4/IV0qJHxbXlxuLiE/Ol0qXGIoPzpoZWxwfGFwK3JlY2lhdFx3KnxtZXxhZHZhblx3KnxhID9sb3R8YmVmb3JlaGFuZClcYlteXG4uIT86XSopWy4hP18qXSovZ2ltLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMubm9pc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgaW1uZXc6IHsKICAgICAgICAgICAgICAgIGV4cHI6IC8oPyEgKVtcd1xzXSpcYmlbJyBdP2E/bSArKD86a2luZGF8cmVhbGx5KSAqbmV3XHcqICsoPzp0b3xpbikgKlx3KiAqKD86YW5kfFs7LC4hP10pPyAqL2dpLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMubm9pc2UKICAgICAgICAgICAgfSwKICAgICAgICAgICAgY29tcGxpbWVudGFyeUNsb3NlOiB7ICAvLyBodHRwczovL3JlZ2V4MTAxLmNvbS9yL2hMM2tUNS81CiAgICAgICAgICAgICAgICBleHByOiAvXlxzKig/Oig/OmtpbmQoPzplc3QpKiB8YmVzdCApKnJlZ2FyZHM/fGNoZWVycz98Z3JlZXRpbmdzP3x0aGFua3N8dGhhbmsgeW91KVxiLD8uKltcclxuXXswLDJ9LiooPzpbLiE/OiBdKnwkKS9naW0sCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5ub2lzZQogICAgICAgICAgICB9LAogICAgICAgICAgICBzb3JyeTRlbmdsaXNoOiB7IC8vIGh0dHBzOi8vcmVnZXgxMDEuY29tL3IvcEczb0Q2LzgKICAgICAgICAgICAgICAgIGV4cHI6IC9bXlxuLiE/XSooKHNvcnJ5fGFwK29sb2cuKnxmb3JnaXZlKVxiW14uIT86XG5ccl0rXGIoKGJhZHxteXxwb29yKSBlbmdsaXNoKXwoZW5nbGlzaFteLiE/OlxuXHJdKylcYih0b25ndWV8bGFuZ3VhZ2UpKVxiW14uIT86XG5ccl0qKD86Wy4hPzpfKl0pKi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLm5vaXNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGhvcGVfdGhpc19oZWxwczogeyAgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci95RjF1WTAvMQogICAgICAgICAgICAgICAgZXhwcjogL15ccyppPyA/XGJob3BlXGJbXlxuLiE/Ol0qaGVscHM/W15cbi4hPzpdKlssLiE/OiAoKV4tXSokL2dtaSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLm5vaXNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIGVudGVyX2NvZGVfaGVyZTogewogICAgICAgICAgICAgICAgZXhwcjogL1xiZW50ZXIgKD86Y29kZXxpbWFnZSBkZXNjcmlwdGlvbnxsaW5rIGRlc2NyaXB0aW9uKSBoZXJlXGIvZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5ub2lzZQogICAgICAgICAgICB9LAogICAgICAgICAgICBpX2hhdmVfYV9xdWVzdGlvbjogeyAgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci91TTBuUTEvMQogICAgICAgICAgICAgICAgZXhwcjogL14oPzpJIGhhdmV8SSd2ZSkoPzogZ290KSogYSBxdWVzdGlvblsgXHQsLj86LV0qKD86YWJvdXR8d2hlbik/WyBcdCwuPzotXSovZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiIsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5ub2lzZQogICAgICAgICAgICB9LAogICAgICAgICAgICBub19yZXBfdG9fY29tbWVudDogeyAgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci92TDJ1STAvMwogICAgICAgICAgICAgICAgZXhwcjogLyg/OlteXG4uIT86XSooPzpyZXB8cmVwdXRhdGlvbilcYlteLiE/OlxuXHJdK1xiY29tbWVudCg/OlsuIT86XG5ccildK3xbXi4hPzpcblxyXSo/KD86XGJidXRcYnxbLCBdKnNvfFsuLCldKykpKS9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiIiwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLm5vaXNlCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8qCiAgICAgICAgICAgICoqIExheW91dCAgLSBNaW5pbWl6ZSB3aGl0ZXNwYWNlICh3aGljaCBpcyBjb21wcmVzc2VkIGJ5IG1hcmt1cCkuCiAgICAgICAgICAgICoqICAgICAgICAgICBNdXN0IGZvbGxvdyBub2lzZSByZWR1Y3Rpb24uCiAgICAgICAgICAgICoqICAgICAgICAgICBMZWFkaW5nIGFuZCB0cmFpbGluZyBzcGFjZXMgYXJlIHBhcnQgb2YgTWFya2Rvd24gZm9ybWF0dGluZzsgbGVhdmUgdGhlbS4KICAgICAgICAgICAgKiovCiAgICAgICAgICAgIHNwYWNlX3RoZW5fc3ltYm9sOiB7ICAvLyBodHRwczovL3JlZ2V4MTAxLmNvbS9yL2ZONmxMNy82CiAgICAgICAgICAgICAgICBleHByOiAvKFteIFxuXHJcW1wpXSkoXCgoPyFcKSkpL2dtLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMSAkMiIsCiAgICAgICAgICAgICAgICBkZWJ1ZzogZmFsc2UsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5sYXlvdXQKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbm9fc3BhY2VfYmVmb3JlX3N5bWJvbDogeyAgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci9xQjlsUzAvMgogICAgICAgICAgICAgICAgZXhwcjogLyg/OiheICspfFsgXSs/KFssPyE6KV0rfFsuXSsoPyFbXFNdKSkpL2dtLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMSQyIiwKICAgICAgICAgICAgICAgIGRlYnVnOiBmYWxzZSwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLmxheW91dAogICAgICAgICAgICB9LAogICAgICAgICAgICBzeW1ib2xfdGhlbl9zcGFjZTogeyAgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci9pRDlhUzEvNgogICAgICAgICAgICAgICAgZXhwcjogLyg/OlxiKShbLD8hOildK3xbLl17M30pKD86XGIpKD8hW1xkXSkvZ20sCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiQxICIsCiAgICAgICAgICAgICAgICBkZWJ1ZzogZmFsc2UsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5sYXlvdXQKICAgICAgICAgICAgfSwKICAgICAgICAgICAgc3BhY2Vfc3ltYm9sX3NwYWNlOiB7CiAgICAgICAgICAgICAgICBleHByOiAvKD86XGJ8ICspKFsmXSkoPzogfFxiKSg/IVtcZF0pL2csCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogIiAkMSAiLAogICAgICAgICAgICAgICAgZGVidWc6IGZhbHNlLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMubGF5b3V0CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG11bHRpcGxlc3BhY2VzOiB7IC8vIGh0dHBzOi8vcmVnZXgxMDEuY29tL3IvaFk5aFEzLzMKICAgICAgICAgICAgICAgIGV4cHI6IC8oPyFeKVsgXXsyLH0oPyEgPyQpL2dtLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIgIiwKICAgICAgICAgICAgICAgIGRlYnVnOiBmYWxzZSwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLmxheW91dAogICAgICAgICAgICB9LAogICAgICAgICAgICBudW1iZXJlZF9saXN0OiB7IC8vIGh0dHBzOi8vcmVnZXgxMDEuY29tL3IvbUkxYVYzLzMKICAgICAgICAgICAgICAgIGV4cHI6IC8oW1xuXHJdfF4pK1woPyhbIFx0XSpbXGRdKylbKS46LV0gKi9nbSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiJDEkMSQyLiAiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMubGF5b3V0CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG5vX2h0bWxfYnJlYWs6IHsgLy8gaHR0cHM6Ly9yZWdleDEwMS5jb20vci94UDJvVzkvMQogICAgICAgICAgICAgICAgZXhwcjogLyAqXDwgKmJyICpcLz8gKj4gKi9naSwKICAgICAgICAgICAgICAgIHJlcGxhY2VtZW50OiAiICAiLAogICAgICAgICAgICAgICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMubGF5b3V0CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIC8vIERJU0FCTEVEIHRlbXBvcmFyaWx5IC0gc2VlIElzc3VlICMxMTUKICAgICAgICAgICAgLy9ibGFua2xpbmVzOiB7ICAvLyBodHRwczovL3JlZ2V4MTAxLmNvbS9yL2VBNWhBMi8yCiAgICAgICAgICAgIC8vICAgIGV4cHI6IC9eKD86ICpbXG5cclxmXSkrfCg/OiAqW1xuXHJcZl0pKyR8KCg/OiAqW1xuXHJcZl0pezJ9KSg/Oig/OiAqW1xuXHJcZl0pKSsvZywKICAgICAgICAgICAgLy8gICAgcmVwbGFjZW1lbnQ6ICIkMSIsCiAgICAgICAgICAgIC8vICAgIGRlYnVnOiBmYWxzZSwKICAgICAgICAgICAgLy8gICAgcmVhc29uOiBBcHAuY29uc3RzLnJlYXNvbnMubGF5b3V0CiAgICAgICAgICAgIC8vfSwKICAgICAgICAgICAgdHJhaWxpbmdfc3BhY2U6IHsgIC8vIGh0dHBzOi8vcmVnZXgxMDEuY29tL3IvaVEweVI4LzEKICAgICAgICAgICAgICAgIGV4cHI6IC8oW14gXSlbIF17MX0kL2dtLAogICAgICAgICAgICAgICAgcmVwbGFjZW1lbnQ6ICIkMSIsCiAgICAgICAgICAgICAgICBkZWJ1ZzogZmFsc2UsCiAgICAgICAgICAgICAgICByZWFzb246IEFwcC5jb25zdHMucmVhc29ucy5zaWxlbnQKICAgICAgICAgICAgfSwKICAgICAgICAgICAgLy8gVGhlIHRpdGxlIHNheXMgaXQgYWxsCiAgICAgICAgICAgIHRoZXRpdGxlc2F5c2l0YWxsOiB7CiAgICAgICAgICAgICAgICAvLyBodHRwczovL3JlZ2V4MTAxLmNvbS9yL2JYMXFCNC8zCiAgICAgICAgICAgICAgICBleHByOiAvKD86dGhlICk/dGl0bGUgc2F5cyAoPzppdCBhbGx8ZXZlcnl0aGluZylbLj8hXSovZ2ksCiAgICAgICAgICAgICAgICByZXBsYWNlbWVudDogZnVuY3Rpb24oKXsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gQXBwLnNlbGVjdGlvbnMudGl0bGUudmFsKCkucmVwbGFjZSgvWy4/IV0qJC8sIj8gXG5cbiIpOwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHJlYXNvbjogQXBwLmNvbnN0cy5yZWFzb25zLnRpdGxlU2F5c0FsbAogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgLy8gVGhpcyBpcyB3aGVyZSB0aGUgbWFnaWMgaGFwcGVuczogdGhpcyBmdW5jdGlvbiB0YWtlcyBhIGZldyBwaWVjZXMgb2YgaW5mb3JtYXRpb24gYW5kIGFwcGxpZXMgZWRpdHMgdG8gdGhlIHBvc3QKICAgICAgICBBcHAuZnVuY3MuZml4SXQgPSBmdW5jdGlvbihpbnB1dCwgZWRpdCkgewogICAgICAgICAgICB2YXIgZXhwcmVzc2lvbiA9IGVkaXQuZXhwcjsKICAgICAgICAgICAgdmFyIHJlcGxhY2VtZW50ID0gZWRpdC5yZXBsYWNlbWVudDsKICAgICAgICAgICAgdmFyIHJlYXNvbmluZyA9IGVkaXQucmVhc29uOwogICAgICAgICAgICB2YXIgZGVidWcgPSBlZGl0LmRlYnVnOwogICAgICAgICAgICAKICAgICAgICAgICAgaWYgKGRlYnVnKSB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpbnB1dCk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhleHByZXNzaW9uLnRvU3RyaW5nKCkpOwogICAgICAgICAgICAgICAgY29uc29sZS5sb2coInJlcGxhY2VtZW50OiAnIityZXBsYWNlbWVudCsiJyIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIElmIHRoZXJlIGlzIG5vdGhpbmcgdG8gc2VhcmNoLCBleGl0CiAgICAgICAgICAgIGlmICghaW5wdXQpIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgLy8gU2NhbiB0aGUgcG9zdCB0ZXh0IHVzaW5nIHRoZSBleHByZXNzaW9uIHRvIHNlZSBpZiB0aGVyZSBhcmUgYW55IG1hdGNoZXMKICAgICAgICAgICAgdmFyIG1hdGNoZXMgPSBpbnB1dC5tYXRjaChleHByZXNzaW9uKTsKICAgICAgICAgICAgaWYgKGRlYnVnKSBjb25zb2xlLmxvZyhtYXRjaGVzLCBleHByZXNzaW9uLmV4ZWMoaW5wdXQpKTsKICAgICAgICAgICAgaWYgKCFtYXRjaGVzKSByZXR1cm4gZmFsc2U7CiAgICAgICAgICAgIHZhciBjb3VudCA9IDA7ICAvLyAjIHJlcGxhY2VtZW50cyB0byBkbwogICAgICAgICAgICBpbnB1dCA9IGlucHV0LnJlcGxhY2UoZXhwcmVzc2lvbiwgZnVuY3Rpb24oYmVmb3JlKXsgCiAgICAgICAgICAgICAgICB2YXIgYWZ0ZXIgPSBiZWZvcmUucmVwbGFjZShleHByZXNzaW9uLCByZXBsYWNlbWVudCk7CiAgICAgICAgICAgICAgICBpZihhZnRlciAhPT0gYmVmb3JlKSArK2NvdW50OyAKICAgICAgICAgICAgICAgIGlmIChkZWJ1ZykgY29uc29sZS5sb2coYmVmb3JlLCBhZnRlciwgYWZ0ZXIgIT09IGJlZm9yZSwgY291bnQpOwogICAgICAgICAgICAgICAgcmV0dXJuIGFmdGVyOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYgKCFjb3VudCkgewogICAgICAgICAgICAgICAgLy8gU2VlbXMgbGlrZSBubyByZXBsYWNlbWVudHMsIGNoZWNrLgogICAgICAgICAgICAgICAgLy8gSW4gc29tZSBjYXNlcywgdGhlIGV4cHJlc3Npb24gbWF0Y2hlcyBvbiB0aGUgaW5pdGlhbCBpbnB1dCwgYnV0CiAgICAgICAgICAgICAgICAvLyBmYWlscyB0byBvbiB0aGUgaW5kaXZpZHVhbCBtYXRjaGVzLiBJbiB0aGF0IGNhc2UsIHdlIGNhbid0IGNvdW50CiAgICAgICAgICAgICAgICAvLyB0aGUgdG90YWwgY2hhbmdlcyBhY2N1cmF0ZWx5LCBidXQgd2UgY2FuIHN0aWxsIGNvbXBsZXRlIHRoZQogICAgICAgICAgICAgICAgLy8gcmVwbGFjZW1lbnQgb24gdGhlIGluaXRpYWwgaW5wdXQuCiAgICAgICAgICAgICAgICB2YXIgYWZ0ZXIgPSBpbnB1dC5yZXBsYWNlKGV4cHJlc3Npb24sIHJlcGxhY2VtZW50KTsKICAgICAgICAgICAgICAgIGlmIChkZWJ1ZykgY29uc29sZS5sb2coInplcm8tY291bnQ6ICIsIGlucHV0LCBhZnRlciwgYWZ0ZXIgIT09IGlucHV0KTsKICAgICAgICAgICAgICAgIGlmKGFmdGVyICE9PSBpbnB1dCkgewogICAgICAgICAgICAgICAgICAgICsrY291bnQ7IAogICAgICAgICAgICAgICAgICAgIGlucHV0ID0gYWZ0ZXI7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIGNvdW50ID4gMCA/IHsKICAgICAgICAgICAgICAgIHJlYXNvbjogcmVhc29uaW5nLAogICAgICAgICAgICAgICAgZml4ZWQ6IFN0cmluZyhpbnB1dCksCiAgICAgICAgICAgICAgICBjb3VudDogY291bnQKICAgICAgICAgICAgfSA6IGZhbHNlOwogICAgICAgIH07CgogICAgICAgIC8vIFBvcHVsYXRlIG9yIHJlZnJlc2ggRE9NIHNlbGVjdGlvbnMKICAgICAgICBBcHAuZnVuY3MucG9wU2VsZWN0aW9ucyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBBcHAuc2VsZWN0aW9ucy5yZWRvQnV0dG9uICAgICA9IEFwcC5nbG9iYWxzLnJvb3QuZmluZCgnW2lkXj0id21kLXJlZG8tYnV0dG9uIl0nKTsKICAgICAgICAgICAgQXBwLnNlbGVjdGlvbnMuYm9keSAgICAgICAgICAgPSBBcHAuZ2xvYmFscy5yb290LmZpbmQoJ1tpZF49IndtZC1pbnB1dCJdJyk7CiAgICAgICAgICAgIEFwcC5zZWxlY3Rpb25zLnRpdGxlICAgICAgICAgID0gQXBwLmdsb2JhbHMucm9vdC5maW5kKCdbY2xhc3MqPSJ0aXRsZS1maWVsZCJdJyk7CiAgICAgICAgICAgIEFwcC5zZWxlY3Rpb25zLnN1bW1hcnkgICAgICAgID0gQXBwLmdsb2JhbHMucm9vdC5maW5kKCdbaWRePSJlZGl0LWNvbW1lbnQiXSwgLmVkaXQtY29tbWVudCcpOwogICAgICAgICAgICBBcHAuc2VsZWN0aW9ucy50YWdGaWVsZCAgICAgICA9IEFwcC5nbG9iYWxzLnJvb3QuZmluZCgiLnRhZy1lZGl0b3IiKTsKICAgICAgICAgICAgQXBwLnNlbGVjdGlvbnMuc3VibWl0QnV0dG9uICAgPSBBcHAuZ2xvYmFscy5yb290LmZpbmQoJ1tpZF49InN1Ym1pdC1idXR0b24iXScpOwogICAgICAgICAgICBBcHAuc2VsZWN0aW9ucy5oZWxwQnV0dG9uICAgICA9IEFwcC5nbG9iYWxzLnJvb3QuZmluZCgnW2lkXj0id21kLWhlbHAtYnV0dG9uIl0nKTsKICAgICAgICAgICAgQXBwLnNlbGVjdGlvbnMuZWRpdG9yICAgICAgICAgPSBBcHAuZ2xvYmFscy5yb290LmZpbmQoJy5wb3N0LWVkaXRvcicpOwogICAgICAgICAgICBBcHAuc2VsZWN0aW9ucy5wcmV2aWV3ICAgICAgICA9IEFwcC5nbG9iYWxzLnJvb3QuZmluZCgnLndtZC1wcmV2aWV3Jyk7CiAgICAgICAgICAgIEFwcC5zZWxlY3Rpb25zLnByZXZpZXdNZW51ICAgID0gQXBwLmdsb2JhbHMucm9vdC5maW5kKCcucHJldmlldy1vcHRpb25zJykuYXBwZW5kKCcmbmJzcDsmbmJzcDsnKTsKICAgICAgICAgICAgaWYoIUFwcC5zZWxlY3Rpb25zLnByZXZpZXdNZW51Lmxlbmd0aCkgewogICAgICAgICAgICAgICAgQXBwLnNlbGVjdGlvbnMucHJldmlld01lbnUgICA9ICQoJzxkaXYgY2xhc3M9InByZXZpZXctb3B0aW9ucyBwb3N0LW1lbnUiIHN0eWxlPSJtYXJnaW4tdG9wOjVweDttYXJnaW4tYm90dG9tOjhweDsiLz4nKS5pbnNlcnRCZWZvcmUoQXBwLnNlbGVjdGlvbnMucHJldmlldyk7CiAgICAgICAgICAgICAgICB2YXIgcHJldmlld1RvZ2dsZVRleHQgPSBBcHAuc2VsZWN0aW9ucy5wcmV2aWV3LmlzKCc6dmlzaWJsZScpID8gJ2hpZGUgcHJldmlldycgOiAnc2hvdyBwcmV2aWV3JzsKICAgICAgICAgICAgICAgIEFwcC5zZWxlY3Rpb25zLnByZXZpZXdUb2dnbGUgPSAkKCc8YSBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCkiIGNsYXNzPSJoaWRlLXByZXZpZXciIHN0eWxlPSJtYXJnaW4tbGVmdDotMnB4OyI+JyArIHByZXZpZXdUb2dnbGVUZXh0ICsgJzwvYT4nKS5jbGljayhBcHAuZnVuY3MudG9nZ2xlUHJldmlldykuYXBwZW5kVG8oQXBwLnNlbGVjdGlvbnMucHJldmlld01lbnUpOwogICAgICAgICAgICAgICAgQXBwLnNlbGVjdGlvbnMucHJldmlld01lbnUuYXBwZW5kKCcmbmJzcDsmbmJzcDsnKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIEFwcC5zZWxlY3Rpb25zLnByZXZpZXdUb2dnbGUgID0gQXBwLmdsb2JhbHMucm9vdC5maW5kKCcuaGlkZS1wcmV2aWV3Jykub2ZmKCdjbGljaycpLmF0dHIoJ2hyZWYnLCdqYXZhc2NyaXB0OnZvaWQoMCknKS5jbGljayhBcHAuZnVuY3MudG9nZ2xlUHJldmlldyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgQXBwLnNlbGVjdGlvbnMuZGlmZlRvZ2dsZSAgICAgPSAkKCc8YSBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCkiIGNsYXNzPSJoaWRlLXByZXZpZXciIHN0eWxlPSJtYXJnaW4tbGVmdDotMnB4OyI+c2hvdyBkaWZmPC9hPicpLmNsaWNrKEFwcC5mdW5jcy50b2dnbGVEaWZmKS5hcHBlbmRUbyhBcHAuc2VsZWN0aW9ucy5wcmV2aWV3TWVudSk7CiAgICAgICAgICAgIEFwcC5zZWxlY3Rpb25zLmRpZmYgICAgICAgICAgID0gJCgnPGRpdiBjbGFzcz0id21kLXByZXZpZXciLz4nKS5oaWRlKCkuYXBwZW5kVG8oQXBwLnNlbGVjdGlvbnMuZWRpdG9yKTsKICAgICAgICB9OwoKICAgICAgICBBcHAuZnVuY3Muc2hvd1ByZXZpZXcgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgQXBwLnNlbGVjdGlvbnMuZGlmZi5oaWRlKCk7CiAgICAgICAgICAgIEFwcC5zZWxlY3Rpb25zLmRpZmZUb2dnbGUudGV4dCgnc2hvdyBkaWZmJyk7CiAgICAgICAgICAgIEFwcC5zZWxlY3Rpb25zLnByZXZpZXcuc2hvdygpOwogICAgICAgICAgICBBcHAuc2VsZWN0aW9ucy5wcmV2aWV3VG9nZ2xlLnRleHQoJ2hpZGUgcHJldmlldycpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBBcHAuZnVuY3Muc2hvd0RpZmYgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgQXBwLnNlbGVjdGlvbnMucHJldmlldy5oaWRlKCk7CiAgICAgICAgICAgIEFwcC5zZWxlY3Rpb25zLnByZXZpZXdUb2dnbGUudGV4dCgnc2hvdyBwcmV2aWV3Jyk7CiAgICAgICAgICAgIEFwcC5zZWxlY3Rpb25zLmRpZmYuc2hvdygpOwogICAgICAgICAgICBBcHAuc2VsZWN0aW9ucy5kaWZmVG9nZ2xlLnRleHQoJ2hpZGUgZGlmZicpOwogICAgICAgIH0KICAgICAgICAKICAgICAgICBBcHAuZnVuY3MudG9nZ2xlUHJldmlldyA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBBcHAuc2VsZWN0aW9ucy5kaWZmLmhpZGUoKTsKICAgICAgICAgICAgQXBwLnNlbGVjdGlvbnMuZGlmZlRvZ2dsZS50ZXh0KCdzaG93IGRpZmYnKTsKICAgICAgICAgICAgaWYoL2hpZGUvLnRlc3QoQXBwLnNlbGVjdGlvbnMucHJldmlld1RvZ2dsZS50ZXh0KCkpKSByZXR1cm4gQXBwLnNlbGVjdGlvbnMucHJldmlld1RvZ2dsZS50ZXh0KCdzaG93IHByZXZpZXcnKSwgQXBwLnNlbGVjdGlvbnMucHJldmlldy50b2dnbGUoKSwgdHJ1ZTsKICAgICAgICAgICAgaWYoL3Nob3cvLnRlc3QoQXBwLnNlbGVjdGlvbnMucHJldmlld1RvZ2dsZS50ZXh0KCkpKSByZXR1cm4gQXBwLnNlbGVjdGlvbnMucHJldmlld1RvZ2dsZS50ZXh0KCdoaWRlIHByZXZpZXcnKSwgQXBwLnNlbGVjdGlvbnMucHJldmlldy50b2dnbGUoKSwgdHJ1ZTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgQXBwLmZ1bmNzLnRvZ2dsZURpZmYgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgQXBwLnNlbGVjdGlvbnMucHJldmlldy5oaWRlKCk7CiAgICAgICAgICAgIEFwcC5zZWxlY3Rpb25zLnByZXZpZXdUb2dnbGUudGV4dCgnc2hvdyBwcmV2aWV3Jyk7CiAgICAgICAgICAgIGlmKC9oaWRlLy50ZXN0KEFwcC5zZWxlY3Rpb25zLmRpZmZUb2dnbGUudGV4dCgpKSkgcmV0dXJuIEFwcC5zZWxlY3Rpb25zLmRpZmZUb2dnbGUudGV4dCgnc2hvdyBkaWZmJyksIEFwcC5zZWxlY3Rpb25zLmRpZmYudG9nZ2xlKCksIHRydWU7CiAgICAgICAgICAgIGlmKC9zaG93Ly50ZXN0KEFwcC5zZWxlY3Rpb25zLmRpZmZUb2dnbGUudGV4dCgpKSkgcmV0dXJuIEFwcC5zZWxlY3Rpb25zLmRpZmZUb2dnbGUudGV4dCgnaGlkZSBkaWZmJyksIEFwcC5zZWxlY3Rpb25zLmRpZmYudG9nZ2xlKCksIHRydWU7CiAgICAgICAgfQogICAgICAgIAogICAgICAgIC8vIFBvcHVsYXRlIGVkaXQgaXRlbSBzZXRzIGZyb20gRE9NIHNlbGVjdGlvbnMKICAgICAgICBBcHAuZnVuY3MucG9wSXRlbXMgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdmFyIGkgPSBBcHAuaXRlbXMsIHMgPSBBcHAuc2VsZWN0aW9uczsKICAgICAgICAgICAgWyd0aXRsZScsICdib2R5JywgJ3N1bW1hcnknXS5mb3JFYWNoKGZ1bmN0aW9uKHYpIHsKICAgICAgICAgICAgICAgIGlbdl0gPSBzW3ZdLmxlbmd0aCA/IHNbdl0udmFsKCkgOiAnJzsKICAgICAgICAgICAgfSk7CiAgICAgICAgfTsKCiAgICAgICAgLy8gUG9wdWxhdGUgb3JpZ2luYWwgaXRlbSBzZXRzIGZyb20gZWRpdCBpdGVtcyBmb3IgdGhlIGRpZmYKICAgICAgICBBcHAuZnVuY3MucG9wT3JpZ2luYWxzID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciBpID0gQXBwLm9yaWdpbmFscywgcyA9IEFwcC5pdGVtczsKICAgICAgICAgICAgWyd0aXRsZScsICdib2R5JywgJ3N1bW1hcnknXS5mb3JFYWNoKGZ1bmN0aW9uKHYpIHsKICAgICAgICAgICAgICAgIGlbdl0gPSBzW3ZdOwogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgCiAgICAgICAgLy8gSW5zZXJ0IGVkaXRpbmcgYnV0dG9uCiAgICAgICAgQXBwLmZ1bmNzLmNyZWF0ZUJ1dHRvbiA9IGZ1bmN0aW9uKCkgewogICAgICAgICAgICBpZiAoIUFwcC5zZWxlY3Rpb25zLnJlZG9CdXR0b24ubGVuZ3RoKSByZXR1cm4gZmFsc2U7CgogICAgICAgICAgICBBcHAuc2VsZWN0aW9ucy5idXR0b25XcmFwcGVyID0gJCgnPGxpIGNsYXNzPSJ3bWQtbWFnaWMtZWRpdCIvPicpOwogICAgICAgICAgICBBcHAuc2VsZWN0aW9ucy5idXR0b25GaXggPSAkKCc8aW1nIHNyYz0iLy9pLnN0YWNrLmltZ3VyLmNvbS9PbTVwTC5wbmciIGNsYXNzPSJ3bWQtYnV0dG9uIFRvb2xraXRGaXgiIHRpdGxlPSJGaXggdGhlIGNvbnRlbnQhIiAvPicpOwogICAgICAgICAgICBBcHAuc2VsZWN0aW9ucy5idXR0b25JbmZvID0gJCgnPGRpdiBjbGFzcz0iVG9vbGtpdEluZm8iPicpOwoKICAgICAgICAgICAgLy8gQnVpbGQgdGhlIGJ1dHRvbgogICAgICAgICAgICBBcHAuc2VsZWN0aW9ucy5idXR0b25XcmFwcGVyLmFwcGVuZChBcHAuc2VsZWN0aW9ucy5idXR0b25GaXgpOwogICAgICAgICAgICBBcHAuc2VsZWN0aW9ucy5idXR0b25XcmFwcGVyLmFwcGVuZChBcHAuc2VsZWN0aW9ucy5idXR0b25JbmZvKTsKCiAgICAgICAgICAgIC8vIEluc2VydCBidXR0b24KICAgICAgICAgICAgQXBwLnNlbGVjdGlvbnMucmVkb0J1dHRvbi5hZnRlcihBcHAuc2VsZWN0aW9ucy5idXR0b25XcmFwcGVyKTsKCiAgICAgICAgICAgIC8vIEF0dGFjaCB0aGUgZXZlbnQgbGlzdGVuZXIgdG8gdGhlIGJ1dHRvbgogICAgICAgICAgICBBcHAuc2VsZWN0aW9ucy5idXR0b25GaXguY2xpY2soQXBwLmZ1bmNzLmZpeEV2ZW50KTsKICAgICAgICAgICAgCiAgICAgICAgICAgIEFwcC5zZWxlY3Rpb25zLmJ1dHRvbldyYXBwZXIuY3NzKHsKICAgICAgICAgICAgICAgICdwb3NpdGlvbic6ICdyZWxhdGl2ZScsCiAgICAgICAgICAgICAgICAnbGVmdCc6ICc0MTBweCcsCiAgICAgICAgICAgICAgICAnZGlzcGxheSc6ICdpbmxpbmUtYmxvY2snLAogICAgICAgICAgICAgICAgJ292ZXJmbG93JzogJ3Zpc2libGUnLAogICAgICAgICAgICAgICAgJ2hlaWdodCc6ICc1NSUnLAogICAgICAgICAgICAgICAgJ3doaXRlLXNwYWNlJzogJ25vd3JhcCcKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIEFwcC5zZWxlY3Rpb25zLmJ1dHRvbkZpeC5jc3MoewogICAgICAgICAgICAgICAgJ3Bvc2l0aW9uJzogJ3N0YXRpYycsCiAgICAgICAgICAgICAgICAnZGlzcGxheSc6ICdpbmxpbmUtYmxvY2snLAogICAgICAgICAgICAgICAgJ3dpZHRoJzogJ2F1dG8nLAogICAgICAgICAgICAgICAgJ2hlaWdodCc6ICcxMDAlJwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgQXBwLnNlbGVjdGlvbnMuYnV0dG9uSW5mby5jc3MoewogICAgICAgICAgICAgICAgJ3Bvc2l0aW9uJzogJ3N0YXRpYycsCiAgICAgICAgICAgICAgICAnZGlzcGxheSc6ICdpbmxpbmUtYmxvY2snLAogICAgICAgICAgICAgICAgJ3ZlcnRpY2FsLWFsaWduJzogJ2JvdHRvbScsCiAgICAgICAgICAgICAgICAnbWFyZ2luLWxlZnQnOiAnNXB4JywKICAgICAgICAgICAgICAgICdmb250LXNpemUnOiAnMTJweCcsCiAgICAgICAgICAgICAgICAnY29sb3InOiAnIzQyNDI0MicsCiAgICAgICAgICAgICAgICAnYmFja2dyb3VuZCc6ICcjZWVlJywKICAgICAgICAgICAgICAgICdib3JkZXItcmFkaXVzJzogJzNweCcsCiAgICAgICAgICAgICAgICAncGFkZGluZyc6ICczcHggNnB4JwogICAgICAgICAgICB9KS5oaWRlKCk7CiAgICAgICAgfTsKCiAgICAgICAgQXBwLmZ1bmNzLmZpeEV2ZW50ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiBBcHAuZnVuY3MucG9wSXRlbXMoKSwgQXBwLnBpcGUoQXBwLml0ZW1zLCBBcHAucGlwZU1vZHMsIEFwcC5nbG9iYWxzLm9yZGVyKSwgZmFsc2U7CiAgICAgICAgfTsKCiAgICAgICAgQXBwLmZ1bmNzLmRpZmYgPSBmdW5jdGlvbihhMSwgYTIpIHsKICAgICAgICAgICAgdmFyIHN0cmluZ3MgPSBbXTsKICAgICAgICAgICAgZnVuY3Rpb24gbWFha1Jpaih0eXBlLCByaWopIHsKICAgICAgICAgICAgICAgIGlmICghdHlwZSkgcmV0dXJuIHN0cmluZ3MucHVzaChyaWoucmVwbGFjZSgvXDwvZywgJyZsdDsnKSksIHRydWU7CiAgICAgICAgICAgICAgICBpZiAodHlwZSA9PT0gJysnKSByZXR1cm4gc3RyaW5ncy5wdXNoKCc8c3BhbiBjbGFzcz0iYWRkIj4nICsgcmlqLnJlcGxhY2UoL1w8L2csICcmbHQ7JykucmVwbGFjZSgvKD89XG4pL2csJ+KGtScpICsgJzwvc3Bhbj4nKSwgdHJ1ZTsKICAgICAgICAgICAgICAgIGlmICh0eXBlID09PSAnLScpIHJldHVybiBzdHJpbmdzLnB1c2goJzxzcGFuIGNsYXNzPSJkZWwiPicgKyByaWoucmVwbGFjZSgvXDwvZywgJyZsdDsnKS5yZXBsYWNlKC8oPz1cbikvZywn4oa1JykgKyAnPC9zcGFuPicpLCB0cnVlOwogICAgICAgICAgICB9CgogICAgICAgICAgICBmdW5jdGlvbiBnZXREaWZmKG1hdHJpeCwgYTEsIGEyLCB4LCB5KSB7CiAgICAgICAgICAgICAgICBpZiAoeCA+IDAgJiYgeSA+IDAgJiYgYTFbeSAtIDFdID09PSBhMlt4IC0gMV0pIHsKICAgICAgICAgICAgICAgICAgICBnZXREaWZmKG1hdHJpeCwgYTEsIGEyLCB4IC0gMSwgeSAtIDEpOwogICAgICAgICAgICAgICAgICAgIG1hYWtSaWooZmFsc2UsIGExW3kgLSAxXSk7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgIGlmICh4ID4gMCAmJiAoeSA9PT0gMCB8fCBtYXRyaXhbeV1beCAtIDFdID49IG1hdHJpeFt5IC0gMV1beF0pKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIGdldERpZmYobWF0cml4LCBhMSwgYTIsIHggLSAxLCB5KTsKICAgICAgICAgICAgICAgICAgICAgICAgbWFha1JpaignKycsIGEyW3ggLSAxXSk7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmICh5ID4gMCAmJiAoeCA9PT0gMCB8fCBtYXRyaXhbeV1beCAtIDFdIDwgbWF0cml4W3kgLSAxXVt4XSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZ2V0RGlmZihtYXRyaXgsIGExLCBhMiwgeCwgeSAtIDEpOwogICAgICAgICAgICAgICAgICAgICAgICBtYWFrUmlqKCctJywgYTFbeSAtIDFdKTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIAogICAgICAgICAgICBhMSA9IGExLnNwbGl0KC8oPz1cYnxcV3xfKS9nKTsKICAgICAgICAgICAgYTIgPSBhMi5zcGxpdCgvKD89XGJ8XFd8XykvZyk7CgogICAgICAgICAgICB2YXIgbWF0cml4ID0gbmV3IEFycmF5KGExLmxlbmd0aCArIDEpOwogICAgICAgICAgICB2YXIgeCwgeTsKICAgICAgICAgICAgZm9yICh5ID0gMDsgeSA8IG1hdHJpeC5sZW5ndGg7IHkrKykgewogICAgICAgICAgICAgICAgbWF0cml4W3ldID0gbmV3IEFycmF5KGEyLmxlbmd0aCArIDEpOwoKICAgICAgICAgICAgICAgIGZvciAoeCA9IDA7IHggPCBtYXRyaXhbeV0ubGVuZ3RoOyB4KyspIHsKICAgICAgICAgICAgICAgICAgICBtYXRyaXhbeV1beF0gPSAwOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CgogICAgICAgICAgICBmb3IgKHkgPSAxOyB5IDwgbWF0cml4Lmxlbmd0aDsgeSsrKSB7CiAgICAgICAgICAgICAgICBmb3IgKHggPSAxOyB4IDwgbWF0cml4W3ldLmxlbmd0aDsgeCsrKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKGExW3kgLSAxXSA9PT0gYTJbeCAtIDFdKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIG1hdHJpeFt5XVt4XSA9IDEgKyBtYXRyaXhbeSAtIDFdW3ggLSAxXTsKICAgICAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICAgICAgICBtYXRyaXhbeV1beF0gPSBNYXRoLm1heChtYXRyaXhbeSAtIDFdW3hdLCBtYXRyaXhbeV1beCAtIDFdKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBnZXREaWZmKG1hdHJpeCwgYTEsIGEyLCB4IC0gMSwgeSAtIDEpOwogICAgICAgICAgICAgICAgcmV0dXJuIHN0cmluZ3Muam9pbignJyk7CiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgICAgICAgICB9CiAgICAgICAgfTsKCiAgICAgICAgLy8gUGlwZSBkYXRhIHRocm91Z2ggbW9kdWxlcyBpbiBwcm9wZXIgb3JkZXIsIHJldHVybmluZyB0aGUgcmVzdWx0CiAgICAgICAgQXBwLnBpcGUgPSBmdW5jdGlvbihkYXRhLCBtb2RzLCBvcmRlcikgewogICAgICAgICAgICB2YXIgbW9kTmFtZTsKICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBvcmRlcikgewogICAgICAgICAgICAgICAgaWYgKG9yZGVyLmhhc093blByb3BlcnR5KGkpKSB7CiAgICAgICAgICAgICAgICAgICAgbW9kTmFtZSA9IG9yZGVyW2ldOwogICAgICAgICAgICAgICAgICAgIG1vZHNbbW9kTmFtZV0oZGF0YSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBBcHAucGlwZU1vZHMub21pdCA9IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICAgICAgaWYgKCFkYXRhLmJvZHkpIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgZm9yICh2YXIgdHlwZSBpbiBBcHAuZ2xvYmFscy5jaGVja3MpIHsKICAgICAgICAgICAgICAgIGRhdGEuYm9keSA9IGRhdGEuYm9keS5yZXBsYWNlKEFwcC5nbG9iYWxzLmNoZWNrc1t0eXBlXSwgZnVuY3Rpb24obWF0Y2gpIHsKICAgICAgICAgICAgICAgICAgICBBcHAuZ2xvYmFscy5yZXBsYWNlZFN0cmluZ3NbdHlwZV0ucHVzaChtYXRjaCk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIEFwcC5nbG9iYWxzLnBsYWNlSG9sZGVyc1t0eXBlXTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBkYXRhOwogICAgICAgIH07CgogICAgICAgIEFwcC5waXBlTW9kcy5jb2RlZml4ID0gZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIHZhciByZXBsYWNlZCA9IEFwcC5nbG9iYWxzLnJlcGxhY2VkU3RyaW5ncy5ibG9jaywgc3RyOwogICAgICAgICAgICBmb3IgKHZhciBpIGluIHJlcGxhY2VkKSB7CiAgICAgICAgICAgICAgICAvLyBodHRwczovL3JlZ2V4MTAxLmNvbS9yL3RYOXBNMy8xICAgICAgICAgICAgICBodHRwczovL3JlZ2V4MTAxLmNvbS9yL3RYOXBNMy8yICAgICAgICAgICAgICAgICBodHRwczovL3JlZ2V4MTAxLmNvbS9yL3RYOXBNMy8zCiAgICAgICAgICAgICAgICBpZiAoL15gW15dK2AkLy50ZXN0KHJlcGxhY2VkW2ldKSkgcmVwbGFjZWRbaV0gPSAnXG5cbicgKyAvKD8hYCkoKD8hYClbXl0pKy8uZXhlYyhyZXBsYWNlZFtpXSlbMF0ucmVwbGFjZSgvKC4rKS9nLCAnICAgICQxJyk7CiAgICAgICAgICAgIH0KICAgICAgICB9OwoKICAgICAgICBBcHAucGlwZU1vZHMuZWRpdCA9IGZ1bmN0aW9uKGRhdGEpIHsKICAgICAgICAgICAgQXBwLmZ1bmNzLnBvcE9yaWdpbmFscygpOwoKICAgICAgICAgICAgLy8gVmlzdWFsbHkgY29uZmlybSBlZGl0IC0gU0UgbWFrZXMgaXQgZWFzeSBiZWNhdXNlIHRoZSBqUXVlcnkgY29sb3IgYW5pbWF0aW9uIHBsdWdpbiBzZWVtcyB0byBiZSB0aGVyZSBieSBkZWZhdWx0CiAgICAgICAgICAgIEFwcC5zZWxlY3Rpb25zLmJvZHkuYW5pbWF0ZSh7IGJhY2tncm91bmRDb2xvcjogJyNjOGZmYTcnIH0sIDEwKTsKICAgICAgICAgICAgQXBwLnNlbGVjdGlvbnMuYm9keS5hbmltYXRlKHsgYmFja2dyb3VuZENvbG9yOiAnI2ZmZicgfSwgMTAwMCk7CgogICAgICAgICAgICAvLyBMaXN0IG9mIGZpZWxkcyB0byBiZSBlZGl0ZWQKICAgICAgICAgICAgdmFyIGZpZWxkcyA9IHtib2R5Oidib2R5Jyx0aXRsZTondGl0bGUnfTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIExvb3AgdGhyb3VnaCBhbGwgZWRpdGluZyBydWxlcwogICAgICAgICAgICBmb3IgKHZhciBqIGluIEFwcC5lZGl0cykgZm9yICh2YXIgZmllbGQgaW4gZmllbGRzKSB7CiAgICAgICAgICAgICAgICB2YXIgZGVidWcgPSBBcHAuZWRpdHNbal0uZGVidWc7CiAgICAgICAgICAgICAgICBpZiAoZGVidWcpIGNvbnNvbGUubG9nKCJlZGl0ICIraisiIGluICIrZmllbGQpOwogICAgICAgICAgICAgICAgaWYgKEFwcC5lZGl0c1tqXS50aXRsZU9ubHkgJiYgJ3RpdGxlJyAhPT0gZmllbGQpCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7ICAvLyBTa2lwIHRpdGxlLW9ubHkgZWRpdHMgaWYgbm90IGVkaXRpbmcgdGl0bGUuCiAgICAgICAgICAgICAgICB2YXIgZml4ID0gQXBwLmZ1bmNzLmZpeEl0KGRhdGFbZmllbGRdLCBBcHAuZWRpdHNbal0pOwogICAgICAgICAgICAgICAgaWYgKCFmaXgpIGNvbnRpbnVlOwogICAgICAgICAgICAgICAgaWYgKGZpeC5yZWFzb24gaW4gQXBwLmdsb2JhbHMucmVhc29ucykgQXBwLmdsb2JhbHMucmVhc29uc1tmaXgucmVhc29uXS5jb3VudCArPSBmaXguY291bnQ7CiAgICAgICAgICAgICAgICBlbHNlIEFwcC5nbG9iYWxzLnJlYXNvbnNbZml4LnJlYXNvbl0gPSB7IHJlYXNvbjpmaXgucmVhc29uLCBlZGl0SWQ6aiwgY291bnQ6Zml4LmNvdW50IH07CiAgICAgICAgICAgICAgICBkYXRhW2ZpZWxkXSA9IGZpeC5maXhlZDsKICAgICAgICAgICAgICAgIEFwcC5lZGl0c1tqXS5maXhlZCA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIFJlbW92ZSBzaWxlbnQgY2hhbmdlIHJlYXNvbgogICAgICAgICAgICBkZWxldGUgQXBwLmdsb2JhbHMucmVhc29uc1tBcHAuY29uc3RzLnJlYXNvbnMuc2lsZW50XTsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIElmIHRoZXJlIGFyZSBubyByZWFzb25zLCBleGl0CiAgICAgICAgICAgIGlmIChBcHAuZ2xvYmFscy5yZWFzb25zID09IHt9KSByZXR1cm4gZmFsc2U7CgogICAgICAgICAgICAvLyBXZSBuZWVkIGEgcGxhY2UgdG8gc3RvcmUgdGhlIHJlYXNvbnMgYmVpbmcgYXBwbGllZCB0byB0aGUgc3VtbWFyeS4gCiAgICAgICAgICAgIHZhciByZWFzb25zID0gW107CiAgICAgICAgICAgIEFwcC5nbG9iYWxzLmNoYW5nZXMgPSAwOwoKICAgICAgICAgICAgZm9yICh2YXIgeiBpbiBBcHAuZ2xvYmFscy5yZWFzb25zKSB7CiAgICAgICAgICAgICAgICAvLyBGb3IgZWFjaCB0eXBlIG9mIGNoYW5nZSBtYWRlLCBhZGQgYSByZWFzb24gc3RyaW5nIHdpdGggdGhlIHJlYXNvbiB0ZXh0LAogICAgICAgICAgICAgICAgLy8gb3B0aW9uYWxseSB0aGUgcnVsZSBJRCwgYW5kIHRoZSBudW1iZXIgb2YgcmVwZWF0cyBpZiAyIG9yIG1vcmUuCiAgICAgICAgICAgICAgICByZWFzb25zLnB1c2goQXBwLmdsb2JhbHMucmVhc29uc1t6XS5yZWFzb24KICAgICAgICAgICAgICAgICAgICAgICAgICAgICArIChBcHAuZ2xvYmFscy5zaG93UnVsZXMgPyAnIFsnKyBBcHAuZ2xvYmFscy5yZWFzb25zW3pdLmVkaXRJZCArJ10nIDogJycpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKyAoQXBwLmdsb2JhbHMuc2hvd0NvdW50cyA/ICgoQXBwLmdsb2JhbHMucmVhc29uc1t6XS5jb3VudCA+IDEpID8gJyAoJytBcHAuZ2xvYmFscy5yZWFzb25zW3pdLmNvdW50KycpJyA6ICcnKSA6ICcnKSApOwogICAgICAgICAgICAgICAgQXBwLmdsb2JhbHMuY2hhbmdlcyArPSBBcHAuZ2xvYmFscy5yZWFzb25zW3pdLmNvdW50OwogICAgICAgICAgICB9CgogICAgICAgICAgICB2YXIgcmVhc29uU3RyID0gcmVhc29ucy5sZW5ndGggPyByZWFzb25zLmpvaW4oJzsgJykrJy4nIDogJyc7ICAvLyBVbmlxdWUgcmVhc29ucyBzZXBhcmF0ZWQgYnkgOyBhbmQgdGVybWluYXRlZCBieSAuCgogICAgICAgICAgICBpZiAoIWRhdGEuaGFzT3duUHJvcGVydHkoJ3N1bW1hcnlPcmlnJykpIGRhdGEuc3VtbWFyeU9yaWcgPSBkYXRhLnN1bW1hcnkudHJpbSgpIC8vIFJlbWVtYmVyIG9yaWdpbmFsIHN1bW1hcnkKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC8oW147XSlbLj8hOl0/JC8sIiQxOyIpOwogICAgICAgICAgICBpZiAoZGF0YS5zdW1tYXJ5T3JpZy5sZW5ndGgpCiAgICAgICAgICAgICAgICBkYXRhLnN1bW1hcnlPcmlnID0gZGF0YS5zdW1tYXJ5T3JpZyArICcgJzsKICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgcmVhc29uU3RyID0gcmVhc29uU3RyLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcmVhc29uU3RyLnNsaWNlKDEpOyAgLy8gQ2FwIGZpcnN0IGxldHRlci4KCiAgICAgICAgICAgIGRhdGEuc3VtbWFyeSA9IGRhdGEuc3VtbWFyeU9yaWcgKyByZWFzb25TdHI7CiAgICAgICAgICAgIC8vIExpbWl0IHN1bW1hcnkgdG8gMzAwIGNoYXJzCiAgICAgICAgICAgIGlmIChkYXRhLnN1bW1hcnkubGVuZ3RoID4gMzAwKSBkYXRhLnN1bW1hcnkgPSBkYXRhLnN1bW1hcnkuc3Vic3RyKDAsMzAwLTMpICsgJy4uLic7CgogICAgICAgICAgICByZXR1cm4gZGF0YTsKICAgICAgICB9OyAgIAogICAgICAgIAogICAgICAgIC8vIFBvcHVsYXRlIHRoZSBkaWZmCiAgICAgICAgQXBwLnBpcGVNb2RzLmRpZmYgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgQXBwLnNlbGVjdGlvbnMuZGlmZi5lbXB0eSgpLmFwcGVuZCgnPGRpdiBjbGFzcz0iZGlmZnRpdGxlIj4nICsgQXBwLmZ1bmNzLmRpZmYoQXBwLm9yaWdpbmFscy50aXRsZSwgQXBwLml0ZW1zLnRpdGxlLCB0cnVlKSArICc8L2Rpdj4nICsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0iZGlmZmJvZHkiPicgKyBBcHAucGlwZU1vZHMucmVwbGFjZSh7Ym9keTpBcHAuZnVuY3MuZGlmZihBcHAub3JpZ2luYWxzLmJvZHksIEFwcC5pdGVtcy5ib2R5KX0sIHRydWUpLmJvZHkgKyAnPC9kaXY+Jyk7CiAgICAgICAgICAgIEFwcC5mdW5jcy5zaG93RGlmZigpOwogICAgICAgIH0KCiAgICAgICAgLy8gUmVwbGFjZSB0aGUgcHJldmlvdXNseSBvbWl0dGVkIGNvZGUKICAgICAgICBBcHAucGlwZU1vZHMucmVwbGFjZSA9IGZ1bmN0aW9uKGRhdGEsIGxpdGVyYWwpIHsKICAgICAgICAgICAgaWYgKCFkYXRhLmJvZHkpIHJldHVybiBmYWxzZTsKICAgICAgICAgICAgZm9yICh2YXIgdHlwZSBpbiBBcHAuZ2xvYmFscy5jaGVja3NyKSB7CiAgICAgICAgICAgICAgICB2YXIgaSA9IDA7CiAgICAgICAgICAgICAgICBkYXRhLmJvZHkgPSBkYXRhLmJvZHkucmVwbGFjZShBcHAuZ2xvYmFscy5wbGFjZUhvbGRlckNoZWNrc1t0eXBlXSwgZnVuY3Rpb24obWF0Y2gpIHsKICAgICAgICAgICAgICAgICAgICB2YXIgcmVwbGFjZSA9IEFwcC5nbG9iYWxzLnJlcGxhY2VkU3RyaW5nc1t0eXBlXVtpKytdOwogICAgICAgICAgICAgICAgICAgIGlmKGxpdGVyYWwgJiYgL2Jsb2NrfGxzZWMvLnRlc3QodHlwZSkpIHsgCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhZnRlciA9IHJlcGxhY2UucmVwbGFjZSgvXlxuXG4vLCcnKTsKICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByZXBlbmQgPSBhZnRlciAhPT0gcmVwbGFjZSA/ICc8c3BhbiBjbGFzcz0iYWRkIj5cblxuPC9zcGFuPjxzcGFuIGNsYXNzPSJkZWwiPmA8L3NwYW4+JyA6ICcnOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgYXBwZW5kICA9IGFmdGVyICE9PSByZXBsYWNlID8gJzxzcGFuIGNsYXNzPSJkZWwiPmA8L3NwYW4+JyA6ICcnOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIga2xhc3MgICA9IC9sc2VjLy50ZXN0KHR5cGUpID8gJyBjbGFzcz0ibGFuZy1ub25lIHByZXR0eXByaW50IHByZXR0eXByaW50ZWQiJyA6ICcnOwogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcHJlcGVuZCArICc8cHJlJyArIGtsYXNzICsgJz48Y29kZT4nICsgYWZ0ZXIucmVwbGFjZSgvPC9nLCcmbHQ7JykucmVwbGFjZSgvXiAgICAvZ20sJycpICsgJzwvY29kZT48L3ByZT4nICsgYXBwZW5kOwogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICBpZihsaXRlcmFsICYmIC9xdW90ZS8udGVzdCh0eXBlKSkgcmV0dXJuICc8YmxvY2txdW90ZT4nICsgcmVwbGFjZS5yZXBsYWNlKC88L2csJyZsdDsnKS5yZXBsYWNlKC9ePi9nbSwnJykgKyAnPC9ibG9ja3F1b3RlPic7CiAgICAgICAgICAgICAgICAgICAgaWYobGl0ZXJhbCkgcmV0dXJuICc8Y29kZT4nICsgcmVwbGFjZS5yZXBsYWNlKC88L2csJyZsdDsnKS5yZXBsYWNlKC8oPzpeYHxgJCkvZywnJykgKyAnPC9jb2RlPic7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlcGxhY2U7CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gZGF0YTsKICAgICAgICB9OwogICAgICAgIAogICAgICAgIC8vIEhhbmRsZSBwaXBlIG91dHB1dAogICAgICAgIEFwcC5waXBlTW9kcy5vdXRwdXQgPSBmdW5jdGlvbihkYXRhKSB7CiAgICAgICAgICAgIEFwcC5zZWxlY3Rpb25zLnRpdGxlLnZhbChkYXRhLnRpdGxlKTsKICAgICAgICAgICAgQXBwLnNlbGVjdGlvbnMuYm9keS52YWwoZGF0YS5ib2R5LnJlcGxhY2UoL1xuezMsfS8sJ1xuXG4nKSk7CiAgICAgICAgICAgIEFwcC5zZWxlY3Rpb25zLnN1bW1hcnkudmFsKGRhdGEuc3VtbWFyeSk7CiAgICAgICAgICAgIEFwcC5nbG9iYWxzLnJvb3QuZmluZCgnLmFjdHVhbC1lZGl0LW92ZXJsYXknKS5yZW1vdmUoKTsKICAgICAgICAgICAgQXBwLnNlbGVjdGlvbnMuc3VtbWFyeS5jc3Moe29wYWNpdHk6MX0pOwogICAgICAgICAgICBBcHAuc2VsZWN0aW9ucy5idXR0b25JbmZvLnRleHQoQXBwLmdsb2JhbHMuY2hhbmdlcykuc2hvdygpOwogICAgICAgICAgICBTdGFja0V4Y2hhbmdlLk1hcmtkb3duRWRpdG9yLnJlZnJlc2hBbGxQcmV2aWV3cygpOwogICAgICAgIH07CgogICAgICAgIC8vIEluaXQgYXBwCiAgICAgICAgQXBwLmluaXQgPSBmdW5jdGlvbigpIHsKICAgICAgICAgICAgdmFyIGNvdW50ID0gMDsKICAgICAgICAgICAgdmFyIHRvb2xiYXJjaGsgPSBzZXRJbnRlcnZhbChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgaWYoKytjb3VudCA9PT0gMTApIGNsZWFySW50ZXJ2YWwodG9vbGJhcmNoayk7CiAgICAgICAgICAgICAgICBpZighQXBwLmdsb2JhbHMucm9vdC5maW5kKCcud21kLWJ1dHRvbi1yb3cnKS5sZW5ndGgpIHJldHVybjsKICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwodG9vbGJhcmNoayk7CiAgICAgICAgICAgICAgICBBcHAuZnVuY3MucG9wU2VsZWN0aW9ucygpOwogICAgICAgICAgICAgICAgQXBwLmZ1bmNzLmNyZWF0ZUJ1dHRvbigpOwogICAgICAgICAgICB9LCAxMDApOwogICAgICAgICAgICByZXR1cm4gQXBwOwogICAgICAgIH07CgogICAgICAgIHJldHVybiBBcHAuaW5pdCgpOwogICAgfQogICAgdHJ5IHsKICAgICAgICB2YXIgdGVzdCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLm1hdGNoKC8ucG9zdHMuKFxkKykuZWRpdC8pOwogICAgICAgIGlmKHRlc3QpIGV4dGVuZEVkaXRvcigkKCdmb3JtW2FjdGlvbl49Ii9wb3N0cy8nICsgdGVzdFsxXSArICciXScpKTsKICAgICAgICBlbHNlICQoZG9jdW1lbnQpLmFqYXhDb21wbGV0ZShmdW5jdGlvbigpIHsgCiAgICAgICAgICAgIHRlc3QgPSBhcmd1bWVudHNbMl0udXJsLm1hdGNoKC9wb3N0cy4oXGQrKS5lZGl0LWlubGluZS8pOwogICAgICAgICAgICBpZighdGVzdCkgewogICAgICAgICAgICAgICAgdGVzdCA9IGFyZ3VtZW50c1syXS51cmwubWF0Y2goL3Jldmlldy5pbmxpbmUtZWRpdC1wb3N0Lyk7CiAgICAgICAgICAgICAgICBpZighdGVzdCkgcmV0dXJuOwogICAgICAgICAgICAgICAgdGVzdCA9IGFyZ3VtZW50c1syXS5kYXRhLm1hdGNoKC9pZD0oXGQrKS8pOwogICAgICAgICAgICAgICAgaWYoIXRlc3QpIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBleHRlbmRFZGl0b3IoJCgnZm9ybVthY3Rpb25ePSIvcG9zdHMvJyArIHRlc3RbMV0gKyAnIl0nKSk7CiAgICAgICAgfSk7CiAgICAgICAgaWYoJCgnI3Bvc3QtZm9ybScpLmxlbmd0aCkgJCgnI3Bvc3QtZm9ybScpLmVhY2goZnVuY3Rpb24oKXsgZXh0ZW5kRWRpdG9yKCQodGhpcykpOyB9KTsKICAgICAgICAvLyBUaGlzIGlzIHRoZSBzdHlsaW5nIGZvciB0aGUgZGlmZiBvdXRwdXQuCiAgICAgICAgJCgnYm9keScpLmFwcGVuZCgnPHN0eWxlPicgKwogICAgICAgICAgICAgICAgICAgICAgICAgJy5kaWZmdGl0bGUgeycgKwogICAgICAgICAgICAgICAgICAgICAgICAgJyAgICBjb2xvcjogcmdiKDM0LCAzNCwgMzQpOycgKwogICAgICAgICAgICAgICAgICAgICAgICAgJyAgICBmb250LXNpemU6IDI0cHg7JyArCiAgICAgICAgICAgICAgICAgICAgICAgICAnICAgIGZvbnQtd2VpZ2h0OiBub3JtYWw7JyArCiAgICAgICAgICAgICAgICAgICAgICAgICAnICAgIGxpbmUtaGVpZ2h0OiAzNnB4OycgKwogICAgICAgICAgICAgICAgICAgICAgICAgJyAgICBtYXJnaW4tYm90dG9tOiAxMnB4OycgKwogICAgICAgICAgICAgICAgICAgICAgICAgJ30nICsKICAgICAgICAgICAgICAgICAgICAgICAgICcuZGlmZmJvZHkgeycgKwogICAgICAgICAgICAgICAgICAgICAgICAgJyAgICB3aGl0ZS1zcGFjZTogcHJlLXdyYXA7JyArCiAgICAgICAgICAgICAgICAgICAgICAgICAnICAgIGZvbnQtZmFtaWx5OiAiY291cmllciBuZXciLCAibHVjaWRhIHNhbnMgdHlwZXdyaXRlciIsIG1vbm8sIG1vbm9zcGFjZScgKyAKICAgICAgICAgICAgICAgICAgICAgICAgICd9JyArCiAgICAgICAgICAgICAgICAgICAgICAgICAnLmFkZCB7JyArCiAgICAgICAgICAgICAgICAgICAgICAgICAnICAgIGJhY2tncm91bmQ6ICNDRkM7JyArCiAgICAgICAgICAgICAgICAgICAgICAgICAnfScgKwogICAgICAgICAgICAgICAgICAgICAgICAgJy5kZWwgeycgKwogICAgICAgICAgICAgICAgICAgICAgICAgJyAgICBiYWNrZ3JvdW5kOiAjRkNDOycgKwogICAgICAgICAgICAgICAgICAgICAgICAgJ30nICsKICAgICAgICAgICAgICAgICAgICAgICAgICc8L3N0eWxlPicpOwogICAgfSBjYXRjaCAoZSkgewogICAgICAgIGNvbnNvbGUubG9nKGUpOwogICAgfQp9KSgpOwoKLyogCiAgKiBUbyBUaXRsZSBDYXNlIDIuMSDigJMgaHR0cDovL2luZGl2aWRlZC5jb20vY29kZS90by10aXRsZS1jYXNlLwogICogQ29weXJpZ2h0IMKpIDIwMDjigJMyMDEzIERhdmlkIEdvdWNoLiBMaWNlbnNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UuCiAqLwoKU3RyaW5nLnByb3RvdHlwZS50b1RpdGxlQ2FzZSA9IGZ1bmN0aW9uKCl7CiAgdmFyIHNtYWxsV29yZHMgPSAvXihhfGFufGFuZHxhc3xhdHxidXR8Ynl8ZW58Zm9yfGlmfGlufG5vcnxvZnxvbnxvcnxwZXJ8dGhlfHRvfHZzP1wuP3x2aWEpJC9pOwoKICByZXR1cm4gdGhpcy5yZXBsYWNlKC9bQS1aYS16MC05XHUwMEMwLVx1MDBGRl0rW15ccy1dKi9nLCBmdW5jdGlvbihtYXRjaCwgaW5kZXgsIHRpdGxlKXsKICAgIGlmIChpbmRleCA+IDAgJiYgaW5kZXggKyBtYXRjaC5sZW5ndGggIT09IHRpdGxlLmxlbmd0aCAmJgogICAgICBtYXRjaC5zZWFyY2goc21hbGxXb3JkcykgPiAtMSAmJiB0aXRsZS5jaGFyQXQoaW5kZXggLSAyKSAhPT0gIjoiICYmCiAgICAgICh0aXRsZS5jaGFyQXQoaW5kZXggKyBtYXRjaC5sZW5ndGgpICE9PSAnLScgfHwgdGl0bGUuY2hhckF0KGluZGV4IC0gMSkgPT09ICctJykgJiYKICAgICAgdGl0bGUuY2hhckF0KGluZGV4IC0gMSkuc2VhcmNoKC9bXlxzLV0vKSA8IDApIHsKICAgICAgcmV0dXJuIG1hdGNoLnRvTG93ZXJDYXNlKCk7CiAgICB9CgogICAgaWYgKG1hdGNoLnN1YnN0cigxKS5zZWFyY2goL1tBLVpdfFwuLi8pID4gLTEpIHsKICAgICAgcmV0dXJuIG1hdGNoOwogICAgfQoKICAgIHJldHVybiBtYXRjaC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIG1hdGNoLnN1YnN0cigxKTsKICB9KTsKfTsKCi8vIEZyb20gaHR0cHM6Ly9naXRodWIuY29tL0VhbW9uTmVyYm9ubmUvYS12cy1hbgp2YXIgQXZzQW5TaW1wbGU9ZnVuY3Rpb24obil7ZnVuY3Rpb24gaShuKXt2YXIgcj1wYXJzZUludCh0LDM2KXx8MCxmPXImJnIudG9TdHJpbmcoMzYpLmxlbmd0aCx1LGU7Zm9yKG4uYXJ0aWNsZT10W2ZdPT0iLiI/ImEiOiJhbiIsdD10LnN1YnN0cigxK2YpLHU9MDt1PHI7dSsrKWU9blt0WzBdXT17fSx0PXQuc3Vic3RyKDEpLGkoZSl9dmFyIHQ9IjJoLiMyLmE7aTsmMS5OOyo0LmE7ZTtpO287LzkuYTtlO2gxLm8uaTtsMS4vO24xLm8ubztyMS5lLnMxLi87MDEuODsxMi4xYTswMS4wOzEyLjg7OTsyLjMxLjc7NC41LjYuNy44LjkuOGE7MGEuMDsxOzI7Mzs0OzU7Njs3Ozg7OTsxMTsgLjIyOyAu4oCTLjMxOyAuNDI7IC7igJMuNTU7IC4sLmguay5tLjYyOyAuay43MjsgLuKAky44MjsgLiwuOTI7IC7igJMuODs8Mi5tMS5kO287PTEuPTEuRTtAO0E2O0ExO0ExLlM7aTE7cjE7by5tMTthMTtyMTsgLm4xO2QxO2ExO2wxO3UxO2MxLmkxLmExLm47czE7dDE7dTE7cjE7aTE7YTE7cy50MTtoMTtsMTtlMTt0MTtlMS5zO0IyLmgyLmExLmkxO3IxO2Euw6E7bzEucjEuZDEuIDtDMy5hMS5pMS5zMS5zLmg0LmEyLmkxLnMxO2UubzEuaTtsMS7DoTtyMS5vMS7DrTt1Mi5pO3IxLnIxLmE7bzEubjEuZzEuajtENy5hMS5vMS5xO2kyLm4xLmExLnM7bzEudDt1MS5hMS5sMS5jO8OhMS4gO8OyO8O5O8awO0U3O1UxO1IuYjE7bzE7bDE7aS5tMTtwMTtlMTt6Lm4xO2ExO20uczE7cDUuYTEuYztlO2g7bztyO3UxLmwxO28udzE7aS5GMTEuIDssOy47LzswOzE7MjszOzQ7NTs2OzcxLjAuODs5O0FlO0IuQy5ELkYuSTIuTC5SLksuTC5NLk4uUC5RLlIuUy5ULkI7QzE7TS5EO0UyLkM7STtGMTtyLkg7STMuQTE7VC5SMS4gO1U7SjtMMy5DO047UDtNO08xLiA7UDE7Li5SMi5BMS4gO1M7UztUMTtTLlUyLiw7LjtYO1kxO1YuYztmMS5vLmg7z4M7RzcuZTEucjEubjEuZTtoMS5hMy5lO2k7bztpMS5hMS5uMS5nO28yLmYxLiA7dDEudDEuIDtyMS5pMS5hO3cxLmExLnIxLnI7w7o7SHMuIDsmOyw7LjI7QS5JLjE7MjszOzU7NztCMTtQLkM7RDtGO0c7SDE7SS5JNjtDLkcuTi5QLlMxLkQ7VC5LMS45O0w7TTE7Li5OO08yLiA7VjtQO1IxO1QuUzEuRi5UO1Y7ZTIuaTEucjtyMS5yMS5uO28yLm42O2QuZTEucztnLmsubzI7bC5yMTtpMS5mO3YudTEucjtJMztJMjsqLkkubjE7ZDE7ZTE7cDE7ZTE7bjE7ZDI7ZTE7bjE7YzE7aS7Dqi5zMTtsMTthMTtuMTtkMTtzLkoxLmkxLmExLm87THkuIDssOy47MTsyOzM7NDs4O0EzLiA7UDtYO0I7QztEO0UyLiA7RDtGMTtULkc7SDEuRC5JMS5SO0w7TTtOO1A7UjtTMTttLlQ7VTEuIDtWMTtDLlcxLlQ7WjteO2ExLm8xLmkxLmc7bzEuYzEuaDEuYTE7Yi5wO3UxLnMxLmgxO28u4buZO00xNS4gOyY7LDsuMTtBMTsuMTtTLi87MTsyOzM7NDs1OzY7Nzs4O0FpO0IuQy5ELkYuRy5KLkwuTS5OLlAuUi5TLlQuVi5XLlguWS5aLkIxO1MxO1QuQztEO0UzLlAxO1MuVztuO0Y7RztIO0k0LiA7NTs2O1QxO00uSztMO007TjtPMS5VO1A7UTtSO1M7VDE7Ui5VMi4gO1Y7VjtYO2IxLnUxLm07ZjtoO28yLkQxLmUuVTE7Li5wMS4zO3MxLmM7TnkuIDsrOy4xLkUuNDs3Ozg7OjtBMy5BMTtGLkk7UzEuTDtCO0M7RDtFMy5BO0g7UzEuIDtGMTtVLkc7SDtJNy5DLkQxLiA7Sy5MLk4uTy5TLks7TDtNMTtNLk4yLlI7VDtQMS5PMS5WMS4vMS5CO1IyO0ouVC5TMTtXLlQxO0wxLkQuVTEuUztWO1cyLkE7TzEuSDtYO1kzLkMxLkw7UDtVO2ExLnMxLmExLm47dDEuaDt2O8KyO8OXO081O04xO0UubDE7di5uMjtjMS5lLmUxLmk7bzE7cC51MTtpLlAxLmgyLmkxLmE7bzIuYjI7aS5vLmk7UTEuaTEubjEuZzEueDtSei4gOyY7LDsuMTtKLi87MTs0OzY7QTMuIDsuO0YxO1QuQjE7Ui5DO0Q7RTMuIDtTMS5QO1U7RjtHO0gxLlM7STIuQTtDMS4gO0o7SztMMTtQLk01OzEuMi4zLjUuNi5OO08yLkg7VDI7QS5PLlA7UTtSMTtGLlM0OywuLi4/LlQuVDtVNDtCLk0uTi5TLlY7WDtjO2YxO00xLi4uaDIuQTtCO8OyO1MxMS4gOyY7LDsuNC5FO007TztUMS4uMy5CO0Q7TTsxOzM7NDs1OzY7ODs5O0EzLiA7ODtTMjtFLkkuQjtDMy5BMS4gO1IyLkEuVS5UO0Q7RTYuIDs1O0MzO0EuTy5SLkkxLkYuTztVO0YzOyYuSC5PMS5TLkcxO0QuSDMuMjszO0w7STIuIDtTMS5PLksyLkkuWS5MMztBMi4gOy47STEuIDtPLk0zO0ExLiA7SS5VMS5SLk41LkEuQzMuQS5CLkMuRS5GLk8uTzUuIDtBMS5JO0U7UzE7VS5WO1A3O0E3O0EuQy5ELk0uTi5SLlMuRTEuIDtJNDtDLkQuTi5SLkwxO08uTy5VLlkuUTEuIDtSO1MxO1cuVDkuQTEuIDtDO0Q7RjtJO0w7TTtTO1Y7VTcuQi5MLk0uTi5QLlIuUy5WO1cxLlI7WDEuTTtoMS5pMS5nMS5hMS5vO3AxLmkxLm8xO24udDIuQjtpMS5jMS5pO1Q0LmEyLmkyLmcxLmEuczEuYzt2MS5lMS5zO2UxLmExLm0xLnA7dTEuaTIubDtyO8OgO1VtLi4xLk4xLi4xLkM7LzEuMTsxMS4gLjIxLjE7TDEuVDtNMS5OO040LkMxLkw7RDIuIC5QLks7UjEuIC5hO2IyO2EuaS5kO2cxLmw7aTEuZy5sMjtpLnkubTtuby4gO2ExLm4uYjtjO2Q7ZTE7cy5mO2c7aDtpMi5kO247ajtrO2w7bTtuO287cDtxO3I7czt0O3U7djt3O3A7cjM7YS5lLnUxLms7czMuIDtoO3QxO3IudDQuaDtuO3I7dDt4O3o7w607VzIuUDEuOjQuQTEuRjtJMi5CO04xLkguTzEuVjtSMS5GMS5DMi5OLlUuaTEuazEuaTEuRTEubDEuaTtYNzthLmUuaC5pLm8udS55LlkzLmUxLnQxLmg7cDtzO1s1LkE7RTtJO2E7ZTtfMi5fMS5pO2U7YDMuYTtlO2k7YTc7IC5tMTthMTtyMS4gLm4xO2QyOyAuxJsucDE7cjE7dC5yMTt0MTvDrS51MTtzMTtzMTtpMS4gLnYxO3UxO3QuZDMuYTEuczEuIDtlMi5tMS4gO3IxLiA7aTIuYzEuaDEuIDtlMS5zMS5lMi5tO3I7ZTg7YzE7bzE7bjE7bzE7bTE7aTE7YS5lMTt3LmwxO2kxO3QxO2UxO2kubTE7cDE7ZTE7ei5uMTt0MTtlMTtuMTtkLnMyO2ExLiAudDQ7YTE7IC5lMTsgLmkxO20xO2ExO3IucjE7dTEudC51MS5wMS4gO3cuZjMuIDtNO3kxLmk7aDkuIDssOy47QzthMS51MS50MTtiLmUyLmkxLnIxO2EucjEubTEuYTEubjtvNC5tMi5hMTsgLm07bjg7IC5iLmQuZTM7IC5kLnkuZy5pLmsudi5yMS5zMS4gO3UxLnI7cjEuIDt0MTt0MTtwMTs6Lmk2O2IxO24uZTE7ci5uMjtmMjtsMTt1MTvDqi5vMTthLnMxO3QxO2ExO2wxO2EucjE7IC5zMTsgLnUuazEudTEuIDtsMy5jMS5kO3MxLiA7djEuYTttYS4gOyw7UjtiMS5hLmUxLmkxLm47ZjtwO3QxLmEudTEubDEudDEuaTEuYzEuYTEubTEucDEuaTvDlztuNi4gO1Y7VztkMTsgLnQ7w5c7bzg7YzI7aDE7by51MTtwLmQxO2QxO3kuZjE7IC5nMTtnMTtpLm5vLiA7JzssOy87YTtiO2MxLm87ZDtlMi5pO3I7ZjtnO2k7bDttO247bztyO3M7dDt1O3c7eTt6O+KAkztyMTtpMTtnMTtlLnQxO3IxLnM7dTE7aS5yMy4gOyY7ZjtzOS4sOz87UjtmMi5lLm8uaTEuYzEuaDtsMS4gO3AyLjM7aTEuIDtyMS5nO3YzLmEuZS5pLnQyLkE7Uzt1YzsgLi4uYjIuZTtsO2YuazIuYTtpO20xO2ExLiAubjM7YTM7IC5uNS5hO2M7bjtzO3Q7cjE7eS5lMjsgLmkuaTguYzIubzEucjEucDt1MS5tO2QxO2kxLm87ZzEubjtsMS5sO20xO28ubjtzMS5zO3YxLm8xO2MucjU7YS5lLmkubC5vLnMzLiA7aDt1MS5yMjtlLnAzO2EuZS5pLnQyLm07dDt2LncxLmE7eGIuIDsnOyw7Ljs4O2I7aztsO20xO2EudDt5MS4gO3kxLmw7ezEuYTt8MS5hO8KjMS44O8OAO8OBO8OEO8OFO8OGO8OJO8OSO8OTO8OWO8OcO8OgO8OhO8OmO8OoO8OpMTt0My5hO287dTvDrTvDtjvDvDE7IC7EgDvEgTvEqzvEsDvFjDvFjTvFkzvOqTvOsTvOtTvPiTvPtTvQtTvigJMyLmU7aTvihJM7IjtyZXR1cm4gaShuKSx7cmF3Om4scXVlcnk6ZnVuY3Rpb24odCl7dmFyIGk9bixmPTAsdSxyO2RvIHI9dFtmKytdO3doaWxlKCJcIuKAmOKAmeKAnOKAnSQnIi5pbmRleE9mKHIpPj0wKTtmb3IoOzspe2lmKHU9aS5hcnRpY2xlfHx1LGk9aVtyXSwhaSlyZXR1cm4gdTtyPXRbZisrXXx8IiAifX19fSh7fSkKCi8vIEFkYXB0ZWQgZnJvbSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS82OTY5NDg2LzE2Nzc5MTIKZnVuY3Rpb24gZXNjYXBlVGFnKHRhZykgewogICAgLy8gU2VlIGh0dHBzOi8vcmVnZXgxMDEuY29tL3IveVc5Y0Q0LzEKICAgIHZhciByZXRhZyA9IHRhZy5yZXBsYWNlKC8oPzooXC0pfChbKy4jXSkpL2csCiAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChtYXRjaCwgaHlwaGVuLCBvdGhlcikgewogICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVzY2FwZWQgPSAoaHlwaGVuKSA/ICJbIFxcLV0iIDogIlxcIittYXRjaDsKICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBlc2NhcGVkOwogICAgICAgICAgICAgICAgICAgICB9KTsKICAgIHJldHVybiAiKD86XFxzfFxcYnwkKSIgKyByZXRhZyArICIoPzpcXHN8XFxifCQpIjsgIC8vIGhhY2sgLSBlbmNsb3NlIHRhZyBpbiByZWdleHAgYm91bmRhcnkgY2hlY2tzLiBXQk4gdG8gZG8gdGhpcyBpbiB0aGUgdGFnbGlzdCByZWdleHAuCn0KCi8vIEJldHRlciBoYW5kbGluZyBvZiBpbmRlbnRhdGlvbiBhbmQgdGhlIFRBQiBrZXkgd2hlbiBlZGl0aW5nIHBvc3RzCi8vIEZyb20gYmFscGhhJ3Mgc3RhY2tleGNoYW5nZS10YWItZWRpdGluZwovLyAoYykgMjAxMiBCZW5qYW1pbiBEdW1rZS12b24gZGVyIEVoZQovLyBXaGljaCBpcyByZWxlYXNlZCB1bmRlciB0aGUgTUlUIExpY2Vuc2UgLSBodHRwczovL29wZW5zb3VyY2Uub3JnL2xpY2Vuc2VzL01JVAovLyBTZWUgaHR0cDovL3N0YWNrYXBwcy5jb20vcXVlc3Rpb25zLzMyNDcvYmV0dGVyLWhhbmRsaW5nLW9mLWluZGVudGF0aW9uLWFuZC10aGUtdGFiLWtleS13aGVuLWVkaXRpbmctcG9zdHMKZnVuY3Rpb24gd2l0aF9qcXVlcnkodCl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7ZS50eXBlPSJ0ZXh0L2phdmFzY3JpcHQiLGUudGV4dENvbnRlbnQ9IigiK3QudG9TdHJpbmcoKSsiKShqUXVlcnkpIixkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGUpfXdpdGhfanF1ZXJ5KGZ1bmN0aW9uKHQpe3QoZnVuY3Rpb24oKXtmdW5jdGlvbiBlKHQpe3ZhciBlPXQuY2FyZXQoKSxuPSJiYWNrd2FyZCI9PT10WzBdLnNlbGVjdGlvbkRpcmVjdGlvbjtyZXR1cm4gZS5lbmQtPWUudGV4dC5tYXRjaCgvKFsgXHRcbl0qKSQvKVswXS5sZW5ndGgsbj8oZS5kaXJlY3RlZFN0YXJ0PWUuZW5kLGUuZGlyZWN0ZWRFbmQ9ZS5zdGFydCxlLmJhY2t3YXJkPSEwKTooZS5kaXJlY3RlZFN0YXJ0PWUuc3RhcnQsZS5kaXJlY3RlZEVuZD1lLmVuZCksZX1mdW5jdGlvbiBuKHQsZSxuLHIpe3ZhciBhLGk7Mj09PWFyZ3VtZW50cy5sZW5ndGgmJihuPWUpLHImJihhPWUsZT1uLG49YSksZT5uJiYoYT1lLGU9bixuPWEsaT0hMCksaSYmaD90WzBdLnNldFNlbGVjdGlvblJhbmdlKGUsbiwiYmFja3dhcmQiKTp0LmNhcmV0KGUsbil9ZnVuY3Rpb24gcihlLG4peyJ1bmRlZmluZWQiPT10eXBlb2YgbiYmKG49IWwpLGxebiYmKHQoZSkuY3NzKCJvcGFjaXR5IixuPzE6LjMpLGw9bil9ZnVuY3Rpb24gYSgpe3ZhciBlPXQodGhpcyksbj10aGlzLnZhbHVlfHwiIixyPWUuY2FyZXQoKSxhPW4uc3Vic3RyaW5nKDAsci5lbmQpLGk9KGEubWF0Y2goLyg/Ol58XG4pKFteXG5dKikkLyl8fFsiIiwiIl0pWzFdO3JldHVybi9eWyBcdF0rJC8udGVzdChpKT9jLmNhbGwodGhpcywhMCk6ITB9ZnVuY3Rpb24gaShyKXt2YXIgYSxpLGM9dCh0aGlzKSxzPXRoaXMudmFsdWV8fCIiLGg9ZShjKSx1PXMuc3Vic3RyaW5nKDAsaC5kaXJlY3RlZEVuZCksbD1zLnN1YnN0cmluZyhoLmRpcmVjdGVkRW5kKSxvPSh1Lm1hdGNoKC8oPzpefFxuKShbXlxuXSopJC8pfHxbIiIsIiJdKVsxXTtpZihvLmxlbmd0aCl7YT1vLnNlYXJjaCgvW14gXHRdLyk7dmFyIGY9bmV3IFJlZ0V4cCgiXiB7MCwiKyhkLTEpKyJ9CSIpOyhhPj1kfHxhPjAmJmYudGVzdChvKSkmJihpPWguZGlyZWN0ZWRFbmQtby5sZW5ndGgrYSl9ZWxzZSBhPShsLm1hdGNoKC9eW1x0IF0qLyl8fFsiIl0pWzBdLmxlbmd0aCxhPjAmJihpPWguZGlyZWN0ZWRFbmQrYSk7cmV0dXJuInVuZGVmaW5lZCIhPXR5cGVvZiBpPyhyP24oYyxoLmRpcmVjdGVkU3RhcnQsaSk6bihjLGkpLCExKTohMH1mdW5jdGlvbiBjKHIpe3ZhciBhLGksYz10KHRoaXMpLGg9dGhpcy52YWx1ZXx8IiIsdT1lKGMpLGw9aC5zdWJzdHJpbmcoMCx1LnN0YXJ0KSxvPWguc3Vic3RyaW5nKHUuc3RhcnQsdS5lbmQpLGY9aC5zdWJzdHJpbmcodS5lbmQpO2lmKHUuc3RhcnQ9PT11LmVuZCl7dmFyIGcsdz0obC5tYXRjaCgvKD86XnxcbikoW15cbl0qKSQvKXx8WyIiLCIiXSlbMV0scD0wO2lmKHImJiEvKF58WyBcdF0pJC8udGVzdCh3KSlyZXR1cm4hMTt2YXIgdj0hMDtmb3IociYmIXcubGVuZ3RoJiYoZj1mLnJlcGxhY2UoL15bIFx0XSovLGZ1bmN0aW9uKHQpe3JldHVybiB3PXQsbCs9dCwiIn0pLHY9ITEpLGc9MDtnPHcubGVuZ3RoO2crKykiCSI9PT13LmNoYXJBdChnKT9wPTA6cCsrO2lmKHIpe3ZhciB5PXcubGVuZ3RoP3AlZHx8ZDpkLGI9bmV3IFJlZ0V4cCgiIHswLCIrKHktMSkrIn1bIFxcdF0kIik7bD1sLnJlcGxhY2UoYixmdW5jdGlvbih0KXtyZXR1cm4gYT0tdC5sZW5ndGgsIiJ9KX1lbHNlIGE9ZC1wJWQsbCs9cy5zbGljZShwJWQpO2MudmFsKGwrZiksdnx8KGE9MCksYy5jYXJldCh1LnN0YXJ0K2EsdS5zdGFydCthKX1lbHNle2w9bC5yZXBsYWNlKC8oXnxcbikoW15cbl0qKSQvLGZ1bmN0aW9uKHQsZSxuKXtyZXR1cm4gbz1uK28sZX0pO3ZhciBtPSJcbiI9PT1oLnN1YnN0cih1LnN0YXJ0LTEsMSk/MDoxO2lmKHIpe2E9MDt2YXIgYj1uZXcgUmVnRXhwKCIoXnxcbikoCXwgezEsIisoZC0xKSsifVsgCV0pIiwiZyIpO2lmKG89by5yZXBsYWNlKGIsZnVuY3Rpb24odCxlLG4pe3JldHVybiBhfHwoaT1kLW4ubGVuZ3RoKSxhLT1uLmxlbmd0aCxlfSksIWEpcmV0dXJuITF9ZWxzZSBhPTAsaT0wLG89by5yZXBsYWNlKC9efFxuL2csZnVuY3Rpb24odCl7cmV0dXJuIGErPWQsdCtzfSk7Yy52YWwobCtvK2YpLG4oYyx1LnN0YXJ0K2krbSphLHUuZW5kK2EsdS5iYWNrd2FyZCl9cmV0dXJuITF9aWYod2luZG93LlN0YWNrRXhjaGFuZ2UmJlN0YWNrRXhjaGFuZ2UucmVhZHkpe3ZhciBkPTQscz0iICIucmVwZWF0KGQpLGg9InNlbGVjdGlvbkRpcmVjdGlvbiJpbiB0KCI8dGV4dGFyZWEgLz4iKVswXSx1PXs5OntoYW5kbGVyOmMsYWxsb3dTaGlmdDohMH0sMzY6e2hhbmRsZXI6aSxhbGxvd1NoaWZ0Omh9LDg6e2hhbmRsZXI6YX19LGw9ITAsbz0hMTt0KCIjbWFpbmJhciIpLm9uKCJrZXl1cCIsIi53bWQtaW5wdXQiLGZ1bmN0aW9uKHQpe28mJjE3PT09dC53aGljaD9yKHRoaXMpOnIodGhpcywhMCl9KSx0KCIjbWFpbmJhciIpLm9uKCJrZXlkb3duIiwiLndtZC1pbnB1dCIsZnVuY3Rpb24odCl7aWYobz0xNz09PXQud2hpY2gsdC5jdHJsS2V5fHx0LmFsdEtleXx8dC5tZXRhS2V5KXJldHVybiEwO3ZhciBlPWw7aWYocih0aGlzLCEwKSwhZSlyZXR1cm4hMDtpZighdS5oYXNPd25Qcm9wZXJ0eSh0LndoaWNoKSlyZXR1cm4hMDt2YXIgbj11W3Qud2hpY2hdO3JldHVybiB0LnNoaWZ0S2V5JiYhbi5hbGxvd1NoaWZ0PyEwOm4uaGFuZGxlci5jYWxsKHRoaXMsdC5zaGlmdEtleSl9KX19KX0pOwo="},{"name":"Current Completed Reviews in Queue","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":[],"orig_matches":["http://stackoverflow.com/review/*"],"orig_noframes":null,"orig_run_at":"document-idle","use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null,"user_agent":""},"storage":{"data":{},"ts":1456451831477},"enabled":true,"position":12,"file_url":"https://raw.githubusercontent.com/SO-Close-Vote-Reviewers/UserScripts/master/CurrentQueueReviewsDone.user.js","uuid":"1ae23fcb-e8b9-43e0-bacc-14e8c3ed4798","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBDdXJyZW50IENvbXBsZXRlZCBSZXZpZXdzIGluIFF1ZXVlCi8vIEBuYW1lc3BhY2UgICAgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3VzZXJzLzU3ODQxMS9yZW5lCi8vIEB2ZXJzaW9uICAgICAgMC4yCi8vIEBkZXNjcmlwdGlvbiAgQWRkcyB0aGUgY3VycmVudCBudW1iZXIgb2YgcmV2aWV3cyB5b3UgaGF2ZSBjb21wbGV0ZWQgaW4gdGhlIHF1ZXVlIGluIGZyb250IG9mIHlvdXIgdG90YWwgcmV2aWV3cyBvbiB0aGUgcmV2aWV3IHRhYgovLyBAYXV0aG9yICAgICAgIFJlbmUsIFNPQ1ZSCi8vIEBtYXRjaCAgICAgICAgaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL3Jldmlldy8qCi8vIEBncmFudCAgICAgICAgbm9uZQovLyA9PS9Vc2VyU2NyaXB0PT0KCi8vIHRoaXMgc2NyaXB0IGNvbWVzIGZyb20gdGhlIHJlcXVlc3QgaGVyZTogaHR0cDovL21ldGEuc3RhY2tleGNoYW5nZS5jb20vcS8yNTA1ODAvMjEzNjcxCi8vIHJlbmUgb3JpZ2luYWxseSBtYWRlIHRoaXM6IGh0dHA6Ly9tZXRhLnN0YWNrZXhjaGFuZ2UuY29tL2EvMjUwNjIyLzIxMzY3MQoKKGZ1bmN0aW9uKCQsIHdpbmRvdykgewoKICAgIHZhciBwYXJ0cywKICAgICAgICBzdGF0c3VybCwKICAgICAgICBjdXJyZW50aHJlZiA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmLAogICAgICAgIC8vIGhlcmUgd2UgcHV0IG91ciBzdGF0CiAgICAgICAgc3RhdCA9ICQoJzxkaXY+PC9kaXY+JykKICAgICAgICAuaHRtbCgnLi4uJm5ic3A7LyZuYnNwOycpCiAgICAgICAgLmNzcygnZmxvYXQnLCdsZWZ0JykKICAgICAgICAuY3NzKCdwYWRkaW5nLXRvcCcsJzEzcHgnKTsKCiAgICBmdW5jdGlvbiBidWlsZFVybCgpIHsKICAgICAgICAvLyBidWlsZCB0aGUgc3RhdHMgdXJsCiAgICAgICAgcGFydHMgPSB3aW5kb3cubG9jYXRpb24ucGF0aG5hbWUuc3BsaXQoJy8nKTsKICAgICAgICBpZiAocGFydHMubGVuZ3RoPjMpIHsKICAgICAgICAgICBwYXJ0c1twYXJ0cy5sZW5ndGgtMV0gPSAnc3RhdHMnOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHBhcnRzLnB1c2goJ3N0YXRzJyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBwYXJ0cy5qb2luKCcvJyk7CiAgICB9CgogICAgc3RhdHN1cmwgPSBidWlsZFVybCgpOwoKICAgIC8vIGludGVnYXRlIGluIHRoZSByZXZpZXcgcGFnZQogICAgJCgnI2JhZGdlLXByb2dyZXNzJykucHJlcGVuZChzdGF0KTsKCiAgICAvLyBnZXQgdGhlIChmdWxsYmxvd24pIHN0YXRzIHBhZ2UgYW5kIGZpbmQgeW91ciBvd24gc3RhdAogICAgZnVuY3Rpb24gcmVmcmVzaHN0YXQoKSB7CiAgICAgICAgJC5nZXQoc3RhdHN1cmwsIGZ1bmN0aW9uIChkYXRhKSB7CiAgICAgICAgICAgIHZhciBodG1sID0gJChkYXRhKSwKICAgICAgICAgICAgICAgIHRkID0gaHRtbC5maW5kKCd0ZC5yZXZpZXctc3RhdHMtY291bnQtY3VycmVudC11c2VyOmZpcnN0Jyk7CiAgICAgICAgICAgIC8vIHJlcGxhY2Ugb3VyIGN1cnJlbnQgc3RhdCB3aXRoIHRoZSBqdXN0IGxvYWRlZCBvbmUKICAgICAgICAgICAgc3RhdC5odG1sKHRkLnRleHQoKSArICcmbmJzcDsvJm5ic3A7Jyk7ICAgIAogICAgICAgIH0pLmZhaWwoZnVuY3Rpb24ocHJvbSwgZXJyb3IsIG1zZykgewogICAgICAgICAgICBkZWJ1Z2dlcjsKICAgICAgICAgICAgaWYgKG1zZyA9PT0gJ05vdCBGb3VuZCcpIHsKICAgICAgICAgICAgICAgIC8vIHRoZSB1cmwgaXMgbm90IGNvcnJlY3QsIHRyeSBhIG5ldyBvbmUKICAgICAgICAgICAgICAgIHN0YXRzdXJsID0gYnVpbGRVcmwoKTsKICAgICAgICAgICAgfQogICAgICAgIH0pOwogICAgfQoKICAgIC8vIGNoZWNrIHJlZ3VsYXJseSAoZXZlcnkgNSBzZWNvbmRzKSBpZiB3ZSBkb25lIGEgcmV2aWV3IHlldAogICAgd2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyBpZiB0aGUgdXJsIGNoYW5nZWQsIGxldHMgZ2V0IHRoZSBuZXcgc3RhdAogICAgICAgIGlmICh3aW5kb3cubG9jYXRpb24uaHJlZiAhPT0gY3VycmVudGhyZWYpIHsKICAgICAgICAgICAgY3VycmVudGhyZWYgPSB3aW5kb3cubG9jYXRpb24uaHJlZjsKICAgICAgICAgICAgcmVmcmVzaHN0YXQoKTsKICAgICAgICB9CiAgICB9LCA1MDAwKTsgLy8gbm93IDUgc2Vjb25kcyBiZWNhdXNlIHdlIGhhcmRseSBldmVyIHJldmlldyBxdWlja2VyIHRoYW4gdGhhdAogICAgcmVmcmVzaHN0YXQoKTsgLy8gcnVuIG9uY2UgZm9yIGFuIGluaXRpYWwgdmFsdWUKCn0oJCB8fCB1bnNhZmVXaW5kb3cuJCwgd2luZG93IHx8IHVuc2FmZVdpbmRvdykpOwo="},{"name":"(SE) Customize help menu","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":[],"orig_matches":["*://*.askubuntu.com/*","*://*.mathoverflow.net/*","*://*.serverfault.com/*","*://*.stackapps.com/*","*://*.stackexchange.com/*","*://*.stackoverflow.com/*","*://*.superuser.com/*"],"orig_noframes":null,"orig_run_at":"document-idle","use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{"helpSE_v1":"s{\"help_blank\":false,\"remove_help\":false,\"menu\":[{\"name\":\"Moderation Tools\",\"url\":\"/tools\"},{\"name\":\"NATO\",\"url\":\"/tools/new-answers-old-questions\"}]}"},"ts":1456720105784},"enabled":true,"position":13,"file_url":"https://gist.github.com/raw/a539c1905608b253fcb6/CustomizeHelpMenu.user.js","uuid":"098ebad5-b95b-472e-be23-361868277072","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAoU0UpIEN1c3RvbWl6ZSBoZWxwIG1lbnUKLy8gQG5hbWVzcGFjZSAgICBzdGFja2FwcHMuY29tL3VzZXJzLzEwNTkwL2JyYXNvZmlsbwovLyBAdmVyc2lvbiAgICAgIDEuMAovLyBAZGVzY3JpcHRpb24gIFRoYW5rcyBmb3IgdGhlIGhlbHAsIGJ1dCBubyB0aGFua3MsIEkgd2FudCB0aGUgaGVscCBmb3IgbXlzZWxmIDpECi8vIEBpY29uICAgICAgICAgaHR0cDovL2kuc3RhY2suaW1ndXIuY29tL0xDTHFBLnBuZwovLyBAaG9tZXBhZ2UgICAgIGh0dHA6Ly9zdGFja2FwcHMuY29tL3EvNDkyMS8xMDU5MAovLyBAYXV0aG9yICAgICAgIGJyYXNvZmlsbwovLyBAY29weXJpZ2h0ICAgIDIwMTQsIFJvZG9sZm8gQnVhaXogKGh0dHA6Ly9zdGFja2FwcHMuY29tL3VzZXJzLzEwNTkwL2JyYXNvZmlsbykKLy8gQGxpY2Vuc2UgTUlUICBodHRwOi8vb3BlbnNvdXJjZS5vcmcvbGljZW5zZXMvTUlUCi8vIEBtYXRjaCAgICAgICAgKjovLyouYXNrdWJ1bnR1LmNvbS8qCi8vIEBtYXRjaCAgICAgICAgKjovLyoubWF0aG92ZXJmbG93Lm5ldC8qCi8vIEBtYXRjaCAgICAgICAgKjovLyouc2VydmVyZmF1bHQuY29tLyoKLy8gQG1hdGNoICAgICAgICAqOi8vKi5zdGFja2FwcHMuY29tLyoKLy8gQG1hdGNoICAgICAgICAqOi8vKi5zdGFja2V4Y2hhbmdlLmNvbS8qCi8vIEBtYXRjaCAgICAgICAgKjovLyouc3RhY2tvdmVyZmxvdy5jb20vKgovLyBAbWF0Y2ggICAgICAgICo6Ly8qLnN1cGVydXNlci5jb20vKgovLyBAdXBkYXRlVVJMICAgIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL3Jhdy9hNTM5YzE5MDU2MDhiMjUzZmNiNi9DdXN0b21pemVIZWxwTWVudS51c2VyLmpzCi8vIEBkb3dubG9hZFVSTCAgaHR0cHM6Ly9naXN0LmdpdGh1Yi5jb20vcmF3L2E1MzljMTkwNTYwOGIyNTNmY2I2L0N1c3RvbWl6ZUhlbHBNZW51LnVzZXIuanMKLy8gQGdyYW50ICAgICAgICBHTV9zZXRWYWx1ZQovLyBAZ3JhbnQgICAgICAgIEdNX2dldFZhbHVlCi8vID09L1VzZXJTY3JpcHQ9PQoKLyoqCiAqIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIAogKgogKiBJY29ucyBmcm9tIGh0dHBzOi8vd3d3Lmljb25maW5kZXIuY29tLwogKgogKiBLdWRvcyB0byBCcm9jayBBZGFtcyBhbmQgYWxsIGhpcyBHTSBhbnN3ZXJzIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS90YWdzL2dyZWFzZW1vbmtleS90b3B1c2VycwogKgogKiBqUXVlcnkgcGx1Z2luIFJlcGVhdGFibGUgRmllbGRzIGJ5IFJoeXp6IGh0dHBzOi8vZ2l0aHViLmNvbS9SaHl6ei9yZXBlYXRhYmxlLWZpZWxkcwogKgogKiAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAtIC0gLSAKICovCgp2YXIganF1aV91cmwgPSAnLy9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvanF1ZXJ5dWkvMS4xMC40L2pxdWVyeS11aS5taW4uanMnOwp2YXIgc2VuZExTdG9yYWdlID0gR01fZ2V0VmFsdWUoImhlbHBTRV92MSIpOwoKaWYoIHdpbmRvdy5sb2NhdGlvbi5oYXNoICkgLy8gcHJldmVudHMgQWpheCBidWcgd2hlbiBVUkwgaGFzIGEgaGFzaAogICAgc2V0VGltZW91dChmdW5jdGlvbigpeyBoZWxwX3NlX2FkZF9qcXVlcnkoIHN0YXJ0X3VwICk7IH0sIDMwMDAgKTsKZWxzZQogICAgaGVscF9zZV9hZGRfanF1ZXJ5KCBzdGFydF91cCApOwogICAgCi8qKgogKiBTYXZlIEdNIFN0b3JhZ2UKICogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMTQyNTU0NDAvMTI4NzgxMgogKi8Kd2luZG93LmFkZEV2ZW50TGlzdGVuZXIgKCJtZXNzYWdlIiwgcmVjZWl2ZVNhdmVNZXNzYWdlLCBmYWxzZSk7CmZ1bmN0aW9uIHJlY2VpdmVTYXZlTWVzc2FnZSAoIGV2ZW50ICkgewogICAgaWYgKCAhIGV2ZW50LmRhdGEgIHx8ICAhIGV2ZW50LmRhdGEucG9zdCApCiAgICAgICAgcmV0dXJuOyAvLyAtLSBub3Qgb3VyIGRhdGEKCiAgICB2YXIgc2FmZVZhbHVlID0gSlNPTi5zdHJpbmdpZnkgKGV2ZW50LmRhdGEucG9zdCk7CiAgICBHTV9zZXRWYWx1ZSAoImhlbHBTRV92MSIsIHNhZmVWYWx1ZSk7Cn0KCi8qKgogKiBPdXIgdGhpbmcKICovCmZ1bmN0aW9uIHN0YXJ0X3VwKCBsb2NhbFN0b3JlICkgewogICAgLyoqCiAgICAgKiBqUXVlcnkgUmVwZWF0YWJsZSBGaWVsZHMgdjEuMS40CiAgICAgKiBodHRwOi8vd3d3LnJoeXp6LmNvbS9yZXBlYXRhYmxlLWZpZWxkcy5odG1sCiAgICAgKiBDb3B5cmlnaHQgKGMpIDIwMTQgUmh5enoKICAgICAqIExpY2Vuc2UgTUlUCiAgICAgKgogICAgICogQHJlcXVpcmUgd2FzIG5vdCB3b3JraW5nIG9uIEdNCiAgICAgKi8KICAgIChmdW5jdGlvbihlKXtlLmZuLnJlcGVhdGFibGVfZmllbGRzPWZ1bmN0aW9uKHQpe2Z1bmN0aW9uIGkodCl7ZShyLndyYXBwZXIsdCkuZWFjaChmdW5jdGlvbih0LG4pe3ZhciBzPXRoaXM7dmFyIG89ZShzKS5jaGlsZHJlbihyLmNvbnRhaW5lcik7CiAgICAgICAgZShvKS5jaGlsZHJlbihyLnRlbXBsYXRlKS5oaWRlKCkuZmluZCgiOmlucHV0IikuZWFjaChmdW5jdGlvbigpeyQodGhpcykucHJvcCgiZGlzYWJsZWQiLHRydWUpfSk7ZShzKS5vbigiY2xpY2siLHIuYWRkLGZ1bmN0aW9uKHQpe3Quc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7CiAgICAgICAgdmFyIG49ZShlKG8pLmNoaWxkcmVuKHIudGVtcGxhdGUpLmNsb25lKCkucmVtb3ZlQ2xhc3Moci50ZW1wbGF0ZS5yZXBsYWNlKCIuIiwiIikpWzBdLm91dGVySFRNTCk7JChuKS5maW5kKCI6aW5wdXQiKS5lYWNoKGZ1bmN0aW9uKCl7alF1ZXJ5KHRoaXMpLnByb3AoImRpc2FibGVkIixmYWxzZSl9KTsKICAgICAgICBpZih0eXBlb2Ygci5iZWZvcmVfYWRkPT09ImZ1bmN0aW9uIil7ci5iZWZvcmVfYWRkKG8pfXZhciBzPWUobikuZmFkZUluKCkuYXBwZW5kVG8obyk7aWYodHlwZW9mIHIuYWZ0ZXJfYWRkPT09ImZ1bmN0aW9uIil7ci5hZnRlcl9hZGQobyxzKX1pKHMpfSk7CiAgICAgICAgZShzKS5vbigiY2xpY2siLHIucmVtb3ZlLGZ1bmN0aW9uKHQpe3Quc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7dmFyIG49ZSh0aGlzKS5wYXJlbnRzKHIucm93KS5maXJzdCgpO2lmKHR5cGVvZiByLmJlZm9yZV9yZW1vdmU9PT0iZnVuY3Rpb24iKXtyLmJlZm9yZV9yZW1vdmUobyxuKX1uLmZhZGVPdXQoMTUwLCBmdW5jdGlvbigpIHsgJCh0aGlzKS5yZW1vdmUoKTsgfSk7CiAgICAgICAgaWYodHlwZW9mIHIuYWZ0ZXJfcmVtb3ZlPT09ImZ1bmN0aW9uIil7ci5hZnRlcl9yZW1vdmUobyl9fSk7aWYoci5pc19zb3J0YWJsZT09PXRydWUmJnR5cGVvZiBlLnVpIT09InVuZGVmaW5lZCImJnR5cGVvZiBlLnVpLnNvcnRhYmxlIT09InVuZGVmaW5lZCIpewogICAgICAgIHZhciB1PXIuc29ydGFibGVfb3B0aW9ucyE9PW51bGw/ci5zb3J0YWJsZV9vcHRpb25zOnt9O3UuaGFuZGxlPXIubW92ZTtlKHMpLmZpbmQoci5jb250YWluZXIpLnNvcnRhYmxlKHUpfX0pfWZ1bmN0aW9uIHModCxuKXsKICAgICAgICB2YXIgaT1lKHQpLmNoaWxkcmVuKHIucm93KS5maWx0ZXIoZnVuY3Rpb24oKXtyZXR1cm4hJCh0aGlzKS5oYXNDbGFzcyhyLnRlbXBsYXRlLnJlcGxhY2UoIi4iLCIiKSl9KS5sZW5ndGg7ZSgiKiIsbikuZWFjaChmdW5jdGlvbigpewogICAgICAgIGUuZWFjaCh0aGlzLmF0dHJpYnV0ZXMsZnVuY3Rpb24oZSx0KXt0aGlzLnZhbHVlPXRoaXMudmFsdWUucmVwbGFjZSgve3tyb3ctY291bnQtcGxhY2Vob2xkZXJ9fS8saS0xKX0pfSl9dmFyIG49e3dyYXBwZXI6Ii53cmFwcGVyIixjb250YWluZXI6Ii5jb250YWluZXIiLAogICAgICAgIHJvdzoiLnJvdyIsYWRkOiIuYWRkIixyZW1vdmU6Ii5yZW1vdmUiLG1vdmU6Ii5tb3ZlIix0ZW1wbGF0ZToiLnRlbXBsYXRlIixpc19zb3J0YWJsZTp0cnVlLGJlZm9yZV9hZGQ6bnVsbCxhZnRlcl9hZGQ6cyxiZWZvcmVfcmVtb3ZlOm51bGwsCiAgICBhZnRlcl9yZW1vdmU6bnVsbCxzb3J0YWJsZV9vcHRpb25zOm51bGx9O3ZhciByPWUuZXh0ZW5kKG4sdCk7aSh0aGlzKX19KSgkKQogICAKICAgIC8qKgogICAgICogSW5pdCBzb21lIHZhcnMKICAgICAqLwogICAgdmFyICR1c2VyTWVudSwKICAgICAgICAkc2V0QmxhbmtNZW51LAogICAgICAgICRyZW1vdmVIZWxwQ2VudGVyLAogICAgICAgIC8vIFJlcGVhdGFibGUgZmllbGRzIEhUTUwgYW5kIENTUyBiYXNlIGF0IGh0dHA6Ly9qc2ZpZGRsZS5uZXQvYnJhc29maWxvL2VMbzEzcmszLwogICAgICAgIHJlcGVhdGVyX3RhYmxlID0gJ1wKICAgICAgICA8ZGl2IGlkPSJ0aGUtc2V0dGluZ3MtcGFnZSI+XAogICAgICAgICAgICA8YnV0dG9uIGlkPSJjbG9zZS1tb2RhbCIgY2xhc3M9ImVkaXQtY291bnQgdW5yZWFkLWNvdW50IiB0aXRsZT0iY2xvc2Ugc2V0dGluZ3MgKHdpdGhvdXQgc2F2aW5nLCBjaGFuZ2VzIGFyZSBub3QgbG9zdCBpZiBwYWdlIG5vdCByZWZyZXNoZWQpIj5jbG9zZTwvYnV0dG9uPlwKICAgICAgICAgICAgPGJyIC8+XAogICAgICAgIAk8ZGl2IGNsYXNzPSJyZXBlYXQiPlwKICAgICAgICAJICAgIDx0YWJsZSBpZD0idGhlLXRhYmxlIiBjbGFzcz0id3JhcHBlciI+XAogICAgICAgIAkgICAgICAgIDx0aGVhZD5cCiAgICAgICAgCSAgICAgICAgICAgIDx0cj5cCiAgICAgICAgCSAgICAgICAgICAgICAgICA8dGQgY2xhc3M9IncxMCIgY29sc3Bhbj0iMiI+XAogICAgICAgIAkJCQkJCTxkaXYgY2xhc3M9ImFkZCI+PGltZyBzcmM9Imh0dHA6Ly9pLnN0YWNrLmltZ3VyLmNvbS9OWFFXWS5wbmciIGNsYXNzPSJpY29uLWltZyIgdGl0bGU9ImFkZCBpdGVtIiAvPjwvZGl2PlwKICAgICAgICAJICAgICAgICAgICAgICAgIDwvdGQ+XAogICAgICAgIAkgICAgICAgICAgICAgICAgPHRkIGNsYXNzPSJ3MTAiIGNvbHNwYW49IjIiPlwKICAgICAgICAJCQkJCQk8ZGl2IGNsYXNzPSJzYXZlIj48aW1nIHNyYz0iaHR0cDovL2kuc3RhY2suaW1ndXIuY29tL05nbUxqLnBuZyIgY2xhc3M9Imljb24taW1nIiB0aXRsZT0ic2F2ZSBzZXR0aW5ncyIgLz48L2Rpdj5cCiAgICAgICAgCSAgICAgICAgICAgICAgICA8L3RkPlwKICAgICAgICAJICAgICAgICAgICAgPC90cj5cCiAgICAgICAgCSAgICAgICAgPC90aGVhZD5cCiAgICAgICAgCSAgICAgICAgPHRib2R5IGNsYXNzPSJjb250YWluZXIiPlwKICAgICAgICAJICAgICAgICAgICAgPHRyIGNsYXNzPSJ0ZW1wbGF0ZSByb3ciPlwKICAgICAgICAJICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0idzUiPlwKICAgICAgICAJCQkJCQk8c3BhbiBjbGFzcz0ibW92ZSI+PGltZyBzcmM9Imh0dHA6Ly9pLnN0YWNrLmltZ3VyLmNvbS9EbVBZeC5wbmciIGNsYXNzPSJpY29uLWltZyIgdGl0bGU9Im1vdmUgaXRlbSIgLz48L3NwYW4+XAogICAgICAgIAkgICAgICAgICAgICAgICAgPC90ZD5cCiAgICAgICAgCSAgICAgICAgICAgICAgICA8dGQgY2xhc3M9InczMCI+XAogICAgICAgIAkgICAgICAgICAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBwbGFjZWhvbGRlcj0iTWVudSBuYW1lIiBuYW1lPSJhLW5hbWVbXSIgLz5cCiAgICAgICAgCSAgICAgICAgICAgICAgICA8L3RkPlwKICAgICAgICAJICAgICAgICAgICAgICAgIDx0ZCBjbGFzcz0idzYwIj5cCiAgICAgICAgCSAgICAgICAgICAgICAgICAgICAgPGlucHV0IHR5cGU9InRleHQiIHBsYWNlaG9sZGVyPSJVUkwgIFsgcHJvZmlsZSBsaW5rcyBjb250YWluIG9ubHkgP3RhYj1ldGMgXSIgbmFtZT0iYW4tdXJsW10iIC8+XAogICAgICAgIAkgICAgICAgICAgICAgICAgPC90ZD5cCiAgICAgICAgCSAgICAgICAgICAgICAgICA8dGQgY2xhc3M9Inc1IHc1ciI+XAogICAgICAgIAkJCQkJCTxzcGFuIGNsYXNzPSJyZW1vdmUiPjxpbWcgc3JjPSJodHRwOi8vaS5zdGFjay5pbWd1ci5jb20vYThLTFQucG5nIiBjbGFzcz0iaWNvbi1pbWciIHRpdGxlPSJyZW1vdmUgaXRlbSIgLz48L3NwYW4+XAogICAgICAgIAkgICAgICAgICAgICAgICAgPC90ZD5cCiAgICAgICAgCSAgICAgICAgICAgIDwvdHI+XAogICAgICAgIAkgICAgICAgIDwvdGJvZHk+XAogICAgICAgIAkgICAgPC90YWJsZT5cCiAgICAgICAgCTwvZGl2PlwKICAgICAgICA8L2Rpdj5cCiAgICAgICAgJywKICAgICAgICByZW1vdmVfaXRlbXMgPSBbIC8qIGl0ZW1zIHRvIHJlbW92ZSAqLwogICAgICAgICAgICAnLnRvcGJhci1kaWFsb2cuaGVscC1kaWFsb2cgdWwgbGk6bnRoLW9mLXR5cGUoNSknLAogICAgICAgICAgICAnLnRvcGJhci1kaWFsb2cuaGVscC1kaWFsb2cgdWwgbGk6bnRoLW9mLXR5cGUoNCknLAogICAgICAgICAgICAnLnRvcGJhci1kaWFsb2cuaGVscC1kaWFsb2cgdWwgbGk6bnRoLW9mLXR5cGUoMyknLAogICAgICAgICAgICAnLnRvcGJhci1kaWFsb2cuaGVscC1kaWFsb2cgdWwgbGk6bnRoLW9mLXR5cGUoMSknCiAgICAgICAgXTsKICAgICAgICByZW1vdmVfbWV0YSA9IFsKICAgICAgICAgICAgJy50b3BiYXItZGlhbG9nLmhlbHAtZGlhbG9nIHVsIGxpOm50aC1vZi10eXBlKDYpJywKICAgICAgICAgICAgJy50b3BiYXItZGlhbG9nLmhlbHAtZGlhbG9nIHVsIGxpOm50aC1vZi10eXBlKDUpJywKICAgICAgICAgICAgJy50b3BiYXItZGlhbG9nLmhlbHAtZGlhbG9nIHVsIGxpOm50aC1vZi10eXBlKDQpJywKICAgICAgICAgICAgJy50b3BiYXItZGlhbG9nLmhlbHAtZGlhbG9nIHVsIGxpOm50aC1vZi10eXBlKDIpJywKICAgICAgICAgICAgJy50b3BiYXItZGlhbG9nLmhlbHAtZGlhbG9nIHVsIGxpOm50aC1vZi10eXBlKDEpJwogICAgICAgIF0sCiAgICAgICAgZGVmYXVsdHMgPSB7CiAgICAgICAgICAgICdoZWxwX2JsYW5rJzogZmFsc2UsCiAgICAgICAgICAgICdyZW1vdmVfaGVscCc6IGZhbHNlLAogICAgICAgICAgICAnbWVudSc6IFsKICAgICAgICAgICAgICAgIHsgJ25hbWUnOiAnWW91ciBtZW51IScsICd1cmwnOiAnaHR0cDovL3N0YWNrYXBwcy5jb20vcS80OTIxLzEwNTkwJyB9LAogICAgICAgICAgICAgICAgeyAnbmFtZSc6ICdZb3VyIGZhdm9yaXRlcycsICd1cmwnOiAnP3RhYj1mYXZvcml0ZXMmc29ydD1hZGRlZCcgfSwKICAgICAgICAgICAgICAgIHsgJ25hbWUnOiAnVXNlcnMgYnkgcmVwIHRoaXMgd2VlaycsICd1cmwnOiAndXNlcnM/dGFiPVJlcHV0YXRpb24mZmlsdGVyPXdlZWsnIH0sCiAgICAgICAgICAgIF0KICAgIH07CgogICAgLyoqCiAgICAgKiBHZXQgVVJMIHF1ZXJ5IHN0cmluZ3MKICAgICAqIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9hLzkwMTE0NC8xMjg3ODEyCiAgICAgKi8KICAgIGZ1bmN0aW9uIGdldFBhcmFtZXRlckJ5TmFtZShuYW1lKSB7CiAgICAgICAgbmFtZSA9IG5hbWUucmVwbGFjZSgvW1xbXS8sICJcXFsiKS5yZXBsYWNlKC9bXF1dLywgIlxcXSIpOwogICAgICAgIHZhciByZWdleCA9IG5ldyBSZWdFeHAoIltcXD8mXSIgKyBuYW1lICsgIj0oW14mI10qKSIpLAogICAgICAgICAgICByZXN1bHRzID0gcmVnZXguZXhlYyhsb2NhdGlvbi5zZWFyY2gpOwogICAgCiAgICAgICAgcmV0dXJuIHJlc3VsdHMgPT0gbnVsbCA/IGZhbHNlIDogZGVjb2RlVVJJQ29tcG9uZW50KHJlc3VsdHNbMV0ucmVwbGFjZSgvXCsvZywgIiAiKSk7CiAgICB9CgogICAgLyoqCiAgICAqIFJlYWQgb3B0aW9ucyBvciBzZXQgZGVmYXVsdHMKICAgICovCiAgICB2YXIgc2V0dXBfbG9jYWxfc3RvcmFnZSA9IGZ1bmN0aW9uKCkgewogICAgICAgIGlmICggbG9jYWxTdG9yZSA9PT0gdW5kZWZpbmVkICkgewogICAgICAgICAgICAkdXNlck1lbnUgPSBkZWZhdWx0cy5tZW51OwogICAgICAgICAgICAkc2V0QmxhbmtNZW51ID0gZGVmYXVsdHMuaGVscF9ibGFuazsKICAgICAgICAgICAgJHJlbW92ZUhlbHBDZW50ZXIgPSBkZWZhdWx0cy5yZW1vdmVfaGVscDsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICR1c2VyTWVudSA9IGxvY2FsU3RvcmUubWVudTsKICAgICAgICAgICAgJHNldEJsYW5rTWVudSA9IGxvY2FsU3RvcmUuaGVscF9ibGFuazsKICAgICAgICAgICAgJHJlbW92ZUhlbHBDZW50ZXIgPSBsb2NhbFN0b3JlLnJlbW92ZV9oZWxwOwogICAgICAgIH0KICAgICAgICAvKiBDaGFuZ2UgY29uZmlnIHVzaW5nIFVSTCBwYXJhbXMgKi8KICAgICAgICBpZiggKCBzZXRCbGFuayA9IGdldFBhcmFtZXRlckJ5TmFtZSgnaGVscC1ibGFuaycpICkgIT09IGZhbHNlICkgewogICAgICAgICAgICBpZiggJ3llcycgPT09IHNldEJsYW5rICkgewogICAgICAgICAgICAgICAgJHNldEJsYW5rTWVudSA9IHRydWU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICAkc2V0QmxhbmtNZW51ID0gZmFsc2U7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgd2luZG93LnBvc3RNZXNzYWdlICggeydwb3N0Jzp7ICdoZWxwX2JsYW5rJzokc2V0QmxhbmtNZW51LCAncmVtb3ZlX2hlbHAnOiAkcmVtb3ZlSGVscENlbnRlciwgJ21lbnUnOiR1c2VyTWVudX19LCAiKiIgKTsKICAgICAgICB9CiAgICAgICAgLyogaWRlbSAqLwogICAgICAgIGlmKCAoIHJlbW92ZUhDID0gZ2V0UGFyYW1ldGVyQnlOYW1lKCdoZWxwLXJlbW92ZScpICkgIT09IGZhbHNlICkgewogICAgICAgICAgICBpZiggJ3llcycgPT09IHJlbW92ZUhDICkgewogICAgICAgICAgICAgICAgJHJlbW92ZUhlbHBDZW50ZXIgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgJHJlbW92ZUhlbHBDZW50ZXIgPSBmYWxzZTsKICAgICAgICAgICAgfQogICAgICAgICAgICB3aW5kb3cucG9zdE1lc3NhZ2UgKCB7J3Bvc3QnOnsgJ2hlbHBfYmxhbmsnOiRzZXRCbGFua01lbnUsICdyZW1vdmVfaGVscCc6ICRyZW1vdmVIZWxwQ2VudGVyLCAnbWVudSc6JHVzZXJNZW51fX0sICIqIiApOwogICAgICAgIH0KICAgIH07CgogICAgLyoqCiAgICAqIExvY2Fsc3RvcmFnZSBmb3Igc2F2aW5nIG9wdGlvbnMKICAgICovCiAgICB2YXIgdXBkYXRlX3N0b3JhZ2UgPSBmdW5jdGlvbiggdmFsdWVzICkgewogICAgICAgICR1c2VyTWVudSA9IHZhbHVlczsKICAgICAgICB3aW5kb3cucG9zdE1lc3NhZ2UgKCB7J3Bvc3QnOnsgJ2hlbHBfYmxhbmsnOiRzZXRCbGFua01lbnUsICdyZW1vdmVfaGVscCc6ICRyZW1vdmVIZWxwQ2VudGVyLCAnbWVudSc6dmFsdWVzfX0sICIqIiApOwogICAgICAgIHJlYnVpbGRfbWVudSgpOwogICAgfTsKCiAgICAvKioKICAgICAqIFJlbW92ZSBtZW51IGhlbHAgaXRlbXMKICAgICAqLwogICAgdmFyIHJlbW92ZV9tb2RpZnlfaXRlbXMgPSBmdW5jdGlvbigpIHsKICAgICAgICBpZiggJHJlbW92ZUhlbHBDZW50ZXIgKSB7CiAgICAgICAgICAgICQoJy50b3BiYXItZGlhbG9nLmhlbHAtZGlhbG9nIHVsIGxpJykucmVtb3ZlKCk7CiAgICAgICAgfQogICAgICAgIGVsc2UgewogICAgICAgICAgICBpZiAoIFN0YWNrRXhjaGFuZ2Uub3B0aW9ucy5zaXRlLmlzTWV0YVNpdGUgJiYgU3RhY2tFeGNoYW5nZS5vcHRpb25zLnNpdGUuaXNDaGlsZE1ldGEgKSB7IC8vIE1ldGEuQWxsCiAgICAgICAgICAgICAgICAkKCByZW1vdmVfbWV0YS5qb2luKCcsJykgKS5yZW1vdmUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsgLy8gTWFpbiBzaXRlcyAmIE1ldGEuU0UKICAgICAgICAgICAgICAgICQoIHJlbW92ZV9pdGVtcy5qb2luKCcsJykgKS5yZW1vdmUoKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICAgICAgICAKICAgICAgIGlmKCAkc2V0QmxhbmtNZW51ICkKICAgICAgICAgICAgJCgnLnRvcGJhci1kaWFsb2cuaGVscC1kaWFsb2cgdWwgbGkgYVtocmVmPSIvaGVscCJdJykuYXR0cigndGFyZ2V0JywnX2JsYW5rJyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBCb251cyBidXR0b246IGJhY2sgdG8gdG9wCiAgICAgKiBodHRwOi8vd3d3LmRldmVsb3BlcmRyaXZlLmNvbS8/cD00MzIxCiAgICAgKi8KICAgIHZhciBjcmVhdGVfYmFjazJ0b3AgPSBmdW5jdGlvbigpIHsKICAgICAgICAkKCdib2R5JykuYXBwZW5kKCc8YSBocmVmPSIjIiBjbGFzcz0iYmFjay10by10b3AiPkJhY2sgdG8gVG9wPC9hPicpOwogICAgICAgIHZhciBvZmZzZXQgPSA0MjA7CiAgICAgICAgdmFyIGR1cmF0aW9uID0gMTUwOwogICAgICAgICQod2luZG93KS5zY3JvbGwoZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIGlmICgkKHRoaXMpLnNjcm9sbFRvcCgpID4gb2Zmc2V0KSB7CiAgICAgICAgICAgICAgICAkKCcuYmFjay10by10b3AnKS5mYWRlSW4oZHVyYXRpb24pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgJCgnLmJhY2stdG8tdG9wJykuZmFkZU91dChkdXJhdGlvbik7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICAkKCcuYmFjay10by10b3AnKS5jbGljayhmdW5jdGlvbihldmVudCkgewogICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAkKCdodG1sLCBib2R5JykuYW5pbWF0ZSh7c2Nyb2xsVG9wOiAwfSwgZHVyYXRpb24pOwogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfSk7CiAgICB9OwoKICAgIC8qKgogICAgICogQWZ0ZXIgc2F2aW5nIHNldHRpbmdzCiAgICAgKi8KICAgIHZhciByZWJ1aWxkX21lbnUgPSBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgaT0wLCAkbGlzID0gJCgnZGl2LnRvcGJhci1kaWFsb2cuaGVscC1kaWFsb2cuanMtaGVscC1kaWFsb2cgZGl2Lm1vZGFsLWNvbnRlbnQgdWwgbGknKTsKICAgICAgICBmb3IoIGk7IGkgPCAoICRsaXMubGVuZ3RoIC0gMiApIDsgaSsrICkgewogICAgICAgICAgICAkbGlzW2ldLnJlbW92ZSgpOwogICAgICAgIH0KICAgICAgICBjcmVhdGVfbWVudSgpOwogICAgfTsKCiAgICAvKioKICAgICAqIEF0IHN0YXJ0dXAgYW5kIGFmdGVyIHNhdmluZwogICAgICovCiAgICB2YXIgY3JlYXRlX21lbnUgPSBmdW5jdGlvbigpIHsKICAgICAgICB2YXIgcmV2ZXJzZUNsb25lID0gJHVzZXJNZW51LnNsaWNlKDApLnJldmVyc2UoKTsKICAgICAgICAkLmVhY2goIHJldmVyc2VDbG9uZSwgZnVuY3Rpb24oaW5kZXgsIHZhbHVlKSB7CiAgICAgICAgICAgIHZhciB1cmwgPSB2YWx1ZS51cmwsIAogICAgICAgICAgICAgICAgaXNfdGFiID0gKCB2YWx1ZS51cmwuaW5kZXhPZignP3RhYicpID09PSAwICksCiAgICAgICAgICAgICAgICB6ZXJvX3VybCA9ICggdmFsdWUudXJsLmxlbmd0aCA9PT0gMCApLAogICAgICAgICAgICAgICAgdGhlX2xpbms7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgaWYoIGlzX3RhYiApCiAgICAgICAgICAgICAgICB1cmwgPSBTdGFja0V4Y2hhbmdlLm9wdGlvbnMudXNlci5wcm9maWxlVXJsICsgdmFsdWUudXJsOwogICAgICAgICAgICAgICAgCiAgICAgICAgICAgIGlmKCBTdGFja0V4Y2hhbmdlLm9wdGlvbnMudXNlci5pc0Fub255bW91cyAmJiBpc190YWIgKQogICAgICAgICAgICAgICAgdGhlX2xpbmsgPSAnPGEgc3R5bGU9Im9wYWNpdHk6LjU7IGN1cnNvcjpkZWZhdWx0OyI+JyArIHZhbHVlLm5hbWUgKyAnPC9hPic7CiAgICAgICAgICAgIGVsc2UgaWYoIHplcm9fdXJsICkKICAgICAgICAgICAgICAgIHRoZV9saW5rID0gJzxhPicgKyB2YWx1ZS5uYW1lICsgJzwvYT4nOwogICAgICAgICAgICBlbHNlCiAgICAgICAgICAgICAgICB0aGVfbGluayA9ICc8YSBocmVmPSInICsgdXJsICsgJyI+JyArIHZhbHVlLm5hbWUgKyAnPC9hPic7CiAgICAgICAgICAgICAgICAKICAgICAgICAgICAgJCgnLnRvcGJhci1kaWFsb2cuaGVscC1kaWFsb2cgdWwnKS5wcmVwZW5kKCc8bGk+JyArIHRoZV9saW5rICsgJzwvbGk+Jyk7CiAgICAgICAgfSk7CiAgICB9OwoKICAgIC8qKgogICAgICogQ3JlYXRlcyBpY29uIGF0IHRvcGJhcgogICAgICovCiAgICB2YXIgY3JlYXRlX2hlbHBfbWVudSA9IGZ1bmN0aW9uKCl7CiAgICAgICAgJCgnLmxpbmtzLWNvbnRhaW5lciBhLmljb24taGVscC5qcy1oZWxwLWJ1dHRvbicpCiAgICAgICAgICAgIC5odG1sKCd0b29scyA8c3BhbiBjbGFzcz0idHJpYW5nbGUiPjwvc3Bhbj4nKQogICAgICAgICAgICAuYXR0cigndGl0bGUnLCAndG9vbHMnKQogICAgICAgICAgICAuYXR0cignaWQnLCAnaGFscC1idG4nKTsKICAgICAgICAkKCcudG9wYmFyLWRpYWxvZy5oZWxwLWRpYWxvZycpLmNzcygnd2lkdGgnLCAnMTM1cHgnKTsKCiAgICAgICAgLyogQWRkIGl0ZW1zIHRvIG1lbnUgKi8KICAgICAgICBjcmVhdGVfbWVudSgpOwogICAgICAgIGlmKCBTdGFja0V4Y2hhbmdlLm9wdGlvbnMudXNlci5pc0Fub255bW91cyA9PT0gdW5kZWZpbmVkICkKICAgICAgICAkKCcudG9wYmFyLWRpYWxvZy5oZWxwLWRpYWxvZyB1bCcpLmFwcGVuZCgnPGxpPjxkaXYgY2xhc3M9ImhlbHAtZGl2Ij48YSBocmVmPSIjIiBpZD0iaGVscC1zZXR0aW5ncyI+eyBzZXR0aW5ncyB9PC9hPjwvZGl2PjwvbGk+Jyk7CiAgICB9OwoKICAgIC8qKgogICAgICogQ3JlYXRlcyBtb2RhbCBzZXR0aW5ncyBzY3JlZW4gYW5kIHJlcGVhdGFibGUgZmllbGRzCiAgICAgKi8KICAgIHZhciBjcmVhdGVfc2V0dGluZ3NfbW9kYWwgPSBmdW5jdGlvbigpewogICAgICAgICQoIHJlcGVhdGVyX3RhYmxlICkuaW5zZXJ0QmVmb3JlKCAiYm9keSBkaXYuY29udGFpbmVyIiApOwoKICAgICAgICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnI2hlbHAtc2V0dGluZ3MsICNjbG9zZS1tb2RhbCcsIGZ1bmN0aW9uKGUpewogICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgICAgIHZhciB0b190b2dnbGUgPSAnYm9keSBkaXYuY29udGFpbmVyLCAudG9wYmFyLXdyYXBwZXIgLm5ldHdvcmstaXRlbXMsIC50b3BiYXItd3JhcHBlciAuc2VhcmNoLWNvbnRhaW5lciwgI2hhbHAtYnRuLCAudG9wYmFyLXdyYXBwZXIgLmxpbmtzLWNvbnRhaW5lciBhW2hyZWY9Ii9yZXZpZXciXSwgI2Zvb3RlciwgI3RoZS1zZXR0aW5ncy1wYWdlJzsKICAgICAgICAgICAgJCh0b190b2dnbGUpLmZhZGVUb2dnbGUoJ3Nsb3cnLCBmdW5jdGlvbigpewogICAgICAgICAgICAgICAgaWYoICQoJyN0aGUtc2V0dGluZ3MtcGFnZScpLmlzKCc6dmlzaWJsZScpICkKICAgICAgICAgICAgICAgICAgICAkKCcjdGhlLXNldHRpbmdzLXBhZ2UnKS5jc3MoJ2Rpc3BsYXknLCdpbmxpbmUtYmxvY2snKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgfSk7CgogICAgICAgICQoJy5yZXBlYXQnKS5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgJCh0aGlzKS5yZXBlYXRhYmxlX2ZpZWxkcyh7CiAgICAgICAgICAgICAgICB3cmFwcGVyOiAndGFibGUnLAogICAgICAgICAgICAgICAgY29udGFpbmVyOiAndGJvZHknLAogICAgICAgICAgICAgICAgcm93OiAndHInLAogICAgICAgICAgICAgICAgY2VsbDogJ3RkJywKICAgICAgICAgICAgICAgIGFkZDogJy5hZGQnLAogICAgICAgICAgICAgICAgcmVtb3ZlOiAnLnJlbW92ZScsCiAgICAgICAgICAgICAgICBtb3ZlOiAnLm1vdmUnLAogICAgICAgICAgICAgICAgdGVtcGxhdGU6ICcudGVtcGxhdGUnLAogICAgICAgICAgICAgICAgYmVmb3JlX2FkZDogbnVsbCwKICAgICAgICAgICAgICAgIGFmdGVyX2FkZDogbnVsbCwKICAgICAgICAgICAgICAgIGJlZm9yZV9yZW1vdmU6IG51bGwsCiAgICAgICAgICAgICAgICBhZnRlcl9yZW1vdmU6IG51bGwsCiAgICAgICAgICAgICAgICBzb3J0YWJsZV9vcHRpb25zOiB7CiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICJ0ZW1wbGF0ZSIsCiAgICAgICAgICAgICAgICAgICAgLy9mb3JjZVBsYWNlaG9sZGVyU2l6ZTogdHJ1ZSwKICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAwLjUKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0pOwogICAgICAgIH0pOwoKICAgICAgICAkKCcuc2F2ZScpLmNsaWNrKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIHZhciBfYWxsID0gbmV3IEFycmF5KCk7CiAgICAgICAgICAgICQoJyN0aGUtdGFibGUgdGJvZHkgdHI6Z3QoMCknKS5lYWNoKGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgIF9hbGwucHVzaCh7CiAgICAgICAgICAgICAgICAgICAgJ25hbWUnOiAkKHRoaXMpLmZpbmQoJ3RkOm50aC1vZi10eXBlKDIpIGlucHV0JykudmFsKCksCiAgICAgICAgICAgICAgICAgICAgJ3VybCc6ICQodGhpcykuZmluZCgndGQ6bnRoLW9mLXR5cGUoMykgaW5wdXQnKS52YWwoKQogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICB9KTsKICAgICAgICAgICAgdXBkYXRlX3N0b3JhZ2UoX2FsbCk7CiAgICAgICAgICAgICQoJyNjbG9zZS1tb2RhbCcpLmNsaWNrKCk7CiAgICAgICAgfSk7CgogICAgICAgICQuZWFjaCggJHVzZXJNZW51LCBmdW5jdGlvbihpbmRleCwgdmFsdWUpIHsKICAgICAgICAgICAgdmFyIGJ1dHRvbiA9ICQoJyN0aGUtdGFibGUgdGJvZHkgdHIudGVtcGxhdGUucm93JykuY2xvbmUoKS5hcHBlbmRUbygnI3RoZS10YWJsZSB0Ym9keScpLnJlbW92ZUNsYXNzKCd0ZW1wbGF0ZScpLnNob3coKTsKICAgICAgICAgICAgJChidXR0b24pLmZpbmQoJ3RkLnczMCBpbnB1dCcpLnZhbCh2YWx1ZS5uYW1lKS5wcm9wKCJkaXNhYmxlZCIsIGZhbHNlKTsKICAgICAgICAgICAgJChidXR0b24pLmZpbmQoJ3RkLnc2MCBpbnB1dCcpLnZhbCh2YWx1ZS51cmwpLnByb3AoImRpc2FibGVkIiwgZmFsc2UpOwogICAgICAgIH0pOwogICAgfTsKCiAgICBjcmVhdGVfYmFjazJ0b3AoKTsKICAgIHNldHVwX2xvY2FsX3N0b3JhZ2UoKTsKICAgIHJlbW92ZV9tb2RpZnlfaXRlbXMoKTsKICAgIGNyZWF0ZV9oZWxwX21lbnUoKTsKICAgIGNyZWF0ZV9zZXR0aW5nc19tb2RhbCgpOwp9CgovKioKICogSW5qZWN0IGpRdWVyeSBVSSBhbmQgY2FsbCBpbml0IGZ1bmN0aW9uCiAqLwpmdW5jdGlvbiBoZWxwX3NlX2FkZF9qcXVlcnkoIGNhbGxiYWNrICl7CiAgICB2YXIgc2NyaXB0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggJ3NjcmlwdCcgKTsKICAgIHNjcmlwdC5zZXRBdHRyaWJ1dGUoICdzcmMnLCBqcXVpX3VybCApOwogICAgc2NyaXB0LmFkZEV2ZW50TGlzdGVuZXIoICdsb2FkJywgZnVuY3Rpb24oKQogICAgewogICAgICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsKICAgICAgICBzY3JpcHQudGV4dENvbnRlbnQgPSAnKCcgKyBjYWxsYmFjay50b1N0cmluZygpICsgJykoJyArIHNlbmRMU3RvcmFnZSArICcpOyc7CiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCggc2NyaXB0ICk7CiAgICB9LCBmYWxzZSApOwogICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZCggc2NyaXB0ICk7Cn0KCi8qKgogKiBDU1MKICogaHR0cDovL3N0YWNrYXBwcy5jb20vYS80ODAwLzEwNTkwCiAqLwpmdW5jdGlvbiBhZGRHbG9iYWxTdHlsZShjc3MpIHsKICAgIHZhciBoZWFkLCBzdHlsZTsKICAgIGhlYWQgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdOwogICAgaWYgKCFoZWFkKSB7IHJldHVybjsgfQogICAgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogICAgc3R5bGUudHlwZSA9ICd0ZXh0L2Nzcyc7CiAgICBzdHlsZS5pbm5lckhUTUwgPSBjc3MKICAgIGhlYWQuYXBwZW5kQ2hpbGQoc3R5bGUpOwp9CgphZGRHbG9iYWxTdHlsZSAoZnVuY3Rpb24oKXsvKgogICAgaHRtbCxib2R5IHsgaGVpZ2h0OiAxMDAlOyBtYXJnaW46IDA7IHBhZGRpbmc6IDA7IH0KICAgICN0aGUtc2V0dGluZ3MtcGFnZSB7IHBhZGRpbmctdG9wOiAxZW07IGJhY2tncm91bmQtY29sb3I6ICNERURBREE7IHdpZHRoOjEwMCU7IGhlaWdodDoxMDAlOyBwb3NpdGlvbjphYnNvbHV0ZTsgdG9wOjEwOyBsZWZ0OjA7IHotaW5kZXg6OTk5OyBkaXNwbGF5Om5vbmU7IG92ZXJmbG93OmF1dG8gfQogICAgI2hlbHAtc2V0dGluZ3MgeyBmbG9hdDogcmlnaHQ7IGNvbG9yOiAjOEM4QzhDOyBmb250LXNpemU6LjVlbSB9CiAgICAjdGhlLXRhYmxlIHsgCiAgICAgICAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTsgCiAgICAgICAgLXdlYmtpdC1ib3gtc2hhZG93OiA5cHggOXB4IDEycHggMHB4IHJnYmEoNTAsIDUwLCA1MCwgMC4yKTsKICAgICAgICAtbW96LWJveC1zaGFkb3c6ICAgIDlweCA5cHggMTJweCAwcHggcmdiYSg1MCwgNTAsIDUwLCAwLjIpOwogICAgICAgIGJveC1zaGFkb3c6ICAgICAgICAgOXB4IDlweCAxMnB4IDBweCByZ2JhKDUwLCA1MCwgNTAsIDAuMik7IAogICAgfQogICAgI3RoZS10YWJsZSB0aGVhZCB0ZDpudGgtb2YtdHlwZSgxKSB7IHRleHQtYWxpZ246IGxlZnQ7IH0KICAgICN0aGUtdGFibGUgdGhlYWQgdGQ6bnRoLW9mLXR5cGUoMikgeyB0ZXh0LWFsaWduOiByaWdodDsgfQogICAgI3RoZS10YWJsZSB0ZCwgI3RoZS10YWJsZSB0ciB7IGJhY2tncm91bmQtY29sb3I6ICNjY2M7IHBhZGRpbmc6MnB4OyBtYXJnaW46MDsgdGV4dC1hbGlnbjpjZW50ZXI7IHZlcnRpY2FsLWFsaWduOm1pZGRsZTsgIH0KICAgICN0aGUtdGFibGUgLnc1IHsgd2lkdGg6IDUlOyB9CiAgICAjdGhlLXRhYmxlIC53NXIgeyBvcGFjaXR5OiAuMTU7fQogICAgI3RoZS10YWJsZSAudzEwIHsgd2lkdGg6IDEwJSB9CiAgICAjdGhlLXRhYmxlIC53MzAgeyB3aWR0aDogMzAlIH0KICAgICN0aGUtdGFibGUgLnc2MCB7IHdpZHRoOiA2NSUgfQogICAgI3RoZS10YWJsZSAubW92ZSBpbWcgeyB3aWR0aDogMTAwJTsgbWF4LXdpZHRoOiAyMHB4OyAtd2Via2l0LWZpbHRlcjogaW52ZXJ0KDEwMCUpOyBvcGFjaXR5OiAuMjU7IH0KICAgICN0aGUtdGFibGUgaW5wdXQgeyBwYWRkaW5nOiAzcHg7IGZvbnQtc2l6ZTogMTRweDsgbWFyZ2luOiAwOyB3aWR0aDogOTUlOyBib3JkZXI6IDFweCBzb2xpZCAjRTRFNEU0OyB9CiAgICBkaXYucmVwZWF0IHsgd2lkdGg6NjAlO21hcmdpbjoxZW0gYXV0bzsgcGFkZGluZy1ib3R0b206My41ZW0gfQogICAgI2Nsb3NlLW1vZGFsIHsgZmxvYXQ6IHJpZ2h0O21hcmdpbi1yaWdodDogMjAlOyB9CiAgICAuYmFjay10by10b3AgewogICAgICAgIHBvc2l0aW9uOiBmaXhlZDsgYm90dG9tOiAyZW07IHJpZ2h0OiAtM3B4OyB0ZXh0LWRlY29yYXRpb246IG5vbmU7CiAgICAgICAgY29sb3I6ICMwMDAwMDA7IGJhY2tncm91bmQtY29sb3I6IHJnYmEoMjM1LCAyMzUsIDIzNSwgMC44MCk7IGZvbnQtc2l6ZTogMTJweDsKICAgICAgICBwYWRkaW5nOiAuNWVtOyBkaXNwbGF5OiBub25lOyBib3JkZXItcmFkaXVzOiA1cHgKICAgIH0KICAgIC5iYWNrLXRvLXRvcDpob3ZlciB7IGJhY2tncm91bmQtY29sb3I6IHJnYmEoMTM1LCAxMzUsIDEzNSwgMC41MCk7IH0KICAgIC5saW5rcy1jb250YWluZXIgYS5pY29uLWhlbHAuanMtaGVscC1idXR0b24uZ20tYWN0aXZlIHsgLXdlYmtpdC1maWx0ZXI6IGludmVydCgyMCUpO3BhZGRpbmctcmlnaHQ6IDRweDsgfQogICAgLmhlbHAtZGl2IHsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgdGV4dC1hbGlnbjogcmlnaHQ7IGZsb2F0OiByaWdodDsgfQogICAgLmFkZCwgLnNhdmUsICNjbG9zZS1tb2RhbCB7Y3Vyc29yOnBvaW50ZXJ9CiAgICAubW92ZSB7Y3Vyc29yOm1vdmV9CiAgICAuYWRkIHsgcG9zaXRpb246IHJlbGF0aXZlOyB0b3A6IDVweDsgbGVmdDogM3B4OyB9CiAgICAuc2F2ZSB7IHBvc2l0aW9uOiByZWxhdGl2ZTsgdG9wOiA1cHg7IHJpZ2h0OiA1cHg7IH0KICAgIC5yZW1vdmUge2N1cnNvcjpjcm9zc2hhaXI7IH0KICAgIC50b3BiYXItZGlhbG9nLmhlbHAtZGlhbG9nIHVsIGxpIHNwYW4uaXRlbS1zdW1tYXJ5IHsgZGlzcGxheTogbm9uZTsgfQogICAgLnRvcGJhci1kaWFsb2cgLm1vZGFsLWNvbnRlbnQgeyBtYXgtaGVpZ2h0OiAxMDAlIH0KICovCn0udG9TdHJpbmcoKS5zbGljZSgxNCwtMykpOw=="},{"name":"AutoReviewComments","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":["/^https?:\\/\\/(.*\\.)?stackoverflow\\.com/.*$/","/^https?:\\/\\/(.*\\.)?serverfault\\.com/.*$/","/^https?:\\/\\/(.*\\.)?superuser\\.com/.*$/","/^https?:\\/\\/(.*\\.)?stackexchange\\.com/.*$/","/^https?:\\/\\/(.*\\.)?askubuntu\\.com/.*$/","/^https?:\\/\\/(.*\\.)?mathoverflow\\.com/.*$/","/^https?:\\/\\/discuss\\.area51\\.stackexchange\\.com/.*$/","/^https?:\\/\\/stackapps\\.com/.*$/"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"data":{},"ts":1456451831506},"enabled":true,"position":14,"file_url":"https://raw.github.com/Benjol/SE-AutoReviewComments/master/dist/autoreviewcomments.user.js","uuid":"8b302a20-45b6-48df-aa1f-ba2a8c340e57","source":"LyoqIEBwcmVzZXJ2ZQovLyA9PVVzZXJTY3JpcHQ9PQovLyBAbmFtZSAgICAgICAgICAgQXV0b1Jldmlld0NvbW1lbnRzCi8vIEBuYW1lc3BhY2UgICAgICBiZW5qb2wKLy8gQHZlcnNpb24gICAgICAgIDEuNC4yCi8vIEBkZXNjcmlwdGlvbiAgICBObyBtb3JlIHJlLXR5cGluZyB0aGUgc2FtZSBjb21tZW50cyBvdmVyIGFuZCBvdmVyIQovLyBAaG9tZXBhZ2UgICAgICAgaHR0cHM6Ly9naXRodWIuY29tL0JlbmpvbC9TRS1BdXRvUmV2aWV3Q29tbWVudHMKLy8gQGdyYW50ICAgICAgICAgIG5vbmUKLy8gQGluY2x1ZGUgL15odHRwcz86XC9cLyguKlwuKT9zdGFja292ZXJmbG93XC5jb20vLiokLwovLyBAaW5jbHVkZSAvXmh0dHBzPzpcL1wvKC4qXC4pP3NlcnZlcmZhdWx0XC5jb20vLiokLwovLyBAaW5jbHVkZSAvXmh0dHBzPzpcL1wvKC4qXC4pP3N1cGVydXNlclwuY29tLy4qJC8KLy8gQGluY2x1ZGUgL15odHRwcz86XC9cLyguKlwuKT9zdGFja2V4Y2hhbmdlXC5jb20vLiokLwovLyBAaW5jbHVkZSAvXmh0dHBzPzpcL1wvKC4qXC4pP2Fza3VidW50dVwuY29tLy4qJC8KLy8gQGluY2x1ZGUgL15odHRwcz86XC9cLyguKlwuKT9tYXRob3ZlcmZsb3dcLmNvbS8uKiQvCi8vIEBpbmNsdWRlIC9eaHR0cHM/OlwvXC9kaXNjdXNzXC5hcmVhNTFcLnN0YWNrZXhjaGFuZ2VcLmNvbS8uKiQvCi8vIEBpbmNsdWRlIC9eaHR0cHM/OlwvXC9zdGFja2FwcHNcLmNvbS8uKiQvCi8vID09L1VzZXJTY3JpcHQ9PQoqLwoKZnVuY3Rpb24gd2l0aF9qcXVlcnkoZikgewogIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzY3JpcHQiKTsKICBzY3JpcHQudHlwZSA9ICJ0ZXh0L2phdmFzY3JpcHQiOwogIHNjcmlwdC50ZXh0Q29udGVudCA9ICIoIiArIGYudG9TdHJpbmcoKSArICIpKGpRdWVyeSkiOwogIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc2NyaXB0KTsKfTsKCndpdGhfanF1ZXJ5KGZ1bmN0aW9uICgkKSB7CiAgU3RhY2tFeGNoYW5nZS5yZWFkeShmdW5jdGlvbiAoKSB7CiAgICAvLy8vIFNlbGYgVXBkYXRpbmcgVXNlcnNjcmlwdCwgc2VlIGh0dHBzOi8vZ2lzdC5naXRodWIuY29tL0JlbmpvbC84NzQwNTgKLy8gKHRoZSBmaXJzdCBsaW5lIG9mIHRoaXMgdGVtcGxhdGUgX211c3RfIGJlIGEgY29tbWVudCEpCnZhciBWRVJTSU9OID0gJzEuNC4yJzsKdmFyIFVSTCA9ICJodHRwczovL3Jhdy5naXRodWIuY29tL0JlbmpvbC9TRS1BdXRvUmV2aWV3Q29tbWVudHMvbWFzdGVyL2Rpc3QvYXV0b3Jldmlld2NvbW1lbnRzLnVzZXIuanMiOwoKLy8gVGhpcyBoYWNrIGlzIG5lY2Vzc2FyeSB0byBicmluZyBwZW9wbGUgdXAgZnJvbSB0aGUgbGFzdCB3b3JraW5nIGF1dG8tdXB0YXRlIGdpc3QKLy8gcmVsZWFzZSBpZiB0aGV5IG1hbnVhbGx5IGluc3RhbGxlZCB0aGUgbGF0ZXN0IHZlcnNpb24uIChjYW4gYmUgcmVtb3ZlZCBhZnRlciBzb21lCi8vIHRpbWUgaGFzIHBhc3NlZCBhbmQgbGFzdCByZWxlYXNlZCB2ZXJzaW9uIGlzIGF0IGxlYXN0IDEuMy40KQpmb3IgKHZhciBrZXkgaW4gd2luZG93KSB7CiAgaWYgKGtleS5pbmRleE9mKCdzZWxmVXBkYXRlckNhbGxiYWNrJykgIT0gLTEpIHsKICAgIHdpbmRvd1trZXldKFZFUlNJT04pOwogICAgcmV0dXJuOwogIH0KfQovLyBFbmQgaGFjawoKaWYod2luZG93WyJBdXRvUmV2aWV3Q29tbWVudHNfQXV0b1VwZGF0ZUNhbGxiYWNrIl0pIHsKICB3aW5kb3dbIkF1dG9SZXZpZXdDb21tZW50c19BdXRvVXBkYXRlQ2FsbGJhY2siXShWRVJTSU9OKTsKICByZXR1cm47Cn0KCi8vIFNwbGl0IGludCBiYXNlZCB2ZXJzaW9uIG51bWJlciBzdHJpbmdzIG9uIGRvdHMsIHplcm8tcGFkIHRoZSBhcnJheXMgdG8gdGhlIHNhbWUgbGVuZ3RoIGFuZAovLyBjb21wYXJlIHRoZW0gaW4gb3JkZXIgc3VjaCB0aGF0IHRydWUgaXMgcmV0dXJuZWQgb25seSBpZiB0aGUgcHJvcG9zdGVkIHZlcnNpb24gaXMgbmV3ZXIKZnVuY3Rpb24gaXNWZXJzaW9uTmV3ZXIocHJvcG9zZWQsIGN1cnJlbnQpIHsKICAgIHByb3Bvc2VkID0gcHJvcG9zZWQuc3BsaXQoIi4iKTsKICAgIGN1cnJlbnQgPSBjdXJyZW50LnNwbGl0KCIuIik7CgogICAgd2hpbGUgKHByb3Bvc2VkLmxlbmd0aCA8IGN1cnJlbnQubGVuZ3RoKSBwcm9wb3NlZC5wdXNoKCIwIik7CiAgICB3aGlsZSAoY3VycmVudC5sZW5ndGggPCBwcm9wb3NlZC5sZW5ndGgpIGN1cnJlbnQucHVzaCgiMCIpOwoKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcHJvcG9zZWQubGVuZ3RoOyBpKyspIHsKICAgICAgICBpZiAocGFyc2VJbnQocHJvcG9zZWRbaV0pID4gcGFyc2VJbnQoY3VycmVudFtpXSkpIHsKICAgICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICAgIGlmIChwYXJzZUludChwcm9wb3NlZFtpXSkgPCBwYXJzZUludChjdXJyZW50W2ldKSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgfQoKICAgIHJldHVybiBmYWxzZTsKfQoKZnVuY3Rpb24gdXBkYXRlQ2hlY2sobm90aWZpZXIpIHsKICB3aW5kb3dbIkF1dG9SZXZpZXdDb21tZW50c19BdXRvVXBkYXRlQ2FsbGJhY2siXSA9IGZ1bmN0aW9uIChuZXd2ZXIpIHsKICAgICAgaWYoaXNWZXJzaW9uTmV3ZXIobmV3dmVyLCBWRVJTSU9OKSkgbm90aWZpZXIobmV3dmVyLCBWRVJTSU9OLCBVUkwpOwogICAgfQogICQoIjxzY3JpcHQgLz4iKS5hdHRyKCJzcmMiLCBVUkwpLmFwcGVuZFRvKCJoZWFkIik7Cn0KCi8vIENoZWNrIHRvIHNlZSBpZiBhIG5ldyB2ZXJzaW9uIGhhcyBiZWNvbWUgYXZhaWxhYmxlIHNpbmNlIGxhc3QgY2hlY2sKLy8gLSBvbmx5IGNoZWNrcyBvbmNlIGEgZGF5Ci8vIC0gZG9lcyBub3QgY2hlY2sgZm9yIGZpcnN0IHRpbWUgdmlzaXRvcnMsIHNob3dzIHRoZW0gYSB3ZWxjb21lIG1lc3NhZ2UgaW5zdGVhZAovLyAtIGNhbGxlZCBhdCB0aGUgZW5kIG9mIHRoZSBtYWluIHNjcmlwdCBpZiBmdW5jdGlvbiBleGlzdHMKZnVuY3Rpb24gQ2hlY2tGb3JOZXdWZXJzaW9uKHBvcHVwKSB7CiAgdmFyIHRvZGF5ID0gKG5ldyBEYXRlKCkuc2V0SG91cnMoMCwgMCwgMCwgMCkpOwogIHZhciBMYXN0VXBkYXRlQ2hlY2tEYXkgPSBHZXRTdG9yYWdlKCJMYXN0VXBkYXRlQ2hlY2tEYXkiKTsKICBpZihMYXN0VXBkYXRlQ2hlY2tEYXkgPT0gbnVsbCkgeyAvL2ZpcnN0IHRpbWUgdmlzaXRvcgogICAgU2hvd01lc3NhZ2UocG9wdXAsICJQbGVhc2UgcmVhZCB0aGlzISIsICdUaGFua3MgZm9yIGluc3RhbGxpbmcgdGhpcyBzY3JpcHQuIFwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFBsZWFzZSBub3RlIHRoYXQgeW91IGNhbiBFRElUIHRoZSB0ZXh0cyBpbmxpbmUgYnkgZG91YmxlLWNsaWNraW5nIHRoZW0uIFwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIEZvciBvdGhlciBvcHRpb25zLCBwbGVhc2Ugc2VlIHRoZSBSRUFETUUgYXQgPGEgaHJlZj0iaHR0cHM6Ly9naXRodWIuY29tL0JlbmpvbC9TRS1BdXRvUmV2aWV3Q29tbWVudHMiIHRhcmdldD0iX2JsYW5rIj5oZXJlPC9hPi4nLAogICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyB9KTsKICB9IGVsc2UgaWYgKCBMYXN0VXBkYXRlQ2hlY2tEYXkgIT0gdG9kYXkpIHsKICAgIHVwZGF0ZUNoZWNrKGZ1bmN0aW9uIChuZXd2ZXIsIG9sZHZlciwgaW5zdGFsbF91cmwpIHsKICAgICAgaWYobmV3dmVyICE9IEdldFN0b3JhZ2UoIkxhc3RWZXJzaW9uQWNrbm93bGVkZ2VkIikpIHsKICAgICAgICBTaG93TWVzc2FnZShwb3B1cCwgIk5ldyBWZXJzaW9uISIsICdBIG5ldyB2ZXJzaW9uICgnICsgbmV3dmVyICsgJykgb2YgdGhlIDxhIGhyZWY9Imh0dHA6Ly9zdGFja2FwcHMuY29tL3EvMjExNiI+QXV0b1Jldmlld0NvbW1lbnRzPC9hPiB1c2Vyc2NyaXB0IGlzIG5vdyBhdmFpbGFibGUsIHNlZSB0aGUgPGEgaHJlZj0iaHR0cHM6Ly9naXRodWIuY29tL0JlbmpvbC9TRS1BdXRvUmV2aWV3Q29tbWVudHMvcmVsZWFzZXMiPnJlbGVhc2Ugbm90ZXM8L2E+IGZvciBkZXRhaWxzIG9yIDxhIGhyZWY9IicgKyBpbnN0YWxsX3VybCArICciPmNsaWNrIGhlcmU8L2E+IHRvIGluc3RhbGwgbm93LicsCiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkgeyBTZXRTdG9yYWdlKCJMYXN0VmVyc2lvbkFja25vd2xlZGdlZCIsIG5ld3Zlcik7IH0pOwogICAgICB9CiAgICB9KTsKICB9CiAgU2V0U3RvcmFnZSgiTGFzdFVwZGF0ZUNoZWNrRGF5IiwgdG9kYXkpOwp9CgovKiBIb3cgZG9lcyB0aGlzIHdvcms/CiAgIDEuIFRoZSBpbnN0YWxsZWQgc2NyaXB0IGxvYWRzIGZpcnN0LCBhbmQgc2V0cyB0aGUgbG9jYWwgVkVSU0lPTiB2YXJpYWJsZSB3aXRoIHRoZSBjdXJyZW50bHkgaW5zdGFsbGVkIHZlcnNpb24gbnVtYmVyCiAgIDIuIHdpbmRvd1siQXV0b1Jldmlld0NvbW1lbnRzX0F1dG9VcGRhdGVDYWxsYmFjayJdIGlzIG5vdCBkZWZpbmVkLCBzbyB0aGlzIGlzIHNraXBwZWQKICAgMy4gV2hlbiB1cGRhdGVDaGVjaygpIGlzIGNhbGxlZCwgaXQgZGVmaW5lcyB3aW5kb3dbIkF1dG9SZXZpZXdDb21tZW50c19BdXRvVXBkYXRlQ2FsbGJhY2siXSwgd2hpY2ggcmV0YWlucyB0aGUgaW5zdGFsbGVkIHZlcnNpb24gbnVtYmVyIGluIFZFUlNJT04gKGNsb3N1cmUpCiAgIDQuIHVwZGF0ZUNoZWNrKCkgdGhlbiBsb2FkcyB0aGUgZXh0ZXJuYWwgdmVyc2lvbiBvZiB0aGUgc2NyaXB0IGludG8gdGhlIHBhZ2UgaGVhZGVyCiAgIDUuIHdoZW4gdGhlIGV4dGVybmFsIHZlcnNpb24gb2YgdGhlIHNjcmlwdCBsb2FkcywgaXQgZGVmaW5lcyBpdHMgb3duIGxvY2FsIFZFUlNJT04gd2l0aCB0aGUgZXh0ZXJuYWwgKHBvdGVudGlhbGx5IG5ldykgdmVyc2lvbiBudW1iZXIKICAgNi4gd2luZG93WyJBdXRvUmV2aWV3Q29tbWVudHNfQXV0b1VwZGF0ZUNhbGxiYWNrIl0gaXMgbm93IGRlZmluZWQsIHNvIGl0IGlzIGludm9rZWQsIGFuZCB0aGUgZXh0ZXJuYWwgdmVyc2lvbiBudW1iZXIgaXMgcGFzc2VkIGluCiAgIDcuIGlmIHRoZSBleHRlcm5hbCB2ZXJzaW9uIG51bWJlciAodmVyKSBpcyBncmVhdGVyIHRoYW4gdGhlIGluc3RhbGxlZCB2ZXJzaW9uIChWRVJTSU9OKSwgdGhlIG5vdGlmaWNhdGlvbiBpcyBpbnZva2VkCiAqLwoKCiAgICB2YXIgc2l0ZXVybCA9IHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZTsKICAgIHZhciBhcnIgPSBkb2N1bWVudC50aXRsZS5zcGxpdCgnIC0gJyk7CiAgICB2YXIgc2l0ZW5hbWUgPSBhcnJbYXJyLmxlbmd0aCAtIDFdOwogICAgdmFyIHVzZXJuYW1lID0gJ3VzZXInOwogICAgdmFyIE9QID0gJ09QJzsKICAgIHZhciBwcmVmaXggPSAiQXV0b1Jldmlld0NvbW1lbnRzLSI7IC8vcHJlZml4IHRvIGF2b2lkIGNsYXNoZXMgaW4gbG9jYWxzdG9yYWdlCiAgICB2YXIgbXl1c2VyaWQgPSBnZXRMb2dnZWRJblVzZXJJZCgpOwoKICAgIGlmKHNpdGVuYW1lID09ICJTdGFjayBFeGNoYW5nZSIpIHNpdGVuYW1lID0gYXJyW2Fyci5sZW5ndGggLSAyXTsgLy93b3JrYXJvdW5kIGZvciBzb21lIFNFIHNpdGVzIChlLmcuIEFyZWEgNTEsIFN0YWNrIEFwcHMpCiAgICBzaXRlbmFtZSA9IHNpdGVuYW1lLnJlcGxhY2UoLyA/U3RhY2sgRXhjaGFuZ2UvLCAnJyk7ICAgICAgICAgICAgIC8vc2FtZSBmb3Igb3RoZXJzICgiQW5kcm9pZCBFbnRodXNpYXN0cyBTdGFjayBFeGNoYW5nZSIsIFNSLCBhbmQgbW9yZSkKICAgIGlmKCFHZXRTdG9yYWdlKCJXZWxjb21lTWVzc2FnZSIpKSBTZXRTdG9yYWdlKCJXZWxjb21lTWVzc2FnZSIsICdXZWxjb21lIHRvICcgKyBzaXRlbmFtZSArICchICcpOwogICAgdmFyIGdyZWV0aW5nID0gR2V0U3RvcmFnZSgiV2VsY29tZU1lc3NhZ2UiKSA9PSAiTk9ORSIgPyAiIiA6IEdldFN0b3JhZ2UoIldlbGNvbWVNZXNzYWdlIik7CiAgICB2YXIgc2hvd0dyZWV0aW5nID0gZmFsc2U7CgogICAgdmFyIGNzc1RlbXBsYXRlID0gJzxzdHlsZT4uYXV0by1yZXZpZXctY29tbWVudHMucG9wdXB7cG9zaXRpb246YWJzb2x1dGU7ZGlzcGxheTpibG9jazt3aWR0aDo2OTBweDtwYWRkaW5nOjE1cHggMTVweCAxMHB4fS5hdXRvLXJldmlldy1jb21tZW50cy5wb3B1cCAuZmxvYXQtbGVmdHtmbG9hdDpsZWZ0fS5hdXRvLXJldmlldy1jb21tZW50cy5wb3B1cCAuZmxvYXQtcmlnaHR7ZmxvYXQ6cmlnaHR9LmF1dG8tcmV2aWV3LWNvbW1lbnRzLnBvcHVwIC50aHJvYmJlcntkaXNwbGF5Om5vbmV9LmF1dG8tcmV2aWV3LWNvbW1lbnRzLnBvcHVwIC5yZW1vdGVlcnJvcntjb2xvcjpyZWR9LmF1dG8tcmV2aWV3LWNvbW1lbnRzLnBvcHVwPmRpdj50ZXh0YXJlYXt3aWR0aDoxMDAlO2hlaWdodDo0NDJweH0uYXV0by1yZXZpZXctY29tbWVudHMucG9wdXAgLm1haW57b3ZlcmZsb3c6aGlkZGVufS5hdXRvLXJldmlldy1jb21tZW50cy5wb3B1cCAubWFpbiAudXNlcmluZm97cGFkZGluZzo1cHg7bWFyZ2luLWJvdHRvbTo3cHg7YmFja2dyb3VuZDojZWFlZmVmfS5hdXRvLXJldmlldy1jb21tZW50cy5wb3B1cCAubWFpbiAuYWN0aW9uLWxpc3R7aGVpZ2h0OjQ0MHB4O21hcmdpbjowIDAgN3B4IDAgIWltcG9ydGFudDtvdmVyZmxvdy15OmF1dG99LmF1dG8tcmV2aWV3LWNvbW1lbnRzLnBvcHVwIC5tYWluIC5hY3Rpb24tbGlzdCBsaXt3aWR0aDoxMDAlO3BhZGRpbmc6MDt0cmFuc2l0aW9uOi4xc30uYXV0by1yZXZpZXctY29tbWVudHMucG9wdXAgLm1haW4gLmFjdGlvbi1saXN0IGxpOmhvdmVye2JhY2tncm91bmQtY29sb3I6I2YyZjJmMn0uYXV0by1yZXZpZXctY29tbWVudHMucG9wdXAgLm1haW4gLmFjdGlvbi1saXN0IGxpLmFjdGlvbi1zZWxlY3RlZDpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiNlNmU2ZTZ9LmF1dG8tcmV2aWV3LWNvbW1lbnRzLnBvcHVwIC5tYWluIC5hY3Rpb24tbGlzdCBsaSBpbnB1dHtkaXNwbGF5Om5vbmV9LmF1dG8tcmV2aWV3LWNvbW1lbnRzLnBvcHVwIC5tYWluIC5hY3Rpb24tbGlzdCBsaSBsYWJlbHtwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrO3BhZGRpbmc6MTBweH0uYXV0by1yZXZpZXctY29tbWVudHMucG9wdXAgLm1haW4gLmFjdGlvbi1saXN0IGxpIGxhYmVsIC5hY3Rpb24tbmFtZXtkaXNwbGF5OmJsb2NrO21hcmdpbi1ib3R0b206M3B4O2N1cnNvcjpkZWZhdWx0fS5hdXRvLXJldmlldy1jb21tZW50cy5wb3B1cCAubWFpbiAuYWN0aW9uLWxpc3QgbGkgbGFiZWwgLmFjdGlvbi1kZXNje21hcmdpbjowO2NvbG9yOiM4ODg7Y3Vyc29yOmRlZmF1bHR9LmF1dG8tcmV2aWV3LWNvbW1lbnRzLnBvcHVwIC5tYWluIC5hY3Rpb24tbGlzdCBsaSBsYWJlbCAuYWN0aW9uLW5hbWUgdGV4dGFyZWEsLmF1dG8tcmV2aWV3LWNvbW1lbnRzLnBvcHVwIC5tYWluIC5hY3Rpb24tbGlzdCBsaSBsYWJlbCAuYWN0aW9uLWRlc2MgdGV4dGFyZWF7d2lkdGg6OTklO21hcmdpbjowIDAgLTRweCAwfS5hdXRvLXJldmlldy1jb21tZW50cy5wb3B1cCAubWFpbiAuYWN0aW9uLWxpc3QgbGkgbGFiZWwgLmFjdGlvbi1kZXNjIHRleHRhcmVhe2hlaWdodDo0MnB4fS5hdXRvLXJldmlldy1jb21tZW50cy5wb3B1cCAubWFpbiAuYWN0aW9uLWxpc3QgbGkgbGFiZWwgLnF1aWNrLWluc2VydHtkaXNwbGF5Om5vbmU7cG9zaXRpb246YWJzb2x1dGU7dG9wOjA7cmlnaHQ6MDtoZWlnaHQ6MTAwJTttYXJnaW46MDtmb250LXNpemU6MzAwJTtjb2xvcjp0cmFuc3BhcmVudDtib3JkZXI6MDt0cmFuc2l0aW9uOi4zczt0ZXh0LXNoYWRvdzowIDAgMXB4ICNmZmY7Y3Vyc29yOnBvaW50ZXI7YmFja2dyb3VuZC1jb2xvcjpyZ2JhKDAsMCwwLDAuMSk7YmFja2dyb3VuZDpyZ2JhKDAsMCwwLDAuMSk7Ym94LXNoYWRvdzpub25lOy1tb3otYm94LXNoYWRvdzpub25lOy13ZWJraXQtYm94LXNoYWRvdzpub25lfS5hdXRvLXJldmlldy1jb21tZW50cy5wb3B1cCAubWFpbiAuYWN0aW9uLWxpc3QgbGk6aG92ZXIgbGFiZWwgLnF1aWNrLWluc2VydHtkaXNwbGF5OmJsb2NrfS5hdXRvLXJldmlldy1jb21tZW50cy5wb3B1cCAubWFpbiAuYWN0aW9uLWxpc3QgbGkgbGFiZWwgLnF1aWNrLWluc2VydDpob3ZlcntiYWNrZ3JvdW5kLWNvbG9yOiMyMjI7Y29sb3I6I2ZmZn0uYXV0by1yZXZpZXctY29tbWVudHMucG9wdXAgLm1haW4gLnNoYXJlLXRpcHtkaXNwbGF5Om5vbmV9LmF1dG8tcmV2aWV3LWNvbW1lbnRzLnBvcHVwIC5tYWluIC5zaGFyZS10aXAgLmN1c3RvbXdlbGNvbWV7d2lkdGg6MzAwcHh9LmF1dG8tcmV2aWV3LWNvbW1lbnRzLnBvcHVwIC5tYWluIC5zaGFyZS10aXAgLnJlbW90ZXVybHtkaXNwbGF5OmJsb2NrO3dpZHRoOjQwMHB4fS5hdXRvLXJldmlldy1jb21tZW50cy5wb3B1cCAuYWN0aW9ucywuYXV0by1yZXZpZXctY29tbWVudHMucG9wdXAgLm1haW4gLnBvcHVwLWFjdGlvbnMgLmFjdGlvbnN7bWFyZ2luOjZweH0uYXV0by1yZXZpZXctY29tbWVudHMucG9wdXAgLm1haW4gLnBvcHVwLWFjdGlvbnMgLnBvcHVwLXN1Ym1pdHtmbG9hdDpub25lO21hcmdpbjowIDAgNXB4IDB9LmF1dG8tcmV2aWV3LWNvbW1lbnRzLmFubm91bmNlbWVudHtwYWRkaW5nOjdweDttYXJnaW4tYm90dG9tOjEwcHg7YmFja2dyb3VuZDpvcmFuZ2U7Zm9udC1zaXplOjE1cHh9LmF1dG8tcmV2aWV3LWNvbW1lbnRzLmFubm91bmNlbWVudCAubm90aWZ5LWNsb3Nle2Rpc3BsYXk6YmxvY2s7ZmxvYXQ6cmlnaHQ7bWFyZ2luOjAgNHB4O3BhZGRpbmc6MCA0cHg7Ym9yZGVyOjJweCBzb2xpZCBibGFjaztjdXJzb3I6cG9pbnRlcjtsaW5lLWhlaWdodDoxN3B4fS5hdXRvLXJldmlldy1jb21tZW50cy5hbm5vdW5jZW1lbnQgLm5vdGlmeS1jbG9zZSBhe2NvbG9yOmJsYWNrO3RleHQtZGVjb3JhdGlvbjpub25lO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1zaXplOjE2cHh9PC9zdHlsZT4nOwogICAgdmFyIG1hcmt1cFRlbXBsYXRlID0gJzxkaXYgY2xhc3M9ImF1dG8tcmV2aWV3LWNvbW1lbnRzIHBvcHVwIiBpZD0icG9wdXAiPiA8ZGl2IGNsYXNzPSJwb3B1cC1jbG9zZSIgaWQ9ImNsb3NlIj48YSB0aXRsZT0iY2xvc2UgdGhpcyBwb3B1cCAob3IgaGl0IEVzYykiPiYjMjE1OzwvYT48L2Rpdj4gPGgyIGNsYXNzPSJoYW5kbGUiPldoaWNoIHJldmlldyBjb21tZW50IHRvIGluc2VydD88L2gyPiA8ZGl2IGNsYXNzPSJtYWluIiBpZD0ibWFpbiI+IDxkaXYgY2xhc3M9InBvcHVwLWFjdGl2ZS1wYW5lIj4gPGRpdiBjbGFzcz0idXNlcmluZm8iIGlkPSJ1c2VyaW5mbyI+IDxpbWcgc3JjPSIvL3NzdGF0aWMubmV0L2ltZy9wcm9ncmVzcy1kb3RzLmdpZiIvPiA8L2Rpdj4gPHVsIGNsYXNzPSJhY3Rpb24tbGlzdCI+IDwvdWw+IDwvZGl2PiA8ZGl2IGNsYXNzPSJzaGFyZS10aXAiIGlkPSJyZW1vdGUtcG9wdXAiPiBlbnRlciB1cmwgZm9yIHJlbW90ZSBzb3VyY2Ugb2YgY29tbWVudHMgKHVzZSBpbXBvcnQvZXhwb3J0IHRvIGNyZWF0ZSBqc29ucCkgPGlucHV0IGNsYXNzPSJyZW1vdGV1cmwiIGlkPSJyZW1vdGV1cmwiIHR5cGU9InRleHQiLz4gPGltZyBjbGFzcz0idGhyb2JiZXIiIGlkPSJ0aHJvYmJlcjEiIHNyYz0iLy9zc3RhdGljLm5ldC9pbWcvcHJvZ3Jlc3MtZG90cy5naWYiLz4gPHNwYW4gY2xhc3M9InJlbW90ZWVycm9yIiBpZD0icmVtb3RlZXJyb3IxIj48L3NwYW4+IDxkaXYgY2xhc3M9ImZsb2F0LWxlZnQiPiA8aW5wdXQgdHlwZT0iY2hlY2tib3giIGlkPSJyZW1vdGVhdXRvIi8+IDxsYWJlbCB0aXRsZT0iZ2V0IGZyb20gcmVtb3RlIG9uIGV2ZXJ5IHBhZ2UgcmVmcmVzaCIgZm9yPSJyZW1vdGVhdXRvIj5hdXRvLWdldDwvbGFiZWw+IDwvZGl2PiA8ZGl2IGNsYXNzPSJmbG9hdC1yaWdodCI+IDxhIGNsYXNzPSJyZW1vdGUtZ2V0Ij5nZXQgbm93PC9hPiA8c3BhbiBjbGFzcz0ibHNlcCI+IHwgPC9zcGFuPiA8YSBjbGFzcz0icmVtb3RlLXNhdmUiPnNhdmU8L2E+IDxzcGFuIGNsYXNzPSJsc2VwIj4gfCA8L3NwYW4+IDxhIGNsYXNzPSJyZW1vdGUtY2FuY2VsIj5jYW5jZWw8L2E+IDwvZGl2PiA8L2Rpdj4gPGRpdiBjbGFzcz0ic2hhcmUtdGlwIiBpZD0id2VsY29tZS1wb3B1cCI+IGNvbmZpZ3VyZSAid2VsY29tZSIgbWVzc2FnZSAoZW1wdHk9bm9uZSk6IDxkaXY+IDxpbnB1dCBjbGFzcz0iY3VzdG9td2VsY29tZSIgaWQ9ImN1c3RvbXdlbGNvbWUiIHR5cGU9InRleHQiLz4gPC9kaXY+IDxkaXYgY2xhc3M9ImZsb2F0LXJpZ2h0Ij4gPGEgY2xhc3M9IndlbGNvbWUtZm9yY2UiPmZvcmNlPC9hPiA8c3BhbiBjbGFzcz0ibHNlcCI+IHwgPC9zcGFuPiA8YSBjbGFzcz0id2VsY29tZS1zYXZlIj5zYXZlPC9hPiA8c3BhbiBjbGFzcz0ibHNlcCI+IHwgPC9zcGFuPiA8YSBjbGFzcz0id2VsY29tZS1jYW5jZWwiPmNhbmNlbDwvYT4gPC9kaXY+IDwvZGl2PiA8ZGl2IGNsYXNzPSJwb3B1cC1hY3Rpb25zIj4gPGRpdiBjbGFzcz0iZmxvYXQtbGVmdCBhY3Rpb25zIj4gPGEgdGl0bGU9ImNsb3NlIHRoaXMgcG9wdXAgKG9yIGhpdCBFc2MpIiBjbGFzcz0icG9wdXAtYWN0aW9ucy1jYW5jZWwiPmNhbmNlbDwvYT4gPHNwYW4gY2xhc3M9ImxzZXAiPiB8IDwvc3Bhbj4gPGEgdGl0bGU9InNlZSBpbmZvIGFib3V0IHRoaXMgcG9wdXAiIGNsYXNzPSJwb3B1cC1hY3Rpb25zLWhlbHAiIGhyZWY9Ii8vc3RhY2thcHBzLmNvbS9xLzIxMTYiIHRhcmdldD0iX2JsYW5rIj5pbmZvPC9hPiA8c3BhbiBjbGFzcz0ibHNlcCI+IHwgPC9zcGFuPiA8YSBjbGFzcz0icG9wdXAtYWN0aW9ucy1zZWUiPnNlZS10aHJvdWdoPC9hPiA8c3BhbiBjbGFzcz0ibHNlcCI+IHwgPC9zcGFuPiA8YSB0aXRsZT0icmVzZXQgYW55IGN1c3RvbSBjb21tZW50cyIgY2xhc3M9InBvcHVwLWFjdGlvbnMtcmVzZXQiPnJlc2V0PC9hPiA8c3BhbiBjbGFzcz0ibHNlcCI+IHwgPC9zcGFuPiA8YSB0aXRsZT0idXNlIHRoaXMgdG8gaW1wb3J0L2V4cG9ydCBhbGwgY29tbWVudHMiIGNsYXNzPSJwb3B1cC1hY3Rpb25zLWltcGV4cCI+aW1wb3J0L2V4cG9ydDwvYT4gPHNwYW4gY2xhc3M9ImxzZXAiPiB8IDwvc3Bhbj4gPGEgdGl0bGU9InVzZSB0aGlzIHRvIGhpZGUvc2hvdyBhbGwgY29tbWVudHMiIGNsYXNzPSJwb3B1cC1hY3Rpb25zLXRvZ2dsZWRlc2MiPnNob3cvaGlkZSBkZXNjPC9hPiA8c3BhbiBjbGFzcz0ibHNlcCI+IHwgPC9zcGFuPiA8YSB0aXRsZT0ic2V0dXAgcmVtb3RlIHNvdXJjZSIgY2xhc3M9InBvcHVwLWFjdGlvbnMtcmVtb3RlIj5yZW1vdGU8L2E+IDxpbWcgY2xhc3M9InRocm9iYmVyIiBpZD0idGhyb2JiZXIyInNyYz0iLy9zc3RhdGljLm5ldC9pbWcvcHJvZ3Jlc3MtZG90cy5naWYiLz4gPHNwYW4gY2xhc3M9InJlbW90ZWVycm9yIiBpZD0icmVtb3RlZXJyb3IyIj48L3NwYW4+IDxzcGFuIGNsYXNzPSJsc2VwIj4gfCA8L3NwYW4+IDxhIHRpdGxlPSJjb25maWd1cmUgd2VsY29tZSIgY2xhc3M9InBvcHVwLWFjdGlvbnMtd2VsY29tZSI+d2VsY29tZTwvYT4gPC9kaXY+IDxkaXYgY2xhc3M9ImZsb2F0LXJpZ2h0Ij4gPGlucHV0IGNsYXNzPSJwb3B1cC1zdWJtaXQiIHR5cGU9ImJ1dHRvbiIgZGlzYWJsZWQ9ImRpc2FibGVkIiB2YWx1ZT0iSW5zZXJ0Ij4gPC9kaXY+IDwvZGl2PiA8L2Rpdj4gPC9kaXY+JzsKICAgIHZhciBtZXNzYWdlVGVtcGxhdGUgPSAnPGRpdiBjbGFzcz0iYXV0by1yZXZpZXctY29tbWVudHMgYW5ub3VuY2VtZW50IiBpZD0iYW5ub3VuY2VtZW50Ij4gPHNwYW4gY2xhc3M9Im5vdGlmeS1jbG9zZSI+IDxhIHRpdGxlPSJkaXNtaXNzIHRoaXMgbm90aWZpY2F0aW9uIj54PC9hPiA8L3NwYW4+IDxzdHJvbmc+JFRJVExFJDwvc3Ryb25nPiAkQk9EWSQgPC9kaXY+JzsKICAgIHZhciBvcHRpb25UZW1wbGF0ZSA9ICc8bGk+IDxpbnB1dCBpZD0iY29tbWVudC0kSUQkIiB0eXBlPSJyYWRpbyIgbmFtZT0iY29tbWVudHJldmlldyIvPiA8bGFiZWwgZm9yPSJjb21tZW50LSRJRCQiPiA8c3BhbiBpZD0ibmFtZS0kSUQkIiBjbGFzcz0iYWN0aW9uLW5hbWUiPiROQU1FJDwvc3Bhbj4gPHNwYW4gaWQ9ImRlc2MtJElEJCIgY2xhc3M9ImFjdGlvbi1kZXNjIj4kREVTQ1JJUFRJT04kPC9zcGFuPiA8YnV0dG9uIGNsYXNzPSJxdWljay1pbnNlcnQiIHRpdGxlPSJJbnNlcnQgbm93Ij7ihpM8L2J1dHRvbj4gPC9sYWJlbD4gPC9saT4nOwoKICAgIC8qKgogICAgICogQWxsIHRoZSBkaWZmZXJlbnQgInRhcmdldHMiIGEgY29tbWVudCBjYW4gYmUgcGxhY2VkIG9uLgogICAgICogVGhlIGdpdmVuIHZhbHVlcyBhcmUgdXNlZCBhcyBwcmVmaXhlcyBpbiB0aGUgY29tbWVudCB0aXRsZXMsIHRvIG1ha2UgaXQgZWFzeSBmb3IgdGhlIHVzZXIgdG8gY2hhbmdlIHRoZSB0YXJnZXRzLAogICAgICogYnkgc2ltcGx5IGFkZGluZyB0aGUgcHJlZml4IHRvIHRoZWlyIGNvbW1lbnQgdGl0bGUuCiAgICAgKi8KICAgIHZhciBUYXJnZXQgPSB7CiAgICAgIC8vIEEgcmVndWxhciBleHByZXNzaW9uIHRvIG1hdGNoIHRoZSBwb3NzaWJsZSB0YXJnZXRzIGluIGEgc3RyaW5nLgogICAgICBNQVRDSF9BTEwgOiBuZXcgUmVnRXhwKCAiXFxbKEU/W0FRXXxDKSg/OiwoRT9bQVFdfEMpKSpcXF0iICksCiAgICAgIENsb3N1cmUgOiAiQyIsCiAgICAgIENvbW1lbnRRdWVzdGlvbiA6ICJRIiwKICAgICAgQ29tbWVudEFuc3dlciA6ICJBIiwKICAgICAgRWRpdFN1bW1hcnlBbnN3ZXIgOiAiRUEiLAogICAgICBFZGl0U3VtbWFyeVF1ZXN0aW9uIDogIkVRIgogICAgfTsKCiAgICAvL2RlZmF1bHQgY29tbWVudHMKICAgIHZhciBkZWZhdWx0Y29tbWVudHMgPSBbCiAgICAgeyBUYXJnZXQ6IFsgVGFyZ2V0LkNvbW1lbnRRdWVzdGlvbiBdLCBOYW1lOiAiTW9yZSB0aGFuIG9uZSBxdWVzdGlvbiBhc2tlZCIsIERlc2NyaXB0aW9uOiAnSXQgaXMgcHJlZmVycmVkIGlmIHlvdSBjYW4gcG9zdCBzZXBhcmF0ZSBxdWVzdGlvbnMgaW5zdGVhZCBvZiBjb21iaW5pbmcgeW91ciBxdWVzdGlvbnMgaW50byBvbmUuIFRoYXQgd2F5LCBpdCBoZWxwcyB0aGUgcGVvcGxlIGFuc3dlcmluZyB5b3VyIHF1ZXN0aW9uIGFuZCBhbHNvIG90aGVycyBodW50aW5nIGZvciBhdCBsZWFzdCBvbmUgb2YgeW91ciBxdWVzdGlvbnMuIFRoYW5rcyEnIH0sCiAgICAgeyBUYXJnZXQ6IFsgVGFyZ2V0LkNvbW1lbnRRdWVzdGlvbiBdLCBOYW1lOiAiRHVwbGljYXRlIENsb3N1cmUiLCBEZXNjcmlwdGlvbjogJ1RoaXMgcXVlc3Rpb24gd2lsbCBwcm9iYWJseSBiZSBjbG9zZWQgYXMgYSBkdXBsaWNhdGUgc29vbi4gSWYgdGhlIGFuc3dlcnMgZnJvbSB0aGUgZHVwbGljYXRlcyBkb25cJ3QgZnVsbHkgYWRkcmVzcyB5b3VyIHF1ZXN0aW9uIHBsZWFzZSBlZGl0IGl0IHRvIGluY2x1ZGUgd2h5IGFuZCBmbGFnIHRoaXMgZm9yIHJlLW9wZW5pbmcuIFRoYW5rcyEnIH0sCiAgICAgeyBUYXJnZXQ6IFsgVGFyZ2V0LkNvbW1lbnRBbnN3ZXIgXSwgTmFtZTogIkFuc3dlcnMganVzdCB0byBzYXkgVGhhbmtzISIsIERlc2NyaXB0aW9uOiAnUGxlYXNlIGRvblwndCBhZGQgInRoYW5rcyIgYXMgYW5zd2Vycy4gSW52ZXN0IHNvbWUgdGltZSBpbiB0aGUgc2l0ZSBhbmQgeW91IHdpbGwgZ2FpbiBzdWZmaWNpZW50IDxhIGhyZWY9Ii8vJFNJVEVVUkwkL3ByaXZpbGVnZXMiPnByaXZpbGVnZXM8L2E+IHRvIHVwdm90ZSBhbnN3ZXJzIHlvdSBsaWtlLCB3aGljaCBpcyB0aGUgJFNJVEVOQU1FJCB3YXkgb2Ygc2F5aW5nIHRoYW5rIHlvdS4nIH0sCiAgICAgeyBUYXJnZXQ6IFsgVGFyZ2V0LkNvbW1lbnRBbnN3ZXIgXSwgTmFtZTogIk5vdGhpbmcgYnV0IGEgVVJMIChhbmQgaXNuJ3Qgc3BhbSkiLCBEZXNjcmlwdGlvbjogJ1doaWxzdCB0aGlzIG1heSB0aGVvcmV0aWNhbGx5IGFuc3dlciB0aGUgcXVlc3Rpb24sIDxhIGhyZWY9Ii8vbWV0YS5zdGFja292ZXJmbG93LmNvbS9xLzgyNTkiPml0IHdvdWxkIGJlIHByZWZlcmFibGU8L2E+IHRvIGluY2x1ZGUgdGhlIGVzc2VudGlhbCBwYXJ0cyBvZiB0aGUgYW5zd2VyIGhlcmUsIGFuZCBwcm92aWRlIHRoZSBsaW5rIGZvciByZWZlcmVuY2UuJyB9LAogICAgIHsgVGFyZ2V0OiBbIFRhcmdldC5Db21tZW50QW5zd2VyIF0sIE5hbWU6ICJSZXF1ZXN0cyB0byBPUCBmb3IgZnVydGhlciBpbmZvcm1hdGlvbiIsIERlc2NyaXB0aW9uOiAnVGhpcyBpcyByZWFsbHkgYSBjb21tZW50LCBub3QgYW4gYW5zd2VyLiBXaXRoIGEgYml0IG1vcmUgcmVwLCA8YSBocmVmPSIvLyRTSVRFVVJMJC9wcml2aWxlZ2VzL2NvbW1lbnQiPnlvdSB3aWxsIGJlIGFibGUgdG8gcG9zdCBjb21tZW50czwvYT4uIEZvciB0aGUgbW9tZW50IElcJ3ZlIGFkZGVkIHRoZSBjb21tZW50IGZvciB5b3UsIGFuZCBJXCdtIGZsYWdnaW5nIHRoaXMgcG9zdCBmb3IgZGVsZXRpb24uJyB9LAogICAgIHsgVGFyZ2V0OiBbIFRhcmdldC5Db21tZW50QW5zd2VyIF0sIE5hbWU6ICJPUCB1c2luZyBhbiBhbnN3ZXIgZm9yIGZ1cnRoZXIgaW5mb3JtYXRpb24iLCBEZXNjcmlwdGlvbjogJ1BsZWFzZSB1c2UgdGhlIDxlbT5Qb3N0IGFuc3dlcjwvZW0+IGJ1dHRvbiBvbmx5IGZvciBhY3R1YWwgYW5zd2Vycy4gWW91IHNob3VsZCBtb2RpZnkgeW91ciBvcmlnaW5hbCBxdWVzdGlvbiB0byBhZGQgYWRkaXRpb25hbCBpbmZvcm1hdGlvbi4nIH0sCiAgICAgeyBUYXJnZXQ6IFsgVGFyZ2V0LkNvbW1lbnRBbnN3ZXIgXSwgTmFtZTogIk9QIGFkZGluZyBhIG5ldyBxdWVzdGlvbiBhcyBhbiBhbnN3ZXIiLCBEZXNjcmlwdGlvbjogJ0lmIHlvdSBoYXZlIGFub3RoZXIgcXVlc3Rpb24sIHBsZWFzZSBhc2sgaXQgYnkgY2xpY2tpbmcgdGhlIDxhIGhyZWY9Ii8vJFNJVEVVUkwkL3F1ZXN0aW9ucy9hc2siPkFzayBRdWVzdGlvbjwvYT4gYnV0dG9uLicgfSwKICAgICB7IFRhcmdldDogWyBUYXJnZXQuQ29tbWVudEFuc3dlciBdLCBOYW1lOiAiQW5vdGhlciB1c2VyIGFkZGluZyBhICdNZSB0b28hJyIsIERlc2NyaXB0aW9uOiAnSWYgeW91IGhhdmUgYSBORVcgcXVlc3Rpb24sIHBsZWFzZSBhc2sgaXQgYnkgY2xpY2tpbmcgdGhlIDxhIGhyZWY9Ii8vJFNJVEVVUkwkL3F1ZXN0aW9ucy9hc2siPkFzayBRdWVzdGlvbjwvYT4gYnV0dG9uLiBJZiB5b3UgaGF2ZSBzdWZmaWNpZW50IHJlcHV0YXRpb24sIDxhIGhyZWY9Ii8vJFNJVEVVUkwkL3ByaXZpbGVnZXMvdm90ZS11cCI+eW91IG1heSB1cHZvdGU8L2E+IHRoZSBxdWVzdGlvbi4gQWx0ZXJuYXRpdmVseSwgInN0YXIiIGl0IGFzIGEgZmF2b3JpdGUgYW5kIHlvdSB3aWxsIGJlIG5vdGlmaWVkIG9mIGFueSBuZXcgYW5zd2Vycy4nIH0sCiAgICAgeyBUYXJnZXQ6IFsgVGFyZ2V0LkNsb3N1cmUgXSwgTmFtZTogIlRvbyBsb2NhbGl6ZWQiLCBEZXNjcmlwdGlvbjogJ1RoaXMgcXVlc3Rpb24gYXBwZWFycyB0byBiZSBvZmYtdG9waWMgYmVjYXVzZSBpdCBpcyB0b28gbG9jYWxpemVkLicgfSwKICAgICB7IFRhcmdldDogWyBUYXJnZXQuRWRpdFN1bW1hcnlRdWVzdGlvbiBdLCBOYW1lOiAiSW1wcm9wZXIgdGFnZ2luZyIsIERlc2NyaXB0aW9uOiAnVGhlIHRhZ3MgeW91IHdlcmUgdXNpbmcgYXJlIG5vdCBhcHByb3ByaWF0ZSBmb3IgdGhpcyBxdWVzdGlvbi4gUGxlYXNlIHJldmlldyA8YSBocmVmPSIvLyRTSVRFVVJMJC9oZWxwL3RhZ2dpbmciPldoYXQgYXJlIHRhZ3MsIGFuZCBob3cgc2hvdWxkIEkgdXNlIHRoZW0/PC9hPicgfQogICAgXTsKCiAgICB2YXIgd2Vla2RheV9uYW1lID0gWyJTdW5kYXkiLCAiTW9uZGF5IiwgIlR1ZXNkYXkiLCAiV2VkbmVzZGF5IiwgIlRodXJzZGF5IiwgIkZyaWRheSIsICJTYXR1cmRheSJdOwogICAgdmFyIG1pbnV0ZSA9IDYwLCBob3VyID0gMzYwMCwgZGF5ID0gODY0MDAsIHNpeGRheXMgPSA1MTg0MDAsIHdlZWsgPSA2MDQ4MDAsIG1vbnRoID0gMjU5MjAwMCwgeWVhciA9IDMxNTM2MDAwOwoKICAgIC8vV3JhcCBsb2NhbCBzdG9yYWdlIGFjY2VzcyBzbyB0aGF0IHdlIGF2b2lkIGNvbGxpc2lvbnMgd2l0aCBvdGhlciBzY3JpcHRzCiAgICBmdW5jdGlvbiBHZXRTdG9yYWdlKGtleSkgeyByZXR1cm4gbG9jYWxTdG9yYWdlW3ByZWZpeCArIGtleV07IH0KICAgIGZ1bmN0aW9uIFNldFN0b3JhZ2Uoa2V5LCB2YWwpIHsgbG9jYWxTdG9yYWdlW3ByZWZpeCArIGtleV0gPSB2YWw7IH0KICAgIGZ1bmN0aW9uIFJlbW92ZVN0b3JhZ2Uoa2V5KSB7IGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKHByZWZpeCArIGtleSk7IH0KICAgIGZ1bmN0aW9uIENsZWFyU3RvcmFnZShzdGFydHNXaXRoKSB7CiAgICAgIGZvcih2YXIgaSA9IGxvY2FsU3RvcmFnZS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgIHZhciBrZXkgPSBsb2NhbFN0b3JhZ2Uua2V5KGkpOwogICAgICAgIGlmKGtleS5pbmRleE9mKHByZWZpeCArIHN0YXJ0c1dpdGgpID09IDApIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKGtleSk7CiAgICAgIH0KICAgIH0KCiAgICAvL0NhbGN1bGF0ZSBhbmQgZm9ybWF0IGRhdGVzcGFuIGZvciAiTWVtYmVyIHNpbmNlL2ZvciIKICAgIGZ1bmN0aW9uIGRhdGVzcGFuKGRhdGUpIHsKICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCkgLyAxMDAwOwogICAgICB2YXIgdGhlbiA9IG5ldyBEYXRlKGRhdGUgKiAxMDAwKTsKICAgICAgdmFyIHRvZGF5ID0gbmV3IERhdGUoKS5zZXRIb3VycygwLCAwLCAwKSAvIDEwMDA7CiAgICAgIHZhciBub3dzZWNvbmRzID0gbm93IC0gdG9kYXk7CiAgICAgIHZhciBlbGFwc2VkU2Vjb25kcyA9IG5vdyAtIGRhdGU7CiAgICAgIHZhciBzdHJvdXQgPSAiIjsKICAgICAgaWYoZWxhcHNlZFNlY29uZHMgPCBub3dzZWNvbmRzKSBzdHJvdXQgPSAic2luY2UgdG9kYXkiOwogICAgICBlbHNlIGlmKGVsYXBzZWRTZWNvbmRzIDwgZGF5ICsgbm93c2Vjb25kcykgc3Ryb3V0ID0gInNpbmNlIHllc3RlcmRheSI7CiAgICAgIGVsc2UgaWYoZWxhcHNlZFNlY29uZHMgPCBzaXhkYXlzKSBzdHJvdXQgPSAic2luY2UgIiArIHdlZWtkYXlfbmFtZVt0aGVuLmdldERheSgpXTsKICAgICAgZWxzZSBpZihlbGFwc2VkU2Vjb25kcyA+IHllYXIpIHsKICAgICAgICBzdHJvdXQgPSAiZm9yICIgKyBNYXRoLnJvdW5kKChlbGFwc2VkU2Vjb25kcykgLyB5ZWFyKSArICIgeWVhcnMiOwogICAgICAgIGlmKCgoZWxhcHNlZFNlY29uZHMpICUgeWVhcikgPiBtb250aCkgc3Ryb3V0ICs9ICIsICIgKyBNYXRoLnJvdW5kKCgoZWxhcHNlZFNlY29uZHMpICUgeWVhcikgLyBtb250aCkgKyAiIG1vbnRocyI7CiAgICAgIH0KICAgICAgZWxzZSBpZihlbGFwc2VkU2Vjb25kcyA+IG1vbnRoKSB7CiAgICAgICAgc3Ryb3V0ID0gImZvciAiICsgTWF0aC5yb3VuZCgoZWxhcHNlZFNlY29uZHMpIC8gbW9udGgpICsgIiBtb250aHMiOwogICAgICAgIGlmKCgoZWxhcHNlZFNlY29uZHMpICUgbW9udGgpID4gd2Vlaykgc3Ryb3V0ICs9ICIsICIgKyBNYXRoLnJvdW5kKCgoZWxhcHNlZFNlY29uZHMpICUgbW9udGgpIC8gd2VlaykgKyAiIHdlZWtzIjsKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICBzdHJvdXQgPSAiZm9yICIgKyBNYXRoLnJvdW5kKChlbGFwc2VkU2Vjb25kcykgLyB3ZWVrKSArICIgd2Vla3MiOwogICAgICB9CiAgICAgIHJldHVybiBzdHJvdXQ7CiAgICB9CgogICAgLy9DYWxjdWxhdGUgYW5kIGZvcm1hdCBkYXRlc3BhbiBmb3IgIkxhc3Qgc2VlbiIKICAgIGZ1bmN0aW9uIGxhc3RzZWVuKGRhdGUpIHsKICAgICAgdmFyIG5vdyA9IG5ldyBEYXRlKCkgLyAxMDAwOwogICAgICB2YXIgdG9kYXkgPSBuZXcgRGF0ZSgpLnNldEhvdXJzKDAsIDAsIDApIC8gMTAwMDsKICAgICAgdmFyIG5vd3NlY29uZHMgPSBub3cgLSB0b2RheTsKICAgICAgdmFyIGVsYXBzZWRTZWNvbmRzID0gbm93IC0gZGF0ZTsKICAgICAgaWYoZWxhcHNlZFNlY29uZHMgPCBtaW51dGUpIHJldHVybiAoTWF0aC5yb3VuZChlbGFwc2VkU2Vjb25kcykgKyAiIHNlY29uZHMgYWdvIik7CiAgICAgIGlmKGVsYXBzZWRTZWNvbmRzIDwgaG91cikgcmV0dXJuIChNYXRoLnJvdW5kKChlbGFwc2VkU2Vjb25kcykgLyBtaW51dGUpICsgIiBtaW51dGVzIGFnbyIpOwogICAgICBpZihlbGFwc2VkU2Vjb25kcyA8IG5vd3NlY29uZHMpIHJldHVybiAoTWF0aC5yb3VuZCgoZWxhcHNlZFNlY29uZHMpIC8gaG91cikgKyAiIGhvdXJzIGFnbyIpOwogICAgICBpZihlbGFwc2VkU2Vjb25kcyA8IGRheSArIG5vd3NlY29uZHMpIHJldHVybiAoInllc3RlcmRheSIpOwogICAgICB2YXIgdGhlbiA9IG5ldyBEYXRlKGRhdGUgKiAxMDAwKTsKICAgICAgaWYoZWxhcHNlZFNlY29uZHMgPCBzaXhkYXlzKSByZXR1cm4gKCJvbiAiICsgd2Vla2RheV9uYW1lW3RoZW4uZ2V0RGF5KCldKTsKICAgICAgcmV0dXJuIHRoZW4udG9EYXRlU3RyaW5nKCk7CiAgICB9CgogICAgLy9Gb3JtYXQgcmVwdXRhdGlvbiBzdHJpbmcKICAgIGZ1bmN0aW9uIHJlcE51bWJlcihyKSB7CiAgICAgIGlmKHIgPCAxRTQpIHJldHVybiByOwogICAgICBlbHNlIGlmKHIgPCAxRTUpIHsKICAgICAgICB2YXIgZCA9IE1hdGguZmxvb3IoTWF0aC5yb3VuZChyIC8gMTAwKSAvIDEwKTsKICAgICAgICByID0gTWF0aC5yb3VuZCgociAtIGQgKiAxRTMpIC8gMTAwKTsKICAgICAgICByZXR1cm4gZCArIChyID4gMCA/ICIuIiArIHIgOiAiIikgKyAiayIKICAgICAgfQogICAgICBlbHNlIHJldHVybiBNYXRoLnJvdW5kKHIgLyAxRTMpICsgImsiCiAgICB9CgogICAgLy8gR2V0IHRoZSBJZCBvZiB0aGUgbG9nZ2VkLWluIHVzZXIKICAgIGZ1bmN0aW9uIGdldExvZ2dlZEluVXNlcklkKCkgewogICAgICB2YXIgcHJvZmlsZU1lRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3Byb2ZpbGUtbWUnKTsKICAgICAgaWYgKCBwcm9maWxlTWVFbGVtZW50Lmxlbmd0aCAmJiBwcm9maWxlTWVFbGVtZW50WzBdLmhyZWYubWF0Y2goL1wvdXNlcnNcLyhcZCspXC8uKi9pKSApIHsKICAgICAgICByZXR1cm4gUmVnRXhwLiQxOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiAnJzsKICAgICAgfQogICAgfQoKICAgIC8vR2V0IHVzZXJJZCBmb3IgcG9zdAogICAgZnVuY3Rpb24gZ2V0VXNlcklkKGVsKSB7CiAgICAgIC8vIGEgYml0IGNvbXBsaWNhdGVkLCBidXQgd2UgaGF2ZSB0byBhdm9pZCBlZGl0cyAoOmxhc3QpLCBub3QgdHJpcCBvbiBDVyBxdWVzdGlvbnMgKDpub3QoW2lkXSkpLCBhbmQgbm90IGJ1YmJsZQogICAgICAvLyAgb3V0IG9mIHBvc3Qgc2NvcGUgZm9yIGRlbGV0ZWQgdXNlcnMgKGZpcnN0KCkpLgogICAgICB2YXIgdXNlcmxpbmsgPSBlbC5wYXJlbnRzKCdkaXYnKS5maW5kKCcucG9zdC1zaWduYXR1cmU6bGFzdCcpLmZpcnN0KCkuZmluZCgnLnVzZXItZGV0YWlscyA+IGE6bm90KFtpZF0pJyk7CiAgICAgIGlmKHVzZXJsaW5rLmxlbmd0aCkgcmV0dXJuIHVzZXJsaW5rLmF0dHIoJ2hyZWYnKS5zcGxpdCgnLycpWzJdOwogICAgICByZXR1cm4gIltOVUxMXSI7CiAgICB9CiAgICBmdW5jdGlvbiBpc05ld1VzZXIoZGF0ZSkgewogICAgICByZXR1cm4gKG5ldyBEYXRlKCkgLyAxMDAwKSAtIGRhdGUgPCB3ZWVrCiAgICB9CiAgICBmdW5jdGlvbiBnZXRPUCgpIHsKICAgICAgdmFyIHVzZXJsaW5rID0gJCgnI3F1ZXN0aW9uJykuZmluZCgnLm93bmVyJykuZmluZCgnLnVzZXItZGV0YWlscyA+IGE6bm90KFtpZF0pJyk7CiAgICAgIGlmKHVzZXJsaW5rLmxlbmd0aCkgcmV0dXJuIHVzZXJsaW5rLnRleHQoKTsKICAgICAgdmFyIHVzZXIgPSAkKCcjcXVlc3Rpb24nKS5maW5kKCcub3duZXInKS5maW5kKCcudXNlci1kZXRhaWxzJyk7IC8vZm9yIGRlbGV0ZWQgdXNlcnMKICAgICAgaWYodXNlci5sZW5ndGgpIHJldHVybiB1c2VyLnRleHQoKTsKICAgICAgcmV0dXJuICJbTlVMTF0iOwogICAgfQoKICAgIC8vQWpheCB0byBTdGFjayBFeGNoYW5nZSBhcGkgdG8gZ2V0IGJhc2ljIHVzZXIgaW5mbywgYW5kIHBhc3RlIGludG8gdXNlcmluZm8gZWxlbWVudAogICAgLy9odHRwOi8vc29hcGkuaW5mby9jb2RlL2pzL3N0YWJsZS9zb2FwaS1leHBsb3JlLWJldGEuaHRtCiAgICBmdW5jdGlvbiBnZXRVc2VySW5mbyh1c2VyaWQsIGNvbnRhaW5lcikgewogICAgICB2YXIgdXNlcmluZm8gPSBjb250YWluZXIuZmluZCgnI3VzZXJpbmZvJyk7CiAgICAgIGlmKGlzTmFOKHVzZXJpZCkpIHsKICAgICAgICB1c2VyaW5mby5mYWRlT3V0QW5kUmVtb3ZlKCk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgICQuYWpheCh7CiAgICAgICAgdHlwZTogIkdFVCIsCiAgICAgICAgdXJsOiAnLy9hcGkuc3RhY2tleGNoYW5nZS5jb20vMi4yL3VzZXJzLycgKyB1c2VyaWQgKyAnP3NpdGU9JyArIHNpdGV1cmwgKyAnJmpzb25wPT8nLAogICAgICAgIGRhdGFUeXBlOiAianNvbnAiLAogICAgICAgIHRpbWVvdXQ6IDIwMDAsCiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgIGlmKGRhdGFbJ2l0ZW1zJ10ubGVuZ3RoID4gMCkgewogICAgICAgICAgICB2YXIgdXNlciA9IGRhdGFbJ2l0ZW1zJ11bMF07CiAgICAgICAgICAgIGlmKGlzTmV3VXNlcih1c2VyWydjcmVhdGlvbl9kYXRlJ10pKSB7CiAgICAgICAgICAgICAgc2hvd0dyZWV0aW5nID0gdHJ1ZTsKICAgICAgICAgICAgICBjb250YWluZXIuZmluZCgnLmFjdGlvbi1kZXNjJykucHJlcGVuZChncmVldGluZyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdXNlcm5hbWUgPSB1c2VyWydkaXNwbGF5X25hbWUnXTsKICAgICAgICAgICAgdmFyIHVzZXJ0eXBlID0gdXNlclsndXNlcl90eXBlJ10uY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyB1c2VyWyd1c2VyX3R5cGUnXS5zbGljZSgxKTsKICAgICAgICAgICAgdmFyIGh0bWwgPSB1c2VydHlwZSArICcgdXNlciA8c3Ryb25nPjxhIGhyZWY9Ii91c2Vycy8nICsgdXNlcmlkICsgJyIgdGFyZ2V0PSJfYmxhbmsiPicgKyB1c2VybmFtZSArICc8L2E+PC9zdHJvbmc+LCAgICAgXAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVtYmVyIDxzdHJvbmc+JyArIGRhdGVzcGFuKHVzZXJbJ2NyZWF0aW9uX2RhdGUnXSkgKyAnPC9zdHJvbmc+LCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYXN0IHNlZW4gPHN0cm9uZz4nICsgbGFzdHNlZW4odXNlclsnbGFzdF9hY2Nlc3NfZGF0ZSddKSArICc8L3N0cm9uZz4sICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcHV0YXRpb24gPHN0cm9uZz4nICsgcmVwTnVtYmVyKHVzZXJbJ3JlcHV0YXRpb24nXSkgKyAnPC9zdHJvbmc+JzsKCiAgICAgICAgICAgIHVzZXJpbmZvLmh0bWwoaHRtbC5yZXBsYWNlKC8gKy9nLCAnICcpKTsKICAgICAgICAgIH0KICAgICAgICAgIGVsc2UgdXNlcmluZm8uZmFkZU91dEFuZFJlbW92ZSgpOwogICAgICAgIH0sCiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICgpIHsgdXNlcmluZm8uZmFkZU91dEFuZFJlbW92ZSgpOyB9CiAgICAgIH0pOwogICAgfQoKICAgIC8vU2hvdyB0ZXh0YXJlYSBpbiBmcm9udCBvZiBwb3B1cCB0byBpbXBvcnQvZXhwb3J0IGFsbCBjb21tZW50cyAoZm9yIG90aGVyIHNpdGVzIG9yIGZvciBwb3N0aW5nIHNvbWV3aGVyZSkKICAgIGZ1bmN0aW9uIEltcG9ydEV4cG9ydChwb3B1cCkgewogICAgICB2YXIgdG9oaWRlID0gcG9wdXAuZmluZCgnI21haW4nKTsKICAgICAgdmFyIGRpdiA9ICQoJzxkaXY+PHRleHRhcmVhLz48ZGl2IGNsYXNzPSJhY3Rpb25zIj48YSBjbGFzcz0ianNvbnAiPmpzb25wPC9hPjxzcGFuIGNsYXNzPSJsc2VwIj4gfCA8L3NwYW4+PGEgY2xhc3M9InNhdmUiPnNhdmU8L2E+PHNwYW4gY2xhc3M9ImxzZXAiPiB8IDwvc3Bhbj48YSBjbGFzcz0iY2FuY2VsIj5jYW5jZWw8L2E+PC9kaXY+PC9kaXY+Jyk7CiAgICAgIC8vUGFpbmZ1bCwgYnV0IHNob3J0ZXN0IHdheSBJJ3ZlIGZvdW5kIHRvIHBvc2l0aW9uIGRpdiBvdmVyIHRoZSB0b2hpZGUgZWxlbWVudAogICAgICBkaXYuY3NzKHsgcG9zaXRpb246ICdhYnNvbHV0ZScsIGxlZnQ6IHRvaGlkZS5wb3NpdGlvbigpLmxlZnQsIHRvcDogdG9oaWRlLnBvc2l0aW9uKCkudG9wLAogICAgICAgIHdpZHRoOiB0b2hpZGUuY3NzKCd3aWR0aCcpLCBoZWlnaHQ6IHRvaGlkZS5jc3MoJ2hlaWdodCcpLCBiYWNrZ3JvdW5kOiAnd2hpdGUnCiAgICAgIH0pOwoKICAgICAgdmFyIHR4dCA9ICcnOwogICAgICBmb3IodmFyIGkgPSAwOyBpIDwgR2V0U3RvcmFnZSgiY29tbWVudGNvdW50Iik7IGkrKykgewogICAgICAgIHZhciBuYW1lID0gR2V0U3RvcmFnZSgnbmFtZS0nICsgaSk7CiAgICAgICAgdmFyIGRlc2MgPSBHZXRTdG9yYWdlKCdkZXNjLScgKyBpKTsKICAgICAgICB0eHQgKz0gJyMjIycgKyBuYW1lICsgJ1xuJyArIGh0bWxUb01hcmtEb3duKGRlc2MpICsgJ1xuXG4nOyAvL3RoZSBsZWFkaW5nICMjIyBtYWtlcyBwcmV0dGllciBpZiBwYXN0aW5nIHRvIG1hcmtkb3duLCBhbmQgZGlmZmVyZW50aWF0ZXMgbmFtZXMgZnJvbSBkZXNjcmlwdGlvbnMKICAgICAgfQoKICAgICAgZGl2LmZpbmQoJ3RleHRhcmVhJykudmFsKHR4dCk7CiAgICAgIGRpdi5maW5kKCcuanNvbnAnKS5jbGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHR4dCA9ICdjYWxsYmFjayhcbltcbic7CiAgICAgICAgZm9yKHZhciBpID0gMDsgaSA8IEdldFN0b3JhZ2UoImNvbW1lbnRjb3VudCIpOyBpKyspIHsKICAgICAgICAgIHR4dCArPSAneyAibmFtZSI6ICInICsgR2V0U3RvcmFnZSgnbmFtZS0nICsgaSkgKyAnIiwgImRlc2NyaXB0aW9uIjogIicgKyBHZXRTdG9yYWdlKCdkZXNjLScgKyBpKS5yZXBsYWNlKC8iL2csICdcXCInKSArICcifSxcblxuJzsKICAgICAgICB9CiAgICAgICAgZGl2LmZpbmQoJ3RleHRhcmVhJykudmFsKHR4dCArICddXG4pJyk7CiAgICAgICAgZGl2LmZpbmQoJ2E6bHQoMiknKS5yZW1vdmUoKTsgZGl2LmZpbmQoJy5sc2VwOmx0KDIpJykucmVtb3ZlKCk7CiAgICAgIH0pOwogICAgICBkaXYuZmluZCgnLmNhbmNlbCcpLmNsaWNrKGZ1bmN0aW9uICgpIHsgZGl2LmZhZGVPdXRBbmRSZW1vdmUoKTsgfSk7CiAgICAgIGRpdi5maW5kKCcuc2F2ZScpLmNsaWNrKGZ1bmN0aW9uICgpIHsgRG9JbXBvcnQoZGl2LmZpbmQoJ3RleHRhcmVhJykudmFsKCkpOyBXcml0ZUNvbW1lbnRzKHBvcHVwKTsgZGl2LmZhZGVPdXRBbmRSZW1vdmUoKTsgfSk7CgogICAgICBwb3B1cC5hcHBlbmQoZGl2KTsKICAgIH0KCiAgICAvL0ltcG9ydCBjb21wbGV0ZSB0ZXh0IGludG8gY29tbWVudHMKICAgIGZ1bmN0aW9uIERvSW1wb3J0KHRleHQpIHsKICAgICAgLy9jbGVhciBvdXQgYW55IGV4aXN0aW5nIHN0dWZmCiAgICAgIENsZWFyU3RvcmFnZSgibmFtZS0iKTsgQ2xlYXJTdG9yYWdlKCJkZXNjLSIpOwogICAgICB2YXIgYXJyID0gdGV4dC5zcGxpdCgnXG4nKTsKICAgICAgdmFyIG5hbWVJbmRleCA9IDAsIGRlc2NJbmRleCA9IDA7CiAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBhcnIubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgbGluZSA9ICQudHJpbShhcnJbaV0pOwogICAgICAgIGlmKGxpbmUuaW5kZXhPZignIycpID09IDApIHsKICAgICAgICAgIHZhciBuYW1lID0gbGluZS5yZXBsYWNlKC9eIysvZywgJycpOwogICAgICAgICAgU2V0U3RvcmFnZSgnbmFtZS0nICsgbmFtZUluZGV4LCBuYW1lKTsKICAgICAgICAgIG5hbWVJbmRleCsrOwogICAgICAgIH0KICAgICAgICBlbHNlIGlmKGxpbmUubGVuZ3RoID4gMCkgewogICAgICAgICAgdmFyIGRlc2MgPSBtYXJrRG93blRvSHRtbChsaW5lKTsKICAgICAgICAgIFNldFN0b3JhZ2UoJ2Rlc2MtJyArIGRlc2NJbmRleCwgVGFnKGRlc2MpKTsKICAgICAgICAgIGRlc2NJbmRleCsrOwogICAgICAgIH0KICAgICAgfQogICAgICAvL1RoaXMgaXMgZGUtbm9ybWFsaXNlZCwgYnV0IEkgZG9uJ3QgY2FyZS4KICAgICAgU2V0U3RvcmFnZSgiY29tbWVudGNvdW50IiwgTWF0aC5taW4obmFtZUluZGV4LCBkZXNjSW5kZXgpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBodG1sVG9NYXJrRG93bihodG1sKSB7CiAgICAgIG1hcmtkb3duID0gaHRtbC5yZXBsYWNlKC88YSBocmVmPSIoLis/KSI+KC4rPyk8XC9hPi9nLCAnWyQyXSgkMSknKS5yZXBsYWNlKC8mYW1wOy9nLCAnJicpOwogICAgICByZXR1cm4gbWFya2Rvd24ucmVwbGFjZSgvPGVtPiguKz8pPFwvZW0+L2csICcqJDEqJykucmVwbGFjZSgvPHN0cm9uZz4oLis/KTxcL3N0cm9uZz4vZywgJyoqJDEqKicpOwogICAgfQoKICAgIGZ1bmN0aW9uIG1hcmtEb3duVG9IdG1sKG1hcmtkb3duKSB7CiAgICAgIGh0bWwgPSBtYXJrZG93bi5yZXBsYWNlKC9cWyhbXlxdXSspXF1cKCguKz8pXCkvZywgJzxhIGhyZWY9IiQyIj4kMTwvYT4nKTsKICAgICAgcmV0dXJuIGh0bWwucmVwbGFjZSgvXCpcKiguKz8pXCpcKi9nLCAnPHN0cm9uZz4kMTwvc3Ryb25nPicpLnJlcGxhY2UoL1wqKFteYF0rPylcKi9nLCAnPGVtPiQxPC9lbT4nKTsKICAgIH0KCiAgICBmdW5jdGlvbiBVblRhZyh0ZXh0KSB7CiAgICAgIHJldHVybiB0ZXh0LnJlcGxhY2UoL1wkU0lURU5BTUVcJC9nLCBzaXRlbmFtZSkucmVwbGFjZSgvXCRTSVRFVVJMXCQvZywgc2l0ZXVybCkucmVwbGFjZSgvXCRNWVVTRVJJRFwkL2csIG15dXNlcmlkKTsKICAgIH0KCiAgICBmdW5jdGlvbiBUYWcoaHRtbCkgewogICAgICAvL3B1dCB0YWdzIGJhY2sgaW4KICAgICAgdmFyIHJlZ25hbWUgPSBuZXcgUmVnRXhwKHNpdGVuYW1lLCAiZyIpLCByZWd1cmwgPSBuZXcgUmVnRXhwKCcvLycgKyBzaXRldXJsLCAiZyIpLCByZWd1aWQgPSBuZXcgUmVnRXhwKCcvJyArIG15dXNlcmlkICsgJ1spXScsICJnIik7CiAgICAgIHJldHVybiBodG1sLnJlcGxhY2UocmVnbmFtZSwgJyRTSVRFTkFNRSQnKS5yZXBsYWNlKHJlZ3VybCwgJy8vJFNJVEVVUkwkJykucmVwbGFjZShyZWd1aWQsICcvJE1ZVVNFUklEJCknKTsKICAgIH0KCiAgICAvL1JlcGxhY2UgY29udGVudHMgb2YgZWxlbWVudCB3aXRoIGEgdGV4dGFyZWEgKGNvbnRhaW5pbmcgbWFya2Rvd24gb2YgY29udGVudHMpLCBhbmQgc2F2ZS9jYW5jZWwgYnV0dG9ucwogICAgZnVuY3Rpb24gVG9FZGl0YWJsZShwb3B1cCwgZWwpIHsKICAgICAgdmFyIGJhY2t1cCA9IGVsLmh0bWwoKTsKICAgICAgdmFyIGh0bWwgPSBUYWcoZWwuaHRtbCgpLnJlcGxhY2UoZ3JlZXRpbmcsICcnKSk7ICAvL3JlbW92ZSBncmVldGluZyBiZWZvcmUgZWRpdGluZy4uCiAgICAgIGlmKGh0bWwuaW5kZXhPZignPHRleHRhcmVhJykgPiAtMSkgcmV0dXJuOyAvL2Rvbid0IHdhbnQgdG8gY3JlYXRlIGEgbmV3IHRleHRhcmVhIGluc2lkZSB0aGlzIG9uZSEKICAgICAgdmFyIHR4dCA9ICQoJzx0ZXh0YXJlYSAvPicpLnZhbChodG1sVG9NYXJrRG93bihodG1sKSk7CgogICAgICAvLyBEaXNhYmxlIHF1aWNrLWluc2VydCB3aGlsZSBlZGl0aW5nLgogICAgICBlbC5zaWJsaW5ncygiLnF1aWNrLWluc2VydCIpLmhpZGUoKTsKICAgICAgLy8gRGlzYWJsZSBpbnNlcnQgd2hpbGUgZWRpdGluZy4KICAgICAgJCgiLnBvcHVwLXN1Ym1pdCIsIHBvcHVwKS5wcm9wKCJkaXNhYmxlZCIsIHRydWUpOwoKICAgICAgQm9ya0ZvcihlbCk7IC8vdGhpcyBpcyBhIGhhY2sKICAgICAgLy9zYXZlL2NhbmNlbCBsaW5rcyB0byBhZGQgdG8gdGV4dGFyZWEKICAgICAgdmFyIGFjdGlvbnMgPSAkKCc8ZGl2IGNsYXNzPSJhY3Rpb25zIj4nKTsKICAgICAgdmFyIGNvbW1hbmRzID0gJCgnPGE+c2F2ZTwvYT4nKS5jbGljayhmdW5jdGlvbiAoKSB7IFNhdmVFZGl0YWJsZSgkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpKTsgVW5ib3JrRm9yKGVsKTsgfSkKICAgICAgICAgICAgICAgICAgICAgIC5hZGQoJzxzcGFuIGNsYXNzPSJsc2VwIj4gfCA8L3NwYW4+JykKICAgICAgICAgICAgICAgICAgICAgIC5hZGQoJCgnPGE+Y2FuY2VsPC9hPicpLmNsaWNrKGZ1bmN0aW9uICgpIHsgZWwuc2libGluZ3MoIi5xdWljay1pbnNlcnQiKS5zaG93KCk7ICQoIi5wb3B1cC1zdWJtaXQiLCBwb3B1cCkucHJvcCgiZGlzYWJsZWQiLCBmYWxzZSk7IENhbmNlbEVkaXRhYmxlKCQodGhpcykucGFyZW50KCkucGFyZW50KCksIGJhY2t1cCk7IFVuYm9ya0ZvcihlbCk7IH0pKTsKICAgICAgYWN0aW9ucy5hcHBlbmQoY29tbWFuZHMpOwoKICAgICAgLy9zZXQgY29udGVudHMgb2YgZWxlbWVudCB0byB0ZXh0YXJlYSB3aXRoIGxpbmtzCiAgICAgIGVsLmh0bWwodHh0LmFkZChhY3Rpb25zKSk7CiAgICB9CgogICAgLy9UaGlzIGlzIHRvIHN0b3AgdGhlIGlucHV0IHBpbmNoaW5nIGZvY3VzIHdoZW4gSSBjbGljayBpbnNpZGUgdGV4dGFyZWEKICAgIC8vQ291bGQgaGF2ZSBkb25lIHNvbWV0aGluZyBjbGV2ZXIgd2l0aCBjb250ZW50RWRpdGFibGUsIGJ1dCB0aGlzIGlzIGV2aWwsIGFuZCBpdCBhbm5veXMgWWkgOlAKICAgIGZ1bmN0aW9uIEJvcmtGb3IoZWwpIHsKICAgICAgdmFyIGxhYmVsID0gZWwucGFyZW50KCdsYWJlbCcpOwogICAgICBsYWJlbC5hdHRyKCdmb3InLCAnYm9ya2VuJyk7CiAgICB9CiAgICBmdW5jdGlvbiBVbmJvcmtGb3IoZWwpIHsKICAgICAgdmFyIGxhYmVsID0gZWwucGFyZW50KCdsYWJlbCcpOwogICAgICBsYWJlbC5hdHRyKCdmb3InLCBsYWJlbC5wcmV2KCkuYXR0cignaWQnKSk7CiAgICB9CiAgICAvL1NhdmUgdGV4dGFyZWEgY29udGVudHMsIHJlcGxhY2UgZWxlbWVudCBodG1sIHdpdGggbmV3IGVkaXRlZCBjb250ZW50CiAgICBmdW5jdGlvbiBTYXZlRWRpdGFibGUoZWwpIHsKICAgICAgdmFyIGh0bWwgPSBtYXJrRG93blRvSHRtbChlbC5maW5kKCd0ZXh0YXJlYScpLnZhbCgpKTsKICAgICAgU2V0U3RvcmFnZShlbC5hdHRyKCdpZCcpLCBUYWcoaHRtbCkpOwogICAgICBlbC5odG1sKChzaG93R3JlZXRpbmcgPyBncmVldGluZyA6ICIiKSArIFVuVGFnKGh0bWwpKTsKICAgIH0KCiAgICBmdW5jdGlvbiBDYW5jZWxFZGl0YWJsZShlbCwgYmFja3VwKSB7CiAgICAgIGVsLmh0bWwoYmFja3VwKTsKICAgIH0KCiAgICAvL0VtcHR5IGFsbCBjdXN0b20gY29tbWVudHMgZnJvbSBzdG9yYWdlIGFuZCByZXdyaXRlIHRvIHVpCiAgICBmdW5jdGlvbiBSZXNldENvbW1lbnRzKCkgewogICAgICBDbGVhclN0b3JhZ2UoIm5hbWUtIik7IENsZWFyU3RvcmFnZSgiZGVzYy0iKTsKICAgICAgJC5lYWNoKGRlZmF1bHRjb21tZW50cywgZnVuY3Rpb24gKGluZGV4LCB2YWx1ZSkgewogICAgICAgIHZhciB0YXJnZXRzUHJlZml4ID0gIiI7CiAgICAgICAgaWYoIHZhbHVlLlRhcmdldCApIHsKICAgICAgICAgIHZhciB0YXJnZXRzID0gdmFsdWUuVGFyZ2V0LmpvaW4oIiwiKTsKICAgICAgICAgIHRhcmdldHNQcmVmaXggPSAiWyIgKyB0YXJnZXRzICsgIl0gIjsKICAgICAgICB9CiAgICAgICAgU2V0U3RvcmFnZSgnbmFtZS0nICsgaW5kZXgsIHRhcmdldHNQcmVmaXggKyB2YWx1ZVsiTmFtZSJdKTsKICAgICAgICBTZXRTdG9yYWdlKCdkZXNjLScgKyBpbmRleCwgdmFsdWVbIkRlc2NyaXB0aW9uIl0pOwogICAgICB9KTsKICAgICAgU2V0U3RvcmFnZSgiY29tbWVudGNvdW50IiwgZGVmYXVsdGNvbW1lbnRzLmxlbmd0aCk7CiAgICB9CgogICAgLy9yZXdyaXRlIGFsbCBjb21tZW50cyB0byB1aSAodHlwaWNhbGx5IGFmdGVyIGltcG9ydCBvciByZXNldCkKICAgIGZ1bmN0aW9uIFdyaXRlQ29tbWVudHMocG9wdXApIHsKICAgICAgaWYoIUdldFN0b3JhZ2UoImNvbW1lbnRjb3VudCIpKSBSZXNldENvbW1lbnRzKCk7CiAgICAgIHZhciB1bCA9IHBvcHVwLmZpbmQoJy5hY3Rpb24tbGlzdCcpOwogICAgICB1bC5lbXB0eSgpOwogICAgICBmb3IodmFyIGkgPSAwOyBpIDwgR2V0U3RvcmFnZSgiY29tbWVudGNvdW50Iik7IGkrKykgewogICAgICAgIHZhciBjb21tZW50TmFtZSA9IEdldFN0b3JhZ2UoJ25hbWUtJyArIGkpOwogICAgICAgIGlmKCBJc0NvbW1lbnRWYWxpZEZvclBvc3RUeXBlKCBjb21tZW50TmFtZSwgcG9wdXAucG9zdHR5cGUgKSApIHsKICAgICAgICAgIGNvbW1lbnROYW1lID0gY29tbWVudE5hbWUucmVwbGFjZSggVGFyZ2V0Lk1BVENIX0FMTCwgIiIgKTsKICAgICAgICAgIHZhciBkZXNjID0gR2V0U3RvcmFnZSgnZGVzYy0nICsgaSkucmVwbGFjZSgvXCRTSVRFTkFNRVwkL2csIHNpdGVuYW1lKS5yZXBsYWNlKC9cJFNJVEVVUkxcJC9nLCBzaXRldXJsKS5yZXBsYWNlKC9cJE1ZVVNFUklEXCQvZywgbXl1c2VyaWQpLnJlcGxhY2UoL1wkL2csICIkJCQiKTsKICAgICAgICAgIHZhciBvcHQgPSBvcHRpb25UZW1wbGF0ZS5yZXBsYWNlKC9cJElEXCQvZywgaSkKICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgiJE5BTUUkIiwgY29tbWVudE5hbWUucmVwbGFjZSgvXCQvZywgIiQkJCIpKQogICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKCIkREVTQ1JJUFRJT04kIiwgKHNob3dHcmVldGluZyA/IGdyZWV0aW5nIDogIiIpICsgZGVzYyk7CiAgICAgICAgICB1bC5hcHBlbmQob3B0KTsKICAgICAgICB9CiAgICAgIH0KICAgICAgU2hvd0hpZGVEZXNjcmlwdGlvbnMocG9wdXApOwogICAgICBBZGRPcHRpb25FdmVudEhhbmRsZXJzKHBvcHVwKTsKICAgIH0KCiAgICAvKioKICAgICAqIENoZWNrcyBpZiBhIGdpdmVuIGNvbW1lbnQgY291bGQgYmUgdXNlZCB0b2dldGhlciB3aXRoIGEgZ2l2ZW4gcG9zdCB0eXBlLgogICAgICogQHBhcmFtIHtTdHJpbmd9IGNvbW1lbnQgVGhlIGNvbW1lbnQgaXRzZWxmLgogICAgICogQHBhcmFtIHtUYXJnZXR9IHBvc3RUeXBlIFRoZSB0eXBlIG9mIHBvc3QgdGhlIGNvbW1lbnQgY291bGQgYmUgcGxhY2VkIG9uLgogICAgICogQHJldHVybiB7Qm9vbGVhbn0gdHJ1ZSBpZiB0aGUgY29tbWVudCBpcyB2YWxpZCBmb3IgdGhlIHR5cGUgb2YgcG9zdDsgZmFsc2Ugb3RoZXJ3aXNlLgogICAgICovCiAgICBmdW5jdGlvbiBJc0NvbW1lbnRWYWxpZEZvclBvc3RUeXBlKCBjb21tZW50LCBwb3N0VHlwZSApIHsKICAgICAgdmFyIGRlc2lnbmF0b3IgPSBjb21tZW50Lm1hdGNoKCBUYXJnZXQuTUFUQ0hfQUxMICk7CiAgICAgIGlmKCAhZGVzaWduYXRvciApIHJldHVybiB0cnVlOwoKICAgICAgcmV0dXJuICggLTEgPCBkZXNpZ25hdG9yLmluZGV4T2YoIHBvc3RUeXBlICkgKTsKICAgIH0KCiAgICBmdW5jdGlvbiBBZGRPcHRpb25FdmVudEhhbmRsZXJzKHBvcHVwKSB7CiAgICAgIHBvcHVwLmZpbmQoJ2xhYmVsID4gc3BhbicpLmRibGNsaWNrKGZ1bmN0aW9uICgpIHsgVG9FZGl0YWJsZShwb3B1cCwgJCh0aGlzKSk7IH0pOwogICAgICBwb3B1cC5maW5kKCdsYWJlbCA+IC5xdWljay1pbnNlcnQnKS5jbGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHBhcmVudCA9ICQodGhpcykucGFyZW50KCk7CiAgICAgICAgdmFyIGxpID0gcGFyZW50LnBhcmVudCgpOwogICAgICAgIHZhciByYWRpbyA9IHBhcmVudC5zaWJsaW5ncygiaW5wdXQiKTsKICAgICAgICAvLyBNYXJrIGFjdGlvbiBhcyBzZWxlY3RlZC4KICAgICAgICBsaS5hZGRDbGFzcygnYWN0aW9uLXNlbGVjdGVkJyk7CiAgICAgICAgcmFkaW8ucHJvcCgnY2hlY2tlZCcsdHJ1ZSk7CiAgICAgICAgLy8gVHJpZ2VyIGZvcm0gc3VibWlzc2lvbi4KICAgICAgICBwb3B1cC5maW5kKCcucG9wdXAtc3VibWl0JykudHJpZ2dlcignY2xpY2snKTsKICAgICAgfSk7CiAgICAgIC8vYWRkIGNsaWNrIGhhbmRsZXIgdG8gcmFkaW8gYnV0dG9ucwogICAgICBwb3B1cC5maW5kKCdpbnB1dDpyYWRpbycpLmNsaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBwb3B1cC5maW5kKCcucG9wdXAtc3VibWl0JykucmVtb3ZlQXR0cigiZGlzYWJsZWQiKTsgLy9lbmFibGUgc3VibWl0IGJ1dHRvbgogICAgICAgIC8vdW5zZXQvc2V0IHNlbGVjdGVkIGNsYXNzLCBoaWRlIG90aGVycyBpZiBuZWNlc3NhcnkKICAgICAgICAkKHRoaXMpLnBhcmVudHMoJ3VsJykuZmluZCgnLmFjdGlvbi1zZWxlY3RlZCcpLnJlbW92ZUNsYXNzKCdhY3Rpb24tc2VsZWN0ZWQnKTsKICAgICAgICBpZihHZXRTdG9yYWdlKCdoaWRlLWRlc2MnKSA9PSAiaGlkZSIpIHsKICAgICAgICAgICQodGhpcykucGFyZW50cygndWwnKS5maW5kKCcuYWN0aW9uLWRlc2MnKS5oaWRlKCk7CiAgICAgICAgfQogICAgICAgICQodGhpcykucGFyZW50KCkuYWRkQ2xhc3MoJ2FjdGlvbi1zZWxlY3RlZCcpCiAgICAgICAgICAgICAgICAgICAgICAgIC5maW5kKCcuYWN0aW9uLWRlc2MnKS5zaG93KCk7CiAgICAgIH0pOwogICAgICBwb3B1cC5maW5kKCdpbnB1dDpyYWRpbycpLmtleXVwKGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIGlmKGV2ZW50LndoaWNoID09IDEzKSB7CiAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgcG9wdXAuZmluZCgnLnBvcHVwLXN1Ym1pdCcpLnRyaWdnZXIoJ2NsaWNrJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KCiAgICAvL0FkanVzdCB0aGUgZGVzY3JpcHRpb25zIHNvIHRoZXkgc2hvdyBvciBoaWRlIGJhc2VkIG9uIHRoZSB1c2VyJ3MgcHJlZmVyZW5jZS4KICAgIGZ1bmN0aW9uIFNob3dIaWRlRGVzY3JpcHRpb25zKHBvcHVwKSB7CiAgICAgIC8vZ2V0IGxpc3Qgb2YgYWxsIGRlc2NyaXB0aW9ucyBleGNlcHQgdGhlIGN1cnJlbnRseSBzZWxlY3RlZCBvbmUKICAgICAgdmFyIGRlc2NyaXB0aW9ucyA9IHBvcHVwLmZpbmQoInVsLmFjdGlvbi1saXN0IGxpOm5vdCguYWN0aW9uLXNlbGVjdGVkKSBzcGFuW2lkKj0nZGVzYy0nXSIpOwoKICAgICAgaWYoR2V0U3RvcmFnZSgnaGlkZS1kZXNjJykgPT0gImhpZGUiKSB7CiAgICAgICAgZGVzY3JpcHRpb25zLmhpZGUoKTsKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICBkZXNjcmlwdGlvbnMuc2hvdygpOwogICAgICB9CiAgICB9CgogICAgLy9TaG93IGEgbWVzc2FnZSAobGlrZSBub3RpZnkuc2hvdykgaW5zaWRlIHBvcHVwCiAgICBmdW5jdGlvbiBTaG93TWVzc2FnZShwb3B1cCwgdGl0bGUsIGJvZHksIGNhbGxiYWNrKSB7CiAgICAgIHZhciBodG1sID0gYm9keS5yZXBsYWNlKC9cbi9nLCAnPEJSLz4nKTsKICAgICAgdmFyIG1lc3NhZ2UgPSAkKG1lc3NhZ2VUZW1wbGF0ZS5yZXBsYWNlKCIkVElUTEUkIiwgdGl0bGUpCiAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoJyRCT0RZJCcsIGh0bWwpKTsKICAgICAgbWVzc2FnZS5maW5kKCcubm90aWZ5LWNsb3NlJykuY2xpY2soZnVuY3Rpb24gKCkgewogICAgICAgICQodGhpcykucGFyZW50KCkuZmFkZU91dEFuZFJlbW92ZSgpOwogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0pOwogICAgICBwb3B1cC5maW5kKCdoMicpLmJlZm9yZShtZXNzYWdlKTsKICAgIH0KCiAgICAvL0dldCByZW1vdGUgY29udGVudCB2aWEgYWpheCwgdGFyZ2V0IHVybCBtdXN0IGNvbnRhaW4gdmFsaWQganNvbiB3cmFwcGVkIGluIGNhbGxiYWNrKCkgZnVuY3Rpb24KICAgIGZ1bmN0aW9uIEdldFJlbW90ZSh1cmwsIGNhbGxiYWNrLCBvbmVycm9yKSB7CiAgICAgICQuYWpheCh7IHR5cGU6ICJHRVQiLCB1cmw6IHVybCArICc/anNvbnA9PycsIGRhdGFUeXBlOiAianNvbnAiLCBqc29ucENhbGxiYWNrOiAiY2FsbGJhY2siLCB0aW1lb3V0OiAyMDAwLCBzdWNjZXNzOiBjYWxsYmFjaywgZXJyb3I6IG9uZXJyb3IsIGFzeW5jOiBmYWxzZSB9KTsKICAgIH0KCiAgICAvL2N1c3RvbWlzZSB3ZWxjb21lCiAgICAvL3JldmVyc2UgY29tcGF0aWJsZSEKICAgIGZ1bmN0aW9uIExvYWRGcm9tUmVtb3RlKHVybCwgZG9uZSwgZXJyb3IpIHsKICAgICAgR2V0UmVtb3RlKHVybCwgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICBTZXRTdG9yYWdlKCJjb21tZW50Y291bnQiLCBkYXRhLmxlbmd0aCk7CiAgICAgICAgQ2xlYXJTdG9yYWdlKCJuYW1lLSIpOyBDbGVhclN0b3JhZ2UoImRlc2MtIik7CiAgICAgICAgJC5lYWNoKGRhdGEsIGZ1bmN0aW9uIChpbmRleCwgdmFsdWUpIHsKICAgICAgICAgIFNldFN0b3JhZ2UoJ25hbWUtJyArIGluZGV4LCB2YWx1ZS5uYW1lKTsKICAgICAgICAgIFNldFN0b3JhZ2UoJ2Rlc2MtJyArIGluZGV4LCBtYXJrRG93blRvSHRtbCh2YWx1ZS5kZXNjcmlwdGlvbikpOwogICAgICAgIH0pOwogICAgICAgIGRvbmUoKTsKICAgICAgfSwgZXJyb3IpOwogICAgfQoKICAgIC8vRmFjdG9yZWQgb3V0IGZyb20gbWFpbiBwb3B1IGNyZWF0aW9uLCBqdXN0IGJlY2F1c2UgaXQncyB0b28gbG9uZwogICAgZnVuY3Rpb24gU2V0dXBSZW1vdGVCb3gocG9wdXApIHsKICAgICAgdmFyIHJlbW90ZSA9IHBvcHVwLmZpbmQoJyNyZW1vdGUtcG9wdXAnKTsKICAgICAgdmFyIHJlbW90ZWVycm9yID0gcmVtb3RlLmZpbmQoJyNyZW1vdGVlcnJvcjEnKTsKICAgICAgdmFyIHVybGZpZWxkID0gcmVtb3RlLmZpbmQoJyNyZW1vdGV1cmwnKTsKICAgICAgdmFyIGF1dG9maWVsZCA9IHJlbW90ZS5maW5kKCcjcmVtb3RlYXV0bycpOwogICAgICB2YXIgdGhyb2JiZXIgPSByZW1vdGUuZmluZCgiI3Rocm9iYmVyMSIpOwoKICAgICAgcG9wdXAuZmluZCgnLnBvcHVwLWFjdGlvbnMtcmVtb3RlJykuY2xpY2soZnVuY3Rpb24gKCkgewogICAgICAgIHVybGZpZWxkLnZhbChHZXRTdG9yYWdlKCJSZW1vdGVVcmwiKSk7CiAgICAgICAgYXV0b2ZpZWxkLnByb3AoJ2NoZWNrZWQnLCBHZXRTdG9yYWdlKCJBdXRvUmVtb3RlIikgPT0gJ3RydWUnKTsKICAgICAgICByZW1vdGUuc2hvdygpOwogICAgICB9KTsKCiAgICAgIHBvcHVwLmZpbmQoJy5yZW1vdGUtY2FuY2VsJykuY2xpY2soZnVuY3Rpb24gKCkgewogICAgICAgIHRocm9iYmVyLmhpZGUoKTsKICAgICAgICByZW1vdGVlcnJvci50ZXh0KCIiKTsKICAgICAgICByZW1vdGUuaGlkZSgpOwogICAgICB9KTsKCiAgICAgIHBvcHVwLmZpbmQoJy5yZW1vdGUtc2F2ZScpLmNsaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBTZXRTdG9yYWdlKCJSZW1vdGVVcmwiLCB1cmxmaWVsZC52YWwoKSk7CiAgICAgICAgU2V0U3RvcmFnZSgiQXV0b1JlbW90ZSIsIGF1dG9maWVsZC5wcm9wKCdjaGVja2VkJykpOwogICAgICAgIHJlbW90ZS5oaWRlKCk7CiAgICAgIH0pOwoKICAgICAgcG9wdXAuZmluZCgnLnJlbW90ZS1nZXQnKS5jbGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgdGhyb2JiZXIuc2hvdygpOwogICAgICAgIExvYWRGcm9tUmVtb3RlKHVybGZpZWxkLnZhbCgpLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBXcml0ZUNvbW1lbnRzKHBvcHVwKTsKICAgICAgICAgIHRocm9iYmVyLmhpZGUoKTsKICAgICAgICB9LCBmdW5jdGlvbiAoZCwgbXNnKSB7CiAgICAgICAgICByZW1vdGVlcnJvci50ZXh0KG1zZyk7CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfQoKICAgIGZ1bmN0aW9uIFNldHVwV2VsY29tZUJveChwb3B1cCkgewogICAgICB2YXIgd2VsY29tZSA9IHBvcHVwLmZpbmQoJyN3ZWxjb21lLXBvcHVwJyk7CiAgICAgIHZhciBjdXN0b20gPSB3ZWxjb21lLmZpbmQoJyNjdXN0b213ZWxjb21lJyk7CgogICAgICBwb3B1cC5maW5kKCcucG9wdXAtYWN0aW9ucy13ZWxjb21lJykuY2xpY2soZnVuY3Rpb24gKCkgewogICAgICAgIGN1c3RvbS52YWwoZ3JlZXRpbmcpOwogICAgICAgIHdlbGNvbWUuc2hvdygpOwogICAgICB9KTsKCiAgICAgIHBvcHVwLmZpbmQoJy53ZWxjb21lLWNhbmNlbCcpLmNsaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICB3ZWxjb21lLmhpZGUoKTsKICAgICAgfSk7CgogICAgICBwb3B1cC5maW5kKCcud2VsY29tZS1mb3JjZScpLmNsaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICBzaG93R3JlZXRpbmcgPSB0cnVlOwogICAgICAgIFdyaXRlQ29tbWVudHMocG9wdXApOwogICAgICAgIHdlbGNvbWUuaGlkZSgpOwogICAgICB9KTsKCiAgICAgIHBvcHVwLmZpbmQoJy53ZWxjb21lLXNhdmUnKS5jbGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIG1zZyA9IGN1c3RvbS52YWwoKSA9PSAiIiA/ICJOT05FIiA6IGN1c3RvbS52YWwoKTsKICAgICAgICBTZXRTdG9yYWdlKCJXZWxjb21lTWVzc2FnZSIsIG1zZyk7CiAgICAgICAgZ3JlZXRpbmcgPSBjdXN0b20udmFsKCk7CiAgICAgICAgd2VsY29tZS5oaWRlKCk7CiAgICAgIH0pOwogICAgfQoKICAgIHZhciBjc3NFbGVtZW50ID0gJChjc3NUZW1wbGF0ZSk7CiAgICAkKCJoZWFkIikuYXBwZW5kKGNzc0VsZW1lbnQpOwoKICAgIC8qKgogICAgICogQXR0YWNoIGFuICJhdXRvIiBsaW5rIHNvbWV3aGVyZSBpbiB0aGUgRE9NLiBUaGlzIGxpbmsgaXMgZ29pbmcgdG8gdHJpZ2dlciB0aGUgaWNvbmljIEFSQyBiZWhhdmlvci4KICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0cmlnZ2VyU2VsZWN0b3IgQSBzZWxlY3RvciBmb3IgYSBET00gZWxlbWVudCB3aGljaCwgd2hlbiBjbGlja2VkLCB3aWxsIGludm9rZSB0aGUgbG9jYXRvci4KICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGxvY2F0b3IgQSBmdW5jdGlvbiB0aGF0IHdpbGwgc2VhcmNoIGZvciBib3RoIHRoZSBET00gZWxlbWVudCwgbmV4dCB0byB3aGljaCB0aGUgImF1dG8iIGxpbmsKICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lsbCBiZSBwbGFjZWQgYW5kIHdoZXJlIHRoZSB0ZXh0IHNlbGVjdGVkIGZyb20gdGhlIHBvcHVwIHdpbGwgYmUgaW5zZXJ0ZWQuCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgIFRoaXMgZnVuY3Rpb24gd2lsbCByZWNlaXZlIHRoZSB0cmlnZ2VyRWxlbWVudCBhcyB0aGUgZmlyc3QgYXJndW1lbnQgd2hlbiBjYWxsZWQgYW5kIGl0CiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3VsZCByZXR1cm4gYW4gYXJyYXkgd2l0aCB0aGUgdHdvIERPTSBlbGVtZW50cyBpbiB0aGUgZXhwZWN0ZWQgb3JkZXIuCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBpbmplY3RvciBBIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgdG8gYWN0dWFsbHkgaW5qZWN0IHRoZSAiYXV0byIgbGluayBpbnRvIHRoZSBET00uCiAgICAgKiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaGlzIGZ1bmN0aW9uIHdpbGwgcmVjZWl2ZSB0aGUgZWxlbWVudCB0aGF0IHRoZSBsb2NhdG9yIGZvdW5kIGFzIHRoZSBmaXJzdCBhcmd1bWVudCB3aGVuIGNhbGxlZC4KICAgICAqICAgICAgICAgICAgICAgICAgICAgICAgICAgIEl0IHdpbGwgcmVjZWl2ZSB0aGUgYWN0aW9uIGZ1bmN0aW9uIGFzIHRoZSBzZWNvbmQgYXJndW1lbnQsIHNvIGl0IGtub3cgd2hhdCB0byBpbnZva2Ugd2hlbiB0aGUgImF1dG8iIGxpbmsgaXMgY2xpY2tlZC4KICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGFjdGlvbiBBIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2hlbiB0aGUgaW5qZWN0ZWQgImF1dG8iIGxpbmsgaXMgY2xpY2tlZC4KICAgICAqLwogICAgZnVuY3Rpb24gYXR0YWNoQXV0b0xpbmtJbmplY3RvciggdHJpZ2dlclNlbGVjdG9yLCBsb2NhdG9yLCBpbmplY3RvciwgYWN0aW9uICkgewogICAgICAvKioKICAgICAgICogVGhlIGludGVybmFsIGluamVjdG9yIGludm9rZXMgdGhlIGxvY2F0b3IgdG8gZmluZCBhbiBlbGVtZW50IGluIHJlbGF0aW9uIHRvIHRoZSB0cmlnZ2VyIGVsZW1lbnQgYW5kIHRoZW4gaW52b2tlcyB0aGUgaW5qZWN0b3Igb24gaXQuCiAgICAgICAqIEBwYXJhbSB7alF1ZXJ5fSB0cmlnZ2VyRWxlbWVudCBUaGUgZWxlbWVudCB0aGF0IHRyaWdnZXJlZCB0aGUgbWVjaGFuaXNtLgogICAgICAgKiBAcGFyYW0ge051bWJlcn0gW3JldHJ5Q291bnQ9MF0gSG93IG9mdGVuIHRoaXMgb3BlcmF0aW9uIHdhcyBhbHJlYWR5IHJldHJpZWQuIDIwIHJldHJpZXMgd2lsbCBiZSBwZXJmb3JtZWQgaW4gNTBtcyBpbnRlcnZhbHMuCiAgICAgICAqIEBwcml2YXRlCiAgICAgICAqLwogICAgICB2YXIgX2ludGVybmFsSW5qZWN0b3IgPSBmdW5jdGlvbiggdHJpZ2dlckVsZW1lbnQsIHJldHJ5Q291bnQgKSB7CiAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgdGhlIGVsZW1lbnQgYWZ0ZXIgMjAgcmV0cmllcywgZ2l2ZSB1cC4KICAgICAgICBpZiggMjAgPD0gcmV0cnlDb3VudCApIHJldHVybjsKICAgICAgICAvLyBUcnkgdG8gbG9jYXRlIHRoZSBlbGVtZW50cy4KICAgICAgICB2YXIgdGFyZ2V0RWxlbWVudHMgPSBsb2NhdG9yKCB0cmlnZ2VyRWxlbWVudCApOwogICAgICAgIHZhciBpbmplY3ROZXh0VG8gPSB0YXJnZXRFbGVtZW50c1sgMCBdOwogICAgICAgIHZhciBwbGFjZUNvbW1lbnRJbiA9IHRhcmdldEVsZW1lbnRzWyAxIF0KICAgICAgICAvLyBXZSBkaWRuJ3QgZmluZCBpdD8gVHJ5IGFnYWluIGluIDUwbXMuCiAgICAgICAgaWYoICFpbmplY3ROZXh0VG8ubGVuZ3RoICkgewogICAgICAgICAgc2V0VGltZW91dCggZnVuY3Rpb24oKSB7CiAgICAgICAgICAgIF9pbnRlcm5hbEluamVjdG9yKCB0cmlnZ2VyRWxlbWVudCwgcmV0cnlDb3VudCArIDEgKTsKICAgICAgICAgIH0sIDUwICk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIC8vIENhbGwgb3VyIGluamVjdG9yIG9uIHRoZSBmb3VuZCBlbGVtZW50LgogICAgICAgICAgaW5qZWN0b3IoIGluamVjdE5leHRUbywgYWN0aW9uLCBwbGFjZUNvbW1lbnRJbiApOwogICAgICAgIH0KICAgICAgfTsKICAgICAgLy8gTWF5YmUgdXNlIHRoaXMgaW5zdGVhZCAoaWYgc3VwcG9ydGVkKTogJCggIiNjb250ZW50IiApLm9uKCAiY2xpY2siLCB0cmlnZ2VyU2VsZWN0b3IsIGZ1bmN0aW9uKCkgewogICAgICAkKCAiI2NvbnRlbnQiICkuZGVsZWdhdGUoIHRyaWdnZXJTZWxlY3RvciwgImNsaWNrIiwgZnVuY3Rpb24oIGV2ZW50ICkgewogICAgICAgIC8qKiBAdHlwZSBqUXVlcnkgKi8KICAgICAgICB2YXIgdHJpZ2dlckVsZW1lbnQgPSAkKCBldmVudC50YXJnZXQgKTsKICAgICAgICBfaW50ZXJuYWxJbmplY3RvciggdHJpZ2dlckVsZW1lbnQgKTsKICAgICAgfSApOwogICAgfQogICAgYXR0YWNoQXV0b0xpbmtJbmplY3RvciggIi5qcy1hZGQtbGluayIsIGZpbmRDb21tZW50RWxlbWVudHMsIGluamVjdEF1dG9MaW5rLCBhdXRvTGlua0FjdGlvbiApOwogICAgYXR0YWNoQXV0b0xpbmtJbmplY3RvciggIi5lZGl0LXBvc3QiLCBmaW5kRWRpdFN1bW1hcnlFbGVtZW50cywgaW5qZWN0QXV0b0xpbmtFZGl0LCBhdXRvTGlua0FjdGlvbiApOwogICAgYXR0YWNoQXV0b0xpbmtJbmplY3RvciggIi5jbG9zZS1xdWVzdGlvbi1saW5rIiwgZmluZENsb3N1cmVFbGVtZW50cywgaW5qZWN0QXV0b0xpbmtDbG9zdXJlLCBhdXRvTGlua0FjdGlvbiApOwogICAgYXR0YWNoQXV0b0xpbmtJbmplY3RvciggIi5yZXZpZXctYWN0aW9ucyBpbnB1dDpmaXJzdCIsIGZpbmRSZXZpZXdRdWV1ZUVsZW1lbnRzLCBpbmplY3RBdXRvTGlua1Jldmlld1F1ZXVlLCBhdXRvTGlua0FjdGlvbiApOwoKICAgIC8qKgogICAgICogQSBsb2NhdG9yIGZvciB0aGUgaGVscCBsaW5rIG5leHQgdG8gdGhlIGNvbW1lbnQgYm94IHVuZGVyIGEgcG9zdCBhbmQgdGhlIHRleHRhcmVhIGZvciB0aGUgY29tbWVudC4KICAgICAqIEBwYXJhbSB7alF1ZXJ5fSB3aGVyZSBBIERPTSBlbGVtZW50LCBuZWFyIHdoaWNoIHdlJ3JlIGxvb2tpbmcgZm9yIHRoZSBsb2NhdGlvbiB3aGVyZSB0byBpbmplY3Qgb3VyIGxpbmsuCiAgICAgKiBAcmV0dXJucyB7W2pRdWVyeV19IFRoZSBET00gZWxlbWVudCBuZXh0IHRvIHdoaWNoIHRoZSBsaW5rIHNob3VsZCBiZSBpbnNlcnRlZCBhbmQgdGhlIGVsZW1lbnQgaW50byB3aGljaCB0aGUKICAgICAqICAgICAgICAgICAgICAgICAgICAgY29tbWVudCBzaG91bGQgYmUgcGxhY2VkLgogICAgICovCiAgICBmdW5jdGlvbiBmaW5kQ29tbWVudEVsZW1lbnRzKCB3aGVyZSApIHsKICAgICAgdmFyIGRpdmlkID0gd2hlcmUucGFyZW50KCkuYXR0cignaWQnKS5yZXBsYWNlKCctbGluaycsICcnKTsKICAgICAgdmFyIGluamVjdE5leHRUbyA9ICQoJyMnICsgZGl2aWQpLmZpbmQoJy5jb21tZW50LWhlbHAtbGluaycpOwogICAgICB2YXIgcGxhY2VDb21tZW50SW4gPSAkKCcjJyArIGRpdmlkKS5maW5kKCJ0ZXh0YXJlYSIpOwogICAgICByZXR1cm4gWyBpbmplY3ROZXh0VG8sIHBsYWNlQ29tbWVudEluIF07CiAgICB9CiAgICAvKioKICAgICAqIEEgbG9jYXRvciBmb3IgdGhlIGVkaXQgc3VtbWFyeSBpbnB1dCBib3ggdW5kZXIgYSBwb3N0IHdoaWxlIGl0IGlzIGJlaW5nIGVkaXRlZC4KICAgICAqIEBwYXJhbSB7alF1ZXJ5fSB3aGVyZSBBIERPTSBlbGVtZW50LCBuZWFyIHdoaWNoIHdlJ3JlIGxvb2tpbmcgZm9yIHRoZSBsb2NhdGlvbiB3aGVyZSB0byBpbmplY3Qgb3VyIGxpbmsuCiAgICAgKiBAcmV0dXJucyB7W2pRdWVyeV19IFRoZSBET00gZWxlbWVudCBuZXh0IHRvIHdoaWNoIHRoZSBsaW5rIHNob3VsZCBiZSBpbnNlcnRlZCBhbmQgdGhlIGVsZW1lbnQgaW50byB3aGljaCB0aGUKICAgICAqICAgICAgICAgICAgICAgICAgICAgY29tbWVudCBzaG91bGQgYmUgcGxhY2VkLgogICAgICovCiAgICBmdW5jdGlvbiBmaW5kRWRpdFN1bW1hcnlFbGVtZW50cyggd2hlcmUgKSB7CiAgICAgIHZhciBkaXZpZCA9IHdoZXJlLmF0dHIoJ2hyZWYnKS5yZXBsYWNlKCcvcG9zdHMvJywgJycpLnJlcGxhY2UoJy9lZGl0JywgJycpOwogICAgICB2YXIgaW5qZWN0TmV4dFRvID0gJCgnI3Bvc3QtZWRpdG9yLScgKyBkaXZpZCkubmV4dCgpLmZpbmQoJy5lZGl0LWNvbW1lbnQnKTsKICAgICAgdmFyIHBsYWNlQ29tbWVudEluID0gaW5qZWN0TmV4dFRvOwogICAgICByZXR1cm4gWyBpbmplY3ROZXh0VG8sIHBsYWNlQ29tbWVudEluIF07CiAgICB9CiAgICAvKioKICAgICAqIEEgbG9jYXRvciBmb3IgdGhlIHRleHQgYXJlYSBpbiB3aGljaCB0byBwdXQgYSBjdXN0b20gb2ZmLXRvcGljIGNsb3N1cmUgcmVhc29uIGluIHRoZSBjbG9zdXJlIGRpYWxvZy4KICAgICAqIEBwYXJhbSB7alF1ZXJ5fSB3aGVyZSBBIERPTSBlbGVtZW50LCBuZWFyIHdoaWNoIHdlJ3JlIGxvb2tpbmcgZm9yIHRoZSBsb2NhdGlvbiB3aGVyZSB0byBpbmplY3Qgb3VyIGxpbmsuCiAgICAgKiBAcmV0dXJucyB7W2pRdWVyeV19IFRoZSBET00gZWxlbWVudCBuZXh0IHRvIHdoaWNoIHRoZSBsaW5rIHNob3VsZCBiZSBpbnNlcnRlZCBhbmQgdGhlIGVsZW1lbnQgaW50byB3aGljaCB0aGUKICAgICAqICAgICAgICAgICAgICAgICAgICAgY29tbWVudCBzaG91bGQgYmUgcGxhY2VkLgogICAgICovCiAgICBmdW5jdGlvbiBmaW5kQ2xvc3VyZUVsZW1lbnRzKCB3aGVyZSApIHsKICAgICAgdmFyIGluamVjdE5leHRUbyA9ICQoIi5jbG9zZS1hcy1vZmYtdG9waWMtcGFuZSB0ZXh0YXJlYSIpOwogICAgICB2YXIgcGxhY2VDb21tZW50SW4gPSBpbmplY3ROZXh0VG87CiAgICAgIHJldHVybiBbIGluamVjdE5leHRUbywgcGxhY2VDb21tZW50SW4gXTsKICAgIH0KICAgIC8qKgogICAgICogQSBsb2NhdG9yIGZvciB0aGUgZWRpdCBzdW1tYXJ5IHlvdSBnZXQgaW4gdGhlICJIZWxwIGFuZCBJbXByb3ZlbWVudCIgcmV2aWV3IHF1ZXVlLgogICAgICogQHBhcmFtIHtqUXVlcnl9IHdoZXJlIEEgRE9NIGVsZW1lbnQsIG5lYXIgd2hpY2ggd2UncmUgbG9va2luZyBmb3IgdGhlIGxvY2F0aW9uIHdoZXJlIHRvIGluamVjdCBvdXIgbGluay4KICAgICAqIEByZXR1cm5zIHtbalF1ZXJ5XX0gVGhlIERPTSBlbGVtZW50IG5leHQgdG8gd2hpY2ggdGhlIGxpbmsgc2hvdWxkIGJlIGluc2VydGVkIGFuZCB0aGUgZWxlbWVudCBpbnRvIHdoaWNoIHRoZQogICAgICogICAgICAgICAgICAgICAgICAgICBjb21tZW50IHNob3VsZCBiZSBwbGFjZWQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGZpbmRSZXZpZXdRdWV1ZUVsZW1lbnRzKCB3aGVyZSApIHsKICAgICAgdmFyIGluamVjdE5leHRUbyA9ICQoIi50ZXh0LWNvdW50ZXIiKTsKICAgICAgdmFyIHBsYWNlQ29tbWVudEluID0gJCgiLmVkaXQtY29tbWVudCIpOwogICAgICByZXR1cm4gWyBpbmplY3ROZXh0VG8sIHBsYWNlQ29tbWVudEluIF07CiAgICB9CgogICAgLyoqCiAgICAgKiBJbmplY3QgdGhlIGF1dG8gbGluayBuZXh0IHRvIHRoZSBnaXZlbiBET00gZWxlbWVudC4KICAgICAqIEBwYXJhbSB7alF1ZXJ5fSB3aGVyZSBUaGUgRE9NIGVsZW1lbnQgbmV4dCB0byB3aGljaCB3ZSdsbCBwbGFjZSB0aGUgbGluay4KICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IHdoYXQgVGhlIGZ1bmN0aW9uIHRoYXQgd2lsbCBiZSBjYWxsZWQgd2hlbiB0aGUgbGluayBpcyBjbGlja2VkLgogICAgICogQHBhcmFtIHtqUXVlcnl9IHBsYWNlQ29tbWVudEluIFRoZSBET00gZWxlbWVudCBpbnRvIHdoaWNoIHRoZSBjb21tZW50IHNob3VsZCBiZSBwbGFjZWQuCiAgICAgKi8KICAgIGZ1bmN0aW9uIGluamVjdEF1dG9MaW5rKCB3aGVyZSwgd2hhdCwgcGxhY2VDb21tZW50SW4gKSB7CiAgICAgIC8vIERvbid0IGFkZCBhdXRvIGxpbmtzIGlmIG9uZSBhbHJlYWR5IGV4aXN0cwogICAgICB2YXIgZXhpc3RpbmdBdXRvTGlua3MgPSB3aGVyZS5zaWJsaW5ncyggIi5jb21tZW50LWF1dG8tbGluayIgKTsKICAgICAgaWYoIGV4aXN0aW5nQXV0b0xpbmtzICYmIGV4aXN0aW5nQXV0b0xpbmtzLmxlbmd0aCApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBwb3N0dHlwZSA9IHdoZXJlLnBhcmVudHMoIi5xdWVzdGlvbiwgLmFuc3dlciIpLmF0dHIoImNsYXNzIikuc3BsaXQoJyAnKVswXTsgLy9zbGlnaHRseSBmcmFnaWxlCiAgICAgIGlmKCAiYW5zd2VyIiA9PSBwb3N0dHlwZSApIHBvc3R0eXBlID0gVGFyZ2V0LkNvbW1lbnRBbnN3ZXI7CiAgICAgIGlmKCAicXVlc3Rpb24iID09IHBvc3R0eXBlICkgcG9zdHR5cGUgPSBUYXJnZXQuQ29tbWVudFF1ZXN0aW9uOwogICAgICB2YXIgX2F1dG9MaW5rQWN0aW9uID0gZnVuY3Rpb24oKXsKICAgICAgICB3aGF0KCBwbGFjZUNvbW1lbnRJbiwgcG9zdHR5cGUgKTsKICAgICAgfTsKICAgICAgdmFyIGF1dG9MaW5rID0gJCgnPHNwYW4gY2xhc3M9ImxzZXAiPiB8IDwvc3Bhbj4nKS5hZGQoJCgnPGEgY2xhc3M9ImNvbW1lbnQtYXV0by1saW5rIj5hdXRvPC9hPicpLmNsaWNrKF9hdXRvTGlua0FjdGlvbikpOwogICAgICBhdXRvTGluay5pbnNlcnRBZnRlciggd2hlcmUgKTsKICAgIH0KICAgIC8qKgogICAgICogSW5qZWN0IHRoZSBhdXRvIGxpbmsgbmV4dCB0byB0aGUgZWRpdCBzdW1tYXJ5IGlucHV0IGJveC4KICAgICAqIFRoaXMgd2lsbCBhbHNvIHNsaWdodGx5IHNocmluayB0aGUgaW5wdXQgYm94LCBzbyB0aGF0IHRoZSBsaW5rIHdpbGwgZml0IG5leHQgdG8gaXQuCiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gd2hlcmUgVGhlIERPTSBlbGVtZW50IG5leHQgdG8gd2hpY2ggd2UnbGwgcGxhY2UgdGhlIGxpbmsuCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSB3aGF0IFRoZSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIHdoZW4gdGhlIGxpbmsgaXMgY2xpY2tlZC4KICAgICAqIEBwYXJhbSB7alF1ZXJ5fSBwbGFjZUNvbW1lbnRJbiBUaGUgRE9NIGVsZW1lbnQgaW50byB3aGljaCB0aGUgY29tbWVudCBzaG91bGQgYmUgcGxhY2VkLgogICAgICovCiAgICBmdW5jdGlvbiBpbmplY3RBdXRvTGlua0VkaXQoIHdoZXJlLCB3aGF0LCBwbGFjZUNvbW1lbnRJbiApIHsKICAgICAgLy8gRG9uJ3QgYWRkIGF1dG8gbGlua3MgaWYgb25lIGFscmVhZHkgZXhpc3RzCiAgICAgIHZhciBleGlzdGluZ0F1dG9MaW5rcyA9IHdoZXJlLnNpYmxpbmdzKCAiLmNvbW1lbnQtYXV0by1saW5rIiApOwogICAgICBpZiggZXhpc3RpbmdBdXRvTGlua3MgJiYgZXhpc3RpbmdBdXRvTGlua3MubGVuZ3RoICkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgd2hlcmUuY3NzKCAid2lkdGgiLCAiNTEwcHgiICk7CiAgICAgIHdoZXJlLnNpYmxpbmdzKCAiLmFjdHVhbC1lZGl0LW92ZXJsYXkiICkuY3NzKCAid2lkdGgiLCAiNTEwcHgiICk7CgogICAgICB2YXIgcG9zdHR5cGUgPSB3aGVyZS5wYXJlbnRzKCIucXVlc3Rpb24sIC5hbnN3ZXIiKS5hdHRyKCJjbGFzcyIpLnNwbGl0KCcgJylbMF07IC8vc2xpZ2h0bHkgZnJhZ2lsZQogICAgICBpZiggImFuc3dlciIgPT0gcG9zdHR5cGUgKSBwb3N0dHlwZSA9IFRhcmdldC5FZGl0U3VtbWFyeUFuc3dlcjsKICAgICAgaWYoICJxdWVzdGlvbiIgPT0gcG9zdHR5cGUgKSBwb3N0dHlwZSA9IFRhcmdldC5FZGl0U3VtbWFyeVF1ZXN0aW9uOwoKICAgICAgdmFyIF9hdXRvTGlua0FjdGlvbiA9IGZ1bmN0aW9uKCl7CiAgICAgICAgd2hhdCggcGxhY2VDb21tZW50SW4sIHBvc3R0eXBlICk7CiAgICAgIH07CiAgICAgIHZhciBhdXRvTGluayA9ICQoJzxzcGFuIGNsYXNzPSJsc2VwIj4gfCA8L3NwYW4+JykuYWRkKCQoJzxhIGNsYXNzPSJjb21tZW50LWF1dG8tbGluayI+YXV0bzwvYT4nKS5jbGljayhfYXV0b0xpbmtBY3Rpb24pKTsKICAgICAgYXV0b0xpbmsuaW5zZXJ0QWZ0ZXIoIHdoZXJlICk7CiAgICB9CiAgICAvKioKICAgICAqIEluamVjdCB0aGUgYXV0byBsaW5rIG5leHQgdG8gdGhlIGdpdmVuIERPTSBlbGVtZW50LgogICAgICogQHBhcmFtIHtqUXVlcnl9IHdoZXJlIFRoZSBET00gZWxlbWVudCBuZXh0IHRvIHdoaWNoIHdlJ2xsIHBsYWNlIHRoZSBsaW5rLgogICAgICogQHBhcmFtIHtGdW5jdGlvbn0gd2hhdCBUaGUgZnVuY3Rpb24gdGhhdCB3aWxsIGJlIGNhbGxlZCB3aGVuIHRoZSBsaW5rIGlzIGNsaWNrZWQuCiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gcGxhY2VDb21tZW50SW4gVGhlIERPTSBlbGVtZW50IGludG8gd2hpY2ggdGhlIGNvbW1lbnQgc2hvdWxkIGJlIHBsYWNlZC4KICAgICAqLwogICAgZnVuY3Rpb24gaW5qZWN0QXV0b0xpbmtDbG9zdXJlKCB3aGVyZSwgd2hhdCwgcGxhY2VDb21tZW50SW4gKSB7CiAgICAgIC8vIERvbid0IGFkZCBhdXRvIGxpbmtzIGlmIG9uZSBhbHJlYWR5IGV4aXN0cwogICAgICB2YXIgZXhpc3RpbmdBdXRvTGlua3MgPSB3aGVyZS5zaWJsaW5ncyggIi5jb21tZW50LWF1dG8tbGluayIgKTsKICAgICAgaWYoIGV4aXN0aW5nQXV0b0xpbmtzICYmIGV4aXN0aW5nQXV0b0xpbmtzLmxlbmd0aCApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgCiAgICAgIHZhciBfYXV0b0xpbmtBY3Rpb24gPSBmdW5jdGlvbigpewogICAgICAgIHdoYXQoIHBsYWNlQ29tbWVudEluLCBUYXJnZXQuQ2xvc3VyZSApOwogICAgICB9OwogICAgICB2YXIgYXV0b0xpbmsgPSAkKCc8c3BhbiBjbGFzcz0ibHNlcCI+IHwgPC9zcGFuPicpLmFkZCgkKCc8YSBjbGFzcz0iY29tbWVudC1hdXRvLWxpbmsiPmF1dG88L2E+JykuY2xpY2soX2F1dG9MaW5rQWN0aW9uKSk7CiAgICAgIGF1dG9MaW5rLmluc2VydEFmdGVyKCB3aGVyZSApOwogICAgfQoKICAgIC8qKgogICAgICogSW5qZWN0IGh0ZSBhdXRvIGxpbmsgbmV4dCB0byB0aGUgImNoYXJhY3RlcnMgbGVmdCIgY291bnRlciBiZWxvdyB0aGUgZWRpdCBzdW1tYXJ5IGluIHRoZSByZXZpZXcgcXVldWUuCiAgICAgKiBAcGFyYW0ge2pRdWVyeX0gd2hlcmUgVGhlIERPTSBlbGVtZW50IG5leHQgdG8gd2hpY2ggd2UnbGwgcGxhY2UgdGhlIGxpbmsuCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSB3aGF0IFRoZSBmdW5jdGlvbiB0aGF0IHdpbGwgYmUgY2FsbGVkIHdoZW4gdGhlIGxpbmsgaXMgY2xpY2tlZC4KICAgICAqIEBwYXJhbSB7alF1ZXJ5fSBwbGFjZUNvbW1lbnRJbiBUaGUgRE9NIGVsZW1lbnQgaW50byB3aGljaCB0aGUgY29tbWVudCBzaG91bGQgYmUgcGxhY2VkLgogICAgICovCiAgICBmdW5jdGlvbiBpbmplY3RBdXRvTGlua1Jldmlld1F1ZXVlKCB3aGVyZSwgd2hhdCwgcGxhY2VDb21tZW50SW4gKSB7CiAgICAgIC8vIERvbid0IGFkZCBhdXRvIGxpbmtzIGlmIG9uZSBhbHJlYWR5IGV4aXN0cwogICAgICB2YXIgZXhpc3RpbmdBdXRvTGlua3MgPSB3aGVyZS5zaWJsaW5ncyggIi5jb21tZW50LWF1dG8tbGluayIgKTsKICAgICAgaWYoIGV4aXN0aW5nQXV0b0xpbmtzICYmIGV4aXN0aW5nQXV0b0xpbmtzLmxlbmd0aCApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHZhciBfYXV0b0xpbmtBY3Rpb24gPSBmdW5jdGlvbigpewogICAgICAgIHdoYXQoIHBsYWNlQ29tbWVudEluLCBUYXJnZXQuRWRpdFN1bW1hcnlRdWVzdGlvbiApOwogICAgICB9OwogICAgICB2YXIgYXV0b0xpbmsgPSAkKCc8c3BhbiBjbGFzcz0ibHNlcCI+IHwgPC9zcGFuPicpLmFkZCgkKCc8YSBjbGFzcz0iY29tbWVudC1hdXRvLWxpbmsiIHN0eWxlPSJmbG9hdDpyaWdodDsiPmF1dG88L2E+JykuY2xpY2soX2F1dG9MaW5rQWN0aW9uKSk7CiAgICAgIGF1dG9MaW5rLmluc2VydEFmdGVyKCB3aGVyZSApOwogICAgfQoKICAgIGZ1bmN0aW9uIGF1dG9MaW5rQWN0aW9uKCB0YXJnZXRPYmplY3QsIHBvc3R0eXBlICkgewogICAgICAvL0NyZWF0ZSBwb3B1cCBhbmQgd2lyZS11cCB0aGUgZnVuY3Rpb25hbGl0eQogICAgICB2YXIgcG9wdXAgPSAkKG1hcmt1cFRlbXBsYXRlKTsKICAgICAgcG9wdXAuZmluZCgnLnBvcHVwLWNsb3NlJykuY2xpY2soZnVuY3Rpb24gKCkgeyBwb3B1cC5mYWRlT3V0QW5kUmVtb3ZlKCk7IH0pOwogICAgICBwb3B1cC5wb3N0dHlwZSA9IHBvc3R0eXBlOwoKICAgICAgLy9SZXNldCB0aGlzLCBvdGhlcndpc2Ugd2UgZ2V0IHRoZSBncmVldGluZyB0d2ljZS4uLgogICAgICBzaG93R3JlZXRpbmcgPSBmYWxzZTsKCiAgICAgIC8vY3JlYXRlL2FkZCBvcHRpb25zCiAgICAgIFdyaXRlQ29tbWVudHMocG9wdXApOwoKICAgICAgLy9BZGQgaGFuZGxlcnMgZm9yIGNvbW1hbmQgbGlua3MKICAgICAgcG9wdXAuZmluZCgnLnBvcHVwLWFjdGlvbnMtY2FuY2VsJykuY2xpY2soZnVuY3Rpb24gKCkgeyBwb3B1cC5mYWRlT3V0QW5kUmVtb3ZlKCk7IH0pOwogICAgICBwb3B1cC5maW5kKCcucG9wdXAtYWN0aW9ucy1yZXNldCcpLmNsaWNrKGZ1bmN0aW9uICgpIHsgUmVzZXRDb21tZW50cygpOyBXcml0ZUNvbW1lbnRzKHBvcHVwKTsgfSk7CiAgICAgIHBvcHVwLmZpbmQoJy5wb3B1cC1hY3Rpb25zLXNlZScpLmhvdmVyKGZ1bmN0aW9uICgpIHsKICAgICAgICBwb3B1cC5mYWRlVG8oJ2Zhc3QnLCAnMC40JykuY2hpbGRyZW4oKS5ub3QoJyNjbG9zZScpLmZhZGVUbygnZmFzdCcsICcwLjAnKQogICAgICB9LCBmdW5jdGlvbiAoKSB7CiAgICAgICAgcG9wdXAuZmFkZVRvKCdmYXN0JywgJzEuMCcpLmNoaWxkcmVuKCkubm90KCcjY2xvc2UnKS5mYWRlVG8oJ2Zhc3QnLCAnMS4wJykKICAgICAgfSk7CiAgICAgIHBvcHVwLmZpbmQoJy5wb3B1cC1hY3Rpb25zLWltcGV4cCcpLmNsaWNrKGZ1bmN0aW9uICgpIHsgSW1wb3J0RXhwb3J0KHBvcHVwKTsgfSk7CiAgICAgIHBvcHVwLmZpbmQoJy5wb3B1cC1hY3Rpb25zLXRvZ2dsZWRlc2MnKS5jbGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGhpZGVEZXNjID0gR2V0U3RvcmFnZSgnaGlkZS1kZXNjJykgfHwgInNob3ciOwogICAgICAgIFNldFN0b3JhZ2UoJ2hpZGUtZGVzYycsIGhpZGVEZXNjID09ICJzaG93IiA/ICJoaWRlIiA6ICJzaG93Iik7CiAgICAgICAgU2hvd0hpZGVEZXNjcmlwdGlvbnMocG9wdXApOwogICAgICB9KTsKICAgICAgLy9IYW5kbGUgcmVtb3RlIHVybCAmIHdlbGNvbWUKICAgICAgU2V0dXBSZW1vdGVCb3gocG9wdXApOwogICAgICBTZXR1cFdlbGNvbWVCb3gocG9wdXApOwoKICAgICAgLy9vbiBzdWJtaXQsIGNvbnZlcnQgaHRtbCB0byBtYXJrZG93biBhbmQgY29weSB0byBjb21tZW50IHRleHRhcmVhCiAgICAgIHBvcHVwLmZpbmQoJy5wb3B1cC1zdWJtaXQnKS5jbGljayhmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHNlbGVjdGVkID0gcG9wdXAuZmluZCgnaW5wdXQ6cmFkaW86Y2hlY2tlZCcpOwogICAgICAgIHZhciBtYXJrZG93biA9IGh0bWxUb01hcmtEb3duKHNlbGVjdGVkLnBhcmVudCgpLmZpbmQoJy5hY3Rpb24tZGVzYycpLmh0bWwoKSkucmVwbGFjZSgvXFt1c2VybmFtZVxdL2csIHVzZXJuYW1lKS5yZXBsYWNlKC9cW09QXF0vZywgT1ApOwogICAgICAgIHRhcmdldE9iamVjdC52YWwobWFya2Rvd24pLmZvY3VzKCk7ICAvL2ZvY3VzIHByb3Zva2VzIGNoYXJhY3RlciBjb3VudCB0ZXN0CiAgICAgICAgdmFyIGNhcmV0ID0gbWFya2Rvd24uaW5kZXhPZignW3R5cGUgaGVyZV0nKQogICAgICAgIGlmKGNhcmV0ID49IDApIHRhcmdldE9iamVjdFswXS5zZXRTZWxlY3Rpb25SYW5nZShjYXJldCwgY2FyZXQgKyAnW3R5cGUgaGVyZV0nLmxlbmd0aCk7CiAgICAgICAgcG9wdXAuZmFkZU91dEFuZFJlbW92ZSgpOwogICAgICB9KTsKCiAgICAgIC8vQXV0by1sb2FkIGZyb20gcmVtb3RlIGlmIHJlcXVpcmVkCiAgICAgIGlmKCF3aW5kb3cuVmVyc2lvbkNoZWNrZWQgJiYgR2V0U3RvcmFnZSgiQXV0b1JlbW90ZSIpID09ICd0cnVlJykgewogICAgICAgIHZhciB0aHJvYmJlciA9IHBvcHVwLmZpbmQoIiN0aHJvYmJlcjIiKTsKICAgICAgICB2YXIgcmVtb3RlZXJyb3IgPSBwb3B1cC5maW5kKCcjcmVtb3RlZXJyb3IyJyk7CiAgICAgICAgdGhyb2JiZXIuc2hvdygpOwogICAgICAgIExvYWRGcm9tUmVtb3RlKEdldFN0b3JhZ2UoIlJlbW90ZVVybCIpLAogICAgICAgICAgZnVuY3Rpb24gKCkgeyBXcml0ZUNvbW1lbnRzKHBvcHVwKTsgdGhyb2JiZXIuaGlkZSgpOyB9LAogICAgICAgICAgZnVuY3Rpb24gKGQsIG1zZykgeyByZW1vdGVlcnJvci50ZXh0KG1zZyk7IH0pOwogICAgICB9CgogICAgICAvLyBBdHRhY2ggdG8gI2NvbnRlbnQsIGV2ZXJ5dGhpbmcgZWxzZSBpcyB0b28gZnJhZ2lsZS4KICAgICAgJCgiI2NvbnRlbnQiKS5hcHBlbmQocG9wdXApOwogICAgICBwb3B1cC5jZW50ZXIoKTsKICAgICAgU3RhY2tFeGNoYW5nZS5oZWxwZXJzLmJpbmRNb3ZhYmxlUG9wdXBzKCk7CgogICAgICAvL0dldCB1c2VyIGluZm8gYW5kIGluamVjdAogICAgICB2YXIgdXNlcmlkID0gZ2V0VXNlcklkKHRhcmdldE9iamVjdCk7CiAgICAgIGdldFVzZXJJbmZvKHVzZXJpZCwgcG9wdXApOwogICAgICBPUCA9IGdldE9QKCk7CgogICAgICAvL1dlIG9ubHkgYWN0dWFsbHkgcGVyZm9ybSB0aGUgdXBkYXRlcyBjaGVjayB3aGVuIHNvbWVvbmUgY2xpY2tzLCB0aGlzIHNob3VsZCBtYWtlIGl0IGxlc3MgY29zdGx5LCBhbmQgbW9yZSB0aW1lbHkKICAgICAgLy9hbHNvIHdyYXAgaXQgc28gdGhhdCBpdCBvbmx5IGdldHMgY2FsbGVkIHRoZSAqRklSU1QqIHRpbWUgd2Ugb3BlbiB0aGlzIGRpYWxvZyBvbiBhbnkgZ2l2ZW4gcGFnZSAobm90IG11Y2ggb2YgYW4gb3B0aW1pc2F0aW9uKS4KICAgICAgaWYodHlwZW9mIENoZWNrRm9yTmV3VmVyc2lvbiA9PSAiZnVuY3Rpb24iICYmICF3aW5kb3cuVmVyc2lvbkNoZWNrZWQpIHsgQ2hlY2tGb3JOZXdWZXJzaW9uKHBvcHVwKTsgd2luZG93LlZlcnNpb25DaGVja2VkID0gdHJ1ZTsgfQogICAgfQogIH0pOwp9KTsK"},{"name":"NATO Enhancements","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":["/https?:\\/\\/(meta\\.)?stackoverflow.com\\/tools\\/new-answers-old-questions.*/"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null,"user_agent":""},"storage":{"ts":1456466373761,"data":{}},"enabled":true,"position":15,"file_url":"https://raw.githubusercontent.com/Tiny-Giant/myuserscripts/master/NATOEnhancements.user.js","uuid":"6dad8b6e-1a2a-42b0-901e-67831ea0cf8f","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBOQVRPIEVuaGFuY2VtZW50cwovLyBAbmFtZXNwYWNlICAgIGh0dHA6Ly9naXRodWIuY29tL1RpbnktR2lhbnQKLy8gQHZlcnNpb24gICAgICAxLjAuMC44Ci8vIEBkZXNjcmlwdGlvbiAgSW5jbHVkZXMgdGhlIGFjdHVhbCBwb3N0IG9uIHRoZSBuZXcgYW5zd2VycyB0byBvbGQgcXVlc3Rpb25zIHBhZ2Ugb2YgdGhlIDEwayB0b29scy4gCi8vIEBhdXRob3IgICAgICAgQFRpbnlHaWFudAovLyBAaW5jbHVkZSAgICAgIC9odHRwcz86XC9cLyhtZXRhXC4pP3N0YWNrb3ZlcmZsb3cuY29tXC90b29sc1wvbmV3LWFuc3dlcnMtb2xkLXF1ZXN0aW9ucy4qLwovLyBAZ3JhbnQgICAgICAgIG5vbmUKLy8gPT0vVXNlclNjcmlwdD09Ci8qIGpzaGludCAtVzA5NyAqLwovKiBqc2hpbnQgZXNuZXh0OiB0cnVlICovCid1c2Ugc3RyaWN0JzsKCmNvbnN0IFNjcmlwdFRvSW5qZWN0ID0gZnVuY3Rpb24oKQp7CiAgICAndXNlIHN0cmljdCc7CiAgICBjb25zdCBmdW5jcyA9IHt9OwoKICAgIGZ1bmNzLmZldGNoID0gKHVybCwgY29tcGxldGUpID0+IG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+CiAgICB7CiAgICAgICAgbGV0IHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwoKICAgICAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGV2ZW50ID0+CiAgICAgICAgewogICAgICAgICAgICBpZiAoeGhyLnN0YXR1cyAhPT0gMjAwKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKHhocik7CiAgICAgICAgICAgICAgICByZWplY3QoeGhyKTsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgaWYgKHR5cGVvZiBjb21wbGV0ZSA9PT0gJ2Z1bmN0aW9uJykKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgY29tcGxldGUoeGhyLnJlc3BvbnNlVGV4dCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHJlc29sdmUoeGhyKTsKICAgICAgICB9LCBmYWxzZSk7CgogICAgICAgIHhoci5vcGVuKCdHRVQnLCB1cmwpOwoKICAgICAgICB4aHIuc2VuZCgpOwogICAgfSk7CgogICAgZnVuY3MuZmV0Y2hQb3N0cyA9IHBvc3RzID0+CiAgICB7CiAgICAgICAgY29uc3QgcHJvbWlzZXMgPSBbXTsKCiAgICAgICAgY29uc3QgcG9zdHZvdGVzID0gW107CgogICAgICAgIGZvciAobGV0IHBvc3Qgb2YgcG9zdHMpCiAgICAgICAgewogICAgICAgICAgICAvLyBGaXJlZm94IGlzIGEgYml0Y2gsIGFuZCBkb2Vzbid0IGhhbmRsZSBsZXQgaW4gZm9yLi4ub2YgbG9vcHMgcHJvcGVybHkuCiAgICAgICAgICAgIChmdW5jdGlvbihwb3N0KQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAvLyBHZXQgcG9zdHMKICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goZnVuY3MuZmV0Y2goJy9wb3N0cy9hamF4LWxvYWQtcmVhbHRpbWUvJyArIHBvc3QucXVlc3Rpb25pZCwgaHRtbCA9PgogICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgIHBvc3Qubm9kZXMucXVlc3Rpb24uaW5uZXJIVE1MID0gaHRtbDsKICAgICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goZnVuY3MuZmV0Y2goJy9wb3N0cy9hamF4LWxvYWQtcmVhbHRpbWUvJyArIHBvc3QuYW5zd2VyaWQsIGh0bWwgPT4KICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBwb3N0Lm5vZGVzLmFuc3dlci5pbm5lckhUTUwgPSBodG1sOwogICAgICAgICAgICAgICAgfSkpOwoKICAgICAgICAgICAgICAgIC8vIEdldCB2b3RlcwogICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaChmdW5jcy5mZXRjaCgnL3Bvc3RzLycgKyBwb3N0LnF1ZXN0aW9uaWQgKyAnL3ZvdGVzJywgdm90ZXMgPT4KICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICB2b3RlcyA9IEpTT04ucGFyc2Uodm90ZXMpOwoKICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBwb3N0IG9mIHZvdGVzKQogICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgcG9zdHZvdGVzLnB1c2gocG9zdCk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICB9KShwb3N0KTsKICAgICAgICB9CgogICAgICAgIFByb21pc2UuYWxsKHByb21pc2VzKS50aGVuKHhociA9PgogICAgICAgIHsKICAgICAgICAgICAgZnVuY3MuYWRkQ1NTKCk7CgogICAgICAgICAgICBmb3IgKGxldCBwb3N0IG9mIHBvc3RzKQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBwb3N0Lm5vZGVzLmNvbHVtbnNbMF0uaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgICAgICBwb3N0Lm5vZGVzLmNvbHVtbnNbMV0uaW5uZXJIVE1MID0gJyc7CiAgICAgICAgICAgICAgICBwb3N0Lm5vZGVzLmNvbHVtbnNbMF0uYXBwZW5kQ2hpbGQocG9zdC5ub2Rlcy53cmFwKTsKICAgICAgICAgICAgICAgIHBvc3Qubm9kZXMud3JhcC5zdHlsZS5kaXNwbGF5ID0gJyc7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIFN0YWNrRXhjaGFuZ2UucXVlc3Rpb24uaW5pdCgKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgdm90ZXNDYXN0OiBwb3N0dm90ZXMsCiAgICAgICAgICAgICAgICBjYW5WaWV3Vm90ZUNvdW50czogdHJ1ZSwKICAgICAgICAgICAgICAgIHF1ZXN0aW9uSWQ6IHBvc3RzWzBdLnF1ZXN0aW9uaWQsCiAgICAgICAgICAgICAgICBjYW5PcGVuQm91bnR5OiB0cnVlCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgY29uc3QgY29tbWVudExpbmtzID0gQXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuanMtc2hvdy1saW5rLmNvbW1lbnRzLWxpbmsnKSk7CgogICAgICAgICAgICBmb3IgKGxldCBjb21tZW50TGluayBvZiBjb21tZW50TGlua3MpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGNvbW1lbnRMaW5rLmNsaWNrKCk7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIGZvciAobGV0IHBvc3Qgb2YgcG9zdHMpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIFN0YWNrRXhjaGFuZ2UucmVhbHRpbWUuc3Vic2NyaWJlVG9RdWVzdGlvbihTdGFja0V4Y2hhbmdlLm9wdGlvbnMuc2l0ZS5pZCwgcG9zdC5xdWVzdGlvbmlkKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgU3RhY2tFeGNoYW5nZS5pbmxpbmVUYWdFZGl0aW5nLmluaXQoKTsKICAgICAgICAgICAgCiAgICAgICAgICAgIFN0YWNrRXhjaGFuZ2UuaGVscGVycy5yZW1vdmVTcGlubmVyKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zdWJoZWFkZXIgaDEnKSk7CiAgICAgICAgfSwgeGhyID0+CiAgICAgICAgewogICAgICAgICAgICBjb25zb2xlLmxvZygnRmFpbGVkJywgeGhyKTsKICAgICAgICB9KTsKICAgIH07CgogICAgZnVuY3MuYXBwZW5kTm9kZXMgPSBwb3N0cyA9PgogICAgewogICAgICAgIGZvciAobGV0IHBvc3Qgb2YgcG9zdHMpCiAgICAgICAgewogICAgICAgICAgICBwb3N0Lm5vZGVzLmNvbHVtbnNbMF0uYXBwZW5kQ2hpbGQocG9zdC5ub2Rlcy53cmFwKTsKICAgICAgICB9CiAgICB9OwoKICAgIGZ1bmNzLmdldFBvc3RzID0gKCkgPT4KICAgIHsKICAgICAgICBjb25zdCBwb3N0cyA9IFtdOwogICAgICAgIGNvbnN0IHJvd3MgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kZWZhdWx0LXZpZXctcG9zdC10YWJsZSA+IHRib2R5ID4gdHInKSk7CgogICAgICAgIGZvciAobGV0IHJvdyBvZiByb3dzKQogICAgICAgIHsKICAgICAgICAgICAgY29uc3Qgbm9kZXMgPSB7fTsKCiAgICAgICAgICAgIG5vZGVzLnNjb3BlID0gcm93OwogICAgICAgICAgICBub2Rlcy5jb2x1bW5zID0gQXJyYXkuZnJvbShub2Rlcy5zY29wZS5jaGlsZHJlbik7CiAgICAgICAgICAgIG5vZGVzLndyYXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgbm9kZXMud3JhcC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwoKICAgICAgICAgICAgbm9kZXMub2xkID0ge307CgogICAgICAgICAgICBub2Rlcy5vbGQuYW5zd2VyID0gbm9kZXMuc2NvcGUucXVlcnlTZWxlY3RvcignLnBvc3QtdGV4dCcpOwogICAgICAgICAgICBub2Rlcy5vbGQudGl0bGUgPSBub2Rlcy5zY29wZS5xdWVyeVNlbGVjdG9yKCcuYW5zd2VyLWh5cGVybGluaycpOwoKICAgICAgICAgICAgY29uc3QgdXJsc2VjdGlvbnMgPSAvKFxkKylcLyguKj8pXC8oXGQrKS8uZXhlYyhub2Rlcy5vbGQudGl0bGUuaHJlZik7CiAgICAgICAgICAgIGNvbnN0IHF1ZXN0aW9uaWQgPSB1cmxzZWN0aW9uc1sxXTsKICAgICAgICAgICAgY29uc3QgdGl0bGVzbHVnID0gdXJsc2VjdGlvbnNbMl07CiAgICAgICAgICAgIGNvbnN0IGFuc3dlcmlkID0gdXJsc2VjdGlvbnNbM107CgogICAgICAgICAgICBub2Rlcy50aXRsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gxJyk7CiAgICAgICAgICAgIG5vZGVzLndyYXAuYXBwZW5kQ2hpbGQobm9kZXMudGl0bGUpOwoKICAgICAgICAgICAgbm9kZXMubGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgICAgICAgICAgbm9kZXMubGluay5ocmVmID0gd2luZG93LmxvY2F0aW9uLnByb3RvY29sICsgJy8vJyArIHdpbmRvdy5sb2NhdGlvbi5ob3N0ICsgJy9xdWVzdGlvbnMvJyArIHF1ZXN0aW9uaWQgKyAnLycgKyB0aXRsZXNsdWc7CiAgICAgICAgICAgIG5vZGVzLmxpbmsudGV4dENvbnRlbnQgPSBub2Rlcy5vbGQudGl0bGUudGV4dENvbnRlbnQ7CiAgICAgICAgICAgIG5vZGVzLnRpdGxlLmFwcGVuZENoaWxkKG5vZGVzLmxpbmspOwoKICAgICAgICAgICAgbm9kZXMucXVlc3Rpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgbm9kZXMud3JhcC5hcHBlbmRDaGlsZChub2Rlcy5xdWVzdGlvbik7CgogICAgICAgICAgICBub2Rlcy5hbnN3ZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsKICAgICAgICAgICAgbm9kZXMud3JhcC5hcHBlbmRDaGlsZChub2Rlcy5hbnN3ZXIpOwoKICAgICAgICAgICAgcG9zdHMucHVzaCgKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgYW5zd2VyaWQ6IGFuc3dlcmlkLAogICAgICAgICAgICAgICAgcXVlc3Rpb25pZDogcXVlc3Rpb25pZCwKICAgICAgICAgICAgICAgIG5vZGVzOiBub2RlcwogICAgICAgICAgICB9KTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBwb3N0czsKICAgIH07CgogICAgZnVuY3MuYWRkQ1NTID0gKCkgPT4KICAgIHsKICAgICAgICBjb25zdCBDU1MgPSBbCiAgICAgICAgICAgICcucXVlc3Rpb24sIC5hbnN3ZXIgeycsCiAgICAgICAgICAgICcgICAgd2lkdGg6IDczMHB4ICFpbXBvcnRhbnQnLAogICAgICAgICAgICAnfScsCiAgICAgICAgICAgICdoMSwgaDIsIGgzLCBoNCwgaDUsIGg2IHsnLAogICAgICAgICAgICAnICAgIGZvbnQtd2VpZ2h0OiBub3JtYWwnLAogICAgICAgICAgICAnfScsCiAgICAgICAgICAgICcuYW5zd2VyIHsnLAogICAgICAgICAgICAnICAgIGJhY2tncm91bmQ6IFJHQkEoMjU1LDE1MywwLCAwLjEpOycsCiAgICAgICAgICAgICcgICAgbWFyZ2luLXRvcDogMWVtOycsCiAgICAgICAgICAgICd9JwogICAgICAgIF0uam9pbignXG4nKTsKCiAgICAgICAgY29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpOwogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc3R5bGUpOwoKICAgICAgICBjb25zdCB0ZXh0ID0gZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoQ1NTKTsKICAgICAgICBzdHlsZS5hcHBlbmRDaGlsZCh0ZXh0KTsKICAgIH0KCiAgICBmdW5jcy5pbml0ID0gKCkgPT4KICAgIHsKICAgICAgICBjb25zdCBwb3N0cyA9IGZ1bmNzLmdldFBvc3RzKCk7CgogICAgICAgIGNvbnN0IHRpdGxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnN1YmhlYWRlciBoMScpOwoKICAgICAgICBTdGFja0V4Y2hhbmdlLmhlbHBlcnMuYWRkU3Bpbm5lcih0aXRsZSk7CgogICAgICAgIFN0YWNrRXhjaGFuZ2UudXNpbmcoImlubGluZUVkaXRpbmciLCAoKSA9PgogICAgICAgIHsKICAgICAgICAgICAgU3RhY2tFeGNoYW5nZS5pbmxpbmVFZGl0aW5nLmluaXQoKTsKICAgICAgICB9KTsKICAgICAgICAKICAgICAgICAvLyBUaGlzIGhhY2sgaXMgdG8gc3RvcCB0aGUgaW5saW5lIHRhZyBlZGl0b3IgZnJvbSBtb3ZpbmcgYWxsIHRhZ3Mgb24gdGhlIHBhZ2UgaW50byB0aGUgZmlyc3QgcXVlc3Rpb24uCiAgICAgICAgLy8gU2hvZzkga25vd3MgYWJvdXQgdGhpcywgYnV0IGRlY2lkZWQgbm90IHRvIGZpeCBpdCBiZWNhdXNlIG5vIG9uZSB1c2luZyB0aGUgc2l0ZSBub3JtYWxseSB3aWxsIGV2ZXIKICAgICAgICAvLyBydW4gaW50byB0aGlzIHByb2JsZW0uIFRoYW5rIHRoZSBhbG1pZ2h0eSBTaG9nLgogICAgICAgIFN0YWNrRXhjaGFuZ2UudXNpbmcoImlubGluZVRhZ0VkaXRpbmciLCAoKSA9PiAKICAgICAgICB7CiAgICAgICAgICAgIFN0YWNrRXhjaGFuZ2UuaW5saW5lVGFnRWRpdGluZyA9IChmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICB2YXIgcXVlc3Rpb25zID0gJCgnZGl2LnF1ZXN0aW9uJyk7CiAgICAgICAgICAgICAgICB2YXIgaW5pdHMgPSB7fTsKCiAgICAgICAgICAgICAgICBxdWVzdGlvbnMuZWFjaChmdW5jdGlvbigpewogICAgICAgICAgICAgICAgICAgIHZhciBxdWVzdGlvbiA9ICQodGhpcyk7CiAgICAgICAgICAgICAgICAgICAgdmFyIGpUYWdMaXN0OwogICAgICAgICAgICAgICAgICAgIHZhciBqRWRpdFRhZ3NMaW5rOwogICAgICAgICAgICAgICAgICAgIHZhciBqTGlua1dyYXBwZXI7CgogICAgICAgICAgICAgICAgICAgIHZhciBxdWVzdGlvbklkOwogICAgICAgICAgICAgICAgICAgIHZhciByZXZpZXdUYXNrSWQ7CiAgICAgICAgICAgICAgICAgICAgdmFyIGpDdXJyZW50VGFnc0J1ZmZlciA9ICQoIjxkaXY+PC9kaXY+Iik7CgogICAgICAgICAgICAgICAgICAgIHZhciBiaW5kV3JhcHBlckhvdmVyRXZlbnRzID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBqTGlua1dyYXBwZXIKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tb3VzZW92ZXIoZnVuY3Rpb24gKCkgeyBqRWRpdFRhZ3NMaW5rLnNob3coKTsgfSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5tb3VzZW91dChmdW5jdGlvbiAoKSB7IGpFZGl0VGFnc0xpbmsuaGlkZSgpOyB9KTsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICB2YXIgYmluZEVkaXRUYWdzTGlua0NsaWNrID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBqRWRpdFRhZ3NMaW5rLnVuYmluZCgnY2xpY2snKS5vbmUoJ2NsaWNrJywgZnVuY3Rpb24gKCkgewoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpMaW5rV3JhcHBlci5mYWRlT3V0KCdmYXN0JywgZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVwb24gY2xpY2tpbmcgImVkaXQgdGFncyIsIHNhdmUgdGhlIGN1cnJlbnQgdGFncyBpbiBjYXNlIG9mIGNhbmNlbAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpMaW5rV3JhcHBlci5hcHBlbmRUbyhqQ3VycmVudFRhZ3NCdWZmZXIpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBmZXRjaCBvdXIgdGFnIGVkaXRvciAtIHdpbGwgY29udGFpbiB0aGUgbGF0ZXN0IHRhZ3MsIHdoaWNoIGNvdWxkIGRpZmZlciBmcm9tIHdoYXQncyBsb2FkZWQKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBTdGFja0V4Y2hhbmdlLmhlbHBlcnMuYWRkU3Bpbm5lcihqVGFnTGlzdCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5hamF4KHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ0dFVCcsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVybDogJy9wb3N0cy8nICsgcXVlc3Rpb25JZCArICcvZWRpdC10YWdzJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogeyByZXZpZXdUYXNrSWQ6IHJldmlld1Rhc2tJZCB9LAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2h0bWwnLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmZXRjaFN1Y2Nlc3MsCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBmZXRjaEVycm9yCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3RvcmVDdXJyZW50VGFncyA9IGZ1bmN0aW9uIChpbW1lZGlhdGVseSkgewogICAgICAgICAgICAgICAgICAgICAgICBTdGFja0V4Y2hhbmdlLmhlbHBlcnMuZGlzYWJsZVN1Ym1pdEJ1dHRvbihqVGFnTGlzdCk7CiAgICAgICAgICAgICAgICAgICAgICAgIFN0YWNrRXhjaGFuZ2UuaGVscGVycy5yZW1vdmVNZXNzYWdlcygpOwogICAgICAgICAgICAgICAgICAgICAgICB2YXIgZG9JdCA9IGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpUYWdMaXN0LmVtcHR5KCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqTGlua1dyYXBwZXIuYXBwZW5kVG8oalRhZ0xpc3QpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgakxpbmtXcmFwcGVyLnNob3coKS5maW5kKCdhI2VkaXQtdGFncycpLnBhcmVudCgpLmhpZGUoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpUYWdMaXN0LmZhZGVJbignZmFzdCcpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgYmluZEVkaXRUYWdzTGlua0NsaWNrKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbW1lZGlhdGVseSkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvSXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZQogICAgICAgICAgICAgICAgICAgICAgICAgICAgalRhZ0xpc3QuZmFkZU91dCgnZmFzdCcsIGRvSXQpOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIHZhciBmZXRjaFN1Y2Nlc3MgPSBmdW5jdGlvbiAoaHRtbCkgewogICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiB3ZSBjb3VsZCBmZXRjaCBuZXdlciB0YWdzIC0gdXBkYXRlIGpDdXJyZW50VGFnc0J1ZmZlcidzIHRhZ3Mgd2l0aCBsYXRlc3QKCiAgICAgICAgICAgICAgICAgICAgICAgIFN0YWNrRXhjaGFuZ2UuaGVscGVycy5yZW1vdmVTcGlubmVyKCk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyB3ZSdsbCBoaWRlIHRoZSBjb250YWluZXIsIHRoZW4gc2hvdyBpdCB2aWEgYW5pbWF0aW9uIChKT1kpCiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBqSHRtbCA9ICQoaHRtbCk7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBvbmx5IGZldGNoIHRhZ2VkaXRvci5qcyBpZiB0aGUgYXV0b2NvbXBsZXRlIHBsdWdpbiBpc24ndCBhdmFpbGFibGUKICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiAkKCkuYXV0b2NvbXBsZXRlID09ICdmdW5jdGlvbicpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqSHRtbCA9IGpIdG1sLm5vdCgnc2NyaXB0W3NyYyo9InRhZ2VkaXRvci5qcyJdJyk7CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgakZvcm0gPSAkKCc8Zm9ybSBtZXRob2Q9InBvc3QiIGFjdGlvbj0iL3Bvc3RzLycgKyBxdWVzdGlvbklkICsgJy9lZGl0LXRhZ3MiPjwvZm9ybT4nKTsKICAgICAgICAgICAgICAgICAgICAgICAgalRhZ0xpc3QuY3NzKCdkaXNwbGF5JywgJ25vbmUnKS5hcHBlbmQoakZvcm0pOwogICAgICAgICAgICAgICAgICAgICAgICBqRm9ybS5hcHBlbmQoakh0bWwpOwoKICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIHN1Ym1pdCBhbmQgY2FuY2VsCiAgICAgICAgICAgICAgICAgICAgICAgIGpUYWdMaXN0LmZpbmQoJ2Rpdi5mb3JtLWl0ZW0nKS5hcHBlbmQoCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz0iZm9ybS1zdWJtaXQiPicgKwogICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9ImZrZXkiIHZhbHVlPSInICsgU3RhY2tFeGNoYW5nZS5vcHRpb25zLnVzZXIuZmtleSArICciIC8+JyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0icmV2aWV3VGFza0lkIiB2YWx1ZT0iJyArIHJldmlld1Rhc2tJZCArICciIC8+JyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCc8aW5wdXQ+JywgeyBpZDogImVkaXQtdGFncy1zdWJtaXQiLCB0eXBlOiAic3VibWl0IiwgdmFsdWU6ICJTYXZlIFRhZyBFZGl0cyIsIHRhYmluZGV4OiAiMTA0IiB9KS5wcm9wKCdvdXRlckhUTUwnKSArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGEgaWQ9ImVkaXQtdGFncy1jYW5jZWwiIGNsYXNzPSJjYW5jZWwtZWRpdCIgc3R5bGU9Im1hcmdpbi1sZWZ0OjhweDsiIGhyZWY9IiMiIHRhYmluZGV4PSIxMDUiPicgKyAiY2FuY2VsIiArICc8L2E+JyArCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+Jyk7CgogICAgICAgICAgICAgICAgICAgICAgICBTdGFja0V4Y2hhbmdlLnVzaW5nKCJwb3N0VmFsaWRhdGlvbiIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIFN0YWNrRXhjaGFuZ2UucG9zdFZhbGlkYXRpb24uaW5pdE9uQmx1ckFuZFN1Ym1pdChqRm9ybSwgMSwgJ3RhZ3MnLCBmYWxzZSwgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXJ2ZXIgc2VuZHMgZG93biB0aGUgc2F2ZWQgdGFncyBhcyB0aGV5IGFyZSBmaXJzdCByZW5kZXJlZCBvbiB0aGUgcGFnZSAtIHJlcGxhY2UgYnVmZmVyZWQgdGFncyBhbmQgc2hvdwogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpMaW5rV3JhcHBlci5maW5kKCdhLnBvc3QtdGFnJykucmVtb3ZlKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgakxpbmtXcmFwcGVyLnByZXBlbmQoZGF0YS5odG1sKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN0b3JlQ3VycmVudFRhZ3MoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKGRvY3VtZW50KS50cmlnZ2VyKCdyZXRhZycsIHF1ZXN0aW9uSWQpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICAgICAgakZvcm0uZmluZCgnLmNhbmNlbC1lZGl0JykuY2xpY2soZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3RvcmVDdXJyZW50VGFncygpOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICAgICAgICAgIGpUYWdMaXN0LmZhZGVJbignZmFzdCcsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJyN0YWduYW1lcycpLmZvY3VzKCk7CiAgICAgICAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICAgIH07CgogICAgICAgICAgICAgICAgICAgIHZhciBmZXRjaEVycm9yID0gZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIC8vIHVuZG8gb3VyIHN0eWxpbmcgYW5kIHNob3cgd2hhdCBoYXBwZW5lZAogICAgICAgICAgICAgICAgICAgICAgICBTdGFja0V4Y2hhbmdlLmhlbHBlcnMucmVtb3ZlU3Bpbm5lcigpOwogICAgICAgICAgICAgICAgICAgICAgICByZXN0b3JlQ3VycmVudFRhZ3MoKTsKICAgICAgICAgICAgICAgICAgICAgICAgU3RhY2tFeGNoYW5nZS5oZWxwZXJzLnNob3dFcnJvck1lc3NhZ2UoakxpbmtXcmFwcGVyLCAocmVzcG9uc2UucmVzcG9uc2VUZXh0ICYmIHJlc3BvbnNlLnJlc3BvbnNlVGV4dC5sZW5ndGggPCAzMDAgPyByZXNwb25zZS5yZXNwb25zZVRleHQgOiAiQW4gZXJyb3Igb2NjdXJyZWQgd2hlbiBmZXRjaGluZyB0aGUgdGFnIGVkaXRvciIpKTsKICAgICAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgICAgICAvLyBwdWJsaWMgbWV0aG9kcwogICAgICAgICAgICAgICAgICAgIGluaXRzW3F1ZXN0aW9uSWRdID0gewogICAgICAgICAgICAgICAgICAgICAgICBpbml0OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoU3RhY2tFeGNoYW5nZS5kaXNhYmxlSW5saW5lVGFnRWRpdHMpIHJldHVybjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgcXVlc3Rpb25JZCA9IHF1ZXN0aW9uLmZpbmQoJ2Rpdi52b3RlID4gaW5wdXRbdHlwZT0iaGlkZGVuIl0nKS52YWwoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpUYWdMaXN0ID0gcXVlc3Rpb24uZmluZCgnZGl2LnBvc3QtdGFnbGlzdCcpOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHdyYXAgb3VyIHRhZ3MgaW4gYSBzcGFuIHRvIGVhc2UgaG92ZXIgc2hvdy9oaWRlCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqVGFnTGlzdC5maW5kKCdhLnBvc3QtdGFnJykud3JhcEFsbCgnPHNwYW4gY2xhc3M9ImVkaXQtdGFncy13cmFwcGVyIj48L3NwYW4+Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqTGlua1dyYXBwZXIgPSBqVGFnTGlzdC5maW5kKCdzcGFuLmVkaXQtdGFncy13cmFwcGVyJyk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYWRkIGFuICJlZGl0IHRhZ3MiIGxpbmsgdXBvbiBob3ZlcmluZyBvdmVyIHRhZ3MKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpFZGl0VGFnc0xpbmsgPSAkKCc8c3BhbiBjbGFzcz0iZG5vIj4nICsgJCgnPGE+JywgeyBpZDogImVkaXQtdGFncyIsIHN0eWxlOiAiIiwgdGl0bGU6ICJlZGl0IG9ubHkgdGhpcyBxdWVzdGlvbidzIHRhZ3MiLCB0ZXh0OiAiZWRpdCB0YWdzIiB9KS5wcm9wKCdvdXRlckhUTUwnKSArICc8L3NwYW4+Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqTGlua1dyYXBwZXIuYXBwZW5kKGpFZGl0VGFnc0xpbmspOwoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpbmRXcmFwcGVySG92ZXJFdmVudHMoKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpbmRFZGl0VGFnc0xpbmtDbGljaygpOwogICAgICAgICAgICAgICAgICAgICAgICB9LAoKICAgICAgICAgICAgICAgICAgICAgICAgaW5pdFJldmlld1JldGFnOiBmdW5jdGlvbiAoY3VycmVudFJldmlld1Rhc2tJZCkgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKFN0YWNrRXhjaGFuZ2UuZGlzYWJsZUlubGluZVRhZ0VkaXRzKSByZXR1cm47CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXN0aW9uSWQgPSBxdWVzdGlvbi5maW5kKCdkaXYudm90ZSA+IGlucHV0W3R5cGU9ImhpZGRlbiJdJykudmFsKCk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZpZXdUYXNrSWQgPSBjdXJyZW50UmV2aWV3VGFza0lkOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgalRhZ0xpc3QgPSBxdWVzdGlvbi5maW5kKCdkaXYucG9zdC10YWdsaXN0Jyk7CgogICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gd3JhcCBvdXIgdGFncyBpbiBhIHNwYW4gdG8gZWFzZSBob3ZlciBzaG93L2hpZGUKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpUYWdMaXN0LmZpbmQoJ2EucG9zdC10YWcnKS53cmFwQWxsKCc8c3BhbiBjbGFzcz0iZWRpdC10YWdzLXdyYXBwZXIiPjwvc3Bhbj4nKTsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGpMaW5rV3JhcHBlciA9IGpUYWdMaXN0LmZpbmQoJ3NwYW4uZWRpdC10YWdzLXdyYXBwZXInKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqRWRpdFRhZ3NMaW5rID0gJCgnLnJldGFnLXF1ZXN0aW9uOmZpcnN0Jyk7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBqRWRpdFRhZ3NMaW5rLnJlbW92ZUF0dHIoJ2hyZWYnKTsKCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaW5kRWRpdFRhZ3NMaW5rQ2xpY2soKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgaW5pdDogZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgICAgICAgICAgICBmb3IodmFyIGkgaW4gaW5pdHMpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGluaXRzW2ldLmluaXQoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0sCgogICAgICAgICAgICAgICAgICAgIGluaXRSZXZpZXdSZXRhZzogZnVuY3Rpb24gKGN1cnJlbnRSZXZpZXdUYXNrSWQpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZm9yKHZhciBpIGluIGluaXRzKQogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbml0c1tpXS5pbml0UmV2aWV3UmV0YWcoKTsKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkoKTsKICAgICAgICB9KTsKCiAgICAgICAgZnVuY3MuYXBwZW5kTm9kZXMocG9zdHMpOwoKICAgICAgICBmdW5jcy5mZXRjaFBvc3RzKHBvc3RzKTsKICAgIH07CgogICAgZnVuY3MuaW5pdCgpOwp9OwoKY29uc3QgU2NyaXB0VG9JbmplY3ROb2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7CmRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoU2NyaXB0VG9JbmplY3ROb2RlKTsKCmNvbnN0IFNjcmlwdFRvSW5qZWN0Q29udGVudCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcoJyArIFNjcmlwdFRvSW5qZWN0LnRvU3RyaW5nKCkgKyAnKSgpJyk7ClNjcmlwdFRvSW5qZWN0Tm9kZS5hcHBlbmRDaGlsZChTY3JpcHRUb0luamVjdENvbnRlbnQpOwo="},{"name":"Votes Page Enhancer","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":["/https?:\\/\\/(meta\\.|www\\.)?stackoverflow\\.com/users/.*?tab\\=votes.*/"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null,"user_agent":""},"storage":{"ts":1457442038376,"data":{}},"enabled":true,"position":16,"uuid":"ad9135a7-2e9a-423b-baf5-6bc59f6598cf","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBWb3RlcyBQYWdlIEVuaGFuY2VyCi8vIEBuYW1lc3BhY2UgICAgaHR0cDovL3RhbXBlcm1vbmtleS5uZXQvCi8vIEB2ZXJzaW9uICAgICAgMS4wLjAuMgovLyBAZGVzY3JpcHRpb24gIExvYWRzIHBvc3RzIGluIHRoZWlyIG5hdHVyYWwgZm9ybSBvbiB0aGUgdm90ZXMgcGFnZXMgZm9yIHVzZXJzLgovLyBAYXV0aG9yICAgICAgIEBUaW55LUdpYW50Ci8vIEBpbmNsdWRlICAgICAgL2h0dHBzPzpcL1wvKG1ldGFcLnx3d3dcLik/c3RhY2tvdmVyZmxvd1wuY29tL3VzZXJzLy4qP3RhYlw9dm90ZXMuKi8KLy8gQGdyYW50ICAgICAgICBub25lCi8vID09L1VzZXJTY3JpcHQ9PQovKiBqc2hpbnQgLVcwOTcgKi8KJ3VzZSBzdHJpY3QnOwoKbGV0IHN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsKc3R5bGUudGV4dENvbnRlbnQgPSAnLmFjdHVhbC1lZGl0LW92ZXJsYXkgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH0nOwpkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHN0eWxlKTsKClN0YWNrRXhjaGFuZ2UudXNpbmcoImlubGluZUVkaXRpbmciLCBmdW5jdGlvbiAoKSB7CiAgICBTdGFja0V4Y2hhbmdlLmlubGluZUVkaXRpbmcuaW5pdCgpOwp9KTsKCmxldCBjc3MgPSBbCiAgICAnLnF1ZXN0aW9uLCAuYW5zd2VyIHsnLAogICAgJyAgICB3aWR0aDogNzMwcHggIWltcG9ydGFudCcsCiAgICAnfScsCiAgICAnLnZvdGVjZWxsIHsnLAogICAgJyAgICB2ZXJ0aWNhbC1hbGlnbjogdG9wICFpbXBvcnRhbnQ7JywKICAgICd9JywKICAgICdoMSwgaDIsIGgzLCBoNCwgaDUsIGg2IHsnLAogICAgJyAgICBmb250LXdlaWdodDogbm9ybWFsJywKICAgICd9JwpdLmpvaW4oJ1xuJyk7CgppZiAoZmFsc2UpOwplbHNlIGlmICgidW5kZWZpbmVkIiAhPSB0eXBlb2YgR01fYWRkU3R5bGUpICBHTV9hZGRTdHlsZShjc3MpOwplbHNlIGlmICgidW5kZWZpbmVkIiAhPSB0eXBlb2YgUFJPX2FkZFN0eWxlKSBQUk9fYWRkU3R5bGUoY3NzKTsKZWxzZSBpZiAoInVuZGVmaW5lZCIgIT0gdHlwZW9mIGFkZFN0eWxlKSAgICAgYWRkU3R5bGUoY3NzKTsKZWxzZSAoZG9jdW1lbnQuYm9keSB8fCBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYm9keSIpWzBdKS5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVFbGVtZW50KCJzdHlsZSIpLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGNzcykpLnBhcmVudE5vZGUpOwoKbGV0IGluaXRQb3N0ID0gKHBvc3QsIGh0bWwsIGNvbnRhaW5lciwgbG9hZGVyLCBwYXJlbnQpID0+IHsKICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKCiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGV2ZW50ID0+IHsKICAgICAgICBpZih4aHIuc3RhdHVzICE9PSAyMDApIHsKICAgICAgICAgICAgY29uc29sZS5sb2coeGhyLnN0YXR1cywgeGhyLnN0YXR1c1RleHQsIHhoci5yZXNwb25zZVRleHQpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIAogICAgICAgIGxldCBxdWVzdGlvbiA9ICgvXGQrLy5leGVjKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlbmFibGUtbG9hZC1ib2R5LScgKyBwb3N0KS5xdWVyeVNlbGVjdG9yKCdhW2hyZWZdJykpfHxbZmFsc2VdKVswXTsKICAgICAgICAKICAgICAgICBsZXQgb3NuaXBwZXRzID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5zbmlwcGV0Jyk7CiAgICAgICAgCiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9IGh0bWw7CiAgICAgICAgCiAgICAgICAgbGV0IG5zbmlwcGV0cyA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuc25pcHBldCcpOwogICAgICAgIAogICAgICAgIGxvYWRlci5yZW1vdmUoKTsKICAgICAgICBwYXJlbnQuYXBwZW5kQ2hpbGQoY29udGFpbmVyKTsKCiAgICAgICAgU3RhY2tFeGNoYW5nZS5xdWVzdGlvbi5pbml0KHsKICAgICAgICAgICAgdm90ZXNDYXN0OiBKU09OLnBhcnNlKHhoci5yZXNwb25zZVRleHQpLAogICAgICAgICAgICBjYW5WaWV3Vm90ZUNvdW50czogdHJ1ZSwKICAgICAgICAgICAgcXVlc3Rpb25JZDogcXVlc3Rpb24KICAgICAgICB9KTsKCiAgICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5qcy1zaG93LWxpbmsuY29tbWVudHMtbGluaycpLmNsaWNrKCk7CiAgICAgICAgCiAgICAgICAgZm9yKGxldCBpIGluIE9iamVjdC5rZXlzKG5zbmlwcGV0cykpIHsKICAgICAgICAgICAgbnNuaXBwZXRzW2ldLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG9zbmlwcGV0c1tpXSwgbnNuaXBwZXRzW2ldKTsKICAgICAgICAgICAgbnNuaXBwZXRzW2ldLnJlbW92ZSgpOwogICAgICAgIH0KICAgIH0sIGZhbHNlKTsKCiAgICB4aHIub3BlbignR0VUJywgJy9wb3N0cy8nICsgcG9zdCArICcvdm90ZXMnKTsKCiAgICB4aHIuc2VuZCgpOwp9CgpsZXQgZmV0Y2hQb3N0ID0gcG9zdCA9PiB7CiAgICBsZXQgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2VuYWJsZS1sb2FkLWJvZHktJyArIHBvc3QpLnBhcmVudE5vZGUubmV4dEVsZW1lbnRTaWJsaW5nLnF1ZXJ5U2VsZWN0b3IoJy5ib2R5LWNvbnRhaW5lcicpOwogICAgbGV0IHBhcmVudCA9IGNvbnRhaW5lci5wYXJlbnROb2RlOwogICAgY29udGFpbmVyLnJlbW92ZSgpOwogICAgCiAgICBsZXQgbG9hZGVyID0gcGFyZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RkJykpOwogICAgbG9hZGVyLmNsYXNzTmFtZSA9ICdib2R5LWNvbnRhaW5lcic7CiAgICBsb2FkZXIuc3R5bGUuaGVpZ2h0ID0gJ2F1dG8nOwogICAgbG9hZGVyLmlubmVySFRNTCA9ICc8aW1nIGNsYXNzPSJhamF4LWxvYWRlciIgc3JjPSIvY29udGVudC9pbWcvcHJvZ3Jlc3MtZG90cy5naWYiIHRpdGxlPSJsb2FkaW5nLi4uIiBhbHQ9ImxvYWRpbmcuLi4iPic7CiAgICAKICAgIGxldCB4aHIgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTsKCiAgICB4aHIuYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIGV2ZW50ID0+IHsKICAgICAgICBpZih4aHIuc3RhdHVzICE9PSAyMDApIHsKICAgICAgICAgICAgY29uc29sZS5sb2coeGhyLnN0YXR1cywgeGhyLnN0YXR1c1RleHQsIHhoci5yZXNwb25zZVRleHQpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQoKICAgICAgICBpbml0UG9zdChwb3N0LCB4aHIucmVzcG9uc2VUZXh0LCBjb250YWluZXIsIGxvYWRlciwgcGFyZW50KTsKICAgIH0sIGZhbHNlKTsKCiAgICB4aHIub3BlbignR0VUJywgJy9wb3N0cy9hamF4LWxvYWQtcmVhbHRpbWUvJyArIHBvc3QpOwoKICAgIHhoci5zZW5kKCk7Cn0KCiQoZG9jdW1lbnQpLmFqYXhDb21wbGV0ZSgoZXZlbnQsIHJlcXVlc3QsIHNldHRpbmdzKSA9PiB7IAogICAgbGV0IHBvc3QgPSAoL3Bvc3RzXC8oXGQrKVwvYm9keS8uZXhlYyhzZXR0aW5ncy51cmwpfHxbMCwwXSlbMV07CiAgICBpZiAocG9zdCkgZmV0Y2hQb3N0KHBvc3QpOwp9KTs="},{"name":"Flagging Percentages","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":["*://api.stackexchange.com/*","*://blog.stackexchange.com/*","*://blog.stackoverflow.com/*","*://data.stackexchange.com/*","*://elections.stackexchange.com/*","*://stackexchange.com/*"],"orig_includes":[],"orig_matches":["*://*.askubuntu.com/users/flag-summary/*","*://*.mathoverflow.net/users/flag-summary/*","*://*.serverfault.com/users/flag-summary/*","*://*.stackapps.com/users/flag-summary/*","*://*.stackexchange.com/users/flag-summary/*","*://*.stackoverflow.com/users/flag-summary/*","*://*.superuser.com/users/flag-summary/*"],"orig_noframes":null,"orig_run_at":"document-end","use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null,"user_agent":""},"storage":{"ts":1458020544836,"data":{}},"enabled":true,"position":17,"file_url":"file:///home/kevin/Downloads/flagging-percentages.user.js","uuid":"3d679309-7436-47ce-b601-9fc6c1be4484","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBGbGFnZ2luZyBQZXJjZW50YWdlcwovLyBAZGVzY3JpcHRpb24gIEFkZHMgZmxhZ2dpbmcgcGVyY2VudGFnZXMgd2hlbiB2aWV3aW5nIHRoZSBGbGFnIFN1bW1hcnkgcGFnZS4KLy8gQG5hbWVzcGFjZSAgICBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3VzZXJzLzE0NTQ1MzgvCi8vIEBhdXRob3IgICAgICAg4bSJyp51x50KLy8gQG1hdGNoICAgICAgICAqOi8vKi5hc2t1YnVudHUuY29tL3VzZXJzL2ZsYWctc3VtbWFyeS8qCi8vIEBtYXRjaCAgICAgICAgKjovLyoubWF0aG92ZXJmbG93Lm5ldC91c2Vycy9mbGFnLXN1bW1hcnkvKgovLyBAbWF0Y2ggICAgICAgICo6Ly8qLnNlcnZlcmZhdWx0LmNvbS91c2Vycy9mbGFnLXN1bW1hcnkvKgovLyBAbWF0Y2ggICAgICAgICo6Ly8qLnN0YWNrYXBwcy5jb20vdXNlcnMvZmxhZy1zdW1tYXJ5LyoKLy8gQG1hdGNoICAgICAgICAqOi8vKi5zdGFja2V4Y2hhbmdlLmNvbS91c2Vycy9mbGFnLXN1bW1hcnkvKgovLyBAbWF0Y2ggICAgICAgICo6Ly8qLnN0YWNrb3ZlcmZsb3cuY29tL3VzZXJzL2ZsYWctc3VtbWFyeS8qCi8vIEBtYXRjaCAgICAgICAgKjovLyouc3VwZXJ1c2VyLmNvbS91c2Vycy9mbGFnLXN1bW1hcnkvKgovLyBAZXhjbHVkZSAgICAgICo6Ly9hcGkuc3RhY2tleGNoYW5nZS5jb20vKgovLyBAZXhjbHVkZSAgICAgICo6Ly9ibG9nLnN0YWNrZXhjaGFuZ2UuY29tLyoKLy8gQGV4Y2x1ZGUgICAgICAqOi8vYmxvZy5zdGFja292ZXJmbG93LmNvbS8qCi8vIEBleGNsdWRlICAgICAgKjovL2RhdGEuc3RhY2tleGNoYW5nZS5jb20vKgovLyBAZXhjbHVkZSAgICAgICo6Ly9lbGVjdGlvbnMuc3RhY2tleGNoYW5nZS5jb20vKgovLyBAZXhjbHVkZSAgICAgICo6Ly9zdGFja2V4Y2hhbmdlLmNvbS8qCi8vIEBydW4tYXQgICAgICAgZG9jdW1lbnQtZW5kCi8vID09L1VzZXJTY3JpcHQ9PQovKiBqc2hpbnQgLVcwOTcgKi8KKGZ1bmN0aW9uICgkKSB7CiAgICAidXNlIHN0cmljdCI7CiAgICB2YXIgZ3JvdXAgPSB7CiAgICAgICAgUE9TVDogMSwKICAgICAgICBTUEFNOiAyLAogICAgICAgIE9GRkVOU0lWRTogMywKICAgICAgICBDT01NRU5UOiA0CiAgICB9OwogICAgdmFyIHR5cGUgPSB7CiAgICAgICAgVE9UQUw6ICJmbGFncyIsCiAgICAgICAgV0FJVElORzogIndhaXRpbmciLAogICAgICAgIEhFTFBGVUw6ICJoZWxwZnVsIiwKICAgICAgICBERUNMSU5FRDogImRlY2xpbmVkIiwKICAgICAgICBESVNQVVRFRDogImRpc3B1dGVkIiwKICAgICAgICBBR0VEQVdBWTogImFnZWQgYXdheSIKICAgIH07CgogICAgdmFyIGdyb3VwS2V5LAogICAgICAgIHR5cGVLZXksCiAgICAgICAgdG90YWwsCiAgICAgICAgY291bnQsCiAgICAgICAgcGVyY2VudGFnZTsKCiAgICBmdW5jdGlvbiBhZGRQZXJjZW50YWdlKGdyb3VwLCB0eXBlLCBwZXJjZW50YWdlKSB7CiAgICAgICAgdmFyICRzcGFuID0gJCgiPHNwYW4vPiIsIHsKICAgICAgICAgICAgdGV4dDogIih7MH0lKSIucmVwbGFjZSgnezB9JywgcGVyY2VudGFnZSksCiAgICAgICAgICAgIHN0eWxlOiAibWFyZ2luLWxlZnQ6NXB4OyBjb2xvcjogIzk5OTsgZm9udC1zaXplOiAxMnB4OyIKICAgICAgICB9KTsKICAgICAgICAkKCJ0ZCA+IGFbaHJlZio9J2dyb3VwPSIgKyBncm91cCArICInXTpjb250YWlucygnIiArIHR5cGUgKyAiJykiKS5hZnRlcigkc3Bhbik7CiAgICB9CgogICAgZnVuY3Rpb24gY2FsY3VsYXRlUGVyY2VudGFnZShjb3VudCwgdG90YWwpIHsKICAgICAgICB2YXIgcGVyY2VudCA9IChjb3VudCAvIHRvdGFsKSAqIDEwMDsKICAgICAgICByZXR1cm4gK3BlcmNlbnQudG9GaXhlZCgyKTsKICAgIH0KCiAgICBmdW5jdGlvbiBnZXRGbGFnQ291bnQoZ3JvdXAsIHR5cGUpIHsKICAgICAgICB2YXIgZmxhZ0NvdW50ID0gMDsKICAgICAgICBmbGFnQ291bnQgKz0gTnVtYmVyKCQoInRkID4gYVtocmVmKj0nZ3JvdXA9IiArIGdyb3VwICsgIiddOmNvbnRhaW5zKCciICsgdHlwZSArICInKSIpCiAgICAgICAgICAgIC5wYXJlbnQoKQogICAgICAgICAgICAucHJldigpCiAgICAgICAgICAgIC50ZXh0KCkKICAgICAgICAgICAgLnJlcGxhY2UoIiwiLCAiIikpOwogICAgICAgIHJldHVybiBmbGFnQ291bnQ7CiAgICB9CgogICAgLy8gYWRkIHBlcmNlbnRhZ2VzCiAgICBmb3IgKGdyb3VwS2V5IGluIGdyb3VwKSB7CiAgICAgICAgdG90YWwgPSBnZXRGbGFnQ291bnQoZ3JvdXBbZ3JvdXBLZXldLCB0eXBlLlRPVEFMKTsKICAgICAgICBmb3IgKHR5cGVLZXkgaW4gdHlwZSkgewogICAgICAgICAgICBpZiAodHlwZUtleSAhPT0gIlRPVEFMIikgewogICAgICAgICAgICAgICAgY291bnQgPSBnZXRGbGFnQ291bnQoZ3JvdXBbZ3JvdXBLZXldLCB0eXBlW3R5cGVLZXldKTsKICAgICAgICAgICAgICAgIHBlcmNlbnRhZ2UgPSBjYWxjdWxhdGVQZXJjZW50YWdlKGNvdW50LCB0b3RhbCk7CiAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKGdyb3VwS2V5ICsgIjogIiArIHR5cGVLZXkgKyAiIEZsYWdzIC0tICIgKyBjb3VudCk7CiAgICAgICAgICAgICAgICBhZGRQZXJjZW50YWdlKGdyb3VwW2dyb3VwS2V5XSwgdHlwZVt0eXBlS2V5XSwgcGVyY2VudGFnZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9Cn0oalF1ZXJ5KSk7Cg=="},{"name":"SmokePreview","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_excludes":[],"orig_includes":["http://chat.meta.stackexchange.com/rooms/89/tavern-on-the-meta","http://chat.stackexchange.com/rooms/11540/charcoal-hq","http://chat.stackoverflow.com/rooms/41570/so-close-vote-reviewers"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null,"user_agent":""},"storage":{"data":{"askubuntu.com":"n103","meta.stackexchange.com":"n118","stackapps.com":"n113","stackoverflow.com":"n10248","superuser.com":"n105","token":"sK(Kzc7KCwmPboc84OE1TQA))","unix.stackexchange.com":"n103"},"ts":1458289631453},"enabled":true,"position":18,"file_url":"https://raw.githubusercontent.com/rekire/SmokePreview/master/SmokePreview.user.js","uuid":"8173f05d-49f7-4213-b6d7-6c2a7bf0dc9c","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIFNtb2tlUHJldmlldwovLyBAbmFtZXNwYWNlICAgZXUucmVraXNvZnQuc21va2VyCi8vIEBkZXNjcmlwdGlvbiBBIEdyZWFzZU1vbmtleSBzY3JpcHQgdG8gYWRkIGEgcHJldmlldyB0byBjaGF0IG1lc3NhZ2VzIG9mIHRoZSBTbW9rZURldGVjdG9yLgovLyBAaW5jbHVkZSAgICAgaHR0cDovL2NoYXQubWV0YS5zdGFja2V4Y2hhbmdlLmNvbS9yb29tcy84OS90YXZlcm4tb24tdGhlLW1ldGEKLy8gQGluY2x1ZGUgICAgIGh0dHA6Ly9jaGF0LnN0YWNrZXhjaGFuZ2UuY29tL3Jvb21zLzExNTQwL2NoYXJjb2FsLWhxCi8vIEBpbmNsdWRlICAgICBodHRwOi8vY2hhdC5zdGFja292ZXJmbG93LmNvbS9yb29tcy80MTU3MC9zby1jbG9zZS12b3RlLXJldmlld2VycwovLyBAdmVyc2lvbiAgICAgMTYwMzMwMDEKLy8gQGdyYW50ICAgICAgIEdNX2dldFZhbHVlCi8vIEBncmFudCAgICAgICBHTV9zZXRWYWx1ZQovLyA9PS9Vc2VyU2NyaXB0PT0KCnVuc2FmZVdpbmRvdy5zcF9sb2FkID0gR01fZ2V0VmFsdWU7CnVuc2FmZVdpbmRvdy5zcF9zYXZlID0gR01fc2V0VmFsdWU7Cgp2YXIgdGFyZ2V0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NoYXQnKTsKdmFyIGxhc3RVc2VyOwp2YXIgcHJpbnRUb0NvbnNvbGUgPSBmYWxzZTsKCnZhciBtc2dHcm91cE9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24obXV0YXRpb25zKSB7CiAgbXV0YXRpb25zLmZvckVhY2goZnVuY3Rpb24obXV0YXRpb24pIHsKICAgIGlmKG11dGF0aW9uLmFkZGVkTm9kZXMubGVuZ3RoID4gMCkgewogICAgICBwcm9jZXNzTWVzc2FnZU5vZGUobXV0YXRpb24uYWRkZWROb2Rlc1swXSk7CiAgICB9CiAgfSk7Cn0pOwoKdmFyIG5ld01zZ09ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24obXV0YXRpb25zKSB7CiAgbXV0YXRpb25zLmZvckVhY2goZnVuY3Rpb24obXV0YXRpb24pIHsKICAgIHRyeSB7CgkgIC8vIHRoZSBsYXN0IGdyb3VwIGlzIG5vdCBpbnRlcmVzdGluZyBhbnltb3JlIHNpbmNlIHRoZXJlIGlzIGEgbmV3IGdyb3VwCiAgICAgIG1zZ0dyb3VwT2JzZXJ2ZXIuZGlzY29ubmVjdCgpOwogICAgfSBjYXRjaChlKSB7fQogICAgLy8gcHJvY2VzcyB0aGUgbmV3IG1lc3NhZ2UKICAgIHByb2Nlc3NOZXdNZXNzYWdlKG11dGF0aW9uKTsKICAgIHZhciBtZXNzYWdlTGlzdCA9IHRhcmdldC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJtZXNzYWdlcyIpOwogICAgdmFyIGxhc3RNZXNzYWdlID0gbWVzc2FnZUxpc3RbbWVzc2FnZUxpc3QubGVuZ3RoIC0gMV07CiAgICBtc2dHcm91cE9ic2VydmVyLm9ic2VydmUobGFzdE1lc3NhZ2UsIG9ic2VydmVyQ29uZmlnKTsKICB9KTsgICAgCn0pOwoKZnVuY3Rpb24gcHJvY2Vzc05ld01lc3NhZ2UobXV0YXRpb24pIHsKICB0cnkgewogICAgbGFzdFVzZXIgPSBtdXRhdGlvbi5hZGRlZE5vZGVzWzBdLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoInVzZXJuYW1lIilbMF0uaW5uZXJIVE1MOwogICAgdmFyIG1lc3NhZ2UgPSBtdXRhdGlvbi5hZGRlZE5vZGVzWzBdLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImNvbnRlbnQiKVswXTsKICAgIG9uTWVzc2FnZShsYXN0VXNlciwgbWVzc2FnZSk7CiAgfSBjYXRjaChlKSB7fQp9CgpmdW5jdGlvbiBwcm9jZXNzTWVzc2FnZU5vZGUobm9kZSkgewogIHRyeSB7CiAgICB2YXIgbWVzc2FnZSA9IG5vZGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiY29udGVudCIpWzBdOwogICAgb25NZXNzYWdlKGxhc3RVc2VyLCBtZXNzYWdlKTsKICB9IGNhdGNoKGUpIHt9Cn0KCmZ1bmN0aW9uIG9uTWVzc2FnZSh1c2VyLCBtc2cpIHsKICBpZihwcmludFRvQ29uc29sZSkgY29uc29sZS5sb2codXNlciArICIgc2FpZCAiICsgbXNnLmlubmVySFRNTCk7CiAgaWYodXNlciA9PSAiU21va2VEZXRlY3RvciIgJiYgbXNnLmlubmVySFRNTC5pbmRleE9mKCJieSIpID4gMCkgewogICAgdmFyIGNvZGUgPSBtc2cuZ2V0RWxlbWVudHNCeVRhZ05hbWUoImNvZGUiKTsKICAgIGlmKGNvZGUubGVuZ3RoID4gMCkgewogICAgICB2YXIgc2l0ZSA9IGNvZGVbMF0uaW5uZXJIVE1MOwogICAgICB2YXIgcG9zdCA9IG1zZy5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYSIpWzFdLmhyZWY7CiAgICAgIHZhciB0eXBlID0gKHBvc3QuaW5kZXhPZigicXVlc3Rpb25zIikgPiAwKSA/ICJxdWVzdGlvbnMiIDogImFuc3dlcnMiOwogICAgICB2YXIgaWQgPSBwb3N0LnN1YnN0cihwb3N0Lmxhc3RJbmRleE9mKCIvIikgKyAxKTsKICAgICAgdmFyIHRhZyA9ICc8ZGl2IGlkPSJzZCcgKyBpZCArICciIGNsYXNzPSJvbmVib3ggb2ItcG9zdCIgc3R5bGU9Im92ZXJmbG93LXk6YXV0bzsgbWF4LWhlaWdodDoxNTBweDsgbWFyZ2luLWJvdHRvbToyZW0iPjwvZGl2Pic7CiAgICAgIGlmKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdzZCcraWQpID09IG51bGwpIHsKICAgICAgICBtc2cuaW5uZXJIVE1MICs9IHRhZzsKICAgICAgfQogICAgICBpZihwcmludFRvQ29uc29sZSkgY29uc29sZS5sb2coY29kZVswXS5pbm5lckhUTUwgKyAiIC0+ICIgKyBzaXRlLCB0eXBlLCBpZCwgbXNnKTsKICAgICAgLy8gVE9ETyBjaGVjayBpZiB0aGUgY3VycmVudCB1c2VyIGhhcyBhbiBhY2NvdW50IG9uIHRoYXQgc2l0ZS4KICAgICAgbG9hZFByZXZpZXcoc2l0ZSwgaWQpOwogICAgfQogICAgaWYocHJpbnRUb0NvbnNvbGUpIGNvbnNvbGUubG9nKGNvZGVbMF0uaW5uZXJIVE1MLCBtc2cuaW5uZXJIVE1MKTsKICB9Cn0KCmZ1bmN0aW9uIGxvYWRQcmV2aWV3KHNpdGUsIGlkKSB7CiAgdmFyIHVybCA9ICJodHRwOi8vYXBpLnN0YWNrZXhjaGFuZ2UuY29tLzIuMi9wb3N0cy8iICsgaWQgKyAiP3NpdGU9IiArIHNpdGUgKyAiJmZpbHRlcj0hTEduS0tLLVgwYmJkKmNpeGtaaWgqSyZrZXk9NEp2RU9sZ20wYUlncmNtbzJoc2JuZygoIjsKICBpZihwcmludFRvQ29uc29sZSkgY29uc29sZS5sb2coInRyeSB0byBkb3dubG9hZCAiICsgdXJsKTsKICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7CiAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7CiAgeGhyLm9ubG9hZCA9IHNob3dQcmV2aWV3OwogIHhoci5pZCA9IGlkOwogIHhoci5zZW5kKCk7Cn0KCmZ1bmN0aW9uIHNob3dQcmV2aWV3KHJlc3BvbnNlKSB7CiAgaWYocHJpbnRUb0NvbnNvbGUpIGNvbnNvbGUubG9nKHJlc3BvbnNlLCB0aGlzLnJlc3BvbnNlLCB0aGlzLmlkKTsKICB2YXIgcmVzcCA9IEpTT04ucGFyc2UodGhpcy5yZXNwb25zZSk7CiAgaWYocmVzcC5pdGVtcy5sZW5ndGggPT0gMCkgewogICAgdmFyIGVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgic2QiICsgdGhpcy5pZCk7CiAgICBlbGVtLnN0eWxlLmRpc3BsYXkgPSAibm9uZSI7CiAgICBlbGVtLnBhcmVudE5vZGUuc3R5bGUub3BhY2l0eSA9IC41OwogIH0gZWxzZSB7CiAgICB2YXIgcG9zdCA9IHJlc3AuaXRlbXNbMF07Cgl2YXIgbGluayA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2EnKTsKICAgIGxpbmsuc2V0QXR0cmlidXRlKCdocmVmJywgcG9zdC5saW5rKTsKICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJzZCIgKyB0aGlzLmlkKS5pbm5lckhUTUwgPQogICAgICAnPGRpdiB0aXRsZT0iVGhpcyAnICsgcG9zdC5wb3N0X3R5cGUgKyAnIGhhcyBhIHNjb3JlIG9mICcgKyBwb3N0LnNjb3JlICsKICAgICAgJy4iIGNsYXNzPSJvYi1wb3N0LXZvdGVzIj4nICsgcG9zdC5zY29yZSArICc8L2Rpdj4nICsKICAgICAgJzxkaXYgY2xhc3M9Im9iLXBvc3QtdGl0bGUiPicgKyBwb3N0LnBvc3RfdHlwZS5zdWJzdHIoMCwgMSkudG9VcHBlckNhc2UoKSArCiAgICAgICc6IDxhIGhyZWY9IicgKyBwb3N0LmxpbmsgKyAnIiBzdHlsZT0iY29sb3I6ICM0RTgyQzI7Ij4nICsgcG9zdC50aXRsZSArCiAgICAgICc8L2E+PC9kaXY+PHAgY2xhc3M9Im9iLXBvc3QtYm9keSI+PGltZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIGFsdD0iJyArIHBvc3Qub3duZXIuZGlzcGxheV9uYW1lICsKICAgICAgJyIgdGl0bGU9IicgKyBwb3N0Lm93bmVyLmRpc3BsYXlfbmFtZSArICciIHNyYz0iJyArIHBvc3Qub3duZXIucHJvZmlsZV9pbWFnZSArCiAgICAgICciIGNsYXNzPSJ1c2VyLWdyYXZhdGFyMzIiPicgKyByZXNwLml0ZW1zWzBdLmJvZHkgKyAnPC9wPicgKwogICAgICAnPGRpdiBjbGFzcz0idG9vbGJhciIgc3R5bGU9InBvc2l0aW9uOmFic29sdXRlOyBib3R0b206IDBweDsiPic7CiAgfQp9CgovLyBzZXR1cCB0aGUgb2JzZXJ2ZXIgY29uZmlndXJhdGlvbgp2YXIgb2JzZXJ2ZXJDb25maWcgPSB7IGF0dHJpYnV0ZXM6IHRydWUsIGNoaWxkTGlzdDogdHJ1ZSwgY2hhcmFjdGVyRGF0YTogdHJ1ZSB9OwoKd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbigpIHsKICBpZihwcmludFRvQ29uc29sZSkgY29uc29sZS5sb2coImluaXQiKTsKICB2YXIgbWVzc2FnZUxpc3QgPSB0YXJnZXQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgibWVzc2FnZXMiKTsKICB2YXIgbGFzdE1lc3NhZ2UgPSBtZXNzYWdlTGlzdFttZXNzYWdlTGlzdC5sZW5ndGggLSAxXTsKICBtc2dHcm91cE9ic2VydmVyLm9ic2VydmUobGFzdE1lc3NhZ2UsIG9ic2VydmVyQ29uZmlnKTsKICBuZXdNc2dPYnNlcnZlci5vYnNlcnZlKHRhcmdldCwgb2JzZXJ2ZXJDb25maWcpOwoKICB2YXIgbmljayA9IHRhcmdldC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJ1c2VybmFtZSIpOwogIGxhc3RVc2VyID0gbmljay5sZW5ndGggPiAwCiAgICAgICAgICAgICAgICAgPyBuaWNrW25pY2subGVuZ3RoIC0gMV0uaW5uZXJIVE1MCiAgICAgICAgICAgICAgICAgOiAidW5rbm93biI7CiAgCiAgLy8gcGFyc2UgZXhpc3RpbmcgbWVzc2FnZXMKICB2YXIgbWVzc2FnZUJsb2NrcyA9IHRhcmdldC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJ1c2VyLWNvbnRhaW5lciIpOwogIGZvcih2YXIgaSA9IDAsIG1lc3NhZ2VCbG9ja3NMZW5ndGggPSBtZXNzYWdlQmxvY2tzLmxlbmd0aDsgaSA8IG1lc3NhZ2VCbG9ja3NMZW5ndGg7IGkrKykgewogICAgdmFyIHVzZXIgPSBtZXNzYWdlQmxvY2tzW2ldLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoInVzZXJuYW1lIilbMF0uaW5uZXJIVE1MOwogICAgdmFyIG1lc3NhZ2VzID0gbWVzc2FnZUJsb2Nrc1tpXS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJtZXNzYWdlIik7CiAgICBmb3IodmFyIGogPSAwLCBtZXNzYWdlc0xlbmd0aCA9IG1lc3NhZ2VzLmxlbmd0aDsgaiA8IG1lc3NhZ2VzTGVuZ3RoOyBqKyspIHsKICAgICAgdmFyIG1lc3NhZ2UgPSBtZXNzYWdlc1tqXS5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJjb250ZW50IilbMF07CiAgICAgIG9uTWVzc2FnZSh1c2VyLCBtZXNzYWdlKTsKICAgIH0KICB9CiAgCiAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwogIHNjcmlwdC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnKCcgKyBwdWJsaWNBcGkgKyAnKSgpOycpKTsKICAoZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5ib2R5IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuYXBwZW5kQ2hpbGQoc2NyaXB0KTsKfSwgZmFsc2UpOw=="},{"name":"Show Edited Votes","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":["/^https?:\\/\\/(?:meta\\.)?(?:stackoverflow|[^\\/\\.]+\\.stackexchange)\\.com\\/users\\/\\d+\\/.*\\?tab=votes/"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1460728127464,"data":{}},"enabled":true,"position":19,"file_url":"https://www.tuggycomputer.com/nathan/software/userscripts/Show_Edited_Votes.user.js","uuid":"30b13fb4-62a3-401a-a8bf-fee6ac2f5f83","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIFNob3cgRWRpdGVkIFZvdGVzCi8vIEBuYW1lc3BhY2UgICBjb20udHVnZ3kubmF0aGFuCi8vIEBkZXNjcmlwdGlvbiBEaXNwbGF5cyBhIGxpc3Qgb2YgcG9zdHMgdGhhdCBoYXZlIGJlZW4gZWRpdGVkIHNpbmNlIHZvdGluZwovLyBAaW5jbHVkZSAgICAgL15odHRwcz86XC9cLyg/Om1ldGFcLik/KD86c3RhY2tvdmVyZmxvd3xbXlwvXC5dK1wuc3RhY2tleGNoYW5nZSlcLmNvbVwvdXNlcnNcL1xkK1wvLipcP3RhYj12b3Rlcy8KLy8gQHZlcnNpb24gICAgIDEuMi4wNQovLyBAZ3JhbnQgICAgICAgbm9uZQovLyA9PS9Vc2VyU2NyaXB0PT0vLwovLyBUaHJvdHRsaW5nIGltcGxlbWVudGF0aW9uIGJvcnJvd2VkIGZyb20gcmVuZSdzIE1hdGNoIEFnYWluc3QgUGVlcnMgSW4gUmV2aWV3CgpmdW5jdGlvbiBwYXJzZUlzb0RhdGV0aW1lKGR0c3RyKSB7ICAgICAgLy8gRnJvbSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yNjQzNDYxOQogIHZhciBkdCA9IGR0c3RyLnNwbGl0KC9bOiBULV0vKS5tYXAocGFyc2VGbG9hdCk7CiAgcmV0dXJuIG5ldyBEYXRlKGR0WzBdLCBkdFsxXSAtIDEsIGR0WzJdLCBkdFszXSB8fCAwLCBkdFs0XSB8fCAwLCBkdFs1XSB8fCAwLCAwKTsKfQoKZnVuY3Rpb24gcGFyc2VJbnQoc3RyKSB7CiAgcmV0dXJuIE51bWJlci5wYXJzZUludChzdHIucmVwbGFjZSgiLCIsICIiKSk7Cn0KCihmdW5jdGlvbiAoJCwgd2luZG93KSB7CiAgInVzZSBzdHJpY3QiOwogIGNvbnN0IG1vbnRocyA9IFsiSmFuIiwgIkZlYiIsICJNYXIiLCAiQXByIiwgIk1heSIsICJKdW4iLCAiSnVsIiwgIkF1ZyIsICJTZXAiLCAiT2N0IiwgIk5vdiIsICJEZWMiXTsKICB2YXIgdGFza3MgPSBbXSwKICAgICAgaW50ZXJ2YWxUaW1lID0gMjAwLCAvLyBtaWxsaXNlY29uZHMgKG1ha2UgdGhpcyBsYXJnZXIgd2hlbiB0aHJvdHRsZWQgb2Z0ZW4pCiAgICAgIHBlciA9IDkwMDAwLCAgICAgICAgLy8gbWlsbGlzZWNvbmRzCiAgICAgIHBlbmFsdHkgPSA2MDAwMCwgICAgLy8gbWlsbGlzZWNvbmRzIHRvIHdhaXQgYWZ0ZXIgNTAzCiAgICAgIHJhdGUgPSAxNTAsICAgICAgICAgLy8gcGVyIDkwMDAwIG1pbGxpc2Vjb25kcyAobWFrZSB0aGlzIHNtYWxsZXIgd2hlbiB0aHJvdHRsZWQgb2Z0ZW4sIGJ1dCBvbiA4MCB5b3UncmUgc2FmZSkKICAgICAgaW50ZXJ2YWwsCiAgICAgIGhhbmRsZXIsCiAgICAgIGlkcyA9IFtdLAogICAgICBsYXN0Vm90ZWQgPSBbXSwKICAgICAgdm90ZVR5cGVzID0gW10sCiAgICAgIGZpbHRlcnMgPSAkKCcuc3VidGFicy51c2VyLXRhYi1zb3J0cycpLmZpcnN0KCksCiAgICAgIHRhYmxlID0gJCgnLmhpc3RvcnktdGFibGUgPiB0Ym9keScpLmZpcnN0KCksCiAgICAgIGVkaXRlZEZpbHRlciA9ICQoJzxhIGhyZWY9IiMiPmVkaXRlZCBzaW5jZSB2b3Rpbmc8L2E+JyksCiAgICAgIGlkQ3VycmVudFVzZXIgPSBuZXcgTnVtYmVyKC9cLyhcZCspXC8vLmV4ZWMoZG9jdW1lbnQubG9jYXRpb24uaHJlZilbMV0pLAogICAgICBjb3VudGVyID0gJCgnaDEgPiBzcGFuLmNvdW50JykuZmlyc3QoKSwKICAgICAgcHJvZ3Jlc3MgPSAkKCc8aW1nIHNyYz0iL2NvbnRlbnQvaW1nL3Byb2dyZXNzLWRvdHMuZ2lmIj48L2ltZz4nKSwKICAgICAgc3RhdGUgPSAic3RhcnQiLAogICAgICB2b3RlQWRkUGVuZGluZ0NvdW50ZXI7CgogIC8vIEFkZCBmaXJzdCBwYWdlIG9mIGdpdmVuIHZvdGUgdHlwZQogIGZ1bmN0aW9uIGFkZEZpcnN0UGFnZSh2b3RlVHlwZSkgewogICAgdmFyIHVybEJhc2UgPSBkb2N1bWVudC5sb2NhdGlvbi5ocmVmLnJlcGxhY2UoLyZzb3J0PS4qJC8sICcnKSwgdXJsRmlyc3QgPSB1cmxCYXNlICsgJyZzb3J0PScgKyB2b3RlVHlwZTsKICAgIHN0YXRlID0gdm90ZVR5cGU7CiAgICBoYW5kbGVyID0gYWRkUGFnZXMuYmluZCh1cmxGaXJzdCk7CiAgICB2b3RlQWRkUGVuZGluZ0NvdW50ZXIgPSAwOwogICAgdGFza3MucHVzaCh1cmxGaXJzdCk7CiAgfQogIAogIC8vIEZvciBlYWNoIHBhZ2Ugb2YgdGhlIHR5cGUgZnJvbSB0aGUgcGFnZSBnaXZlbiwgcHV0IGEgdGFzayBpbiB0aGUgcXVldWUKICBmdW5jdGlvbiBhZGRQYWdlcyhkb2NGaXJzdCkgewogICAgdmFyIHVybEZpcnN0ID0gdGhpcywKICAgICAgICBtYXhQYWdlID0gcGFyc2VJbnQoJCgnYTpub3QoW3JlbD1uZXh0XSkgPiBzcGFuLnBhZ2UtbnVtYmVycycsIGRvY0ZpcnN0KS5sYXN0KCkudGV4dCgpKTsKICAgIHBhZ2VIYW5kbGVyKGRvY0ZpcnN0KTsKICAgIHN0YXRlICs9ICctcGFnaW5nJzsKICAgIGhhbmRsZXIgPSBwYWdlSGFuZGxlcjsKICAgIGZvciAobGV0IGkgPSAyOyBpIDw9IG1heFBhZ2U7IGkrKykgewogICAgICB0YXNrcy5wdXNoKHVybEZpcnN0ICsgJyZwYWdlPScgKyBpKTsKICAgIH0KICB9CiAgCiAgLy8gRm9yIGVhY2ggMTAwIHBvc3QgSURzLCBwdXQgYSB0YXNrIGluIHRoZSBxdWV1ZSwgZG9pbmcgcHJlbGltaW5hcnkgZmlsdGVyaW5nIGJ5IHRoZSBlYXJsaWVzdCBvZiB0aG9zZSBwb3N0cycgdm90ZSBkYXRlcwogIGZ1bmN0aW9uIGFkZEFQSUNhbGxzKCkgewogICAgY29uc3QgbWV0aG9kQmFzZSA9ICdodHRwczovL2FwaS5zdGFja2V4Y2hhbmdlLmNvbS8yLjIvcG9zdHMvJywKICAgICAgICAgIHBhcmFtQmFzZUEgPSAnP3BhZ2VzaXplPTEwMCZvcmRlcj1kZXNjJm1pbj0nLAogICAgICAgICAgcGFyYW1CYXNlQiA9ICcmc29ydD1hY3Rpdml0eSZmaWx0ZXI9ISk0ay1GbVNFa3JrQ2hSa1NIWFBYSEUyU3hPaFkmc2l0ZT0nLAogICAgICAgICAgc2l0ZVBhdHRlcm4gPSAvKD86bWV0YVwuKT8oPzpbXlwuXC9dKyg/PVwuc3RhY2tleGNoYW5nZSl8c3RhY2tvdmVyZmxvdykvOwogICAgdmFyIHNpdGVNYXRjaCA9IHNpdGVQYXR0ZXJuLmV4ZWMoZG9jdW1lbnQubG9jYXRpb24uaG9zdG5hbWUpLCBzaXRlUGFyYW07CiAgICBzdGF0ZSA9ICJBUEktY2FsbGluZyI7CiAgICBoYW5kbGVyID0gYXBpSGFuZGxlcjsKICAgIGlmIChzaXRlTWF0Y2gpIHsKICAgICAgc2l0ZVBhcmFtID0gc2l0ZU1hdGNoWzBdOwogICAgfQogICAgZWxzZSB7CiAgICAgIGFsZXJ0KCJTaG93IEVkaXRlZCBWb3RlczogQ291bGRuJ3QgZmluZCBzaXRlIGFiYnJldmlhdGlvbiBpbiBVUkwhICgnIiArIGRvY3VtZW50LmxvY2F0aW9uLmhvc3RuYW1lICsgIicpIik7CiAgICAgIHJldHVybjsKICAgIH0KICAgIHdoaWxlIChpZHMubGVuZ3RoID4gMCkgewogICAgICBsZXQgcGFyYW1JRHMgPSBpZHMuc2xpY2UoMCwgMTAwKSwgaWRQYXJhbSA9IHBhcmFtSURzLmpvaW4oJzsnKTsKICAgICAgbGV0IG1pblBhcmFtID0gcGFyYW1JRHMubWFwKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICByZXR1cm4gbmV3IE51bWJlcihsYXN0Vm90ZWRbZV0pOwogICAgICAgIH0pLnJlZHVjZShmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgICByZXR1cm4gTWF0aC5taW4oYSwgYik7CiAgICAgICAgICB9LCBEYXRlLm5vdygpIC8gMTAwMCk7CiAgICAgIGxldCB1cmwgPSBtZXRob2RCYXNlICsgaWRQYXJhbSArIHBhcmFtQmFzZUEgKyBtaW5QYXJhbSArIHBhcmFtQmFzZUIgKyBzaXRlUGFyYW07CiAgICAgIHRhc2tzLnB1c2godXJsKTsKICAgICAgaWRzID0gaWRzLnNsaWNlKDEwMCk7CiAgICB9CiAgfQoKICBmdW5jdGlvbiBwYWdlSGFuZGxlcihkYXRhKSB7CiAgICAvLyBHcmFiIHBvc3QgVERzCiAgICB2YXIgcG9zdHMgPSAkKCd0ZC5hc3luYy1sb2FkJywgZGF0YSksIG5vVm90ZSA9IFtdLCB2b3RlVHlwZSA9IHN0YXRlLnNwbGl0KCctJylbMF07CiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHBvc3RzLmxlbmd0aDsgaSsrKSB7CiAgICAgIGxldCBpZCA9IG5ldyBOdW1iZXIocG9zdHNbaV0uaWQucmVwbGFjZSgnZW5hYmxlLWxvYWQtYm9keS0nLCAnJykpOwogICAgICBsZXQgdm90ZWQgPSAkKHBvc3RzW2ldKS5wYXJlbnQoKS5maW5kKCcuZGF0ZV9icmlja1t0aXRsZV0sIC5kYXRlW3RpdGxlXScpWzBdLnRpdGxlOwogICAgICBpZiAodm90ZWQpIHsKICAgICAgICBpZHMucHVzaChpZCk7CiAgICAgICAgbGFzdFZvdGVkW2lkXSA9IHBhcnNlSXNvRGF0ZXRpbWUodm90ZWQpLnZhbHVlT2YoKSAvIDEwMDA7CiAgICAgICAgdm90ZVR5cGVzW2lkXSA9IHZvdGVUeXBlOwogICAgICB9CiAgICAgIGVsc2UgewogICAgICAgIG5vVm90ZS5wdXNoKGlkKTsKICAgICAgfQogICAgfQogICAgaWYgKG5vVm90ZS5sZW5ndGggPiAwKSB7CiAgICAgIGFsZXJ0KCJTaG93IEVkaXRlZCBWb3RlczogUG9zdHMgIiArIG5vVm90ZS5qb2luKCIsICIpICsgIiBoYXZlIG5vIHZvdGUgZGF0ZSEiKTsKICAgIH0KICB9CiAgZnVuY3Rpb24gYXBpSGFuZGxlcihkYXRhKSB7CiAgICBjb25zdCBzcGFuRG93bnZvdGUgPSAnPHNwYW4gc3R5bGU9ImNvbG9yOm1hcm9vbjsiPmRvd252b3RlPC9zcGFuPicsCiAgICAgICAgICBzcGFuVXB2b3RlICAgPSAnPHNwYW4gc3R5bGU9ImNvbG9yOmdyZWVuIDsiPiAgdXB2b3RlPC9zcGFuPic7CiAgICBpZiAoZGF0YS5iYWNrb2ZmKSB7CiAgICAgIGFsZXJ0KCJTaG93IEVkaXRlZCBWb3RlczogQmFja2luZyBvZmYgZm9yICIgKyBkYXRhLmJhY2tvZmYgKyAiIHNlY29uZHMiKTsKICAgICAgc2V0VGhyb3R0bGUoRGF0ZS5ub3coKSArIGRhdGEuYmFja29mZik7CiAgICAgIHJldHVybjsKICAgIH0KICAgIAogICAgdmFyIG1vZGlmaWVkID0gW107CiAgICBpZiAoZGF0YS5pdGVtcykgewogICAgICBtb2RpZmllZCA9IGRhdGEuaXRlbXMuZmlsdGVyKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgICAgcmV0dXJuIGl0ZW0ubGFzdF9lZGl0X2RhdGUgJiYgaXRlbS5sYXN0X2VkaXRvciAmJgogICAgICAgICAgICAgICBuZXcgTnVtYmVyKGl0ZW0ubGFzdF9lZGl0X2RhdGUpID4gbGFzdFZvdGVkW2l0ZW0ucG9zdF9pZF0gJiYKICAgICAgICAgICAgICAgaXRlbS5sYXN0X2VkaXRvci51c2VyX2lkICE9IGlkQ3VycmVudFVzZXI7CiAgICAgIH0pOwogICAgfQogICAgLy8gQWRkIHRvIHZpc2libGUgbGlzdAogICAgLy8gVE9ETzogU29ydCBieSBkYXRlIGJlZm9yZSB2b3RlIHR5cGUKICAgIG1vZGlmaWVkLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICBsZXQgZGF0ZSA9IG5ldyBEYXRlKGxhc3RWb3RlZFtpdGVtLnBvc3RfaWRdICogMTAwMCk7CiAgICAgICAgLy8gVE9ETzogQWRkIGVkaXRlZCBkYXRlIHRvIGRpc3BsYXkKICAgICAgICB0YWJsZS5hcHBlbmQoJzx0cj48dGQ+PGRpdiBjbGFzcz0iZGF0ZV9icmljayIgdGl0bGU9IicgKyAKICAgICAgICAgICAgZGF0ZS50b0xvY2FsZVN0cmluZygpICsgCiAgICAgICAgICAgICciPicgKyAKICAgICAgICAgICAgbW9udGhzW2RhdGUuZ2V0TW9udGgoKV0gKyAiICIgKyBkYXRlLmdldERhdGUoKSArCiAgICAgICAgICAgICc8L2Rpdj48L3RkPjx0ZD4nICsKICAgICAgICAgICAgKCdkb3dudm90ZScgPT0gdm90ZVR5cGVzW2l0ZW0ucG9zdF9pZF0gPyBzcGFuRG93bnZvdGUgOiBzcGFuVXB2b3RlKSArCiAgICAgICAgICAgICc8L3RkPjx0ZD48Yj48YSBocmVmPSInICsKICAgICAgICAgICAgaXRlbS5saW5rICsKICAgICAgICAgICAgJyIgY2xhc3M9ImFuc3dlci1oeXBlcmxpbmsgdGltZWxpbmUtYW5zd2VycyI+JyArCiAgICAgICAgICAgIGl0ZW0udGl0bGUgKwogICAgICAgICAgICAnPC9hPjwvYj48L3RkPjwvdHI+Jyk7CiAgICAgIH0pOwogICAgY291bnRlci50ZXh0KHBhcnNlSW50KGNvdW50ZXIudGV4dCgpKSArIG1vZGlmaWVkLmxlbmd0aCk7CiAgICAKICAgIGlmICgwID09IGRhdGEucXVvdGFfcmVtYWluaW5nKSB7CiAgICAgIGFsZXJ0KCJTaG93IEVkaXRlZCBWb3RlczogT3V0IG9mIHF1b3RhISIpOwogICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbChpbnRlcnZhbCk7ICAgLy8gRHJvcCB0aGUgcmVzdCBvbiB0aGUgZmxvb3IKICAgICAgLy8gVE9ETz8gU2V0IGRhdGUgZmxhZyB0byBub3QgZXZlbiB0cnkgdW50aWwgdG9tb3Jyb3cKICAgIH0KICB9CgogIC8vIGdldCBhcnJheSB3aXRoIHRpbWVzdGFtcHMgZnJvbSBsb2NhbHN0b3JhZ2UKICBmdW5jdGlvbiBnZXRUaHJvdHRsZSgpIHsKICAgIHZhciBjYWxscyA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgnc2UtdGhyb3R0bGUnKTsKICAgIGlmIChjYWxscyA9PT0gbnVsbCkgewogICAgICBjYWxscyA9IFsgRGF0ZS5ub3coKSBdOwogICAgfSBlbHNlIHsKICAgICAgY2FsbHMgPSBKU09OLnBhcnNlKGNhbGxzKTsKICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGNhbGxzKSkgewogICAgICAgICAgY2FsbHMgPSBbIERhdGUubm93KCkgXTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIGNhbGxzOwogIH0KICAKICAvLyB1cGRhdGUgdGltZXN0YW1wIGFycmF5IGZvciB0aHJvdHRsZQogIGZ1bmN0aW9uIHNldFRocm90dGxlKHRpbWUpIHsKICAgIHZhciBjYWxscyA9IGdldFRocm90dGxlKCksCiAgICAgICAgaTsKICAgIAogICAgaWYgKHRpbWUgPT09IHVuZGVmaW5lZCkgewogICAgICAgIHRpbWUgPSBEYXRlLm5vdygpOwogICAgfQogICAgZm9yIChpID0gMDsgKChpIDwgY2FsbHMubGVuZ3RoIC0gMSkgJiYgKGNhbGxzWzBdIDwgRGF0ZS5ub3coKSAtIHBlcikpOyBpKyspIHsKICAgICAgY2FsbHMuc2hpZnQoKTsKICAgIH0KICAgIGlmIChjYWxscy5sZW5ndGggPiByYXRlKSB7CiAgICAgIGNhbGxzLnNoaWZ0KCk7CiAgICB9CiAgICBjYWxscy5wdXNoKHRpbWUpOyAKICAgIHdpbmRvdy5sb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnc2UtdGhyb3R0bGUnLCBKU09OLnN0cmluZ2lmeShjYWxscykpOwogIH0KICAKICAvLyBnZXRzIGNhbGxlZCBieSB0aGUgc2V0SW50ZXJ2YWwKICBmdW5jdGlvbiB0YXNrV29ya2VyKCkgewogICAgdmFyIHVybCA9IHRhc2tzLnNoaWZ0KCksIGpxWEhSOwoKICAgIGlmICh1cmwpIHsKICAgICAgJC5nZXQodXJsKQogICAgICAgIC5kb25lKGZ1bmN0aW9uIChkYXRhKSB7IAogICAgICAgICAgc2V0VGhyb3R0bGUoKTsKICAgICAgICAgIGhhbmRsZXIoZGF0YSk7IAogICAgICAgIH0pCiAgICAgICAgLmZhaWwoZnVuY3Rpb24gKHhociwgc3RhdCwgZXJyb3IpIHsKICAgICAgICAgIC8vIFNlcnZpY2UgVW5hdmFpbGFibGUgbWVhbnMgd2UncmUgdGhyb3R0bGVkLCBwYW5pYwogICAgICAgICAgLy9jb25zb2xlLmxvZyh4aHIpOwogICAgICAgICAgaWYgKHhoci5zdGF0dXMgPT09IDUwMykgewogICAgICAgICAgICAvLyB3YWl0IGEgZnVsbCBtaW51dGUgdG8gZ2V0IGZyZWUKICAgICAgICAgICAgc2V0VGhyb3R0bGUoRGF0ZS5ub3coKSArIHBlbmFsdHkpOyAKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0KICAgIGVsc2UgewogICAgICAvLyBjdXJyZW50IHN0YXRlIGVtcHR5LCB3aGF0J3MgbmV4dD8KICAgICAgc3dpdGNoIChzdGF0ZSkgewogICAgICAgIGNhc2UgInVwdm90ZS1wYWdpbmciOgogICAgICAgICAgc2V0VGhyb3R0bGUoKTsgCiAgICAgICAgICBhZGRGaXJzdFBhZ2UoImRvd252b3RlIik7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICJkb3dudm90ZS1wYWdpbmciOgogICAgICAgICAgLy8gQVBJIGNhbGxzLCBpZiB0aGVyZSdzIGFueXRoaW5nIHRvIGRvCiAgICAgICAgICBpZiAoaWRzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgc2V0VGhyb3R0bGUoKTsgCiAgICAgICAgICAgIGFkZEFQSUNhbGxzKCk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgIGNhc2UgInVwdm90ZSI6CiAgICAgICAgY2FzZSAiZG93bnZvdGUiOgogICAgICAgICAgaWYgKHZvdGVBZGRQZW5kaW5nQ291bnRlciA8IDEwKSB7CiAgICAgICAgICAgIHZvdGVBZGRQZW5kaW5nQ291bnRlcisrOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIC8vIGZhbGwgdGhyb3VnaAogICAgICAgIGRlZmF1bHQ6IAogICAgICAgICAgLy8gbm90aGluZyBsZWZ0IHRvIGRvCiAgICAgICAgICBwcm9ncmVzcy5oaWRlKCk7CiAgICAgICAgICBzZXRUaHJvdHRsZSgpOyAKICAgICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKGludGVydmFsKTsKICAgICAgICAgIGlmICgiQVBJLWNhbGxpbmciICE9IHN0YXRlKSBhbGVydCgiU2hvdyBFZGl0ZWQgVm90ZXM6IEZpbmlzaGVkICciICsgc3RhdGUgKyAiJyBzdGF0ZSB1bmV4cGVjdGVkbHkiKTsKICAgICAgfQogICAgfQogIH0KICAKICAvLyBjaGVjayBpZiB3ZSBhcmUgd2l0aGluIHRoZSB0aHJvdHRsZSBib3VuZGFyaWVzCiAgZnVuY3Rpb24gaXNBbGxvd2VkKCkgewogICAgdmFyIGNhbGxzID0gZ2V0VGhyb3R0bGUoKSwKICAgICAgICB0aW1lcGFzc2VkOwogICAgICAgCiAgICB0aW1lcGFzc2VkID0gRGF0ZS5ub3coKSAtIGNhbGxzWzBdOwogICAgLy9jb25zb2xlLmxvZyh0aW1lcGFzc2VkKTsKICAgIHJldHVybiAoKChjYWxscy5sZW5ndGggPCByYXRlKSB8fCAKICAgICAgICAgICAodGltZXBhc3NlZCA+IHBlcikpICYmIAogICAgICAgICAgIChjYWxsc1tjYWxscy5sZW5ndGgtMV0gPCBEYXRlLm5vdygpKSk7CiAgfQogIAogIC8vIGhhbmRsZSBhIHRhc2sKICBmdW5jdGlvbiB0YXNrKCkgewogICAgaWYgKGlzQWxsb3dlZCgpKSB7CiAgICAgIHRhc2tXb3JrZXIoKTsKICAgIH0gZWxzZSB7CiAgICAgIC8vY29uc29sZS5sb2coJzw8IHRocm90dGxlID4+Jyk7CiAgICB9CiAgfQogIAogIGVkaXRlZEZpbHRlci5jbGljayhmdW5jdGlvbiAoKSB7CiAgICBmaWx0ZXJzLmZpbmQoJy55b3VhcmVoZXJlJykucmVtb3ZlQ2xhc3MoJ3lvdWFyZWhlcmUnKTsKICAgIGVkaXRlZEZpbHRlci5hZGRDbGFzcygneW91YXJlaGVyZScpOwogICAgY291bnRlci5wYXJlbnQoKS5odG1sKCc8c3BhbiBjbGFzcz0iY291bnQiPjA8L3NwYW4+IEVkaXRzIFNpbmNlIFZvdGVzIENhc3QnKTsKICAgIGNvdW50ZXIgPSAkKCdoMSA+IHNwYW4uY291bnQnKS5maXJzdCgpOwogICAgdGFibGUuZW1wdHkoKTsKICAgICQoJy5wYWdlcicpLnJlbW92ZSgpOwogICAgcHJvZ3Jlc3Muc2hvdygpOwogICAgCiAgICBhZGRGaXJzdFBhZ2UoInVwdm90ZSIpOwogICAgaW50ZXJ2YWwgPSB3aW5kb3cuc2V0SW50ZXJ2YWwodGFzaywgaW50ZXJ2YWxUaW1lKTsKICAgIHJldHVybiBmYWxzZTsKICB9KTsKICAKICBlZGl0ZWRGaWx0ZXIuYXBwZW5kKHByb2dyZXNzKTsKICBwcm9ncmVzcy5jc3MoJ21hcmdpbi1sZWZ0JywgJzAuNWVtJyk7CiAgcHJvZ3Jlc3MuaGlkZSgpOwogIGZpbHRlcnMucHJlcGVuZChlZGl0ZWRGaWx0ZXIpOwp9KCQgfHwgdW5zYWZlV2luZG93LiQsIHdpbmRvdyB8fCB1bnNhZmVXaW5kb3cpKTsKICA="},{"name":"SO Time Lines","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":["*://chat.stackoverflow.com/rooms/info/*","*://chat.meta.stackexchange.com/rooms/info/*"],"orig_includes":["*://chat.stackoverflow.com/rooms/*","*://chat.meta.stackexchange.com/rooms/*","*://chat.stackexchange.com/rooms/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1461159934919,"data":{}},"enabled":true,"position":20,"file_url":"https://raw.githubusercontent.com/Aralun/SO-chat-things/master/message_timelines/message_timelines.user.js","uuid":"a60e5c81-dcb5-47d0-9c34-d9b4edb4b869","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIFNPIFRpbWUgTGluZXMKLy8gQG5hbWVzcGFjZSAgIEt5bGwtdGhpbmdzCi8vIEBhdXRob3IgICAgICBLeWxsCi8vIEBkZXNjcmlwdGlvbiBSYW5kb20gY2hhdCBpbXByb3ZlbWVudHMKLy8gQGluY2x1ZGUgICAgICo6Ly9jaGF0LnN0YWNrb3ZlcmZsb3cuY29tL3Jvb21zLyoKLy8gQGV4Y2x1ZGUgICAgICo6Ly9jaGF0LnN0YWNrb3ZlcmZsb3cuY29tL3Jvb21zL2luZm8vKgovLyBAaW5jbHVkZSAgICAgKjovL2NoYXQubWV0YS5zdGFja2V4Y2hhbmdlLmNvbS9yb29tcy8qCi8vIEBleGNsdWRlICAgICAqOi8vY2hhdC5tZXRhLnN0YWNrZXhjaGFuZ2UuY29tL3Jvb21zL2luZm8vKgovLyBAaW5jbHVkZSAgICAgKjovL2NoYXQuc3RhY2tleGNoYW5nZS5jb20vcm9vbXMvKgovLyBAZXhsdWRlICAgICAgKjovL2NoYXQuc3RhY2tleGNoYW5nZS5jb20vcm9vbXMvaW5mby8qCi8vIEB2ZXJzaW9uICAgICAxLjIKLy8gQGVhdCAgICAgICAgIHdhZmZsZQovLyA9PS9Vc2VyU2NyaXB0PT0KCi8vIEFkZCBzb21lIFBsb3AKd2luZG93LlBsb3AgPSB3aW5kb3cuUGxvcCB8fCB7fQpQbG9waWZ5ID0gKC4uLmFyZ3MpID0+IE9iamVjdC5hc3NpZ24od2luZG93LlBsb3AsIC4uLmFyZ3MpCgpjb25zdCBzdG9yZUtleSA9ICdwbG9wLWxpbmVzJwoKLy8gQWRkIHNvbWUgbWFnaWMKSFRNTENvbGxlY3Rpb24ucHJvdG90eXBlW1N5bWJvbC5pdGVyYXRvcl0gPQogIEhUTUxDb2xsZWN0aW9uLnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdIHx8IEFycmF5LnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdCk5vZGVMaXN0LnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdID0KICBOb2RlTGlzdC5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXSB8fCBBcnJheS5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXQoKLy8gQWRkIHNvbWUgc3R5bGUKY29uc3QgbGluZXNTdHlsZU5vZGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpCmRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQobGluZXNTdHlsZU5vZGUpCgovLyBBZGQgdGltZXN0YW1wcyBvbiBhbGwgZXhpc3RpbmcgbWVzc2FnZXMKLy8gVGhpcyByZXF1aXJlcyB0aGUgRE9NIHRvIGJlIGxvYWRlZC4KLy8gVHJ5IHVudGlsIGl0IHdvcmtlZAovLyBJZiBhbnlvbmUgaGFzIHNvbWUga2luZCBvZiBjbGVhbmVyIHdheSB0byBkbyB0aGlzIChldmVudD8pLCBJJ20gdGFrZXIKY29uc3QgYWxsVGltZXN0YW1wc0ludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gdHJ5QWRkQWxsVGltZXN0YW1wcygpIHsKICBjb25zdCBhbGxNZXNzYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJypbaWRePSJtZXNzYWdlLSJdJykKCiAgZm9yKGxldCBtZXNzYWdlIG9mIGFsbE1lc3NhZ2VzKSB7CiAgICBsZXQgdGltZXN0YW1wID0gJC5kYXRhKG1lc3NhZ2UsICdpbmZvJykgJiYgJC5kYXRhKG1lc3NhZ2UsICdpbmZvJykudGltZQogICAgbWVzc2FnZS5zZXRBdHRyaWJ1dGUoJ3RpbWVzdGFtcCcsIHRpbWVzdGFtcCkKICB9CgogIGlmKGFsbE1lc3NhZ2VzLmxlbmd0aCA+IDApIHsKICAgIGNsZWFySW50ZXJ2YWwoYWxsVGltZXN0YW1wc0ludGVydmFsKQogIH0KfSwgMjAwMCkKCkNIQVQuYWRkRXZlbnRIYW5kbGVySG9vaygoe2V2ZW50X3R5cGUsIHRpbWVfc3RhbXAsIG1lc3NhZ2VfaWR9KSA9PiB7CiAgLy8gTmV3IG1lc3NhZ2UKICBpZihldmVudF90eXBlID09PSAxKSB7CiAgICAvLyBXZSBuZWVkIHRoZSBIVE1MIGVsZW1lbnQgdG8gZXhpc3QsIGl0J3Mgc2V0IHN5bmNocm9ub3VzbHkKICAgIC8vIFRodXMsIHF1ZXVlIHRoZSBxdWVyeQogICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgIGNvbnN0IGVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgbWVzc2FnZS0ke21lc3NhZ2VfaWR9YCkKICAgICAgaWYgKGVsZW1lbnQpIHsKICAgICAgICBlbGVtZW50LnNldEF0dHJpYnV0ZSgndGltZXN0YW1wJywgdGltZV9zdGFtcCkKICAgICAgfQogICAgfSwgMCkKICB9Cn0pCgpjb25zdCBtYWtlTGluZSA9IChjb2xvdXIsIGR1cmF0aW9uU2Vjb25kcywgY2xhc3NOYW1lKSA9PgogICh7IGNvbG91ciwgZHVyYXRpb25TZWNvbmRzLCBjbGFzc05hbWUgfSkKCi8vIFNlcXVlbmNlIG9yZGVyZWQgYnkgZHVyYXRpb24gaW4gYXNjZW5kaW5nIG9yZGVyCi8vIEV4YW1wbGU6Ci8vIFsKLy8gICB7IGNvbG91cjogJ3JlZCcsIGR1cmF0aW9uOiAxMjAsIGNsYXNzTmFtZTogJ3R3by1taW51dGVzJ30KLy8gXQpjb25zdCBsaW5lcyA9IFtdCgpjb25zdCBkZWZhdWx0TGluZXMgPSBbCiAgewogICAgY29sb3VyOiAncmVkJywKICAgIGR1cmF0aW9uU2Vjb25kczogMTIwLAogICAgY2xhc3NOYW1lOiAndHdvLW1pbnV0ZXMnCiAgfSwKICB7CiAgICBjb2xvdXI6ICdncmVlbicsCiAgICBkdXJhdGlvblNlY29uZHM6IDMwMCwKICAgIGNsYXNzTmFtZTogJ2ZpdmUtbWludXRlcycKICB9LAogIHsKICAgIGNvbG91cjogJ2JsdWUnLAogICAgZHVyYXRpb25TZWNvbmRzOiA2MDAsCiAgICBjbGFzc05hbWU6ICd0ZW4tbWludXRlcycKICB9Cl0KCk9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGxpbmVzLCB7CiAgYWRkTGluZSA6IHsKICAgIHZhbHVlOiAoY29sb3VyLCBkdXJhdGlvblNlY29uZHMsIGNsYXNzTmFtZSwgZG9VcGRhdGUgPSB0cnVlKSA9PiB7CiAgICAgIGNvbnN0IG5ld0xpbmUgPSBtYWtlTGluZShjb2xvdXIsIGR1cmF0aW9uU2Vjb25kcywgY2xhc3NOYW1lKQogICAgICAgICAgLCBpbmRleFRvSW5zZXJ0ID0gbGluZXMuZmluZEluZGV4KGUgPT4gZS5kdXJhdGlvblNlY29uZHMgPiBkdXJhdGlvblNlY29uZHMpCgogICAgICBpZihpbmRleFRvSW5zZXJ0ID09PSAtMSkgewogICAgICAgIGxpbmVzLnB1c2gobmV3TGluZSkKICAgICAgfQogICAgICBlbHNlIHsKICAgICAgICBsaW5lcy5zcGxpY2UoCiAgICAgICAgICBpbmRleFRvSW5zZXJ0LAogICAgICAgICAgMCwKICAgICAgICAgIG5ld0xpbmUKICAgICAgICApCiAgICAgIH0KICAgICAgaWYoZG9VcGRhdGUpIHsKICAgICAgICBsaW5lcy51cGRhdGVDU1MoKQogICAgICB9CiAgICB9CiAgfSwKICBhZGRNdWx0aXBsZUxpbmVzOiB7CiAgICB2YWx1ZTogKC4uLmxpbmVzU2VxdWVuY2UpID0+IHsKICAgICAgbGluZXNTZXF1ZW5jZS5mb3JFYWNoKGxpbmUgPT4gbGluZXMuYWRkTGluZSgKICAgICAgICBsaW5lLmNvbG91ciwgbGluZS5kdXJhdGlvblNlY29uZHMsIGxpbmUuY2xhc3NOYW1lLCBmYWxzZQogICAgICApKQogICAgICBsaW5lcy51cGRhdGVDU1MoKQogICAgfQogIH0sCiAgcmVtb3ZlTGluZTogewogICAgdmFsdWU6IChpbmRleCwgZG9VcGRhdGUgPSB0cnVlKSA9PiB7CiAgICAgIGxpbmVzLnNwbGljZShpbmRleCwgMSkKICAgICAgaWYoZG9VcGRhdGUpIHsKICAgICAgICBsaW5lcy51cGRhdGVDU1MoKQogICAgICB9CiAgICB9CiAgfSwKICByZW1vdmVNdWx0aXBsZUxpbmVzOiB7CiAgICB2YWx1ZTogKC4uLmluZGV4ZXMpID0+IHsKICAgICAgaW5kZXhlcy5mb3JFYWNoKGluZGV4ID0+IGxpbmVzLnJlbW92ZUxpbmUoaW5kZXgpLCBmYWxzZSkKICAgICAgbGluZXMudXBkYXRlQ1NTKCkKICAgIH0KICB9LAogIG1heExvb2t1cEFtb3VudDogewogICAgdmFsdWU6IDQyCiAgfSwKICBDU1NOb2RlOiB7CiAgICB2YWx1ZTogbGluZXNTdHlsZU5vZGUKICB9LAogIGdlbmVyYXRlQ1NTOiB7CiAgICB2YWx1ZTogKCkgPT4gbGluZXMucmVkdWNlKChzdW1tZWRDU1MsIGxpbmUpID0+CiAgICAgIGAke3N1bW1lZENTU30KICAgICAgLm1lc3NhZ2UuJHtsaW5lLmNsYXNzTmFtZX0gewogICAgICAgIGJvcmRlci1ib3R0b20tc3R5bGU6IHNvbGlkIWltcG9ydGFudDsKICAgICAgICBib3JkZXItYm90dG9tLWNvbG9yOiAke2xpbmUuY29sb3VyfSFpbXBvcnRhbnQ7CiAgICAgICAgICBib3JkZXItYm90dG9tLXdpZHRoOiB0aGluIWltcG9ydGFudDsKICAgICAgfWAsICcnKQogIH0sCiAgdXBkYXRlQ1NTOiB7CiAgICB2YWx1ZTogKCkgPT4gbGluZXMuQ1NTTm9kZS5pbm5lckhUTUwgPSBsaW5lcy5nZW5lcmF0ZUNTUygpCiAgfSwKICBzYXZlOiB7CiAgICB2YWx1ZTogKCkgPT4gbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3Bsb3AtbGluZXMnLCBKU09OLnN0cmluZ2lmeShbLi4ubGluZXNdKSkKICB9LAogIHJlc2V0OiB7CiAgICB2YWx1ZTogKCkgPT4gewogICAgICBsb2NhbFN0b3JhZ2UucmVtb3ZlSXRlbShzdG9yZUtleSkKICAgICAgbGluZXMucmVtb3ZlTXVsdGlwbGVMaW5lcygKICAgICAgICAuLi5saW5lcy5rZXlzKCkKICAgICAgKQogICAgICBsaW5lcy5hZGRNdWx0aXBsZUxpbmVzKC4uLmRlZmF1bHRMaW5lcykKICAgIH0KICB9Cn0pCgovLyBUT0RPOiBUaGF0J3Mgb3ZlcnN0ZXBwaW5nIHRoZSByZXNwb25zaWJpbGl0eSBvZiB0aGlzIHNjcmlwdC4KLy8gTmVlZCB0byBob2lzdCB0aGUgImhlbHAiIHRoaW5naWVzIGluIGl0cyBvd24gc2NyaXB0IGFuZCByZXF1aXJlIGl0ClBsb3AuaGVscCA9ICgpID0+IGNvbnNvbGUubG9nKCdNYXliZSB5b3UgbWVhbnQgYFBsb3AuaGFscCgpYD8nKQpQbG9wLmhhbHAgPSAoKSA9PiBjb25zb2xlLmxvZygKYFBsb3AhCllvdSBjYW4gdmlldyB0aGUgbGluZXMgcHJvcGVydGllcyBieSB0eXBpbmcgUGxvcC5saW5lcyBpbiB0aGlzIGNvbnNvbGUuCllvdSBjYW4gY2hhbmdlIGFueSBwcm9wZXJ0eSBvZiBzYWlkIGxpbmVzIHdpdGggeW91ciBkZWJ1ZyB0b29scyBvciBhIGNvbW1hbmQuClRoZSBjb2xvdXJzIG11c3QgYmUgQ1NTIGNvbG91cnMsIHN1Y2ggYXMgInB1cnBsZSIgb3IgIjB4RkFGQUZBIgpFeGFtcGxlOgogICAgUGxvcC5saW5lc1swXS5jb2xvdXIgPSAncHVycGxlJwogICAgUGxvcC5saW5lc1szXS5kdXJhdGlvblNlY29uZHMgPSAxMjAwIC8vIDIwIG1pbnV0ZXMKClRvIHVwZGF0ZSBkZWggQ1NTIGFuZCBtYWtlIHRoZSBjaGFuZ2VzIGFwcGVhcjoKICAgIFBsb3AubGluZXMudXBkYXRlQ1NTKCkKClRvIGFkZCBhIG5ldyBsaW5lLCB1c2UgdGhlIFBsb3AubGluZXMuYWRkTGluZSBmdW5jdGlvbi4KRmlyc3QgYXJndW1lbnQgaXMgdGhlIGNvbG91ciBvZiB0aGUgbGluZS4KU2Vjb25kIGFyZ3VtZW50IGlzIHRoZSBkdXJhdGlvbiBpbiBzZWNvbmRzIGl0IHJlcHJlc2VudHMuClRoaXJkIGFyZ3VtZW50IGlzIHRoZSBDU1MgY2xhc3MgbmFtZSBpdCBzaG91bGQgdXNlLgpFeGFtcGxlOgogICAgUGxvcC5saW5lcy5hZGRMaW5lKCd5ZWxsb3cnLCAxODAgLyogdGhyZWUgbWludXRlcyAqLywgJ3RocmVlLW1pbnV0ZXMnKQoKVG8gcmVtb3ZlIGEgbGluZSwgdXNlIHRoZSBQbG9wLmxpbmVzLnJlbW92ZUxpbmUgZnVuY3Rpb24uCk9ubHkgYXJndW1lbnQgaXMgdGhlIGluZGV4IChjYW4gYmUgbmVnYXRpdmUgYXMgcmV2ZXJzZSBpbmRleCkuCkV4YW1wbGU6CiAgICBQbG9wLmxpbmVzLnJlbW92ZUxpbmUoMCkgIC8vIFJlbW92ZSBmaXJzdCBsaW5lCiAgICBQbG9wLmxpbmVzLnJlbW92ZUxpbmUoLTEpIC8vIFJlbW92ZSBsYXN0IGxpbmUKCk9uY2UgeW91J3ZlIGRvbmUgeW91ciBjaGFuZ2VzLCBzYXZlIHRoZW0gc28gdGhhdCB0aGV5IHBlcnNpc3QgYWNyb3NzIHJlbG9hZHM6CiAgICBQbG9wLmxpbmVzLnNhdmUoKQoKSWYgeW91IHNjcmV3ZWQgdXA6CiAgICBQbG9wLnJlc2V0KCkKCkhhdmUgZnVuIQogLSBLeWxsCmAKKQoKCmNvbnN0IHN0b3JlZExpbmVzID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShzdG9yZUtleSkpCgppZihzdG9yZWRMaW5lcykgewogIGxpbmVzLmFkZE11bHRpcGxlTGluZXMoLi4uc3RvcmVkTGluZXMpCn0KZWxzZSB7CiAgLy8gRGVmYXVsdCBsaW5lcwogIGxpbmVzLmFkZE11bHRpcGxlTGluZXMoewogICAgY29sb3VyOiAncmVkJywKICAgIGR1cmF0aW9uU2Vjb25kczogMTIwLAogICAgY2xhc3NOYW1lOiAndHdvLW1pbnV0ZXMnCiAgfSwKICB7CiAgICBjb2xvdXI6ICdncmVlbicsCiAgICBkdXJhdGlvblNlY29uZHM6IDMwMCwKICAgIGNsYXNzTmFtZTogJ2ZpdmUtbWludXRlcycKICB9LAogIHsKICAgIGNvbG91cjogJ2JsdWUnLAogICAgZHVyYXRpb25TZWNvbmRzOiA2MDAsCiAgICBjbGFzc05hbWU6ICd0ZW4tbWludXRlcycKICB9KQp9CgpQbG9waWZ5KHsgbGluZXMgfSkKCnNldEludGVydmFsKGZ1bmN0aW9uIG1hbmFnZVRpbWVMaW5lcygpIHsKICBjb25zdCByZW1vdmVBbGxMaW5lcyA9ICgpID0+IHsKICAgIC8vIFRPRE86IEltcGxlbWVudCBUaW1lb3V0cyBpbnN0ZWFkIG9mIHJhdyByZW1vdmFscwogICAgY29uc3QgYWxsQ2xhc3NlcyA9IGxpbmVzLm1hcChsaW5lID0+IGxpbmUuY2xhc3NOYW1lKQogICAgLy8gTmluamEgaXQgdG8gYXJyYXkgYmVjYXVzZSBlbGVtZW50IGNvbGxlY3Rpb25zIHN1Y2sKICAgIGFsbENsYXNzZXMKICAgICAgLm1hcChjbGFzc05hbWUgPT4gZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShjbGFzc05hbWUpKQogICAgICAuZm9yRWFjaChlbGVtZW50c0NvbGxlY3Rpb24gPT4KICAgICAgICBbLi4uZWxlbWVudHNDb2xsZWN0aW9uXS5mb3JFYWNoKGVsZW1lbnQgPT4KICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSguLi5hbGxDbGFzc2VzKQogICAgICAgICkKICAgICAgKQogIH0KCiAgY29uc3QgYWRkTGluZXMgPSAoKSA9PiB7CiAgICBjb25zdCBhbGxNZXNzYWdlcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tZXNzYWdlJykKICAgICAgICAsIG1heExvb2t1cEFtb3VudCA9IE1hdGgubWluKGxpbmVzLm1heExvb2t1cEFtb3VudCwgYWxsTWVzc2FnZXMubGVuZ3RoKQogICAgICAgICwgbm93ID0gRGF0ZS5ub3coKQoKICAgICAgICAsIHRocmVzaG9sZHMgPSBbLi4ubGluZXNdCgogICAgZm9yKGxldCBpID0gYWxsTWVzc2FnZXMubGVuZ3RoIC0gMTsgaSA+IGFsbE1lc3NhZ2VzLmxlbmd0aCAtIG1heExvb2t1cEFtb3VudDsgaS0tKSB7CiAgICAgIGNvbnN0IGN1cnJlbnRMaW5lID0gdGhyZXNob2xkc1swXQogICAgICAgICAgLCBjdXJyZW50TWVzc2FnZSA9IGFsbE1lc3NhZ2VzW2ldCiAgICAgICAgICAsIG1lc3NhZ2VUaW1lc3RhbXAgPSBOdW1iZXIucGFyc2VJbnQoCiAgICAgICAgICAgIGN1cnJlbnRNZXNzYWdlLmdldEF0dHJpYnV0ZSgndGltZXN0YW1wJykKICAgICAgICAgICkgKiAxMDAwCgogICAgICBpZighY3VycmVudExpbmUpIHsKICAgICAgICAvLyBObyBtb3JlIGxpbmVzIHRvIGFkZCwgcXVpdAogICAgICAgIGJyZWFrCiAgICAgIH0KCiAgICAgIGlmKAogICAgICAgIG1lc3NhZ2VUaW1lc3RhbXAgPCAobm93IC0gKGN1cnJlbnRMaW5lLmR1cmF0aW9uU2Vjb25kcyAqIDEwMDApKQogICAgICApIHsKICAgICAgICBjdXJyZW50TWVzc2FnZS5jbGFzc0xpc3QuYWRkKGN1cnJlbnRMaW5lLmNsYXNzTmFtZSkKCiAgICAgICAgLy8gV2UncmUgZG9uZSB3aXRoIHRoaXMgbGluZSwgcmVtb3ZlIGl0CiAgICAgICAgdGhyZXNob2xkcy5zaGlmdCgpCiAgICAgICAgLy8gQSBtZXNzYWdlIGNhbiBoYXZlIG11bHRpcGxlIGxpbmVzIGF0dGFjaGVkLCBzbyByZWRvIHRoaXMgcm91bmQKICAgICAgICBpKysKICAgICAgfQogICAgfQogIH0KCiAgcmVtb3ZlQWxsTGluZXMoKQoKICBhZGRMaW5lcygpCn0sIDQyMCkK"},{"name":"Frequent Message Manager","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":["http://chat.stackoverflow.com/rooms/*","http://chat.meta.stackoverflow.com/rooms/*","http://chat.stackexchange.com/rooms/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1461202447675,"data":{}},"enabled":true,"position":21,"file_url":"http://files.quickmediasolutions.com/userscripts/message_manager.user.js","uuid":"a581179d-0e49-47cb-a0ef-1575b3c4a9fd","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgRnJlcXVlbnQgTWVzc2FnZSBNYW5hZ2VyCi8vIEBhdXRob3IgICAgICAgIE5hdGhhbiBPc21hbgovLyBAdmVyc2lvbiAgICAgICAxLjAKLy8gQG5hbWVzcGFjZSAgICAgaHR0cDovL3F1aWNrbWVkaWFzb2x1dGlvbnMuY29tCi8vIEBkZXNjcmlwdGlvbgkgIFN0b3JlcyBmcmVxdWVudCBtZXNzYWdlcyBmb3IgZWFzeSByZXRyaWV2YWwgYW5kIHBvc3RpbmcgbGF0ZXIgdXNpbmcgSFRNTDUncyBsb2NhbCBzdG9yYWdlLgovLyBAaW5jbHVkZSAgICAgICBodHRwOi8vY2hhdC5zdGFja292ZXJmbG93LmNvbS9yb29tcy8qCi8vIEBpbmNsdWRlICAgICAgIGh0dHA6Ly9jaGF0Lm1ldGEuc3RhY2tvdmVyZmxvdy5jb20vcm9vbXMvKgovLyBAaW5jbHVkZSAgICAgICBodHRwOi8vY2hhdC5zdGFja2V4Y2hhbmdlLmNvbS9yb29tcy8qCi8vID09L1VzZXJTY3JpcHQ9PQoKLy8gVGhpcyBmdW5jdGlvbiBlbWJlZHMgY29kZSBvbiB0aGUgYWN0dWFsIHBhZ2UuCmZ1bmN0aW9uIEVtYmVkQ29kZU9uUGFnZShqYXZhc2NyaXB0X2NvZGUpCnsKICAgIHZhciBjb2RlX2VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsKICAgIGNvZGVfZWxlbWVudC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7CiAgICBjb2RlX2VsZW1lbnQudGV4dENvbnRlbnQgPSBqYXZhc2NyaXB0X2NvZGU7CiAgICBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnaGVhZCcpWzBdLmFwcGVuZENoaWxkKGNvZGVfZWxlbWVudCk7Cn0KCi8vIFRoaXMgZnVuY3Rpb24gYWxsb3dzIHVzIHRvIGVtYmVkIGEgbmFtZWQgZnVuY3Rpb24KLy8gb24gdGhlIHBhZ2UgdGhhdCB3ZSBjYW4gaW52b2tlIGZyb20gc2NyaXB0cyBpbiB0aGUgcGFnZS4KZnVuY3Rpb24gRW1iZWRGdW5jdGlvbk9uUGFnZShmdW5jdGlvbl9uYW1lLCBmdW5jdGlvbl9jb250ZW50cykKewogICAgRW1iZWRDb2RlT25QYWdlKGZ1bmN0aW9uX2NvbnRlbnRzLnRvU3RyaW5nKCkucmVwbGFjZSgvZnVuY3Rpb24gPy8sICdmdW5jdGlvbiAnICsgZnVuY3Rpb25fbmFtZSkpOwp9CgovLyBUaGlzIGZ1bmN0aW9uIGFsbG93cyB1cyB0byBlbWJlZCBhIGZ1bmN0aW9uIG9uIHRoZQovLyBwYWdlIHRoYXQgd2lsbCBpbW1lZGlhdGVseSBnZXQgZXhlY3V0ZWQuCmZ1bmN0aW9uIEVtYmVkRnVuY3Rpb25PblBhZ2VBbmRFeGVjdXRlKGZ1bmN0aW9uX2NvbnRlbnRzKQp7CiAgICBFbWJlZENvZGVPblBhZ2UoIigiICsgZnVuY3Rpb25fY29udGVudHMudG9TdHJpbmcoKSArICIpKCkiKTsKfQoKLy8gQ2FsbGVkIHdoZW4gdGhlIGJ1dHRvbiBpcyBjbGlja2VkCkVtYmVkRnVuY3Rpb25PblBhZ2UoJ0ZNTV9BY3RpdmF0ZU1lbnUnLCBmdW5jdGlvbigpIHsKICAgIAogICAgLy8gRGlzcGxheSB0aGUgYmFja2dyb3VuZCBvY2NsdWRlcgogICAgJCgnI2JhY2tncm91bmQtb2NjbHVkZXInKS5zaG93KCkuYW5pbWF0ZSh7IG9wYWNpdHk6ICcwLjMnIH0sIDMwMCk7CiAgICAKICAgIC8vIFNldCB0aGUgY29ycmVjdCBob3Jpem9udGFsIGFuZCB2ZXJ0aWNhbCBvZmZzZXQKICAgIHZhciB4ID0gJCgnI21lc3NhZ2UtYnV0dG9uJykub2Zmc2V0KCkubGVmdCAtIDEwMDsgLy8gYXBwcm94aW1hdGUsIGJ1dCBnb29kIGVub3VnaAogICAgJCgnI2ZtbS1tZW51JykuY3NzKCdsZWZ0JywgeCArICdweCcpCiAgICAgICAgICAgICAgICAgIC5jc3MoJ2JvdHRvbScsICczMHB4Jyk7CiAgICAKICAgIC8vIERpc3BsYXkgdGhlIG1lbnUKICAgICQoJyNmbW0tbWVudScpLnNob3coKS5hbmltYXRlKHsgb3BhY2l0eTogJzEuMCcsIGJvdHRvbTogJys9NTAnIH0sIDMwMCk7CiAgICAKfSk7CgovLyBDbG9zZXMgZXZlcnl0aGluZwpFbWJlZEZ1bmN0aW9uT25QYWdlKCdGTU1fQ2xvc2VNZW51JywgZnVuY3Rpb24oKSB7CiAgICAKICAgIC8vIENsZWFyIHRoZSBiYWNrZ3JvdW5kIGFuZCBtZW51IGZyb20gdGhlIHNjcmVlbgogICAgJCgnI2JhY2tncm91bmQtb2NjbHVkZXInKS5hbmltYXRlKHsgb3BhY2l0eTogJzAuMCcgfSwgMzAwLCBmdW5jdGlvbigpIHsgJCh0aGlzKS5oaWRlKCk7IH0pOwogICAgJCgnI2ZtbS1tZW51JykuYW5pbWF0ZSh7IG9wYWNpdHk6ICcwLjAnLCBib3R0b206ICctPTUwJyB9LCAzMDAsIGZ1bmN0aW9uKCkgeyAkKHRoaXMpLmhpZGUoKTsgfSk7CiAgICAKICAgIGlmKCQoJyNmbW0tbWVzc2FnZS1lbnRyeS1jb250YWluZXInKS5jc3MoJ2Rpc3BsYXknKSA9PSAnYmxvY2snKQogICAgICAgIEZNTV9IaWRlTWVzc2FnZUVudHJ5KCk7CiAgICAKfSk7CgovLyBJbnNlcnRzIHRoZSBtZXNzYWdlCkVtYmVkRnVuY3Rpb25PblBhZ2UoJ0ZNTV9JbnNlcnRNZXNzYWdlJywgZnVuY3Rpb24obWVzc2FnZV90ZXh0KSB7CiAgICAKICAgIHZhciB0ZXh0Ym94X3ZhbHVlICAgPSAkKCcjaW5wdXQnKVswXS52YWx1ZTsKICAgIHZhciBzZWxlY3Rpb25fc3RhcnQgPSAkKCcjaW5wdXQnKVswXS5zZWxlY3Rpb25TdGFydDsKICAgIHZhciBzZWxlY3Rpb25fZW5kICAgPSAkKCcjaW5wdXQnKVswXS5zZWxlY3Rpb25FbmQ7CiAgICAKICAgIHZhciBuZXdfdmFsdWUgPSB0ZXh0Ym94X3ZhbHVlLnN1YnN0cigwLCBzZWxlY3Rpb25fc3RhcnQpICsKICAgICAgICAgICAgICAgICAgICBtZXNzYWdlX3RleHQgKwogICAgICAgICAgICAgICAgICAgIHRleHRib3hfdmFsdWUuc3Vic3RyKHNlbGVjdGlvbl9lbmQpOwogICAgCiAgICAkKCcjaW5wdXQnKVswXS52YWx1ZSA9IG5ld192YWx1ZTsKICAgIAogICAgLy8gQ2xvc2UgdGhlIG1lbnUKICAgIEZNTV9DbG9zZU1lbnUoKTsKICAgIAogICAgLy8gRm9jdXMgdGhlIGlucHV0IGJveAogICAgJCgnI2lucHV0JylbMF0uZm9jdXMoKTsKICAgIAp9KTsKCi8vIFNlbmRzIHRoZSBtZXNzYWdlCkVtYmVkRnVuY3Rpb25PblBhZ2UoJ0ZNTV9TZW5kTWVzc2FnZScsIGZ1bmN0aW9uKG1lc3NhZ2VfdGV4dCkgewogICAgCiAgICAvLyBJbnNlcnQgdGhlIG1lc3NhZ2UgYW5kIHNlbmQgaXQuCiAgICBGTU1fSW5zZXJ0TWVzc2FnZShtZXNzYWdlX3RleHQpOwogICAgJCgnI3NheWl0LWJ1dHRvbicpLmNsaWNrKCk7CiAgICAKfSk7CgovLyBQcm92aWRlcyBlZGl0aW5nIGNhcGFiaWxpdGllcyBmb3IgdGhlIGN1cnJlbnQgbWVzc2FnZQpFbWJlZEZ1bmN0aW9uT25QYWdlKCdGTU1fRWRpdE1lc3NhZ2UnLCBmdW5jdGlvbihtZXNzYWdlX3RleHQpIHsKICAgIAogICAgLy8gTWFrZSBzdXJlIHdlIGFyZW4ndCBhbHJlYWR5IGVkaXRpbmcgc29tZXRoaW5nCiAgICBpZigkKCcjZm1tLW1lc3NhZ2UtZW50cnktY29udGFpbmVyJykuY3NzKCdkaXNwbGF5JykgPT0gJ2Jsb2NrJykgewogICAgICAgIAogICAgICAgICQoJyNmbW0tbWVzc2FnZS1lbnRyeS1jb250YWluZXInKS5jc3MoJ2JhY2tncm91bmRDb2xvcicsICcjZmFhJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYW5pbWF0ZSh7IGJhY2tncm91bmRDb2xvcjogJyNmZmYnIH0sIDEwMDApOwogICAgICAgIHJldHVybjsKICAgICAgICAKICAgIH0KICAgIAogICAgLy8gRGlzcGxheSB0aGUgbWVzc2FnZSBlbnRyeSBib3gKICAgIEZNTV9EaXNwbGF5TWVzc2FnZUVudHJ5KGZhbHNlKTsKICAgIAogICAgLy8gU3RvcmUgdGhlIGN1cnJlbnQgbWVzc2FnZSBpbiB0aGUgaGlkZGVuIGZvcm0gZmllbGQgYW5kCiAgICAvLyBkaXNwbGF5IHRoZSBjdXJyZW50IHRleHQgZm9yIGVkaXRpbmcKICAgICQoJyNmbW0tZWRpdC1tZXNzYWdlJylbMF0udmFsdWUgPSAkKCcjZm1tLW1lc3NhZ2UtY29udGVudCcpWzBdLnZhbHVlID0gbWVzc2FnZV90ZXh0OwogICAgCn0pOwoKLy8gUmV0dXJucyB0aGUgSFRNTCAobGlua3MsIGV0Yy4pIGZvciB0aGUgZ2l2ZW4gbWVzc2FnZQpFbWJlZEZ1bmN0aW9uT25QYWdlKCdGTU1fR2V0TWVzc2FnZUhUTUwnLCBmdW5jdGlvbihtZXNzYWdlKSB7CiAgICAKICAgIC8vIEdlbmVyYXRlIGEgc21hbGxlciByZXByZXNlbnRhdGlvbiBvZiB0aGUgbWVzc2FnZSBpZiBuZWVkZWQKICAgIHZhciByZXByZXNlbnRhdGlvbiA9IG1lc3NhZ2U7CiAgICBpZihyZXByZXNlbnRhdGlvbi5sZW5ndGggPiA2MCkKICAgICAgICByZXByZXNlbnRhdGlvbiA9IHJlcHJlc2VudGF0aW9uLnN1YnN0cigwLCA1NykgKyAnLi4uJzsKICAgIAogICAgLy8gVGhpcyBpcyBhIFNVUEVSIFVHTFkgaGFjay4uLiBidXQgaXQgd29ya3MgOlAKICAgIHZhciBlc2NhcGVkX3RleHQgPSBtZXNzYWdlLnJlcGxhY2UoL1xcL2csICdcXCcgKyAneDVjJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLycvZywgICdcXCcgKyAneDI3JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyIvZywgICdcXCcgKyAneDIyJykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoLyYvZywgICdcXCcgKyAneDI2JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlcGxhY2UoL1xuL2csICAnXFxuJyk7CiAgICAKICAgIHJldHVybiAnPGxpIHN0eWxlPSJtYXJnaW46IDRweCAwcHg7Ij48c3BhbiB0aXRsZT0iJyArIGVzY2FwZWRfdGV4dCArICciPicgKyByZXByZXNlbnRhdGlvbiArICc8L3NwYW4+Jm5ic3A7Jm5ic3A7PGEgaHJlZj0iamF2YXNjcmlwdDp2b2lkKDApOyIgb25jbGljaz0iRk1NX0VkaXRNZXNzYWdlKFwnJyArIGVzY2FwZWRfdGV4dCArICdcJyk7IHJldHVybiBmYWxzZTsiIHRpdGxlPSJFZGl0IHRoaXMgbWVzc2FnZSI+PGltZyBzcmM9Imh0dHA6Ly91cGxvYWQud2lraW1lZGlhLm9yZy93aWtpcGVkaWEvY29tbW9ucy90aHVtYi9mL2YzL0NyeXN0YWxfQ2xlYXJfYWN0aW9uX2VkaXQucG5nLzE0cHgtQ3J5c3RhbF9DbGVhcl9hY3Rpb25fZWRpdC5wbmciIC8+PC9hPiZuYnNwOyZuYnNwOzxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiIG9uY2xpY2s9IkZNTV9JbnNlcnRNZXNzYWdlKFwnJyArIGVzY2FwZWRfdGV4dCArICdcJyk7IHJldHVybiBmYWxzZTsiIHRpdGxlPSJJbnNlcnQgdGhpcyBtZXNzYWdlIj48aW1nIHNyYz0iaHR0cDovL3VwbG9hZC53aWtpbWVkaWEub3JnL3dpa2lwZWRpYS9jb21tb25zL3RodW1iL2UvZTIvQ3J5c3RhbF9DbGVhcl9hY3Rpb25fZWRpdF9hZGQucG5nLzE0cHgtQ3J5c3RhbF9DbGVhcl9hY3Rpb25fZWRpdF9hZGQucG5nIiAvPjwvYT4mbmJzcDsmbmJzcDs8YSBocmVmPSJqYXZhc2NyaXB0OnZvaWQoMCk7IiBvbmNsaWNrPSJGTU1fU2VuZE1lc3NhZ2UoXCcnICsgZXNjYXBlZF90ZXh0ICsgJ1wnKTsgcmV0dXJuIGZhbHNlOyIgdGl0bGU9IlNlbmQgdGhpcyBtZXNzYWdlIj48aW1nIHNyYz0iaHR0cDovL3VwbG9hZC53aWtpbWVkaWEub3JnL3dpa2lwZWRpYS9jb21tb25zL3RodW1iLzkvOTEvQ3J5c3RhbF9DbGVhcl9hY3Rpb25fZmlsZXByaW50LnBuZy8xNHB4LUNyeXN0YWxfQ2xlYXJfYWN0aW9uX2ZpbGVwcmludC5wbmciIC8+PC9hPiZuYnNwOyZuYnNwOzxhIGhyZWY9ImphdmFzY3JpcHQ6dm9pZCgwKTsiIG9uY2xpY2s9IkZNTV9EZWxldGVNZXNzYWdlKFwnJyArIGVzY2FwZWRfdGV4dCArICdcJyk7IHJldHVybiBmYWxzZTsiIHRpdGxlPSJEZWxldGUgdGhpcyBtZXNzYWdlIj48aW1nIHNyYz0iaHR0cDovL3VwbG9hZC53aWtpbWVkaWEub3JnL3dpa2lwZWRpYS9jb21tb25zL3RodW1iLzIvMmUvQ3J5c3RhbF9DbGVhcl9hY3Rpb25fYnV0dG9uX2NhbmNlbC5wbmcvMTRweC1DcnlzdGFsX0NsZWFyX2FjdGlvbl9idXR0b25fY2FuY2VsLnBuZyIgLz48L2E+PC9saT4nOwogICAgCn0pOwoKLy8gTG9hZHMgdGhlIGluaXRpYWwgbGlzdCBvZiBtZXNzYWdlcwpFbWJlZEZ1bmN0aW9uT25QYWdlKCdGTU1fTG9hZE1lc3NhZ2VzJywgZnVuY3Rpb24oKSB7CiAgICAKICAgIC8vIExvYWQgdGhlIGl0ZW1zIGFuZCBhZGQgdGhlbSB0byB0aGUgbWVudQogICAgaWYobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ21lc3NhZ2VzJykgIT09IG51bGwpIHsKICAgICAgICAKICAgICAgICAvLyBDaGVjayB0byBzZWUgaWYgdGhlIGFycmF5IGhhcyBhbnkgaXRlbXMKICAgICAgICB2YXIgaXRlbXMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdtZXNzYWdlcycpKTsKICAgICAgICAKICAgICAgICBpZihpdGVtcy5sZW5ndGgpIHsKICAgICAgICAgICAgCiAgICAgICAgICAgIC8vIEdlbmVyYXRlIHRoZSBIVE1MIGZvciB0aGUgbGlzdCBpdGVtcwogICAgICAgICAgICB2YXIgbGlzdF9odG1sID0gJyc7CiAgICAgICAgICAgIAogICAgICAgICAgICBmb3IodmFyIGk9MDtpPGl0ZW1zLmxlbmd0aDsrK2kpCiAgICAgICAgICAgICAgICAkKCcjZm1tLW1lc3NhZ2VzJykuYXBwZW5kKEZNTV9HZXRNZXNzYWdlSFRNTChpdGVtc1tpXSkpOwogICAgICAgICAgICAKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgIH0KICAgIAogICAgLy8gVGhlcmUgYXJlIG5vIG1lc3NhZ2VzCiAgICBGTU1fTm9NZXNzYWdlRGlzcGxheSgpOwogICAgCn0pOwoKLy8gRGlzcGxheXMgYSBtZXNzYWdlIHRoYXQgdGhlcmUgYXJlIG5vIG1lc3NhZ2VzCkVtYmVkRnVuY3Rpb25PblBhZ2UoJ0ZNTV9Ob01lc3NhZ2VEaXNwbGF5JywgZnVuY3Rpb24oKSB7CiAgICAKICAgICQoJyNmbW0tbWVzc2FnZXMnKS5odG1sKCc8bGkgaWQ9ImZtbS1uby1tZXNzYWdlcyIgc3R5bGU9Im1hcmdpbi10b3A6IDgwcHg7IG1hcmdpbi1sZWZ0OiAtMThweDsgbGlzdC1zdHlsZS10eXBlOiBub25lOyB0ZXh0LWFsaWduOiBjZW50ZXI7IGZvbnQtc3R5bGU6IGl0YWxpYzsgY29sb3I6ICM1NTU7Ij5UaGVyZSBhcmUgbm8gbWVzc2FnZXMuPC9saT4nKTsKICAgIAp9KTsKCi8vIERlbGV0ZXMgYW4gaXRlbSBmcm9tIHRoZSBtZW51CkVtYmVkRnVuY3Rpb25PblBhZ2UoJ0ZNTV9EZWxldGVNZXNzYWdlJywgZnVuY3Rpb24obWVzc2FnZV90ZXh0KSB7CiAgICAKICAgIC8vIFJldHJpZXZlIHRoZSBsaXN0IGFuZCBmaW5kIHRoZSBpdGVtCiAgICB2YXIgY3VycmVudF9tZXNzYWdlcyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ21lc3NhZ2VzJykpOwogICAgdmFyIG1zZ19pZCA9IC0xOwogICAgCiAgICBmb3IodmFyIGk9MDtpPGN1cnJlbnRfbWVzc2FnZXMubGVuZ3RoOysraSkKICAgICAgICBpZihjdXJyZW50X21lc3NhZ2VzW2ldID09IG1lc3NhZ2VfdGV4dCkKICAgICAgICAgICAgbXNnX2lkID0gaTsKICAgIAogICAgLy8gSnVzdCBhIHByZWNhdXRpb24gaW4gY2FzZSBzb21ldGhpbmcgd2VudCB3cm9uZwogICAgaWYobXNnX2lkID09IC0xKSByZXR1cm47CiAgICAKICAgIC8vIFJlbW92ZSB0aGUgaXRlbQogICAgY3VycmVudF9tZXNzYWdlcy5zcGxpY2UobXNnX2lkLCAxKTsKICAgIAogICAgLy8gU3RvcmUgdGhlIHVwZGF0ZWQgbGlzdCBhbmQgZ2V0IHJpZCBvZiB0aGUgaXRlbQogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ21lc3NhZ2VzJywgSlNPTi5zdHJpbmdpZnkoY3VycmVudF9tZXNzYWdlcykpOwogICAgCiAgICAvLyBGYWRlIHRoZSBpdGVtIG91dCBhbmQgZ2V0IHJpZCBvZiBpdAogICAgJCgnI2ZtbS1tZXNzYWdlcyBsaTpudGgtY2hpbGQoJyArIChtc2dfaWQgKyAxKSArICcpJykuc2xpZGVVcCgzMDAsIGZ1bmN0aW9uKCkgewogICAgICAgIAogICAgICAgIC8vIFJlbW92ZSB0aGUgZWxlbWVudAogICAgICAgICQodGhpcykucmVtb3ZlKCk7CiAgICAgICAgCiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlcmUgYXJlIGFueSBtZXNzYWdlCiAgICAgICAgaWYoIWN1cnJlbnRfbWVzc2FnZXMubGVuZ3RoKQogICAgICAgICAgICBGTU1fTm9NZXNzYWdlRGlzcGxheSgpOwogICAgICAgIAogICAgfSk7Cn0pOwoKLy8gRGlzcGxheXMgYW4gZW50cnkgYm94IGZvciBhZGRpbmcgYSBuZXcgbWVzc2FnZQovLyB0aGUgcGFyYW1ldGVyIHBhc3NlZCBpcyB0cnVlIGlmIHdlIGFyZSBhZGRpbmcgYSBtZXNzYWdlCkVtYmVkRnVuY3Rpb25PblBhZ2UoJ0ZNTV9EaXNwbGF5TWVzc2FnZUVudHJ5JywgZnVuY3Rpb24oYWRkX21lc3NhZ2UpIHsKICAgIAogICAgLy8gVW5iaW5kIGFsbCBjdXJyZW50IGV2ZW50IGhhbmRsZXJzIGZvciBjbGljayBldmVudHMKICAgICQoJyNmbW0tY29tbWl0LWJ1dHRvbicpLnVuYmluZCgnY2xpY2snKTsKICAgIAogICAgLy8gU2V0IHRoZSBidXR0b24gdGl0bGUgYW5kIGV2ZW50IGhhbmRsZXIgYXBwcm9wcmlhdGVseQogICAgaWYoYWRkX21lc3NhZ2UpIHsKICAgICAgICAkKCcjZm1tLWNvbW1pdC1idXR0b24nKS50ZXh0KCdhZGQnKTsKICAgICAgICAkKCcjZm1tLWNvbW1pdC1idXR0b24nKS5iaW5kKCdjbGljaycsIEZNTV9BZGRNZXNzYWdlKTsKICAgIH0gZWxzZSB7CiAgICAgICAgJCgnI2ZtbS1jb21taXQtYnV0dG9uJykudGV4dCgnc2F2ZScpOwogICAgICAgICQoJyNmbW0tY29tbWl0LWJ1dHRvbicpLmJpbmQoJ2NsaWNrJywgRk1NX1NhdmVNZXNzYWdlKTsKICAgIH0KICAgIAogICAgLy8gQW5pbWF0ZSB0aGUgdHJhbnNpdGlvbiB0aGF0IGRpc3BsYXlzIHRoZSBlZGl0b3IKICAgICQoJyNmbW0tdHJpZ2dlci1hZGQnKS5zbGlkZVVwKCk7CiAgICAkKCcjZm1tLW1lbnUnKS5hbmltYXRlKHsgaGVpZ2h0OiAnKz03NCcgfSk7CiAgICAkKCcjZm1tLW1lc3NhZ2UtZW50cnktY29udGFpbmVyJykuc2xpZGVEb3duKCk7CiAgICAKICAgIC8vIENsZWFyIHRoZSBjdXJyZW50IGNvbnRlbnRzIG9mIHRoZSB0ZXh0Ym94CiAgICAkKCcjZm1tLW1lc3NhZ2UtY29udGVudCcpWzBdLnZhbHVlID0gJyc7CiAgICAkKCcjZm1tLW1lc3NhZ2UtY29udGVudCcpWzBdLmZvY3VzKCk7CiAgICAKfSk7CgpFbWJlZEZ1bmN0aW9uT25QYWdlKCdGTU1fSGlkZU1lc3NhZ2VFbnRyeScsIGZ1bmN0aW9uKCkgewogICAgCiAgICAvLyBBbmltYXRlIHRoZSB0cmFuc2l0aW9uCiAgICAkKCcjZm1tLXRyaWdnZXItYWRkJykuc2xpZGVEb3duKCk7CiAgICAkKCcjZm1tLW1lbnUnKS5hbmltYXRlKHsgaGVpZ2h0OiAnLT03NCcgfSk7CiAgICAkKCcjZm1tLW1lc3NhZ2UtZW50cnktY29udGFpbmVyJykuc2xpZGVVcCgpOwogICAgCn0pOwoKLy8gQWRkcyB0aGUgbWVzc2FnZSB0byB0aGUgSlNPTiBhcnJheQpFbWJlZEZ1bmN0aW9uT25QYWdlKCdGTU1fQWRkTWVzc2FnZScsIGZ1bmN0aW9uKCkgewogICAgCiAgICAvLyBHZXQgdGhlIG5ldyBtZXNzYWdlIGZyb20gdGhlIHVzZXIKICAgIHZhciBuZXdfbWVzc2FnZSA9ICQoJyNmbW0tbWVzc2FnZS1jb250ZW50JylbMF0udmFsdWU7CiAgICB2YXIgY3VycmVudF9tZXNzYWdlcyA9IFtdOwogICAgCiAgICAvLyBSZXRyaWV2ZSB0aGUgY3VycmVudCBhcnJheSBvZiBtZXNzYWdlcyBpZiBpdCBleGlzdHMKICAgIGlmKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdtZXNzYWdlcycpICE9PSBudWxsKQogICAgICAgIGN1cnJlbnRfbWVzc2FnZXMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdtZXNzYWdlcycpKTsKICAgIAogICAgLy8gQWRkIHRoZSBuZXcgbWVzc2FnZSB0byB0aGUgbGlzdAogICAgY3VycmVudF9tZXNzYWdlcy5wdXNoKG5ld19tZXNzYWdlKTsKICAgIAogICAgLy8gU3RvcmUgdGhlIHVwZGF0ZWQgbGlzdCBhbmQgY2xvc2UgdGhlIGVkaXRvcgogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ21lc3NhZ2VzJywgSlNPTi5zdHJpbmdpZnkoY3VycmVudF9tZXNzYWdlcykpOwogICAgRk1NX0hpZGVNZXNzYWdlRW50cnkoKTsKICAgIAogICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSB0byBnZXQgcmlkIG9mIHRoZSAnbm8gbWVzc2FnZXMnIG1lc3NhZ2UKICAgIGlmKCQoJyNmbW0tbm8tbWVzc2FnZXMnKS5sZW5ndGgpCiAgICAgICAgJCgnI2ZtbS1uby1tZXNzYWdlcycpLnJlbW92ZSgpOwogICAgCiAgICAvLyBHZXQgdGhlIEhUTUwgZm9yIHRoZSBuZXcgaXRlbSBhbmQgaGlkZSBpdAogICAgdmFyIG5ld19pdGVtID0gJChGTU1fR2V0TWVzc2FnZUhUTUwobmV3X21lc3NhZ2UpKS5oaWRlKCk7CiAgICAKICAgIC8vIE5vdyBhcHBlbmQgaXQgYW5kIHNsaWRlIGl0IGRvd24KICAgICQoJyNmbW0tbWVzc2FnZXMnKS5hcHBlbmQobmV3X2l0ZW0pOwogICAgbmV3X2l0ZW0uc2xpZGVEb3duKDMwMCk7CiAgICAKfSk7CgovLyBTYXZlcyBjaGFuZ2VzIHRvIHRoZSBtZXNzYWdlCkVtYmVkRnVuY3Rpb25PblBhZ2UoJ0ZNTV9TYXZlTWVzc2FnZScsIGZ1bmN0aW9uKCkgewoKICAgIC8vIFJldHJpZXZlIHRoZSBvbGQgdGV4dCBvZiB0aGUgbWVzc2FnZQogICAgdmFyIG9sZF9tZXNzYWdlID0gJCgnI2ZtbS1lZGl0LW1lc3NhZ2UnKVswXS52YWx1ZTsKICAgIHZhciBuZXdfbWVzc2FnZSA9ICQoJyNmbW0tbWVzc2FnZS1jb250ZW50JylbMF0udmFsdWU7CiAgICAKICAgIC8vIFJldHJpZXZlIHRoZSBsaXN0IGFuZCBmaW5kIHRoZSBvbGQgaXRlbQogICAgdmFyIGN1cnJlbnRfbWVzc2FnZXMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdtZXNzYWdlcycpKTsKICAgIAogICAgZm9yKHZhciBpPTA7aTxjdXJyZW50X21lc3NhZ2VzLmxlbmd0aDsrK2kpCiAgICAgICAgaWYoY3VycmVudF9tZXNzYWdlc1tpXSA9PSBvbGRfbWVzc2FnZSkgewogICAgICAgICAgICAKICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBlbnRyeQogICAgICAgICAgICBjdXJyZW50X21lc3NhZ2VzW2ldID0gbmV3X21lc3NhZ2U7CiAgICAgICAgICAgIAogICAgICAgICAgICAvLyBVcGRhdGUgdGhlIHRleHQgZm9yIHRoYXQgbWVzc2FnZQogICAgICAgICAgICAkKCcjZm1tLW1lc3NhZ2VzIGxpOm50aC1jaGlsZCgnICsgKGkgKyAxKSArICcpJykuaHRtbChGTU1fR2V0TWVzc2FnZUhUTUwobmV3X21lc3NhZ2UpKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY3NzKCdiYWNrZ3JvdW5kQ29sb3InLCAnI2ZhYScpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hbmltYXRlKHsgYmFja2dyb3VuZENvbG9yOiAnI2ZmZicgfSwgMTAwMCk7OwogICAgICAgICAgICAKICAgICAgICB9CiAgICAKICAgIC8vIFN0b3JlIHRoZSB1cGRhdGVkIGxpc3QgYW5kIGhpZGUgdGhlIGVudHJ5IGJveAogICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ21lc3NhZ2VzJywgSlNPTi5zdHJpbmdpZnkoY3VycmVudF9tZXNzYWdlcykpOwogICAgRk1NX0hpZGVNZXNzYWdlRW50cnkoKTsKCn0pOwoKLy8gQ3JlYXRlcyB0aGUgYnV0dG9uIGFuZCBzZXRzIGl0cyBldmVudCBoYW5kbGVyCkVtYmVkRnVuY3Rpb25PblBhZ2UoJ0ZNTV9Jbml0aWFsaXplJywgZnVuY3Rpb24oKSB7CiAgICAKICAgIC8vIEVtYmVkIHRoZSBjb2xvciBwbHVnaW4gb24gdGhlIHBhZ2UKICAgICQoJ2hlYWQnKS5hcHBlbmQoJzxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9Imh0dHA6Ly9maWxlcy5xdWlja21lZGlhc29sdXRpb25zLmNvbS9qcy9qcXVlcnkuY29sb3IubWluLmpzIj48L3NjcmlwdD4nKTsKICAgIAogICAgLy8gQ3JlYXRlIHRoZSBidXR0b24KICAgIHZhciBidXR0b24gPSAkKCc8YnV0dG9uIGlkPSJtZXNzYWdlLWJ1dHRvbiIgY2xhc3M9ImJ1dHRvbiIgb25jbGljaz0iRk1NX0FjdGl2YXRlTWVudSgpOyI+c3RvcmVkIG1lc3NhZ2VzPC9idXR0b24+Jyk7CiAgICAKICAgIC8vIEFwcGVuZCBpdCB0byB0aGUgYnV0dG9uIGxpc3QKICAgICQoJyNjaGF0LWJ1dHRvbnMnKS5hcHBlbmQoJyAnKS5hcHBlbmQoYnV0dG9uKTsKICAgIAogICAgLy8gQ3JlYXRlIHRoZSBiYWNrZ3JvdW5kIG9jY2x1ZGVyCiAgICAkKCdib2R5JykuYXBwZW5kKCc8ZGl2IGlkPSJiYWNrZ3JvdW5kLW9jY2x1ZGVyIiBzdHlsZT0icG9zaXRpb246IGZpeGVkOyB0b3A6IDBweDsgbGVmdDogMHB4OyB3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBiYWNrZ3JvdW5kLWNvbG9yOiAjMDAwOyB6LWluZGV4OiAxMDAwOyBvcGFjaXR5OiAwOyBkaXNwbGF5OiBub25lOyI+PC9kaXY+Jyk7CiAgICAKICAgIC8vIENyZWF0ZSB0aGUgbWVudQogICAgJCgnYm9keScpLmFwcGVuZCgnPGRpdiBpZD0iZm1tLW1lbnUiIHN0eWxlPSJwb3NpdGlvbjogZml4ZWQ7IHdpZHRoOiAzMDBweDsgaGVpZ2h0OiAzMDBweDsgYm9yZGVyOiAxcHggc29saWQgIzAwMDsgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjsgei1pbmRleDogMTAwMTsgb3BhY2l0eTogMDsgZGlzcGxheTogbm9uZTsgYm9yZGVyLXJhZGl1czogMTBweDsgYm94LXNoYWRvdzogMHB4IDBweCAxMHB4ICMzMzM7Ij48ZGl2IHN0eWxlPSJwYWRkaW5nOiAxMHB4OyI+PGJ1dHRvbiBjbGFzcz0iYnV0dG9uIiBzdHlsZT0iZmxvYXQ6IHJpZ2h0OyBtYXJnaW46IDBweCAwcHggNHB4OyBwYWRkaW5nOiAwcHggNHB4OyIgb25jbGljaz0iRk1NX0Nsb3NlTWVudSgpOyI+eDwvYnV0dG9uPjxiPkZyZXF1ZW50IE1lc3NhZ2UgTWVudTo8L2I+PGhyIHN0eWxlPSJjbGVhcjogYm90aDsiIC8+PGRpdiBzdHlsZT0iaGVpZ2h0OiAyMjZweDsgb3ZlcmZsb3cteTogYXV0bzsiPjx1bCBpZD0iZm1tLW1lc3NhZ2VzIiBzdHlsZT0ibWFyZ2luLWxlZnQ6IDE4cHg7IGxpc3Qtc3R5bGUtdHlwZTogc3F1YXJlOyI+PC91bD48L2Rpdj48YnV0dG9uIGlkPSJmbW0tdHJpZ2dlci1hZGQiIGNsYXNzPSJidXR0b24iIHN0eWxlPSJmbG9hdDogcmlnaHQ7IiBvbmNsaWNrPSJGTU1fRGlzcGxheU1lc3NhZ2VFbnRyeSh0cnVlKTsiPmFkZCBtZXNzYWdlPC9idXR0b24+PGRpdiBpZD0iZm1tLW1lc3NhZ2UtZW50cnktY29udGFpbmVyIiBzdHlsZT0iY2xlYXI6IGJvdGg7IHBhZGRpbmc6IDZweDsgZGlzcGxheTogbm9uZTsiPjx0ZXh0YXJlYSBpZD0iZm1tLW1lc3NhZ2UtY29udGVudCIgc3R5bGU9IndpZHRoOiAxMDAlOyBoZWlnaHQ6IDYwcHg7IHBhZGRpbmc6IDBweDsiPjwvdGV4dGFyZWE+PGlucHV0IHR5cGU9ImhpZGRlbiIgaWQ9ImZtbS1lZGl0LW1lc3NhZ2UiIHZhbHVlPSIiIC8+PGJyIC8+PGJ1dHRvbiBjbGFzcz0iYnV0dG9uIiBpZD0iZm1tLWNvbW1pdC1idXR0b24iPjwvYnV0dG9uPiA8YnV0dG9uIGNsYXNzPSJidXR0b24iIG9uY2xpY2s9IkZNTV9IaWRlTWVzc2FnZUVudHJ5KCk7Ij5jYW5jZWw8L2J1dHRvbj48L2Rpdj48L2Rpdj48L2Rpdj4nKTsKICAgIAogICAgLy8gTG9hZCB0aGUgZXhpc3RpbmcgaXRlbXMKICAgIEZNTV9Mb2FkTWVzc2FnZXMoKTsKICAgIAp9KTsKCkVtYmVkRnVuY3Rpb25PblBhZ2VBbmRFeGVjdXRlKGZ1bmN0aW9uKCkgewogICAgCiAgICAvLyBNYWtlIHN1cmUgdGhhdCB3ZSBhcmUgYWN0dWFsbHkgb24gYSBjaGF0IHBhZ2UKICAgIGlmKGxvY2F0aW9uLmhyZWYubWF0Y2goL3Jvb21zXC9cZCsoPzpcL1tcdy1dKykkLykgPT09IG51bGwpCiAgICAgICAgcmV0dXJuOwogICAgCiAgICAvLyBJbml0aWFsaXplIGV2ZXJ5dGhpbmcKICAgIEZNTV9Jbml0aWFsaXplKCk7CiAgICAKfSk7Cg=="},{"name":"Highlight Code in Chat","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":false,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":["http://chat.stackoverflow.com/rooms/*","http://chat.stackoverflow.com/transcript/*","http://chat.meta.stackoverflow.com/rooms/*","http://chat.meta.stackoverflow.com/transcript/*","http://chat.stackexchange.com/rooms/*","http://chat.stackexchange.com/transcript/*"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1461202722012,"data":{}},"enabled":true,"position":22,"file_url":"http://files.quickmediasolutions.com/userscripts/code_highlight.user.js","uuid":"d8003815-268a-4034-bf35-9a9392ef02a7","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICAgSGlnaGxpZ2h0IENvZGUgaW4gQ2hhdAovLyBAYXV0aG9yICAgICAgICBOYXRoYW4gT3NtYW4KLy8gQHZlcnNpb24gICAgICAgMS4wCi8vIEBuYW1lc3BhY2UgICAgIGh0dHA6Ly9xdWlja21lZGlhc29sdXRpb25zLmNvbQovLyBAZGVzY3JpcHRpb24gICBIaWdobGlnaHRzIDxjb2RlPiBlbGVtZW50cyBjb250YWluZWQgaW4gY2hhdCBtZXNzYWdlcy4KLy8gQGluY2x1ZGUgICAgICAgaHR0cDovL2NoYXQuc3RhY2tvdmVyZmxvdy5jb20vcm9vbXMvKgovLyBAaW5jbHVkZSAgICAgICBodHRwOi8vY2hhdC5zdGFja292ZXJmbG93LmNvbS90cmFuc2NyaXB0LyoKLy8gQGluY2x1ZGUgICAgICAgaHR0cDovL2NoYXQubWV0YS5zdGFja292ZXJmbG93LmNvbS9yb29tcy8qCi8vIEBpbmNsdWRlICAgICAgIGh0dHA6Ly9jaGF0Lm1ldGEuc3RhY2tvdmVyZmxvdy5jb20vdHJhbnNjcmlwdC8qCi8vIEBpbmNsdWRlICAgICAgIGh0dHA6Ly9jaGF0LnN0YWNrZXhjaGFuZ2UuY29tL3Jvb21zLyoKLy8gQGluY2x1ZGUgICAgICAgaHR0cDovL2NoYXQuc3RhY2tleGNoYW5nZS5jb20vdHJhbnNjcmlwdC8qCi8vID09L1VzZXJTY3JpcHQ9PQoKLyogRW1iZWQgdGhlIHN0eWxlIHJ1bGUgb24gdGhlIHBhZ2UuICovCnZhciBzdHlsZV9lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3R5bGUnKTsKc3R5bGVfZWxlbWVudC50eXBlID0gJ3RleHQvY3NzJzsKc3R5bGVfZWxlbWVudC50ZXh0Q29udGVudCA9CiAgICAnLmNvbnRlbnQgPiBjb2RlIHsnICsKICAgICcgIGJhY2tncm91bmQtY29sb3I6IHJnYmEoMCwgMCwgMCwgMC4xKTsnICsKICAgICcgIGJvcmRlci1yYWRpdXM6IDNweDsnICsKICAgICcgIHBhZGRpbmc6IDRweDsnICsKICAgICd9JyArCiAgICAnLmNvbnRlbnQgPiBwcmUgeycgKwogICAgJyAgYm9yZGVyLWxlZnQ6IDhweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMSk7JyArCiAgICAnICBwYWRkaW5nLWxlZnQ6IDEycHg7JyArCiAgICAnfSc7CmRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdoZWFkJylbMF0uYXBwZW5kQ2hpbGQoc3R5bGVfZWxlbWVudCk7Cg=="},{"name":"SO link to JavaScript tag","options":{"awareOfChrome":false,"comment":null,"compat_arrayleft":false,"compat_foreach":false,"compat_forvarin":false,"compat_metadata":true,"compat_uW_gmonkey":false,"compat_wrappedjsobject":false,"compatopts_for_requires":true,"noframes":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":["/^https?:\\/\\/\\w*.?stackoverflow.com\\/.*/"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]},"run_at":null},"storage":{"ts":1461360705003,"data":{}},"enabled":true,"position":23,"uuid":"de06b716-31df-49bd-91ce-6e8123730c86","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgICBTTyBsaW5rIHRvIEphdmFTY3JpcHQgdGFnCi8vIEBuYW1lc3BhY2UgICAgaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS91c2Vycy81Mjk5MjM2L2tldmluLWd1YW4KLy8gQGF1dGhvciAgICAgICBLZXZpbgovLyBAZGVzY3JpcHRpb24gIENoYW5nZSB0aGUgbGluayBvZiBTdGFjayBPdmVyZmxvdyBtYWluIGxvZ28uCi8vIEB2ZXJzaW9uICAgICAgMC4yCi8vIEBpbmNsdWRlICAgICAgL15odHRwcz86XC9cL1x3Ki4/c3RhY2tvdmVyZmxvdy5jb21cLy4qLwovLyBAcmVxdWlyZSAgICAgIGh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL2JhYmVsLWNvcmUvNS42LjE1L2Jyb3dzZXItcG9seWZpbGwubWluLmpzCi8vIEByZXF1aXJlICAgICAgaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvYmFiZWwtY29yZS81LjYuMTUvYnJvd3Nlci5taW4uanMKLy8gPT0vVXNlclNjcmlwdD09CgovKiBqc2hpbnQgaWdub3JlOnN0YXJ0ICovCnZhciBpbmxpbmVfc3JjID0gKDw+PCFbQ0RBVEFbCi8qIGpzaGludCBpZ25vcmU6ZW5kICovCi8qIGpzaGludCBlc25leHQ6IHRydWUgKi8KCmNvbnN0IGxvZ28gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaGxvZ28nKTsKbG9nby5nZXRFbGVtZW50c0J5VGFnTmFtZSgnYScpWzBdLmhyZWYgPSAnL3F1ZXN0aW9ucy90YWdnZWQvamF2YXNjcmlwdCc7CgoKLyoganNoaW50IGlnbm9yZTpzdGFydCAqLwpdXT48Lz4pLnRvU3RyaW5nKCk7CnZhciBjID0gYmFiZWwudHJhbnNmb3JtKGlubGluZV9zcmMpOwpldmFsKGMuY29kZSk7Ci8qIGpzaGludCBpZ25vcmU6ZW5kICov"},{"name":"cv-pls preview","options":{"comment":null,"compatopts_for_requires":true,"compat_wrappedjsobject":false,"compat_metadata":false,"compat_foreach":false,"compat_arrayleft":false,"compat_uW_gmonkey":false,"compat_forvarin":false,"noframes":null,"awareOfChrome":false,"run_at":null,"override":{"merge_connects":true,"merge_excludes":true,"merge_includes":true,"merge_matches":true,"orig_connects":[],"orig_excludes":[],"orig_includes":["http://chat.stackoverflow.com/rooms/41570/so-close-vote-reviewers"],"orig_matches":[],"orig_noframes":null,"orig_run_at":"document-idle","use_blockers":[],"use_connects":[],"use_excludes":[],"use_includes":[],"use_matches":[]}},"storage":{"ts":1461933818988,"data":{}},"enabled":true,"position":24,"uuid":"815ad2b0-9ae5-4592-9f0d-bc302d05790e","source":"Ly8gPT1Vc2VyU2NyaXB0PT0KLy8gQG5hbWUgICAgICAgIGN2LXBscyBwcmV2aWV3Ci8vIEBuYW1lc3BhY2UgICBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3VzZXJzLzUyOTkyMzYva2V2aW4tZ3VhbgovLyBAYXV0aG9yICAgICAgS2V2aW4KLy8gQGRlc2NyaXB0aW9uIFByZXZpZXcgZXZlcnkgYGN2LXBsc2AgcmVxdWVzdHMgaW4gU09DVlI7IHRoZSBjb2RlIGlzIGJhc2VkIG9uIHN0YWNrYXBwcy5jb20vcS82NzM3Ci8vIEBpbmNsdWRlICAgICBodHRwOi8vY2hhdC5zdGFja292ZXJmbG93LmNvbS9yb29tcy80MTU3MC9zby1jbG9zZS12b3RlLXJldmlld2VycwovLyBAdmVyc2lvbiAgICAgMi4yCi8vIEBncmFudCAgICAgICBHTV9nZXRWYWx1ZQovLyBAZ3JhbnQgICAgICAgR01fc2V0VmFsdWUKLy8gPT0vVXNlclNjcmlwdD09CgoKdW5zYWZlV2luZG93LnNwX2xvYWQgPSBHTV9nZXRWYWx1ZTsKdW5zYWZlV2luZG93LnNwX3NhdmUgPSBHTV9zZXRWYWx1ZTsKCnZhciBsYXN0VXNlcjsKdmFyIHRhcmdldCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjaGF0Jyk7Cgp2YXIgbXNnR3JvdXBPYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKG11dGF0aW9ucykgewogICAgbXV0YXRpb25zLmZvckVhY2goZnVuY3Rpb24obXV0YXRpb24pIHsKICAgICAgICBpZihtdXRhdGlvbi5hZGRlZE5vZGVzLmxlbmd0aCA+IDApIHsKICAgICAgICAgICAgcHJvY2Vzc01lc3NhZ2VOb2RlKG11dGF0aW9uLmFkZGVkTm9kZXNbMF0pOwogICAgICAgIH0KICAgIH0pOwp9KTsKCnZhciBuZXdNc2dPYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKG11dGF0aW9ucykgewogICAgbXV0YXRpb25zLmZvckVhY2goZnVuY3Rpb24obXV0YXRpb24pIHsKICAgICAgICB0cnkgewogICAgICAgICAgICAvLyB0aGUgbGFzdCBncm91cCBpcyBub3QgaW50ZXJlc3RpbmcgYW55bW9yZSBzaW5jZSB0aGVyZSBpcyBhIG5ldyBncm91cAogICAgICAgICAgICBtc2dHcm91cE9ic2VydmVyLmRpc2Nvbm5lY3QoKTsKICAgICAgICB9IGNhdGNoKGUpIHt9CiAgICAgICAgLy8gcHJvY2VzcyB0aGUgbmV3IG1lc3NhZ2UKICAgICAgICBwcm9jZXNzTmV3TWVzc2FnZShtdXRhdGlvbik7CiAgICAgICAgdmFyIG1lc3NhZ2VMaXN0ID0gdGFyZ2V0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIm1lc3NhZ2VzIik7CiAgICAgICAgdmFyIGxhc3RNZXNzYWdlID0gbWVzc2FnZUxpc3RbbWVzc2FnZUxpc3QubGVuZ3RoIC0gMV07CiAgICAgICAgbXNnR3JvdXBPYnNlcnZlci5vYnNlcnZlKGxhc3RNZXNzYWdlLCBvYnNlcnZlckNvbmZpZyk7CiAgICB9KTsKfSk7CgpmdW5jdGlvbiBwcm9jZXNzTmV3TWVzc2FnZShtdXRhdGlvbikgewogICAgdHJ5IHsKICAgICAgICBsYXN0VXNlciA9IG11dGF0aW9uLmFkZGVkTm9kZXNbMF0uZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgidXNlcm5hbWUiKVswXS5pbm5lckhUTUw7CiAgICAgICAgdmFyIG1lc3NhZ2UgPSBtdXRhdGlvbi5hZGRlZE5vZGVzWzBdLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImNvbnRlbnQiKVswXTsKICAgICAgICBvbk1lc3NhZ2UobGFzdFVzZXIsIG1lc3NhZ2UpOwogICAgfSBjYXRjaChlKSB7fQp9CgpmdW5jdGlvbiBwcm9jZXNzTWVzc2FnZU5vZGUobm9kZSkgewogICAgdHJ5IHsKICAgICAgICB2YXIgbWVzc2FnZSA9IG5vZGUuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgiY29udGVudCIpWzBdOwogICAgICAgIG9uTWVzc2FnZShsYXN0VXNlciwgbWVzc2FnZSk7CiAgICB9IGNhdGNoKGUpIHt9Cn0KCmZ1bmN0aW9uIG9uTWVzc2FnZSh1c2VyLCBtc2cpIHsKICAgIGlmKG1zZy5pbm5lckhUTUwuaW5kZXhPZignc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zL3RhZ2dlZC9jdi1wbHMnKSA+IDAgJiYgbXNnLmlubmVySFRNTC5pbmRleE9mKCc8YSBocmVmPSJodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20nKSA+IDApIHsKICAgICAgICB2YXIgcG9zdCA9IG1zZy5nZXRFbGVtZW50c0J5VGFnTmFtZSgiYSIpWzFdLmhyZWY7CiAgICAgICAgdmFyIGlkID0gcG9zdC5zcGxpdCgnLycpWzRdOwoKICAgICAgICB2YXIgdGFnID0gJzxkaXYgaWQ9ImN2cGxzJyArIGlkICsgJyIgY2xhc3M9Im9uZWJveCBvYi1wb3N0IiBzdHlsZT0ib3ZlcmZsb3cteTphdXRvOyBtYXgtaGVpZ2h0OjE1MHB4OyBtYXJnaW4tYm90dG9tOjJlbSI+PC9kaXY+JzsKICAgICAgICBpZihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3ZwbHMnICsgaWQpID09PSBudWxsKSB7CiAgICAgICAgICAgIG1zZy5pbm5lckhUTUwgKz0gdGFnOwogICAgICAgIH0KCiAgICAgICAgbG9hZFByZXZpZXcoaWQpOwogICAgfQp9CgpmdW5jdGlvbiBsb2FkUHJldmlldyhpZCkgewogICAgdmFyIHVybCA9ICJodHRwOi8vYXBpLnN0YWNrZXhjaGFuZ2UuY29tLzIuMi9xdWVzdGlvbnMvIiArIGlkICsgIj9zaXRlPXN0YWNrb3ZlcmZsb3cmZmlsdGVyPSEpUTJCKF9YWFRJYmJKWXA3S284TCllU3giOwogICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpOwogICAgeGhyLm9wZW4oJ0dFVCcsIHVybCk7CiAgICB4aHIub25sb2FkID0gc2hvd1ByZXZpZXc7CiAgICB4aHIuaWQgPSBpZDsKICAgIHhoci5zZW5kKCk7Cn0KCmZ1bmN0aW9uIHNob3dQcmV2aWV3KHJlc3BvbnNlKSB7CiAgICB2YXIgcmVzcCA9IEpTT04ucGFyc2UodGhpcy5yZXNwb25zZSk7CiAgICBpZihyZXNwLml0ZW1zLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHZhciBlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImN2cGxzIiArIHRoaXMuaWQpOwogICAgICAgIGVsZW0uc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICBlbGVtLnBhcmVudE5vZGUuc3R5bGUub3BhY2l0eSA9IDAuNTsKICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIHBvc3QgPSByZXNwLml0ZW1zWzBdOwogICAgICAgIHZhciB0YWdzID0gJzxkaXYgY2xhc3M9Im9iLXBvc3QtdGFncyI+JzsKICAgICAgICBwb3N0LnRhZ3MuZm9yRWFjaChmdW5jdGlvbih0YWcpIHsKICAgICAgICAgICAgdGFncyArPSAnPGEgaHJlZj0iLy9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvdGFnZ2VkLycgKyB0YWcgKwogICAgICAgICAgICAnIj4gPHNwYW4gY2xhc3M9Im9iLXBvc3QtdGFnIiBzdHlsZT0iYmFja2dyb3VuZC1jb2xvcjogI0UwRUFGMTsgJyArCiAgICAgICAgICAgICdjb2xvcjogIzNFNkQ4RTsgYm9yZGVyLWNvbG9yOiAjM0U2RDhFOyBib3JkZXItc3R5bGU6IHNvbGlkOyI+JyArIHRhZyArICc8L3NwYW4+PC9hPic7CiAgICAgICAgfSk7CiAgICAgICAgdGFncyArPSAnPC9kaXY+JzsKCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImN2cGxzIiArIHRoaXMuaWQpLmlubmVySFRNTCA9CiAgICAgICAgICAgICc8ZGl2IHRpdGxlPSJUaGlzIHF1ZXN0aW9uIGhhcyBhIHNjb3JlIG9mICcgKyBwb3N0LnNjb3JlICsKICAgICAgICAgICAgJy4iIGNsYXNzPSJvYi1wb3N0LXZvdGVzIj4nICsgcG9zdC5zY29yZSArICc8L2Rpdj48aW1nIHdpZHRoPSIyMCcgKwogICAgICAgICAgICAnIiBoZWlnaHQ9IjIwIiBjbGFzcz0ib2ItcG9zdC1zaXRlaWNvbiIgc3JjPScgKwogICAgICAgICAgICAnIi8vY2RuLnNzdGF0aWMubmV0L1NpdGVzL3N0YWNrb3ZlcmZsb3cvaW1nL2FwcGxlLXRvdWNoLWljb24ucG5nJyArCiAgICAgICAgICAgICciIHRpdGxlPSJTdGFjayBPdmVyZmxvdyI+IDxkaXYgY2xhc3M9Im9iLXBvc3QtdGl0bGUiPiBROiA8YSBocmVmPSInICsgcG9zdC5saW5rICsKICAgICAgICAgICAgJyIgc3R5bGU9ImNvbG9yOiAjNEU4MkMyOyI+JyArIHBvc3QudGl0bGUgKyAnPC9hPjwvZGl2PjxwIGNsYXNzPSJvYi1wb3N0LWJvZHkiPjxpbWcgd2lkdGg9IjMyJyArCiAgICAgICAgICAgICciIGhlaWdodD0iMzIiIGFsdD0iJyArIHBvc3Qub3duZXIuZGlzcGxheV9uYW1lICsKICAgICAgICAgICAgJyIgdGl0bGU9IicgKyBwb3N0Lm93bmVyLmRpc3BsYXlfbmFtZSArICciIHNyYz0iJyArIHBvc3Qub3duZXIucHJvZmlsZV9pbWFnZSArCiAgICAgICAgICAgICciIGNsYXNzPSJ1c2VyLWdyYXZhdGFyMzIiPicgKyBwb3N0LmJvZHkgKyAnPC9wPicgKyB0YWdzOwogICAgfQp9CgovLyBzZXR1cCB0aGUgb2JzZXJ2ZXIgY29uZmlndXJhdGlvbgp2YXIgb2JzZXJ2ZXJDb25maWcgPSB7IGF0dHJpYnV0ZXM6IHRydWUsIGNoaWxkTGlzdDogdHJ1ZSwgY2hhcmFjdGVyRGF0YTogdHJ1ZSB9OwoKd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBmdW5jdGlvbigpIHsKICAgIHZhciBtZXNzYWdlTGlzdCA9IHRhcmdldC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCJtZXNzYWdlcyIpOwogICAgdmFyIGxhc3RNZXNzYWdlID0gbWVzc2FnZUxpc3RbbWVzc2FnZUxpc3QubGVuZ3RoIC0gMV07CiAgICBtc2dHcm91cE9ic2VydmVyLm9ic2VydmUobGFzdE1lc3NhZ2UsIG9ic2VydmVyQ29uZmlnKTsKICAgIG5ld01zZ09ic2VydmVyLm9ic2VydmUodGFyZ2V0LCBvYnNlcnZlckNvbmZpZyk7CgogICAgdmFyIG5pY2sgPSB0YXJnZXQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgidXNlcm5hbWUiKTsKICAgIGxhc3RVc2VyID0gbmljay5sZW5ndGggPiAwCiAgICAgICAgPyBuaWNrW25pY2subGVuZ3RoIC0gMV0uaW5uZXJIVE1MCiAgICAgICAgOiAidW5rbm93biI7CgogICAgICAgIC8vIHBhcnNlIGV4aXN0aW5nIG1lc3NhZ2VzCiAgICAgICAgdmFyIG1lc3NhZ2VCbG9ja3MgPSB0YXJnZXQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSgidXNlci1jb250YWluZXIiKTsKICAgICAgICBmb3IodmFyIGkgPSAwLCBtZXNzYWdlQmxvY2tzTGVuZ3RoID0gbWVzc2FnZUJsb2Nrcy5sZW5ndGg7IGkgPCBtZXNzYWdlQmxvY2tzTGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgdmFyIHVzZXIgPSBtZXNzYWdlQmxvY2tzW2ldLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoInVzZXJuYW1lIilbMF0uaW5uZXJIVE1MOwogICAgICAgICAgICB2YXIgbWVzc2FnZXMgPSBtZXNzYWdlQmxvY2tzW2ldLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIm1lc3NhZ2UiKTsKICAgICAgICAgICAgZm9yKHZhciBqID0gMCwgbWVzc2FnZXNMZW5ndGggPSBtZXNzYWdlcy5sZW5ndGg7IGogPCBtZXNzYWdlc0xlbmd0aDsgaisrKSB7CiAgICAgICAgICAgICAgICB2YXIgbWVzc2FnZSA9IG1lc3NhZ2VzW2pdLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoImNvbnRlbnQiKVswXTsKICAgICAgICAgICAgICAgIG9uTWVzc2FnZSh1c2VyLCBtZXNzYWdlKTsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwogICAgICAgIHNjcmlwdC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnKCcgKyBwdWJsaWNBcGkgKyAnKSgpOycpKTsKICAgICAgICAoZG9jdW1lbnQuaGVhZCB8fCBkb2N1bWVudC5ib2R5IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkuYXBwZW5kQ2hpbGQoc2NyaXB0KTsKfSwgZmFsc2UpOw=="}]}